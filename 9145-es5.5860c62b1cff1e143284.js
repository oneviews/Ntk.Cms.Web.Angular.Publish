!function(){"use strict";function o(o,e){if(!(o instanceof e))throw new TypeError("Cannot call a class as a function")}function e(o,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(o,t.key,t)}}function n(o,n,t){return n&&e(o.prototype,n),t&&e(o,t),o}(self.webpackChunkntk_cms_web_angular_v2=self.webpackChunkntk_cms_web_angular_v2||[]).push([[9145],{73830:function(e,t,i){i.d(t,{J:function(){return V}});var r=i(37716),l=i(3679),f=i(54395),a=i(38583);function c(o,e){if(1&o&&r._UZ(0,"input",2),2&o){var n=r.oxw();r.Q6J("id",n.field.name)("name",n.field.name)("formControl",n.optionFormControl),r.uIk("type",n.field.type)}}function s(o,e){if(1&o&&r._UZ(0,"textarea",3),2&o){var n=r.oxw();r.ekj("is-invalid",n.isDirty&&!n.isValid),r.Q6J("formControl",n.optionFormControl)("id",n.field.name)("placeholder",n.field.placeholder)}}var u,p=((u=function(){function e(){o(this,e),this.field={}}return n(e,[{key:"isValid",get:function(){return this.optionFormControl.valid}},{key:"isDirty",get:function(){return this.optionFormControl.dirty}}]),e}()).\u0275fac=function(o){return new(o||u)},u.\u0275cmp=r.Xpm({type:u,selectors:[["textbox"]],inputs:{field:"field",optionFormControl:"optionFormControl"},decls:2,vars:2,consts:[["class","form-control",3,"id","name","formControl",4,"ngIf"],["rows","9","class","form-control",3,"is-invalid","formControl","id","placeholder",4,"ngIf"],[1,"form-control",3,"id","name","formControl"],["rows","9",1,"form-control",3,"formControl","id","placeholder"]],template:function(o,e){1&o&&(r.YNc(0,c,1,4,"input",0),r.YNc(1,s,1,5,"textarea",1)),2&o&&(r.Q6J("ngIf",!e.field.multiline),r.xp6(1),r.Q6J("ngIf",e.field.multiline))},directives:[a.O5,l.Fj,l.JJ,l.oH],encapsulation:2}),u);function d(o,e){if(1&o&&(r.TgZ(0,"option",2),r._uU(1),r.qZA()),2&o){var n=e.$implicit;r.Q6J("value",n.key),r.xp6(1),r.Oqu(n.label)}}var m=function(){var e=function e(){o(this,e),this.field={}};return e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=r.Xpm({type:e,selectors:[["dropdown"]],inputs:{field:"field",optionFormControl:"optionFormControl"},decls:2,vars:3,consts:[[1,"form-control",3,"id","formControl"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(o,e){1&o&&(r.TgZ(0,"select",0),r.YNc(1,d,2,2,"option",1),r.qZA()),2&o&&(r.Q6J("id",e.field.name)("formControl",e.optionFormControl),r.xp6(1),r.Q6J("ngForOf",e.field.options))},directives:[l.EJ,l.JJ,l.oH,a.sg,l.YN,l.Kr],encapsulation:2}),e}();function g(o,e){if(1&o&&(r.TgZ(0,"div",2),r.TgZ(1,"label",3),r._UZ(2,"input",4),r._uU(3),r.qZA(),r.qZA()),2&o){var n=e.$implicit;r.xp6(2),r.Q6J("formControlName",n.key),r.xp6(1),r.hij(" ",n.label,"")}}var v=function(){var e=function(){function e(){o(this,e),this.field={}}return n(e,[{key:"isValid",get:function(){return this.optionFormGroup.controls[this.field.name].valid}},{key:"isDirty",get:function(){return this.optionFormGroup.controls[this.field.name].dirty}}]),e}();return e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=r.Xpm({type:e,selectors:[["checkbox"]],inputs:{field:"field",optionFormGroup:"optionFormGroup"},decls:2,vars:2,consts:[[3,"formGroup"],["class","form-check form-check",4,"ngFor","ngForOf"],[1,"form-check","form-check"],[1,"form-check-label"],["type","checkbox","id","inlineCheckbox1","value","option1",1,"form-check-input",3,"formControlName"]],template:function(o,e){1&o&&(r.TgZ(0,"div",0),r.YNc(1,g,4,2,"div",1),r.qZA()),2&o&&(r.Q6J("formGroup",e.optionFormGroup),r.xp6(1),r.Q6J("ngForOf",e.field.options))},directives:[l.JL,l.sg,a.sg,l.Wl,l.JJ,l.u],encapsulation:2}),e}();function h(o,e){if(1&o&&(r.TgZ(0,"div",1),r._UZ(1,"input",2),r.TgZ(2,"label",3),r._uU(3),r.qZA(),r.qZA()),2&o){var n=e.$implicit,t=r.oxw();r.xp6(1),r.Q6J("formControl",t.optionFormControl)("value",n.key),r.xp6(2),r.hij(" ",n.label," ")}}var C=function(){var e=function e(){o(this,e),this.field={}};return e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=r.Xpm({type:e,selectors:[["radio"]],inputs:{field:"field",optionFormControl:"optionFormControl"},decls:1,vars:1,consts:[["class","form-check",4,"ngFor","ngForOf"],[1,"form-check"],["type","radio",1,"form-check-input",3,"formControl","value"],[1,"form-check-label"]],template:function(o,e){1&o&&r.YNc(0,h,4,3,"div",0),2&o&&r.Q6J("ngForOf",e.field.options)},directives:[a.sg,l._,l.Fj,l.JJ,l.oH],encapsulation:2}),e}();function x(o,e){if(1&o){var n=r.EpF();r.TgZ(0,"div",3),r.NdJ("hovered",function(o){return r.CHM(n),r.oxw().toggleHover(o)})("dropped",function(o){return r.CHM(n),r.oxw().field.onUpload(o)}),r.TgZ(1,"p",4),r._uU(2," Drag a file here or "),r.TgZ(3,"label",5),r.TgZ(4,"input",6),r.NdJ("change",function(o){return r.CHM(n),r.oxw().field.onUpload(o.target.files)}),r.qZA(),r._uU(5," browse "),r.qZA(),r._uU(6," to upload. "),r.qZA(),r.qZA()}if(2&o){var t=r.oxw();r.ekj("hovering",t.isHovering)}}function F(o,e){if(1&o&&(r.TgZ(0,"div"),r.TgZ(1,"div",7),r._UZ(2,"img",8),r.qZA(),r.qZA()),2&o){var n=r.oxw();r.xp6(2),r.Q6J("src",n.field.value,r.LSH)}}var y=function(){var e=function(){function e(){o(this,e),this.field={},this.isHovering=!1}return n(e,[{key:"isValid",get:function(){return this.optionFormControl.controls[this.field.name].valid}},{key:"isDirty",get:function(){return this.optionFormControl.controls[this.field.name].dirty}},{key:"ngOnChange",value:function(){console.log(this.field.value)}},{key:"toggleHover",value:function(o){this.isHovering=!0}}]),e}();return e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=r.Xpm({type:e,selectors:[["file"]],inputs:{field:"field",optionFormControl:"optionFormControl"},decls:3,vars:3,consts:[[3,"formGroup"],["class","drop-container dropzone","dropZone","",3,"hovering","hovered","dropped",4,"ngIf"],[4,"ngIf"],["dropZone","",1,"drop-container","dropzone",3,"hovered","dropped"],[1,"m-0"],[1,"upload-button"],["type","file","multiple","",3,"change"],[1,"card"],[1,"card-img-top",3,"src"]],template:function(o,e){1&o&&(r.TgZ(0,"div",0),r.YNc(1,x,7,2,"div",1),r.YNc(2,F,3,1,"div",2),r.qZA()),2&o&&(r.Q6J("formGroup",e.optionFormControl),r.xp6(1),r.Q6J("ngIf",!e.field.value),r.xp6(1),r.Q6J("ngIf",e.field.value))},directives:[l.JL,l.sg,a.O5],styles:[".drop-container[_ngcontent-%COMP%]{background:#fff;border-radius:6px;height:150px;width:100%;box-shadow:1px 2px 20px #0a0a0a1a;display:flex;align-items:center;justify-content:center;border:2px dashed #c0c4c7}p[_ngcontent-%COMP%]{font-size:16px;font-weight:400;color:#c0c4c7}.upload-button[_ngcontent-%COMP%]{display:inline-block;border:none;outline:none;cursor:pointer;color:#5754a3}.upload-button[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.dropzone[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:column;border-radius:5px;background:white;margin:10px 0}.dropzone.hovering[_ngcontent-%COMP%]{border:2px solid #f16624;color:#dadada!important}progress[_ngcontent-%COMP%]::-webkit-progress-value{-webkit-transition:width .1s ease;transition:width .1s ease}"]}),e}();function w(o,e){1&o&&(r.TgZ(0,"strong",8),r._uU(1,"*"),r.qZA())}function b(o,e){if(1&o&&r._UZ(0,"textbox",9),2&o){var n=r.oxw();r.Q6J("field",n.field)("optionFormControl",n.convertToFormControl(n.formGroup.get(n.field.name)))}}function k(o,e){if(1&o&&r._UZ(0,"textbox",9),2&o){var n=r.oxw();r.Q6J("field",n.field)("optionFormControl",n.convertToFormControl(n.formGroup.get(n.field.name)))}}function J(o,e){if(1&o&&r._UZ(0,"dropdown",9),2&o){var n=r.oxw();r.Q6J("field",n.field)("optionFormControl",n.convertToFormControl(n.formGroup.get(n.field.name)))}}function Z(o,e){if(1&o&&r._UZ(0,"checkbox",10),2&o){var n=r.oxw();r.Q6J("field",n.field)("optionFormGroup",n.convertToFormGroup(n.formGroup.get(n.field.name)))}}function N(o,e){if(1&o&&r._UZ(0,"radio",9),2&o){var n=r.oxw();r.Q6J("field",n.field)("optionFormControl",n.convertToFormControl(n.formGroup.get(n.field.name)))}}function _(o,e){if(1&o&&r._UZ(0,"file",11),2&o){var n=r.oxw();r.Q6J("field",n.field)("formControl",n.convertToFormControl(n.formGroup.get(n.field.name)))}}function I(o,e){if(1&o&&(r.TgZ(0,"div",12),r._uU(1),r.qZA()),2&o){var n=r.oxw();r.xp6(1),r.hij("",n.field.label," is required")}}var G=function(){var e=function(){function e(){o(this,e)}return n(e,[{key:"isValid",get:function(){return this.formGroup.controls[this.field.name].valid}},{key:"isDirty",get:function(){return this.formGroup.controls[this.field.name].dirty}},{key:"ngOnInit",value:function(){}},{key:"convertToFormControl",value:function(o){return o}},{key:"convertToFormGroup",value:function(o){return o}}]),e}();return e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=r.Xpm({type:e,selectors:[["field-builder"]],inputs:{field:"field",formGroup:"formGroup"},decls:12,vars:12,consts:[[1,"form-group","row",3,"formGroup"],[1,"col-md-3","form-control-label"],["class","text-danger",4,"ngIf"],[1,"col-md-9",3,"ngSwitch"],[3,"field","optionFormControl",4,"ngSwitchCase"],[3,"field","optionFormGroup",4,"ngSwitchCase"],[3,"field","formControl",4,"ngSwitchCase"],["class","alert alert-danger my-1 p-2 fadeInDown animated",4,"ngIf"],[1,"text-danger"],[3,"field","optionFormControl"],[3,"field","optionFormGroup"],[3,"field","formControl"],[1,"alert","alert-danger","my-1","p-2","fadeInDown","animated"]],template:function(o,e){1&o&&(r.TgZ(0,"div",0),r.TgZ(1,"label",1),r._uU(2),r.YNc(3,w,2,0,"strong",2),r.qZA(),r.TgZ(4,"div",3),r.YNc(5,b,1,2,"textbox",4),r.YNc(6,k,1,2,"textbox",4),r.YNc(7,J,1,2,"dropdown",4),r.YNc(8,Z,1,2,"checkbox",5),r.YNc(9,N,1,2,"radio",4),r.YNc(10,_,1,2,"file",6),r.YNc(11,I,2,1,"div",7),r.qZA(),r.qZA()),2&o&&(r.Q6J("formGroup",e.formGroup),r.xp6(1),r.uIk("for",e.field.label),r.xp6(1),r.hij(" ",e.field.label," "),r.xp6(1),r.Q6J("ngIf",e.field.required&&e.formGroup.get(e.field.name).invalid),r.xp6(1),r.Q6J("ngSwitch",e.field.type),r.xp6(1),r.Q6J("ngSwitchCase","text"),r.xp6(1),r.Q6J("ngSwitchCase","date"),r.xp6(1),r.Q6J("ngSwitchCase","dropdown"),r.xp6(1),r.Q6J("ngSwitchCase","checkbox"),r.xp6(1),r.Q6J("ngSwitchCase","radio"),r.xp6(1),r.Q6J("ngSwitchCase","file"),r.xp6(1),r.Q6J("ngIf",!e.isValid&&e.isDirty))},directives:[l.JL,l.sg,a.O5,a.RF,a.n9,p,m,v,C,y,l.JJ,l.oH],encapsulation:2}),e}();function T(o,e){if(1&o&&(r.TgZ(0,"div"),r._UZ(1,"field-builder",1),r.qZA()),2&o){var n=e.$implicit,t=r.oxw();r.xp6(1),r.Q6J("field",n)("formGroup",t.formGroup)}}var V=function(){var e=function(){function e(){o(this,e),this.jsonValueChange=new r.vpe,this.privatePropertiesInfos=[],this.formValues={},this.fields=[],this.DEBOUNCE_TIME_FORM_INPUT=250}return n(e,[{key:"jsonValue",set:function(o){o&&o.length>0&&(this.privateJsonValue=JSON.parse(o),this.actionSetValue())}},{key:"propertiesInfos",set:function(o){this.privatePropertiesInfos=o,this.actionFormMake(),this.actionSetValue()}},{key:"ngOnInit",value:function(){}},{key:"ngAfterViewInit",value:function(){var o=this;this.unsubcribe=this.formGroup.valueChanges.pipe((0,f.b)(this.DEBOUNCE_TIME_FORM_INPUT)).subscribe(function(e){o.formValues||(o.formValues={}),o.privatePropertiesInfos&&o.privatePropertiesInfos.length>0&&o.privatePropertiesInfos.forEach(function(n){(e[n.FieldName]||""===e[n.FieldName])&&(o.formValues[n.FieldName]=e[n.FieldName]),o.jsonValueChange.emit(JSON.stringify(o.formValues))})})}},{key:"actionFormMake",value:function(){var o=this;this.privatePropertiesInfos&&(this.fields=[],this.privatePropertiesInfos.forEach(function(e){var n="";switch(o.formValues&&o.formValues[e.FieldName]&&(n=o.formValues[e.FieldName]),e.FieldType){case"System.String":case"System.Int64":case"System.Int32":default:o.fields.push({type:"text",name:e.FieldName,label:e.FieldTitle,value:n,required:!1})}})),this.fields.forEach(function(e){"checkbox"===e.type?(o.formGroup.addControl(e.name,new l.cw({})),e.options.forEach(function(n){o.formGroup.get(e.name).addControl(n.key,new l.NI(!1))})):o.formGroup.addControl(e.name,new l.NI(e.value||"",e.required?l.kI.required:null))})}},{key:"actionSetValue",value:function(){var o=this;this.privateJsonValue&&this.privatePropertiesInfos&&this.privatePropertiesInfos.length>0&&this.privatePropertiesInfos.forEach(function(e){if(o.formValues||(o.formValues={}),o.formValues[e.FieldName]=o.privateJsonValue[e.FieldName]?o.privateJsonValue[e.FieldName]:"",o.formValues[e.FieldName]&&o.fields.findIndex(function(o){return o.name===e.FieldName})>=0){var n=o.formValues[e.FieldName];o.fields.find(function(o){return o.name===e.FieldName}).value=n,o.formGroup.get(e.FieldName).setValue(n,{emitEvent:!1})}})}},{key:"ngDistroy",value:function(){this.unsubcribe()}}]),e}();return e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=r.Xpm({type:e,selectors:[["dynamic-form-builder-cms"]],inputs:{jsonValue:"jsonValue",propertiesInfos:"propertiesInfos",formGroup:"formGroup"},outputs:{jsonValueChange:"jsonValueChange"},decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[3,"field","formGroup"]],template:function(o,e){1&o&&r.YNc(0,T,2,2,"div",0),2&o&&r.Q6J("ngForOf",e.fields)},directives:[a.sg,G,l.JL,l.sg],encapsulation:2}),e}()},87407:function(e,n,t){t.d(n,{d:function(){return a}});var i,r=t(38583),l=t(3679),f=t(37716),a=((i=function e(){o(this,e)}).\u0275fac=function(o){return new(o||i)},i.\u0275mod=f.oAB({type:i}),i.\u0275inj=f.cJS({providers:[],imports:[[r.ez,l.UX]]}),i)}}])}();