"use strict";(self.webpackChunkntk_cms_web=self.webpackChunkntk_cms_web||[]).push([[3531],{4929:(L,E,a)=>{a.d(E,{B:()=>e});var m=a(9724);let e=(()=>{class i{transform(p,u){if(!u||0===u.length)return"";const g=u.find(f=>f.key===p||f.value===p);return g?g.description:""}}return i.\u0275fac=function(p){return new(p||i)},i.\u0275pipe=m.Yjl({name:"enums",type:i,pure:!0}),i})()},7907:(L,E,a)=>{a.d(E,{H:()=>S});var m=a(7977),e=a(656),i=a(5019),t=a(9724),p=a(2607),u=a(4817),g=a(3987),f=a(1048),T=a(6997),A=a(5738),I=a(4929);function P(d,h){1&d&&(t.TgZ(0,"div"),t._UZ(1,"span",13)(2,"br"),t.qZA()),2&d&&(t.xp6(1),t.Q6J("inlineSVG","assets/media/svg/icons/General/Shield-check.svg"))}function O(d,h){if(1&d&&(t.TgZ(0,"div",8)(1,"div",9)(2,"div",10),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"div",10),t._uU(6),t.qZA(),t._UZ(7,"div",11),t.qZA(),t.TgZ(8,"div",9)(9,"div",10),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"div",10),t.YNc(13,P,3,1,"div",12),t._uU(14),t.ALo(15,"enums"),t.qZA(),t._UZ(16,"div",11),t.qZA(),t.TgZ(17,"div",9)(18,"div",10),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"div",10),t._uU(22),t.qZA(),t._UZ(23,"div",11),t.qZA(),t.TgZ(24,"div",9)(25,"div",10),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.TgZ(28,"div",10),t._uU(29),t.qZA(),t._UZ(30,"div",11),t.qZA()()),2&d){const s=t.oxw();t.xp6(3),t.Oqu(t.lcZ(4,11,"TITLE.Transaction_ID")),t.xp6(3),t.Oqu(s.dataModelResult.item.id),t.xp6(4),t.AsE("",t.lcZ(11,13,"TITLE.Transaction_status"),":",s.requestId,""),t.xp6(3),t.Q6J("ngIf",s.dataModelResult.item.transactionStatus==s.TransactionSuccessful),t.xp6(1),t.hij(" ",t.xi3(15,15,s.dataModelResult.item.transactionStatus,s.dataModelEnumTransactionRecordStatusResult.listItems)," "),t.xp6(5),t.hij(" ",t.lcZ(20,18,"TITLE.Amount")," "),t.xp6(3),t.AsE("",s.dataModelResult.item.amount," ",s.dataModelResult.item.currencyUnit,""),t.xp6(4),t.hij("",t.lcZ(27,20,"TITLE.Message")," "),t.xp6(3),t.Oqu(s.dataModelResult.item.lastStatusMessage)}}let S=(()=>{class d{constructor(s,_,v,y,D,R,Z,U){this.data=s,this.bankPaymentTransactionService=_,this.dialogRef=v,this.bankPaymentEnumService=y,this.cmsToastrService=D,this.translate=R,this.cdr=Z,this.publicHelper=U,this.id=++d.nextId,this.requestId=0,this.loading=new e.O,this.dataModelResult=new m.y$4,this.dataModelEnumTransactionRecordStatusResult=new m.y$4,this.TransactionSuccessful=m.iZe.TransactionSuccessful,this.loading.cdr=this.cdr,this.loading.message=this.translate.instant("MESSAGE.Receiving_information"),s&&(this.requestId=+s.id||0)}ngOnInit(){if(this.requestId<=0)return this.cmsToastrService.typeErrorComponentAction(),void this.dialogRef.close({dialogChangedDate:!1});this.DataGeOne(),this.getEnumTransactionRecordStatus()}getEnumTransactionRecordStatus(){this.bankPaymentEnumService.ServiceEnumTransactionRecordStatus().subscribe(s=>{this.dataModelEnumTransactionRecordStatusResult=s})}DataGeOne(){const s=this.constructor.name+"main";this.loading.Start(s),this.bankPaymentTransactionService.ServiceGetOneById(this.requestId).subscribe(_=>{_.isSuccess?this.dataModelResult=_:this.cmsToastrService.typeErrorMessage(_.errorMessage),this.loading.Stop(s)},_=>{this.cmsToastrService.typeError(_),this.loading.Stop(s)})}onFormCancel(){this.dialogRef.close({dialogChangedDate:!0})}}return d.nextId=0,d.\u0275fac=function(s){return new(s||d)(t.Y36(i.WI),t.Y36(m.zRJ),t.Y36(i.so),t.Y36(m.T7Z),t.Y36(p.e),t.Y36(u.sK),t.Y36(t.sBO),t.Y36(g.i))},d.\u0275cmp=t.Xpm({type:d,selectors:[["app-cms-bankpayment-transaction-info"]],inputs:{loading:"loading"},decls:12,vars:9,consts:[[1,"ntk-cms-html-card-header"],[1,"ntk-cms-html-card-body"],[3,"options"],["class","table",4,"ngIf"],[1,"ntk-cms-html-card-footer"],[1,"form-actions"],["type","button",1,"btn","btn-light",3,"click"],[1,"ft-x"],[1,"table"],[1,"tr"],[1,"td"],[2,"clear","both"],[4,"ngIf"],[1,"svg-icon","svg-icon-3x","svg-icon-primary",3,"inlineSVG"]],template:function(s,_){1&s&&(t.TgZ(0,"div",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"div",1),t._UZ(4,"app-progress-spinner",2),t.YNc(5,O,31,22,"div",3),t.qZA(),t.TgZ(6,"div",4)(7,"div",5)(8,"button",6),t.NdJ("click",function(){return _.onFormCancel()}),t._UZ(9,"i",7),t._uU(10),t.ALo(11,"translate"),t.qZA()()()),2&s&&(t.xp6(1),t.AsE(" ",t.lcZ(2,5,"TITLE.Transaction_status"),":",_.requestId," "),t.xp6(3),t.Q6J("options",_.loading),t.xp6(1),t.Q6J("ngIf",_.dataModelResult.item&&_.dataModelResult.item.id>0),t.xp6(5),t.hij(" ",t.lcZ(11,7,"ACTION.BACK")," "))},dependencies:[f.O5,T.d$,A.O,u.X$,I.B],styles:[".table[_ngcontent-%COMP%]{display:table;border:1px solid #40A1F5}.table[_ngcontent-%COMP%]   .th[_ngcontent-%COMP%]{display:table-row;background-color:#40a1f5;color:#fff;font-weight:700}.table[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#f9f9f9}.table[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%]{display:table-row;border-bottom:1px solid #000}.table[_ngcontent-%COMP%]   .td[_ngcontent-%COMP%]{display:table-cell;padding:15px;border-bottom:1px solid #40A1F5}.table[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%]:last-child   .td[_ngcontent-%COMP%]{border:0}.clear[_ngcontent-%COMP%]{clear:both}"]}),d})()},6049:(L,E,a)=>{a.d(E,{T:()=>b});var m=a(8239),e=a(9724),i=a(7977),t=a(1659),p=a(1927),u=a(3151),g=a(2147),f=a(1528),T=a(7969),A=a(656),I=a(4817),P=a(3987),O=a(1048),S=a(5821),d=a(1531),h=a(5691),s=a(4848),_=a(8904),v=a(1418);function y(r,M){if(1&r&&(e._UZ(0,"img",8),e.ALo(1,"cmsthumbnail")),2&r){const o=e.oxw();e.s9C("src",e.lcZ(1,1,o.dataModelSelect.linkMainImageIdSrc),e.LSH)}}function D(r,M){if(1&r&&(e._UZ(0,"img",8),e.ALo(1,"cmsthumbnail")),2&r){const o=e.oxw().$implicit;e.s9C("src",e.lcZ(1,1,o.linkMainImageIdSrc),e.LSH)}}function R(r,M){if(1&r&&(e.TgZ(0,"mat-option",9),e.YNc(1,D,2,3,"img",2),e.TgZ(2,"span"),e._uU(3),e.qZA()()),2&r){const o=M.$implicit,n=e.oxw();e.Q6J("value",o)("disabled",n.optionDisabled),e.xp6(1),e.Q6J("ngIf",o.linkMainImageIdSrc),e.xp6(2),e.Oqu(n.displayOption(o))}}function Z(r,M){if(1&r){const o=e.EpF();e.TgZ(0,"mat-icon",10),e.NdJ("click",function(){e.CHM(o);const c=e.oxw();return e.KtG(c.onActionSelectClear())}),e._uU(1,"close"),e.qZA()}}const U=["*"];let b=(()=>{class r{constructor(o,n,c,C,l){this.coreEnumService=o,this.translate=n,this.cdr=c,this.publicHelper=C,this.categoryService=l,this.id=++r.nextId,this.dataModelResult=new i.y$4,this.dataModelSelect=new i.CWo,this.loading=new A.O,this.formControl=new t.NI,this.optionDisabled=!1,this.optionSelectFirstItem=!1,this.optionPlaceholder="",this.optionChange=new e.vpe,this.optionReload=()=>this.onActionReload(),this.dateUseStore=!0,this.loading.cdr=this.cdr,this.loading.message=this.translate.instant("MESSAGE.Receiving_information")}set optionSelectForce(o){this.onActionSelectForce(o)}ngOnInit(){this.loadOptions()}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe((0,p.O)(""),(0,u.b)(1500),(0,g.x)(),(0,f.w)(o=>this.DataGetAll("string"==typeof o||"number"==typeof o?o:"")))}displayFn(o){return o?o.titleML:void 0}displayOption(o){return o?o.titleML:void 0}DataGetAll(o){var n=this;return(0,m.Z)(function*(){if(n.dateUseStore&&(n.dataModelResult=yield n.publicHelper.getCurrency(),n.dataModelResult.isSuccess))return n.optionSelectFirstItem&&(!n.dataModelSelect||!n.dataModelSelect.id||n.dataModelSelect.id<=0)&&n.dataModelResult.listItems.length>0&&(n.optionSelectFirstItem=!1,setTimeout(()=>{n.formControl.setValue(n.dataModelResult.listItems[0])},1e3),n.onActionSelect(n.dataModelResult.listItems[0])),n.dataModelResult.listItems;const c=new i.Hay;if(c.rowPerPage=20,c.accessLoad=!0,o&&o.length>0){let l=new i.AO3;l=new i.AO3,l.propertyName="Symbol",l.value=o,l.searchType=i.b3P.Contains,l.clauseType=i.KT6.Or,c.filters.push(l),l=new i.AO3,l.propertyName="Title",l.value=o,l.searchType=i.b3P.Contains,l.clauseType=i.KT6.Or,c.filters.push(l),o&&"number"==typeof+o&&+o>0&&(l=new i.AO3,l.propertyName="Id",l.value=o,l.searchType=i.b3P.Equal,l.clauseType=i.KT6.Or,c.filters.push(l))}const C=n.constructor.name+"ServiceGetAll";return n.loading.Start(C),n.categoryService.setAccessDataType(i.MZK.Viewer),yield n.categoryService.ServiceGetAll(c).pipe((0,T.U)(l=>(n.dataModelResult=l,n.optionSelectFirstItem&&(!n.dataModelSelect||!n.dataModelSelect.id||n.dataModelSelect.id<=0)&&n.dataModelResult.listItems.length>0&&(n.optionSelectFirstItem=!1,setTimeout(()=>{n.formControl.setValue(n.dataModelResult.listItems[0])},1e3),n.onActionSelect(n.dataModelResult.listItems[0])),n.loading.Stop(C),l.listItems))).toPromise()})()}onActionSelect(o){this.optionDisabled||(this.dataModelSelect=o,this.optionChange.emit(this.dataModelSelect))}onActionSelectClear(){this.optionDisabled||(this.formControl.setValue(null),this.optionChange.emit(null))}push(o){return this.filteredOptions.pipe((0,T.U)(n=>(n.find(c=>c.id===o.id)||n.push(o),n)))}onActionSelectForce(o){if("number"==typeof o&&o>0){if(this.dataModelSelect&&this.dataModelSelect.id===o)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(n=>n.id===o)){const n=this.dataModelResult.listItems.find(c=>c.id===o);return this.dataModelSelect=n,void this.formControl.setValue(n)}this.categoryService.ServiceGetOneById(o).subscribe(n=>{n.isSuccess&&(this.filteredOptions=this.push(n.item),this.dataModelSelect=n.item,this.formControl.setValue(n.item),this.optionChange.emit(n.item))})}else{if(typeof o==typeof i.CWo)return this.filteredOptions=this.push(o),this.dataModelSelect=o,void this.formControl.setValue(o);this.formControl.setValue(null)}}onActionReload(){this.dataModelSelect=new i.CWo,this.loadOptions()}}return r.nextId=0,r.\u0275fac=function(o){return new(o||r)(e.Y36(i.FLW),e.Y36(I.sK),e.Y36(e.sBO),e.Y36(P.i),e.Y36(i._GB))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-cms-currency-selector"]],inputs:{optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange"},ngContentSelectors:U,decls:11,vars:10,consts:[[1,"ntk-full-width"],["matPrefix",""],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","25","width","25",3,"src",4,"ngIf"],["type","text","aria-label","Assignee","matInput","",3,"placeholder","formControl","matAutocomplete"],[3,"displayWith","optionSelected"],["auto34","matAutocomplete"],[3,"value","disabled",4,"ngFor","ngForOf"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["aria-hidden","","height","25","width","25",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],[3,"value","disabled"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(o,n){if(1&o&&(e.F$t(),e.TgZ(0,"mat-form-field",0)(1,"span",1),e.YNc(2,y,2,3,"img",2),e._uU(3," \xa0"),e.qZA(),e._UZ(4,"input",3),e.TgZ(5,"mat-autocomplete",4,5),e.NdJ("optionSelected",function(C){return n.onActionSelect(C.option.value)}),e.YNc(7,R,4,4,"mat-option",6),e.ALo(8,"async"),e.qZA(),e.YNc(9,Z,2,0,"mat-icon",7),e.Hsn(10),e.qZA()),2&o){const c=e.MAs(6);e.xp6(2),e.Q6J("ngIf",n.dataModelSelect&&n.dataModelSelect.linkMainImageIdSrc),e.xp6(2),e.s9C("placeholder",n.optionPlaceholder),e.Q6J("formControl",n.formControl)("matAutocomplete",c),e.uIk("disabled",!!n.optionDisabled||null),e.xp6(1),e.Q6J("displayWith",n.displayFn),e.xp6(2),e.Q6J("ngForOf",e.lcZ(8,8,n.filteredOptions)),e.xp6(2),e.Q6J("ngIf",n.dataModelSelect.id)}},dependencies:[O.sg,O.O5,t.Fj,t.JJ,t.oH,S.XC,S.ZL,d.ey,h.KE,h.qo,h.R9,s.Hw,_.Nt,O.Ov,v.v],encapsulation:2}),r})()}}]);