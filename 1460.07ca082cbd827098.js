"use strict";(self.webpackChunkntk_cms_web=self.webpackChunkntk_cms_web||[]).push([[1460],{1460:(B,p,a)=>{a.r(p),a.d(p,{SmsActionModule:()=>j});var g=a(1048),m=a(7076),_=a(8239),u=a(7977),f=a(656),t=a(9724),S=a(2607),C=a(3029),h=a(4817),r=a(1659),v=a(5738),A=a(4311),x=a(8024),Z=a(8161),d=a(5691),T=a(8904),M=a(4848),b=a(1582),I=a(2370);const y=["vform"];function F(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"app-sms-api-number-selector",39),t.NdJ("optionChange",function(i){return t.CHM(e),t.oxw(2).onActionSelectApiNumber(i)}),t.qZA()}if(2&n){const e=t.oxw(2);t.Q6J("loading",e.loading)("optionLinkApiPathId",e.dataModel.linkApiPathId)("optionPlaceholder"," \u0634\u0645\u0627\u0631\u0647 \u0641\u0631\u0633\u062a\u0646\u062f\u0647")}}function E(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"mat-icon",40),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).dataModel.message=""}),t._uU(1,"close"),t.qZA()}}function P(n,s){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," \u0645\u062a\u0646 \u067e\u06cc\u0627\u0645 "),t.TgZ(2,"strong"),t._uU(3),t.ALo(4,"translate"),t.qZA()()),2&n&&(t.xp6(3),t.Oqu(t.lcZ(4,1,"MESSAGE.required")))}function J(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"mat-icon",40),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).dataModel.toNumber=""}),t._uU(1,"close"),t.qZA()}}function N(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",13)(1,"div",14)(2,"mat-tab-group",15)(3,"mat-tab",16),t._UZ(4,"textarea",17),t._uU(5," \u0645\u062a\u0646 \u0627\u0631\u0633\u0627\u0644 "),t.qZA(),t.TgZ(6,"mat-tab",18),t._uU(7," \u0645\u0633\u06cc\u0631 \u0627\u0631\u0633\u0627\u0644 "),t.qZA(),t.TgZ(8,"mat-tab",19),t._uU(9," \u0645\u062e\u0627\u0637\u0628 "),t.qZA(),t.TgZ(10,"mat-tab",20),t._uU(11," \u0632\u0645\u0627\u0646 \u0627\u0631\u0633\u0627\u0644 "),t.qZA(),t.TgZ(12,"mat-tab",21),t._uU(13," \u062a\u0646\u0638\u06cc\u0645\u0627\u062a "),t.qZA()()(),t.TgZ(14,"div",22)(15,"app-sms-apipath-selector",23),t.NdJ("optionChange",function(i){return t.CHM(e),t.oxw().onActionSelectPrivateSiteConfig(i)}),t.qZA(),t.YNc(16,F,1,3,"app-sms-api-number-selector",24),t.TgZ(17,"mat-form-field",25)(18,"mat-label"),t._uU(19,"\u0645\u062a\u0646 \u067e\u06cc\u0627\u0645"),t.qZA(),t.TgZ(20,"textarea",26,27),t.NdJ("ngModelChange",function(i){return t.CHM(e),t.oxw().dataModel.message=i}),t.qZA(),t.YNc(22,E,2,0,"mat-icon",28),t.TgZ(23,"mat-icon",29),t._uU(24,"mode_edit"),t.qZA(),t.TgZ(25,"mat-hint",30),t._uU(26),t.qZA(),t.YNc(27,P,5,3,"mat-error",31),t.qZA(),t.TgZ(28,"mat-form-field",25)(29,"mat-label"),t._uU(30,"\u0634\u0645\u0627\u0631\u0647 \u06af\u06cc\u0631\u0646\u062f\u0647"),t.qZA(),t.TgZ(31,"textarea",32,33),t.NdJ("ngModelChange",function(i){return t.CHM(e),t.oxw().dataModel.toNumber=i}),t.qZA(),t.YNc(33,J,2,0,"mat-icon",28),t.TgZ(34,"mat-icon",29),t._uU(35,"mode_edit"),t.qZA(),t.TgZ(36,"mat-hint",34)(37,"mat-icon",35),t._uU(38,"info"),t.qZA(),t.TgZ(39,"strong",36),t._uU(40,"\u0634\u0645\u0627\u0631\u0647 \u06af\u06cc\u0631\u0646\u062f\u0647 \u067e\u06cc\u0627\u0645 \u0631\u0627 \u0645\u06cc \u062a\u0648\u0627\u0646\u06cc\u062f \u0628\u0627 \u06a9\u0627\u0645\u0627 \u0627\u0632 \u0647\u0645 \u062c\u062f\u0627 \u06a9\u0646\u06cc\u062f"),t.qZA()(),t.TgZ(41,"mat-hint",30),t._uU(42),t.qZA()(),t.TgZ(43,"div",25)(44,"mat-slide-toggle",37),t.NdJ("ngModelChange",function(i){return t.CHM(e),t.oxw().dataModel.isFlash=i}),t._uU(45," \u0627\u0631\u0633\u0627\u0644 \u0628\u0647 \u0635\u0648\u0631\u062a \u0641\u0644\u0634 "),t.qZA()(),t.TgZ(46,"div",25)(47,"mat-slide-toggle",38),t.NdJ("ngModelChange",function(i){return t.CHM(e),t.oxw().dataModel.sendByQeue=i}),t._uU(48," \u0627\u0631\u0633\u0627\u0644 \u062f\u0631 \u0635\u0641 "),t.qZA()()()()}if(2&n){const e=t.MAs(21),o=t.MAs(32),i=t.oxw();t.xp6(4),t.Q6J("ngModel",i.clipboardText),t.xp6(11),t.Q6J("loading",i.loading)("optionSelectForce",i.dataModel.linkApiPathId)("optionPlaceholder"," \u0645\u0633\u06cc\u0631"),t.xp6(1),t.Q6J("ngIf",(null==i.dataModel.linkApiPathId?null:i.dataModel.linkApiPathId.length)>0),t.xp6(4),t.Q6J("ngModel",i.dataModel.message),t.xp6(2),t.Q6J("ngIf",i.dataModel.message),t.xp6(4),t.hij("",e.value.length," / 500"),t.xp6(1),t.Q6J("ngIf",null==e.errors?null:e.errors.required),t.xp6(4),t.Q6J("ngModel",i.dataModel.toNumber),t.xp6(2),t.Q6J("ngIf",i.dataModel.toNumber),t.xp6(9),t.hij("",o.value.length," / 50"),t.xp6(2),t.Q6J("ngModel",i.dataModel.isFlash),t.xp6(3),t.Q6J("ngModel",i.dataModel.sendByQeue)}}function U(n,s){if(1&n&&t._UZ(0,"app-cms-json-list",41),2&n){const e=t.oxw();t.Q6J("dataModel",e.dataModelResult.item)("optionMethod",1)}}function w(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",45),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).onFormSubmit()}),t._UZ(1,"i",46),t._uU(2," \u0627\u0631\u0633\u0627\u0644 \u067e\u06cc\u0627\u0645 "),t.qZA()}if(2&n){t.oxw(2);const e=t.MAs(1);t.Q6J("disabled",!e.valid)}}function k(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",8)(1,"button",42),t.NdJ("click",function(){return t.CHM(e),t.oxw().onFormCancel()}),t._UZ(2,"i",43),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.YNc(5,w,3,1,"button",44),t.qZA()}if(2&n){const e=t.oxw();t.xp6(3),t.hij(" ",t.lcZ(4,2,"ACTION.CANCEL")," "),t.xp6(2),t.Q6J("ngIf",!e.loading.display)}}const Q=[{path:"",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-sms-action"]],decls:1,vars:0,template:function(e,o){1&e&&t._UZ(0,"router-outlet")},directives:[m.lC],encapsulation:2}),n})(),children:[{path:"send-message",component:(()=>{class n{constructor(e,o,i,l,c,G){this.coreEnumService=e,this.smsMainApiPathService=o,this.cmsToastrService=i,this.cdr=l,this.publicHelper=c,this.translate=G,this.requestLinkApiPathId="",this.loading=new f.O,this.loadingAction=new f.O,this.dataModelParentSelected=new u.lWT,this.dataModel=new u.sh1,this.dataModelResult=new u.y$4,this.formInfo=new u.LEF,this.clipboardText="",this.loading.cdr=this.cdr,this.loading.message=this.translate.instant("MESSAGE.Receiving_information"),this.loadingAction.cdr=this.cdr}ngOnInit(){var e;(null===(e=this.requestLinkApiPathId)||void 0===e?void 0:e.length)>0&&(this.dataModel.linkApiPathId=this.requestLinkApiPathId),this.readClipboardFromDevTools().then(o=>this.clipboardText=o)}readClipboardFromDevTools(){return new Promise((e,o)=>{const i=function(){var l=(0,_.Z)(function*(){try{const c=yield navigator.clipboard.readText();console.log(`${c} is read!`),e(c)}catch(c){o(c)}window.removeEventListener("focus",i)});return function(){return l.apply(this,arguments)}}();window.addEventListener("focus",i),console.log("Hit <Tab> to give focus back to document (or we will face a DOMException);")})}onActionSelectPrivateSiteConfig(e){this.dataModel.linkApiPathId=this.requestLinkApiPathId,this.dataModelParentSelected=e,e&&e.id.length>0&&(this.dataModel.linkApiPathId=e.id)}onActionSelectApiNumber(e){e&&e.id.length>0&&(this.dataModel.linkFromNumber=e.id)}onFormSubmit(){if(!this.formGroup.valid)return;(!this.dataModel.linkApiPathId||this.dataModel.linkApiPathId.length<=0)&&this.cmsToastrService.typeErrorFormInvalid(),this.formInfo.formSubmitAllow=!1;const e=this.constructor.name+"main";this.loadingAction.Start(e),this.smsMainApiPathService.ServiceSendMessage(this.dataModel).subscribe({next:o=>{this.formInfo.formSubmitAllow=!0,this.dataModelResult=o,o.isSuccess?(this.formInfo.formAlert="\u062f\u0631\u062e\u0648\u0627\u0633\u062a \u0627\u0631\u0633\u0627\u0644 \u0628\u0627 \u0645\u0648\u0641\u0642\u06cc\u062a \u062b\u0628\u062a \u0634\u062f",this.cmsToastrService.typeSuccessMessage(this.translate.instant("MESSAGE.Send_request_was_successfully_registered"))):(this.formInfo.formAlert=this.translate.instant("ERRORMESSAGE.MESSAGE.typeError"),this.formInfo.formError=o.errorMessage,this.cmsToastrService.typeErrorMessage(o.errorMessage)),this.loadingAction.Stop(e)},error:o=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(o),this.loadingAction.Stop(e)},complete:()=>{}})}onFormCancel(){}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(u.FLW),t.Y36(u.sZP),t.Y36(S.e),t.Y36(t.sBO),t.Y36(C.i),t.Y36(h.sK))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-sms-action-send-message"]],viewQuery:function(e,o){if(1&e&&t.Gf(y,5),2&e){let i;t.iGM(i=t.CRH())&&(o.formGroup=i.first)}},decls:17,vars:8,consts:[[3,"ngSubmit"],["vform","ngForm"],[1,"ntk-cms-html-card-header"],[1,"ntk-cms-html-card-body"],[3,"options"],["class","row",4,"ngIf"],[3,"dataModel","optionMethod",4,"ngIf"],[1,"ntk-cms-html-card-message"],[1,"form-actions"],[1,"form-text","text-muted"],[1,"form-text","text-muted","danger"],[1,"ntk-cms-html-card-footer"],["class","form-actions",4,"ngIf"],[1,"row"],[1,"col-6"],["mat-stretch-tabs","",1,"example-stretched-tabs","mat-elevation-z4"],["label","\u067e\u06cc\u0627\u0645 \u0627\u0631\u0633\u0627\u0644"],["name","clipboardText","readonly","readonly",3,"ngModel"],["label","\u0645\u0633\u06cc\u0631"],["label","\u0645\u062e\u0627\u0637\u0628"],["label","\u0632\u0645\u0627\u0646 \u0627\u0631\u0633\u0627\u0644"],["label","\u062a\u0646\u0638\u06cc\u0645\u0627\u062a"],[1,"col-3"],[3,"loading","optionSelectForce","optionPlaceholder","optionChange"],[3,"loading","optionSelectForce","optionLinkApiPathId","optionPlaceholder","optionChange",4,"ngIf"],[1,"ntk-full-width"],["matInput","","name","dataModel.message","type","text","placeholder","...","minlength","1","maxlength","500","rows","5",3,"ngModel","ngModelChange"],["Message",""],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matSuffix",""],[2,"text-align","left"],[4,"ngIf"],["matInput","","name","dataModel.toNumber","type","text","placeholder","0912","rows","5",3,"ngModel","ngModelChange"],["ToNumber",""],[2,"text-align","right"],["matSuffix","",1,"info-field-icon"],[1,"info-field-text"],["name","dataModel.isFlash",3,"ngModel","ngModelChange"],["name","dataModel.sendByQeue",3,"ngModel","ngModelChange"],[3,"loading","optionSelectForce","optionLinkApiPathId","optionPlaceholder","optionChange"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[3,"dataModel","optionMethod"],["type","button",1,"btn","btn-light",3,"click"],[1,"ft-x"],["type","submit","class","btn btn-success",3,"disabled","click",4,"ngIf"],["type","submit",1,"btn","btn-success",3,"disabled","click"],[1,"fa","fa-check-square-o"]],template:function(e,o){1&e&&(t.TgZ(0,"form",0,1),t.NdJ("ngSubmit",function(){return o.onFormSubmit()}),t.TgZ(2,"div",2),t._uU(3),t.qZA(),t.TgZ(4,"div",3),t._UZ(5,"app-progress-spinner",4),t.YNc(6,N,49,14,"div",5),t.YNc(7,U,1,2,"app-cms-json-list",6),t.qZA(),t.TgZ(8,"div",7)(9,"div",8)(10,"small",9),t._uU(11),t.qZA(),t.TgZ(12,"small",10),t._uU(13),t.qZA()()(),t.TgZ(14,"div",11),t._UZ(15,"app-progress-spinner",4),t.YNc(16,k,6,4,"div",12),t.qZA()()),2&e&&(t.xp6(3),t.hij(" ",o.formInfo.formTitle," "),t.xp6(2),t.Q6J("options",o.loading),t.xp6(1),t.Q6J("ngIf",!o.loading.display),t.xp6(1),t.Q6J("ngIf",null==o.dataModelResult?null:o.dataModelResult.item),t.xp6(4),t.hij("",o.formInfo.formAlert," "),t.xp6(2),t.hij("",o.formInfo.formError," "),t.xp6(2),t.Q6J("options",o.loadingAction),t.xp6(1),t.Q6J("ngIf",o.formInfo.formSubmitAllow&&!o.loading.display))},directives:[r._Y,r.JL,r.F,v.O,g.O5,A.SP,A.uX,r.Fj,r.JJ,r.On,x.s,Z.y,d.KE,d.hX,T.Nt,r.wO,r.nD,M.Hw,d.R9,d.bx,d.TO,b.Rr,I.v],pipes:[h.X$],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:yellow}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:black}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}"]}),n})()}]}];let O=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[m.Bz.forChild(Q)],m.Bz]}),n})();var L=a(2489),R=a(8601),q=a(6720),H=a(3914),Y=a(5103);let j=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[u.EAm,u.FLW,u.Z8z,H.s,u.dF2,u.sZP],imports:[[g.ez,O,r.u5,r.UX.withConfig({warnOnNgModelWithFormControl:"never"}),L.m.forRoot(),R.UM,M.Ps,d.lN,q.T5,Y.r]]}),n})()}}]);