"use strict";(self.webpackChunkntk_cms_web=self.webpackChunkntk_cms_web||[]).push([[612],{532:(R,v,r)=>{r.d(v,{t:()=>a});var a=(()=>{return(e=a||(a={}))[e.none=0]="none",e[e.add=1]="add",e[e.edit=2]="edit",e[e.delete=3]="delete",e[e.list=4]="list",e[e.select=5]="select",a;var e})()},6609:(R,v,r)=>{r.d(v,{D:()=>n});var a=r(8239),e=r(9724),_=r(7977),p=r(1659),D=r(1927),T=r(3151),A=r(2147),P=r(1528),g=r(7969),M=r(656),C=r(4817),f=r(1048),d=r(5821),O=r(1531),E=r(5691),I=r(4848),S=r(8904),L=r(1418);function K(i,l){if(1&i&&(e._UZ(0,"img",8),e.ALo(1,"cmsthumbnail")),2&i){const t=e.oxw().$implicit;e.s9C("src",e.lcZ(1,1,t.linkImageIdSrc),e.LSH)}}function y(i,l){if(1&i&&(e.TgZ(0,"mat-option",6),e.YNc(1,K,2,3,"img",7),e.TgZ(2,"span"),e._uU(3),e.qZA()()),2&i){const t=l.$implicit,o=e.oxw();e.Q6J("value",t)("disabled",o.optionDisabled),e.xp6(1),e.Q6J("ngIf",t.linkImageIdSrc),e.xp6(2),e.Oqu(o.displayOption(t))}}function c(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"mat-icon",9),e.NdJ("click",function(){e.CHM(t);const u=e.oxw();return e.KtG(u.onActionSelectClear())}),e._uU(1,"close"),e.qZA()}}const h=["*"];let n=(()=>{class i{constructor(t,o,u,m){this.coreEnumService=t,this.translate=o,this.cdr=u,this.categoryService=m,this.id=++i.nextId,this.dataModelResult=new _.y$4,this.dataModelSelect=new _.Dp$,this.loading=new M.O,this.formControl=new p.NI,this.optionDisabled=!1,this.optionSelectFirstItem=!1,this.optionPlaceholder="",this.optionChange=new e.vpe,this.optionReload=()=>this.onActionReload(),this.loading.cdr=this.cdr,this.loading.message=this.translate.instant("MESSAGE.Receiving_information")}set optionSelectForce(t){this.onActionSelectForce(t)}ngOnInit(){this.loadOptions()}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe((0,D.O)(""),(0,T.b)(1500),(0,A.x)(),(0,P.w)(t=>this.DataGetAll("string"==typeof t||"number"==typeof t?t:"")))}displayFn(t){return t&&t.virtual_Parent&&t.virtual_Parent.title.length>0&&t.virtual_Parent.virtual_Parent&&t.virtual_Parent.virtual_Parent.title.length>0&&t.virtual_Parent.virtual_Parent.virtual_Parent&&t.virtual_Parent.virtual_Parent.virtual_Parent.title.length>0?t.virtual_Parent.virtual_Parent.virtual_Parent.titleML+" > "+t.virtual_Parent.virtual_Parent.titleML+" > "+t.virtual_Parent.titleML+" > "+t.titleML:t&&t.virtual_Parent&&t.virtual_Parent.title.length>0&&t.virtual_Parent.virtual_Parent&&t.virtual_Parent.virtual_Parent.title.length>0?t.virtual_Parent.virtual_Parent.titleML+" > "+t.virtual_Parent.titleML+" > "+t.titleML:t&&t.virtual_Parent&&t.virtual_Parent.title.length>0?t.virtual_Parent.titleML+" > "+t.titleML:t?t.titleML:void 0}displayOption(t){return t&&t.virtual_Parent&&t.virtual_Parent.title.length>0&&t.virtual_Parent.virtual_Parent&&t.virtual_Parent.virtual_Parent.title.length>0&&t.virtual_Parent.virtual_Parent.virtual_Parent&&t.virtual_Parent.virtual_Parent.virtual_Parent.title.length>0?t.virtual_Parent.virtual_Parent.virtual_Parent.titleML+" > "+t.virtual_Parent.virtual_Parent.titleML+" > "+t.virtual_Parent.titleML+" > "+t.titleML:t&&t.virtual_Parent&&t.virtual_Parent.title.length>0&&t.virtual_Parent.virtual_Parent&&t.virtual_Parent.virtual_Parent.title.length>0?t.virtual_Parent.virtual_Parent.titleML+" > "+t.virtual_Parent.titleML+" > "+t.titleML:t&&t.virtual_Parent&&t.virtual_Parent.title.length>0?t.virtual_Parent.titleML+" > "+t.titleML:t?t.titleML:void 0}DataGetAll(t){var o=this;return(0,a.Z)(function*(){const u=new _.Hay;if(u.rowPerPage=20,u.accessLoad=!0,t&&t.length>0){let s=new _.AO3;s=new _.AO3,s.propertyName="Symbol",s.value=t,s.searchType=_.b3P.Contains,s.clauseType=_.KT6.Or,u.filters.push(s),s=new _.AO3,s.propertyName="Title",s.value=t,s.searchType=_.b3P.Contains,s.clauseType=_.KT6.Or,u.filters.push(s),t&&"number"==typeof+t&&+t>0&&(s=new _.AO3,s.propertyName="Id",s.value=t,s.searchType=_.b3P.Equal,s.clauseType=_.KT6.Or,u.filters.push(s))}const m=o.constructor.name+"main";return o.loading.Start(m),yield o.categoryService.ServiceGetAll(u).pipe((0,g.U)(s=>(o.dataModelResult=s,o.optionSelectFirstItem&&(!o.dataModelSelect||!o.dataModelSelect.id||o.dataModelSelect.id<=0)&&o.dataModelResult.listItems.length>0&&(o.optionSelectFirstItem=!1,setTimeout(()=>{o.formControl.setValue(o.dataModelResult.listItems[0])},1e3),o.onActionSelect(o.dataModelResult.listItems[0])),o.loading.Stop(m),s.listItems))).toPromise()})()}onActionSelect(t){this.optionDisabled||(this.dataModelSelect=t,this.optionChange.emit(this.dataModelSelect))}onActionSelectClear(){this.optionDisabled||(this.formControl.setValue(null),this.optionChange.emit(null))}push(t){return this.filteredOptions.pipe((0,g.U)(o=>(o.find(u=>u.id===t.id)||o.push(t),o)))}onActionSelectForce(t){if("number"==typeof t&&t>0){if(this.dataModelSelect&&this.dataModelSelect.id===t)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(o=>o.id===t)){const o=this.dataModelResult.listItems.find(u=>u.id===t);return this.dataModelSelect=o,void this.formControl.setValue(o)}this.categoryService.ServiceGetOneById(t).subscribe(o=>{o.isSuccess&&(this.filteredOptions=this.push(o.item),this.dataModelSelect=o.item,this.formControl.setValue(o.item),this.optionChange.emit(o.item))})}else{if(typeof t==typeof _.Dp$)return this.filteredOptions=this.push(t),this.dataModelSelect=t,void this.formControl.setValue(t);this.formControl.setValue(null)}}onActionReload(){this.dataModelSelect=new _.Dp$,this.loadOptions()}}return i.nextId=0,i.\u0275fac=function(t){return new(t||i)(e.Y36(_.FLW),e.Y36(C.sK),e.Y36(e.sBO),e.Y36(_.XRW))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-cms-location-selector"]],inputs:{loading:"loading",optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange"},ngContentSelectors:h,decls:8,vars:9,consts:[[1,"ntk-full-width"],["type","text","aria-label","Assignee","matInput","",3,"placeholder","formControl","matAutocomplete"],[3,"displayWith","optionSelected"],["auto34","matAutocomplete"],[3,"value","disabled",4,"ngFor","ngForOf"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[3,"value","disabled"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","25","width","25",3,"src",4,"ngIf"],["aria-hidden","","height","25","width","25",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(t,o){if(1&t&&(e.F$t(),e.TgZ(0,"mat-form-field",0),e._UZ(1,"input",1),e.TgZ(2,"mat-autocomplete",2,3),e.NdJ("optionSelected",function(m){return o.onActionSelect(m.option.value)}),e.YNc(4,y,4,4,"mat-option",4),e.ALo(5,"async"),e.qZA(),e.YNc(6,c,2,0,"mat-icon",5),e.Hsn(7),e.qZA()),2&t){const u=e.MAs(3);e.xp6(1),e.s9C("placeholder",o.optionPlaceholder),e.Q6J("formControl",o.formControl)("matAutocomplete",u),e.uIk("disabled",!!o.optionDisabled||null),e.xp6(1),e.Q6J("displayWith",o.displayFn),e.xp6(2),e.Q6J("ngForOf",e.lcZ(5,7,o.filteredOptions)),e.xp6(2),e.Q6J("ngIf",o.dataModelSelect.id)}},dependencies:[f.sg,f.O5,p.Fj,p.JJ,p.oH,d.XC,d.ZL,O.ey,E.KE,E.R9,I.Hw,S.Nt,f.Ov,L.v],encapsulation:2}),i})()},9831:(R,v,r)=>{r.d(v,{u:()=>y});var a=r(9724),e=r(7977),_=r(4482),p=r(1659),D=r(1927),T=r(3151),A=r(1528),P=r(7969),g=r(2607),M=r(1048),C=r(5821),f=r(1531),d=r(6405),O=r(5691),E=r(4848);const I=["tagInput"];function S(c,h){if(1&c){const n=a.EpF();a.TgZ(0,"mat-chip",9),a.NdJ("removed",function(){const t=a.CHM(n).$implicit,o=a.oxw();return a.KtG(o.remove(t))}),a._uU(1),a.TgZ(2,"button",10)(3,"mat-icon"),a._uU(4,"cancel"),a.qZA()()()}if(2&c){const n=h.$implicit;a.xp6(1),a.hij(" ",n.display," ")}}function L(c,h){if(1&c&&(a.TgZ(0,"mat-option",11),a._uU(1),a.qZA()),2&c){const n=h.$implicit;a.Q6J("value",n),a.xp6(1),a.hij(" ",n.display," ")}}let y=(()=>{class c{constructor(n,i){this.service=n,this.cmsToastrService=i,this.id=++c.nextId,this.optionDisabled=!1,this.optionPlaceholder="+ Tag",this.optionLabel=" Select",this.optionChange=new a.vpe,this.tagDataModel=[],this.tagLastDataModel=[],this.selectForceStatus=!0,this.separatorKeysCodes=[_.K5],this.tagCtrl=new p.NI(""),this.addOnBlur=!0,this.filteredOptions=this.tagCtrl.valueChanges.pipe((0,D.O)(null),(0,T.b)(400),(0,A.w)(l=>this.filter(l||"")))}set optionSelectForce(n){this.onActionSelectForce(n)}ngOnInit(){}filter(n){const i=new e.Hay;i.rowPerPage=20,i.accessLoad=!0;let l=new e.AO3;return l.propertyName="Title",l.value=n,l.searchType=e.b3P.Contains,l.clauseType=e.KT6.Or,i.filters.push(l),n&&"number"==typeof+n&&+n>0&&(l=new e.AO3,l.propertyName="Id",l.value=n,l.searchType=e.b3P.Equal,l.clauseType=e.KT6.Or,i.filters.push(l)),this.service.ServiceGetAll(i).pipe((0,P.U)(t=>(this.tagLastDataModel=t.listItems.map(o=>({display:o.title,value:o.id})),this.tagLastDataModel)))}checkIndex(n){var i=0,l=-1;return this.tagDataModel.forEach(t=>{t.value==n&&(l=i),i++}),l}add(n){var i;n.value&&this.tagLastDataModel.forEach(l=>{(l.display==n.value||l.value+""==n.value)&&(i=l)}),i&&this.checkIndex(i.value)<0&&(this.tagDataModel.push(i),this.onActionChange()),n.chipInput.clear(),this.tagCtrl.setValue(null)}remove(n){const i=this.checkIndex(n.value);i>=0&&(this.tagDataModel.splice(i,1),this.onActionChange())}selected(n){const i=n.option.value;this.checkIndex(i.value)<0&&this.tagDataModel.push(i),this.tagInput.nativeElement.value="",this.tagCtrl.setValue(null),this.onActionChange()}onActionChange(){const n=[];this.tagDataModel.forEach(i=>{n.push(i.value)}),this.selectForceStatus=!1,this.optionChange.emit(n)}onActionSelectForce(n){if(!this.selectForceStatus||!n||0===n.length)return;const i=new e.Hay;n.forEach(l=>{if(l>0){const t=new e.AO3;t.propertyName="Id",t.value=l,t.clauseType=e.KT6.Or,i.filters.push(t)}}),this.service.ServiceGetAll(i).pipe((0,P.U)(l=>{l.isSuccess?l.listItems.forEach(t=>{this.tagDataModel.push({value:t.id,display:t.title})}):this.cmsToastrService.typeErrorGetAll(l.errorMessage)},l=>{this.cmsToastrService.typeErrorGetAll(l)})).toPromise()}}return c.nextId=0,c.\u0275fac=function(n){return new(n||c)(a.Y36(e.dF2),a.Y36(g.e))},c.\u0275cmp=a.Xpm({type:c,selectors:[["app-cms-tag-autocomplete"]],viewQuery:function(n,i){if(1&n&&a.Gf(I,5),2&n){let l;a.iGM(l=a.CRH())&&(i.tagInput=l.first)}},inputs:{optionDisabled:"optionDisabled",optionPlaceholder:"optionPlaceholder",optionLabel:"optionLabel",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange"},decls:12,vars:12,consts:[["appearance","fill",2,"width","100%"],["aria-label","tag selection",3,"disabled"],["chipList",""],[3,"removed",4,"ngFor","ngForOf"],[3,"placeholder","matChipInputAddOnBlur","formControl","matAutocomplete","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputTokenEnd"],["tagInput",""],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"removed"],["matChipRemove",""],[3,"value"]],template:function(n,i){if(1&n&&(a.TgZ(0,"mat-form-field",0)(1,"mat-label"),a._uU(2),a.qZA(),a.TgZ(3,"mat-chip-list",1,2),a.YNc(5,S,5,1,"mat-chip",3),a.TgZ(6,"input",4,5),a.NdJ("matChipInputTokenEnd",function(t){return i.add(t)}),a.qZA()(),a.TgZ(8,"mat-autocomplete",6,7),a.NdJ("optionSelected",function(t){return i.selected(t)}),a.YNc(10,L,2,2,"mat-option",8),a.ALo(11,"async"),a.qZA()()),2&n){const l=a.MAs(4),t=a.MAs(9);a.xp6(2),a.Oqu(i.optionLabel),a.xp6(1),a.Q6J("disabled",i.optionDisabled),a.xp6(2),a.Q6J("ngForOf",i.tagDataModel),a.xp6(1),a.Q6J("placeholder",i.optionPlaceholder)("matChipInputAddOnBlur",i.addOnBlur)("formControl",i.tagCtrl)("matAutocomplete",t)("matChipInputFor",l)("matChipInputSeparatorKeyCodes",i.separatorKeysCodes),a.xp6(4),a.Q6J("ngForOf",a.lcZ(11,10,i.filteredOptions))}},dependencies:[M.sg,p.Fj,p.JJ,p.oH,C.XC,C.ZL,f.ey,d.qn,d.HS,d.oH,d.qH,O.KE,O.hX,E.Hw,M.Ov],encapsulation:2}),c})()}}]);