"use strict";(self.webpackChunkntk_cms_web=self.webpackChunkntk_cms_web||[]).push([[612],{532:(R,f,r)=>{r.d(f,{t:()=>a});var a=(()=>{return(e=a||(a={}))[e.none=0]="none",e[e.add=1]="add",e[e.edit=2]="edit",e[e.delete=3]="delete",e[e.list=4]="list",e[e.select=5]="select",a;var e})()},6609:(R,f,r)=>{r.d(f,{D:()=>l});var a=r(8239),e=r(9724),_=r(7977),u=r(1659),E=r(1927),D=r(3151),T=r(2147),M=r(1528),P=r(7969),O=r(656),h=r(4817),g=r(5691),A=r(8904),v=r(5821),C=r(1048),I=r(1531),S=r(4848),L=r(1418);function K(o,n){if(1&o&&(e._UZ(0,"img",8),e.ALo(1,"cmsthumbnail")),2&o){const t=e.oxw().$implicit;e.s9C("src",e.lcZ(1,1,t.linkImageIdSrc),e.LSH)}}function y(o,n){if(1&o&&(e.TgZ(0,"mat-option",6),e.YNc(1,K,2,3,"img",7),e.TgZ(2,"span"),e._uU(3),e.qZA()()),2&o){const t=n.$implicit,i=e.oxw();e.Q6J("value",t)("disabled",i.optionDisabled),e.xp6(1),e.Q6J("ngIf",t.linkImageIdSrc),e.xp6(2),e.Oqu(i.displayOption(t))}}function c(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"mat-icon",9),e.NdJ("click",function(){return e.CHM(t),e.oxw().onActionSelectClear()}),e._uU(1,"close"),e.qZA()}}const d=["*"];let l=(()=>{class o{constructor(t,i,p,m){this.coreEnumService=t,this.translate=i,this.cdr=p,this.categoryService=m,this.id=++o.nextId,this.dataModelResult=new _.y$4,this.dataModelSelect=new _.Dp$,this.loading=new O.O,this.formControl=new u.NI,this.optionDisabled=!1,this.optionSelectFirstItem=!1,this.optionPlaceholder="",this.optionChange=new e.vpe,this.optionReload=()=>this.onActionReload(),this.loading.cdr=this.cdr,this.loading.message=this.translate.instant("MESSAGE.Receiving_information")}set optionSelectForce(t){this.onActionSelectForce(t)}ngOnInit(){this.loadOptions()}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe((0,E.O)(""),(0,D.b)(1500),(0,T.x)(),(0,M.w)(t=>this.DataGetAll("string"==typeof t||"number"==typeof t?t:"")))}displayFn(t){return t&&t.virtual_Parent&&t.virtual_Parent.title.length>0?t.virtual_Parent.titleML+" > "+t.titleML:t?t.titleML:void 0}displayOption(t){return t&&t.virtual_Parent&&t.virtual_Parent.title.length>0&&t.virtual_Parent.virtual_Parent&&t.virtual_Parent.virtual_Parent.title.length>0&&t.virtual_Parent.virtual_Parent.virtual_Parent&&t.virtual_Parent.virtual_Parent.virtual_Parent.title.length>0?t.virtual_Parent.virtual_Parent.virtual_Parent.titleML+" > "+t.virtual_Parent.virtual_Parent.titleML+" > "+t.virtual_Parent.titleML+" > "+t.titleML:t&&t.virtual_Parent&&t.virtual_Parent.title.length>0&&t.virtual_Parent.virtual_Parent&&t.virtual_Parent.virtual_Parent.title.length>0?t.virtual_Parent.virtual_Parent.titleML+" > "+t.virtual_Parent.titleML+" > "+t.titleML:t&&t.virtual_Parent&&t.virtual_Parent.title.length>0?t.virtual_Parent.titleML+" > "+t.titleML:t?t.titleML:void 0}DataGetAll(t){var i=this;return(0,a.Z)(function*(){const p=new _.Hay;if(p.rowPerPage=20,p.accessLoad=!0,t&&t.length>0){let s=new _.AO3;s=new _.AO3,s.propertyName="Symbol",s.value=t,s.searchType=_.b3P.Contains,s.clauseType=_.KT6.Or,p.filters.push(s),s=new _.AO3,s.propertyName="Title",s.value=t,s.searchType=_.b3P.Contains,s.clauseType=_.KT6.Or,p.filters.push(s),t&&"number"==typeof+t&&+t>0&&(s=new _.AO3,s.propertyName="Id",s.value=t,s.searchType=_.b3P.Equal,s.clauseType=_.KT6.Or,p.filters.push(s))}const m=i.constructor.name+"main";return i.loading.Start(m),yield i.categoryService.ServiceGetAll(p).pipe((0,P.U)(s=>(i.dataModelResult=s,i.optionSelectFirstItem&&(!i.dataModelSelect||!i.dataModelSelect.id||i.dataModelSelect.id<=0)&&i.dataModelResult.listItems.length>0&&(i.optionSelectFirstItem=!1,setTimeout(()=>{i.formControl.setValue(i.dataModelResult.listItems[0])},1e3),i.onActionSelect(i.dataModelResult.listItems[0])),i.loading.Stop(m),s.listItems))).toPromise()})()}onActionSelect(t){this.optionDisabled||(this.dataModelSelect=t,this.optionChange.emit(this.dataModelSelect))}onActionSelectClear(){this.optionDisabled||(this.formControl.setValue(null),this.optionChange.emit(null))}push(t){return this.filteredOptions.pipe((0,P.U)(i=>(i.find(p=>p.id===t.id)||i.push(t),i)))}onActionSelectForce(t){if("number"==typeof t&&t>0){if(this.dataModelSelect&&this.dataModelSelect.id===t)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(i=>i.id===t)){const i=this.dataModelResult.listItems.find(p=>p.id===t);return this.dataModelSelect=i,void this.formControl.setValue(i)}this.categoryService.ServiceGetOneById(t).subscribe(i=>{i.isSuccess&&(this.filteredOptions=this.push(i.item),this.dataModelSelect=i.item,this.formControl.setValue(i.item),this.optionChange.emit(i.item))})}else{if(typeof t==typeof _.Dp$)return this.filteredOptions=this.push(t),this.dataModelSelect=t,void this.formControl.setValue(t);this.formControl.setValue(null)}}onActionReload(){this.dataModelSelect=new _.Dp$,this.loadOptions()}}return o.nextId=0,o.\u0275fac=function(t){return new(t||o)(e.Y36(_.FLW),e.Y36(h.sK),e.Y36(e.sBO),e.Y36(_.XRW))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-cms-location-selector"]],inputs:{loading:"loading",optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange"},ngContentSelectors:d,decls:8,vars:9,consts:[[1,"ntk-full-width"],["type","text","aria-label","Assignee","matInput","",3,"placeholder","formControl","matAutocomplete"],[3,"displayWith","optionSelected"],["auto34","matAutocomplete"],[3,"value","disabled",4,"ngFor","ngForOf"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[3,"value","disabled"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","25","width","25",3,"src",4,"ngIf"],["aria-hidden","","height","25","width","25",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(t,i){if(1&t&&(e.F$t(),e.TgZ(0,"mat-form-field",0),e._UZ(1,"input",1),e.TgZ(2,"mat-autocomplete",2,3),e.NdJ("optionSelected",function(m){return i.onActionSelect(m.option.value)}),e.YNc(4,y,4,4,"mat-option",4),e.ALo(5,"async"),e.qZA(),e.YNc(6,c,2,0,"mat-icon",5),e.Hsn(7),e.qZA()),2&t){const p=e.MAs(3);e.xp6(1),e.s9C("placeholder",i.optionPlaceholder),e.Q6J("formControl",i.formControl)("matAutocomplete",p),e.uIk("disabled",!!i.optionDisabled||null),e.xp6(1),e.Q6J("displayWith",i.displayFn),e.xp6(2),e.Q6J("ngForOf",e.lcZ(5,7,i.filteredOptions)),e.xp6(2),e.Q6J("ngIf",i.dataModelSelect.id)}},directives:[g.KE,A.Nt,u.Fj,v.ZL,u.JJ,u.oH,v.XC,C.sg,I.ey,C.O5,S.Hw,g.R9],pipes:[C.Ov,L.v],encapsulation:2}),o})()},9831:(R,f,r)=>{r.d(f,{u:()=>y});var a=r(9724),e=r(7977),_=r(4482),u=r(1659),E=r(1927),D=r(3151),T=r(1528),M=r(7969),P=r(2607),O=r(5691),h=r(6405),g=r(1048),A=r(4848),v=r(5821),C=r(1531);const I=["tagInput"];function S(c,d){if(1&c){const l=a.EpF();a.TgZ(0,"mat-chip",9),a.NdJ("removed",function(){const t=a.CHM(l).$implicit;return a.oxw().remove(t)}),a._uU(1),a.TgZ(2,"button",10)(3,"mat-icon"),a._uU(4,"cancel"),a.qZA()()()}if(2&c){const l=d.$implicit;a.xp6(1),a.hij(" ",l.display," ")}}function L(c,d){if(1&c&&(a.TgZ(0,"mat-option",11),a._uU(1),a.qZA()),2&c){const l=d.$implicit;a.Q6J("value",l),a.xp6(1),a.hij(" ",l.display," ")}}let y=(()=>{class c{constructor(l,o){this.service=l,this.cmsToastrService=o,this.id=++c.nextId,this.optionDisabled=!1,this.optionPlaceholder="+ Tag",this.optionLabel=" Select",this.optionChange=new a.vpe,this.tagDataModel=[],this.tagLastDataModel=[],this.selectForceStatus=!0,this.separatorKeysCodes=[_.K5],this.tagCtrl=new u.NI(""),this.addOnBlur=!0,this.filteredOptions=this.tagCtrl.valueChanges.pipe((0,E.O)(null),(0,D.b)(400),(0,T.w)(n=>this.filter(n||"")))}set optionSelectForce(l){this.onActionSelectForce(l)}ngOnInit(){}filter(l){const o=new e.Hay;o.rowPerPage=20,o.accessLoad=!0;let n=new e.AO3;return n.propertyName="Title",n.value=l,n.searchType=e.b3P.Contains,n.clauseType=e.KT6.Or,o.filters.push(n),l&&"number"==typeof+l&&+l>0&&(n=new e.AO3,n.propertyName="Id",n.value=l,n.searchType=e.b3P.Equal,n.clauseType=e.KT6.Or,o.filters.push(n)),this.service.ServiceGetAll(o).pipe((0,M.U)(t=>(this.tagLastDataModel=t.listItems.map(i=>({display:i.title,value:i.id})),this.tagLastDataModel)))}checkIndex(l){var o=0,n=-1;return this.tagDataModel.forEach(t=>{t.value==l&&(n=o),o++}),n}add(l){var o;l.value&&this.tagLastDataModel.forEach(n=>{(n.display==l.value||n.value+""==l.value)&&(o=n)}),o&&this.checkIndex(o.value)<0&&(this.tagDataModel.push(o),this.onActionChange()),l.chipInput.clear(),this.tagCtrl.setValue(null)}remove(l){const o=this.checkIndex(l.value);o>=0&&(this.tagDataModel.splice(o,1),this.onActionChange())}selected(l){const o=l.option.value;this.checkIndex(o.value)<0&&this.tagDataModel.push(o),this.tagInput.nativeElement.value="",this.tagCtrl.setValue(null),this.onActionChange()}onActionChange(){const l=[];this.tagDataModel.forEach(o=>{l.push(o.value)}),this.selectForceStatus=!1,this.optionChange.emit(l)}onActionSelectForce(l){if(!this.selectForceStatus||!l||0===l.length)return;const o=new e.Hay;l.forEach(n=>{if(n>0){const t=new e.AO3;t.propertyName="Id",t.value=n,t.clauseType=e.KT6.Or,o.filters.push(t)}}),this.service.ServiceGetAll(o).pipe((0,M.U)(n=>{n.isSuccess?n.listItems.forEach(t=>{this.tagDataModel.push({value:t.id,display:t.title})}):this.cmsToastrService.typeErrorGetAll(n.errorMessage)},n=>{this.cmsToastrService.typeErrorGetAll(n)})).toPromise()}}return c.nextId=0,c.\u0275fac=function(l){return new(l||c)(a.Y36(e.dF2),a.Y36(P.e))},c.\u0275cmp=a.Xpm({type:c,selectors:[["app-cms-tag-autocomplete"]],viewQuery:function(l,o){if(1&l&&a.Gf(I,5),2&l){let n;a.iGM(n=a.CRH())&&(o.tagInput=n.first)}},inputs:{optionDisabled:"optionDisabled",optionPlaceholder:"optionPlaceholder",optionLabel:"optionLabel",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange"},decls:12,vars:12,consts:[["appearance","fill",2,"width","100%"],["aria-label","tag selection",3,"disabled"],["chipList",""],[3,"removed",4,"ngFor","ngForOf"],[3,"placeholder","matChipInputAddOnBlur","formControl","matAutocomplete","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputTokenEnd"],["tagInput",""],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"removed"],["matChipRemove",""],[3,"value"]],template:function(l,o){if(1&l&&(a.TgZ(0,"mat-form-field",0)(1,"mat-label"),a._uU(2),a.qZA(),a.TgZ(3,"mat-chip-list",1,2),a.YNc(5,S,5,1,"mat-chip",3),a.TgZ(6,"input",4,5),a.NdJ("matChipInputTokenEnd",function(t){return o.add(t)}),a.qZA()(),a.TgZ(8,"mat-autocomplete",6,7),a.NdJ("optionSelected",function(t){return o.selected(t)}),a.YNc(10,L,2,2,"mat-option",8),a.ALo(11,"async"),a.qZA()()),2&l){const n=a.MAs(4),t=a.MAs(9);a.xp6(2),a.Oqu(o.optionLabel),a.xp6(1),a.Q6J("disabled",o.optionDisabled),a.xp6(2),a.Q6J("ngForOf",o.tagDataModel),a.xp6(1),a.Q6J("placeholder",o.optionPlaceholder)("matChipInputAddOnBlur",o.addOnBlur)("formControl",o.tagCtrl)("matAutocomplete",t)("matChipInputFor",n)("matChipInputSeparatorKeyCodes",o.separatorKeysCodes),a.xp6(4),a.Q6J("ngForOf",a.lcZ(11,10,o.filteredOptions))}},directives:[O.KE,O.hX,h.qn,g.sg,h.HS,h.qH,A.Hw,u.Fj,v.ZL,h.oH,u.JJ,u.oH,v.XC,C.ey],pipes:[g.Ov],encapsulation:2}),c})()}}]);