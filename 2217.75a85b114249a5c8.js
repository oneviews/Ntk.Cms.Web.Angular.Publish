"use strict";(self.webpackChunkntk_cms_web=self.webpackChunkntk_cms_web||[]).push([[2217],{643:(de,F,a)=>{a.d(F,{K:()=>ie});var Z=a(8239),i=a(7977),p=a(8485),M=a(656),e=a(9724),O=a(3029),L=a(2607),T=a(4817),S=a(727),c=a(1659),I=a(5738),h=a(1048),C=a(5691),D=a(1450),k=a(1531),P=a(8904),R=a(4848),y=a(3181),J=a(6599),q=a(6014),b=a(8572),N=a(1582),A=a(38),m=a(1418);const g=["vform"];function _(n,s){if(1&n&&(e.TgZ(0,"mat-option",35),e._uU(1),e.qZA()),2&n){const o=s.$implicit;e.Q6J("value",o.Value),e.xp6(1),e.Oqu(o.Description)}}function d(n,s){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," RecordStatus is "),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.qZA()),2&n&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"MESSAGE.required")))}function u(n,s){if(1&n){const o=e.EpF();e.TgZ(0,"mat-form-field",6),e.TgZ(1,"mat-select",32,33),e.NdJ("ngModelChange",function(l){return e.CHM(o),e.oxw().dataModel.RecordStatus=l}),e.YNc(3,_,2,2,"mat-option",34),e.qZA(),e.TgZ(4,"mat-hint",11),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.YNc(7,d,5,3,"mat-error",12),e.qZA()}if(2&n){const o=e.MAs(2),t=e.oxw();e.xp6(1),e.s9C("placeholder",null==t.fieldsInfo.RecordStatus?null:t.fieldsInfo.RecordStatus.FieldTitle),e.MGl("panelClass","recordStatus-",t.dataModel.RecordStatus,""),e.Q6J("ngModel",t.dataModel.RecordStatus),e.xp6(2),e.Q6J("ngForOf",t.dataModelEnumRecordStatusResult.ListItems),e.xp6(2),e.Oqu(e.lcZ(6,6,"TITLE.SELECT_STATUS")),e.xp6(2),e.Q6J("ngIf",null==o.errors?null:o.errors.required)}}function f(n,s){if(1&n){const o=e.EpF();e.TgZ(0,"mat-icon",38),e.NdJ("click",function(){return e.CHM(o),e.oxw(2).dataModel.Title=""}),e._uU(1,"close"),e.qZA()}}function x(n,s){if(1&n&&(e.TgZ(0,"mat-error"),e._uU(1),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.qZA()),2&n){const o=e.oxw(2);e.xp6(1),e.hij(" ",null==o.fieldsInfo.Title?null:o.fieldsInfo.Title.FieldTitle," is "),e.xp6(2),e.Oqu(e.lcZ(4,2,"MESSAGE.required"))}}function v(n,s){if(1&n){const o=e.EpF();e.TgZ(0,"mat-form-field",6),e.TgZ(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"input",36,37),e.NdJ("ngModelChange",function(l){return e.CHM(o),e.oxw().dataModel.Title=l}),e.qZA(),e.YNc(5,f,2,0,"mat-icon",9),e.TgZ(6,"mat-icon",10),e._uU(7,"mode_edit"),e.qZA(),e.TgZ(8,"mat-hint",11),e._uU(9),e.qZA(),e.YNc(10,x,5,4,"mat-error",12),e.qZA()}if(2&n){const o=e.MAs(4),t=e.oxw();e.xp6(2),e.Oqu(null==t.fieldsInfo.Title?null:t.fieldsInfo.Title.FieldTitle),e.xp6(1),e.s9C("placeholder",null==t.fieldsInfo.Title?null:t.fieldsInfo.Title.FieldTitle),e.Q6J("ngModel",t.dataModel.Title),e.xp6(2),e.Q6J("ngIf",t.dataModel.Title),e.xp6(4),e.hij("",o.value.length," / 100"),e.xp6(1),e.Q6J("ngIf",null==o.errors?null:o.errors.required)}}function w(n,s){if(1&n){const o=e.EpF();e.TgZ(0,"mat-icon",38),e.NdJ("click",function(){return e.CHM(o),e.oxw().dataModel.TitleResourceLanguage=""}),e._uU(1,"close"),e.qZA()}}function Q(n,s){if(1&n&&(e.TgZ(0,"mat-error"),e._uU(1),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.qZA()),2&n){const o=e.oxw();e.xp6(1),e.hij(" ",null==o.fieldsInfo.TitleResourceLanguage?null:o.fieldsInfo.TitleResourceLanguage.FieldTitle," is "),e.xp6(2),e.Oqu(e.lcZ(4,2,"MESSAGE.required"))}}function W(n,s){if(1&n){const o=e.EpF();e.TgZ(0,"app-cms-user-selector",14),e.NdJ("optionChange",function(l){return e.CHM(o),e.oxw().onActionSelectUser(l)}),e.qZA()}if(2&n){const o=e.oxw();e.Q6J("optionSelectForce",o.dataModel.LinkUserId)("optionPlaceholder","\u06a9\u0627\u0631\u0628\u0631")("optionDisabled",!(null!=o.fieldsInfo.LinkUserId&&o.fieldsInfo.LinkUserId.AccessAddField))}}function K(n,s){if(1&n){const o=e.EpF();e.TgZ(0,"app-cms-site-selector",14),e.NdJ("optionChange",function(l){return e.CHM(o),e.oxw().onActionSelectSite(l)}),e.qZA()}if(2&n){const o=e.oxw();e.Q6J("optionSelectForce",o.dataModel.LinkSiteId)("optionPlaceholder","\u0633\u0627\u06cc\u062a")("optionDisabled",!(null!=o.fieldsInfo.LinkSiteId&&o.fieldsInfo.LinkSiteId.AccessAddField))}}function B(n,s){if(1&n&&(e._UZ(0,"img",39),e.ALo(1,"cmsthumbnail")),2&n){const o=e.oxw();e.s9C("src",e.lcZ(1,1,o.dataModel.LinkFileContentIdSrc),e.LSH)}}function Y(n,s){if(1&n){const o=e.EpF();e.TgZ(0,"mat-icon",38),e.NdJ("click",function(){return e.CHM(o),e.oxw().dataModel.LinkFileContentId=null}),e._uU(1,"close"),e.qZA()}}function H(n,s){if(1&n){const o=e.EpF();e.TgZ(0,"mat-icon",38),e.NdJ("click",function(){return e.CHM(o),e.oxw().dataModel.Description=""}),e._uU(1,"close"),e.qZA()}}function G(n,s){if(1&n&&(e.TgZ(0,"mat-error"),e._uU(1),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.qZA()),2&n){const o=e.oxw();e.xp6(1),e.hij(" ",null==o.fieldsInfo.Description?null:o.fieldsInfo.Description.FieldTitle," is "),e.xp6(2),e.Oqu(e.lcZ(4,2,"MESSAGE.required"))}}function j(n,s){if(1&n){const o=e.EpF();e.TgZ(0,"mat-slide-toggle",40),e.NdJ("ngModelChange",function(l){return e.CHM(o),e.oxw().dataModel.IsApproved=l}),e._uU(1),e.qZA()}if(2&n){const o=e.oxw();e.Q6J("ngModel",o.dataModel.IsApproved)("disabled",!(null!=o.fieldsInfo.IsApproved&&o.fieldsInfo.IsApproved.AccessAddField)),e.xp6(1),e.hij(" ",null==o.fieldsInfo.IsApproved?null:o.fieldsInfo.IsApproved.FieldTitle," ")}}function V(n,s){if(1&n){const o=e.EpF();e.TgZ(0,"mat-icon",38),e.NdJ("click",function(){return e.CHM(o),e.oxw(2).dataModel.ApprovedResult=""}),e._uU(1,"close"),e.qZA()}}function $(n,s){if(1&n&&(e.TgZ(0,"mat-error"),e._uU(1),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.qZA()),2&n){const o=e.oxw(2);e.xp6(1),e.hij(" ",null==o.fieldsInfo.ApprovedResult?null:o.fieldsInfo.ApprovedResult.FieldTitle," is "),e.xp6(2),e.Oqu(e.lcZ(4,2,"MESSAGE.required"))}}function X(n,s){if(1&n){const o=e.EpF();e.TgZ(0,"mat-form-field",6),e.TgZ(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"textarea",41,42),e.NdJ("ngModelChange",function(l){return e.CHM(o),e.oxw().dataModel.ApprovedResult=l}),e.qZA(),e.YNc(5,V,2,0,"mat-icon",9),e.TgZ(6,"mat-icon",10),e._uU(7,"mode_edit"),e.qZA(),e.TgZ(8,"mat-hint",11),e._uU(9),e.qZA(),e.YNc(10,$,5,4,"mat-error",12),e.qZA()}if(2&n){const o=e.MAs(4),t=e.oxw();e.xp6(2),e.Oqu(null==t.fieldsInfo.ApprovedResult?null:t.fieldsInfo.ApprovedResult.FieldTitle),e.xp6(1),e.s9C("placeholder",null==t.fieldsInfo.Description?null:t.fieldsInfo.Description.FieldTitle),e.Q6J("ngModel",t.dataModel.ApprovedResult),e.xp6(2),e.Q6J("ngIf",t.dataModel.ApprovedResult),e.xp6(4),e.hij("",o.value.length," / 500"),e.xp6(1),e.Q6J("ngIf",null==o.errors?null:o.errors.required)}}function z(n,s){if(1&n){const o=e.EpF();e.TgZ(0,"mat-icon",38),e.NdJ("click",function(){return e.CHM(o),e.oxw(2).dataModel.ApproveCheckDate=null}),e._uU(1,"close"),e.qZA()}}function ee(n,s){if(1&n){const o=e.EpF();e.TgZ(0,"mat-icon",38),e.NdJ("click",function(){return e.CHM(o),e.oxw(2).dataModel.ApproveCheckDate=null}),e._uU(1,"close"),e.qZA()}}function te(n,s){if(1&n){const o=e.EpF();e.TgZ(0,"mat-form-field",6),e.TgZ(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"input",43),e.NdJ("ngModelChange",function(l){return e.CHM(o),e.oxw().dataModel.ApproveCheckDate=l}),e.qZA(),e.YNc(4,z,2,0,"mat-icon",9),e.YNc(5,ee,2,0,"mat-icon",9),e._UZ(6,"mat-datepicker-toggle",44),e._UZ(7,"mat-datepicker",45,46),e.qZA()}if(2&n){const o=e.MAs(8),t=e.oxw();e.xp6(2),e.Oqu(null==t.fieldsInfo.ApproveCheckDate?null:t.fieldsInfo.ApproveCheckDate.FieldTitle),e.xp6(1),e.Q6J("matDatepicker",o)("ngModel",t.dataModel.ApproveCheckDate),e.xp6(1),e.Q6J("ngIf",t.dataModel.ApproveCheckDate&&(null==t.fieldsInfo.ApproveCheckDate?null:t.fieldsInfo.ApproveCheckDate.AccessAddField)),e.xp6(1),e.Q6J("ngIf",t.dataModel.ApproveCheckDate&&(null==t.fieldsInfo.ApproveCheckDate?null:t.fieldsInfo.ApproveCheckDate.AccessAddField)),e.xp6(1),e.Q6J("for",o)}}function oe(n,s){if(1&n){const o=e.EpF();e.TgZ(0,"mat-icon",38),e.NdJ("click",function(){return e.CHM(o),e.oxw(2).dataModel.ExpireDate=null}),e._uU(1,"close"),e.qZA()}}function ne(n,s){if(1&n){const o=e.EpF();e.TgZ(0,"mat-form-field",6),e.TgZ(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"input",47),e.NdJ("ngModelChange",function(l){return e.CHM(o),e.oxw().dataModel.ExpireDate=l}),e.qZA(),e.YNc(4,oe,2,0,"mat-icon",9),e._UZ(5,"mat-datepicker-toggle",44),e._UZ(6,"mat-datepicker",45,48),e.qZA()}if(2&n){const o=e.MAs(7),t=e.oxw();e.xp6(2),e.Oqu(null==t.fieldsInfo.ExpireDate?null:t.fieldsInfo.ExpireDate.FieldTitle),e.xp6(1),e.Q6J("matDatepicker",o)("ngModel",t.dataModel.ExpireDate),e.xp6(1),e.Q6J("ngIf",t.dataModel.ExpireDate&&(null==t.fieldsInfo.ExpireDate?null:t.fieldsInfo.ExpireDate.AccessAddField)),e.xp6(1),e.Q6J("for",o)}}function le(n,s){if(1&n){const o=e.EpF();e.TgZ(0,"div",27),e.TgZ(1,"button",49),e.NdJ("click",function(){return e.CHM(o),e.oxw().onFormCancel()}),e._UZ(2,"i",50),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"button",51),e.NdJ("click",function(){return e.CHM(o),e.oxw().onFormSubmit()}),e._UZ(6,"i",52),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.qZA()}if(2&n){e.oxw();const o=e.MAs(1);e.xp6(3),e.hij(" ",e.lcZ(4,3,"ACTION.CANCEL")," "),e.xp6(2),e.Q6J("disabled",!o.form.valid),e.xp6(2),e.hij(" ",e.lcZ(8,5,"ACTION.SAVE")," ")}}let ie=(()=>{class n{constructor(o,t,l,r,E,ae,re,se,_e){this.data=o,this.dialogRef=t,this.coreEnumService=l,this.coreUserClaimContentService=r,this.publicHelper=E,this.cmsToastrService=ae,this.cdr=re,this.translate=se,this.tokenHelper=_e,this.requestLinkUserClaimTypeId=0,this.fieldsInfo=new Map,this.selectFileTypeMainImage=["jpg","jpeg","png"],this.appLanguage="fa",this.loading=new M.O,this.dataModelResult=new i.y$4,this.dataModel=new i.NQc,this.tokenInfo=new i.OdC,this.ProfessionalData=!1,this.formInfo=new i.LEF,this.dataModelEnumRecordStatusResult=new i.y$4,this.fileManagerOpenForm=!1,this.loading.cdr=this.cdr,o&&(this.requestLinkUserClaimTypeId=+o.LinkUserClaimTypeId||0),this.requestLinkUserClaimTypeId>0&&(this.dataModel.LinkUserClaimTypeId=this.requestLinkUserClaimTypeId),this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig(),this.tokenHelper.getCurrentToken().then(U=>{this.tokenInfo=U,!this.tokenInfo.UserAccessAdminAllowToProfessionalData&&this.tokenInfo.UserAccessAdminAllowToAllData?(this.dataModel.LinkUserId=this.tokenInfo.UserId,this.dataModel.LinkSiteId=this.tokenInfo.SiteId,this.ProfessionalData=!0):this.ProfessionalData=!1}),this.cmsApiStoreSubscribe=this.tokenHelper.getCurrentTokenOnChange().subscribe(U=>{this.tokenInfo=U,!this.tokenInfo.UserAccessAdminAllowToProfessionalData&&this.tokenInfo.UserAccessAdminAllowToAllData?(this.dataModel.LinkUserId=this.tokenInfo.UserId,this.dataModel.LinkSiteId=this.tokenInfo.SiteId,this.ProfessionalData=!0):this.ProfessionalData=!1})}ngOnInit(){this.formInfo.FormTitle="\u0627\u0636\u0627\u0641\u0647 \u06a9\u0631\u062f\u0646  ",this.getEnumRecordStatus(),this.DataGetAccess()}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}DataGetAccess(){var o=this;this.coreUserClaimContentService.ServiceViewModel().subscribe(function(){var t=(0,Z.Z)(function*(l){l.IsSuccess?o.fieldsInfo=o.publicHelper.fieldInfoConvertor(l.Access):o.cmsToastrService.typeErrorGetAccess(l.ErrorMessage)});return function(l){return t.apply(this,arguments)}}(),t=>{this.cmsToastrService.typeErrorGetAccess(t)})}getEnumRecordStatus(){var o=this;return(0,Z.Z)(function*(){o.dataModelEnumRecordStatusResult=yield o.publicHelper.getEnumRecordStatus()})()}DataAddContent(){this.formInfo.FormAlert=this.translate.instant("MESSAGE.sending_information_to_the_server"),this.formInfo.FormError="";const o=this.constructor.name+"main";this.loading.Start(o),this.coreUserClaimContentService.ServiceAdd(this.dataModel).subscribe(t=>{this.formInfo.FormSubmitAllow=!0,this.dataModelResult=t,t.IsSuccess?(this.formInfo.FormAlert=this.translate.instant("MESSAGE.registration_completed_successfully"),this.cmsToastrService.typeSuccessAdd(),this.dialogRef.close({dialogChangedDate:!0})):(this.formInfo.FormAlert="\u0628\u0631\u0631\u0648\u0632 \u062e\u0637\u0627",this.formInfo.FormError=t.ErrorMessage,this.cmsToastrService.typeErrorMessage(t.ErrorMessage)),this.loading.Stop(o)},t=>{this.formInfo.FormSubmitAllow=!0,this.cmsToastrService.typeError(t),this.loading.Stop(o)})}onActionFileSelected(o){this.dataModel.LinkFileContentId=o.id,this.dataModel.LinkFileContentIdSrc=o.downloadLinksrc}onActionSelectUser(o){!o||o.Id<=0?this.cmsToastrService.typeErrorMessage("\u06a9\u0627\u0631\u0628\u0631 \u0631\u0627 \u0645\u0634\u062e\u0635 \u06a9\u0646\u06cc\u062f","\u06a9\u0627\u0631\u0628\u0631  \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0645\u0634\u062e\u0635 \u0646\u06cc\u0633\u062a"):this.dataModel.LinkUserId=o.Id}onActionSelectSite(o){!o||o.Id<=0?this.cmsToastrService.typeErrorMessage("\u0633\u0627\u06cc\u062a \u0631\u0627 \u0645\u0634\u062e\u0635 \u06a9\u0646\u06cc\u062f","\u0633\u0627\u06cc\u062a  \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0645\u0634\u062e\u0635 \u0646\u06cc\u0633\u062a"):this.dataModel.LinkSiteId=o.Id}onActionSelectClaimType(o){!o||o.Id<=0?this.cmsToastrService.typeErrorMessage("\u062f\u0633\u062a\u0647 \u0631\u0627 \u0645\u0634\u062e\u0635 \u06a9\u0646\u06cc\u062f","\u0646\u0648\u0639 \u0645\u062f\u0627\u0631\u06a9 \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0645\u0634\u062e\u0635 \u0646\u06cc\u0633\u062a"):this.dataModel.LinkUserClaimTypeId=o.Id}onFormSubmit(){!this.formGroup.valid||(this.formInfo.FormSubmitAllow=!1,this.DataAddContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}}return n.\u0275fac=function(o){return new(o||n)(e.Y36(p.WI),e.Y36(p.so),e.Y36(i.FLW),e.Y36(i.qlG),e.Y36(O.i),e.Y36(L.e),e.Y36(e.sBO),e.Y36(T.sK),e.Y36(S.v))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-core-userclaimcontent-add"]],viewQuery:function(o,t){if(1&o&&e.Gf(g,5),2&o){let l;e.iGM(l=e.CRH())&&(t.formGroup=l.first)}},decls:59,vars:40,consts:[[3,"ngSubmit"],["vform","ngForm"],[1,"ntk-cms-html-card-header"],[1,"ntk-cms-html-card-body"],[3,"options"],["class","ntk-full-width",4,"ngIf"],[1,"ntk-full-width"],["matInput","","name","dataModel.TitleResourceLanguage","type","text","minlength","3","maxlength","100","required","",3,"ngModel","placeholder","disabled","ngModelChange"],["TitleResourceLanguage",""],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matSuffix",""],["align","end"],[4,"ngIf"],[3,"optionSelectForce","optionPlaceholder","optionDisabled","optionChange",4,"ngIf"],[3,"optionSelectForce","optionPlaceholder","optionDisabled","optionChange"],[1,"mb-3"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","50","width","50",3,"src",4,"ngIf"],[1,"mb-9"],[3,"click"],["matInput","","name","dataModel.LinkFileContentId","type","text","placeholder","\u0634\u0646\u0627\u0633\u0647 \u0641\u0627\u06cc\u0644 \u0627\u0635\u0644\u06cc","autocomplete","off",3,"ngModel","ngModelChange","click"],["LinkFileContentId",""],["matSuffix","",3,"click"],[3,"language","isPopup","openForm","tree","openFilemanagerButtonLabelKey","openDirectUploadView","selectFileType","openFilemanagerButtonView","itemSelected","openFormChange"],["matInput","","name","dataModel.Description","type","text","minlength","1","maxlength","500","rows","0",3,"ngModel","placeholder","ngModelChange"],["Description",""],["name","dataModel.IsApproved",3,"ngModel","disabled","ngModelChange",4,"ngIf"],[1,"ntk-cms-html-card-message"],[1,"form-actions"],[1,"form-text","text-muted"],[1,"form-text","text-muted","danger"],[1,"ntk-cms-html-card-footer"],["class","form-actions",4,"ngIf"],["name","dataModel.RecordStatus",3,"placeholder","ngModel","panelClass","ngModelChange"],["RecordStatus","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["matInput","","name","dataModel.Title","type","text","minlength","0","maxlength","100",3,"ngModel","placeholder","ngModelChange"],["Title",""],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["aria-hidden","","height","50","width","50",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],["name","dataModel.IsApproved",3,"ngModel","disabled","ngModelChange"],["matInput","","name","dataModel.ApprovedResult","type","text","minlength","0","maxlength","500","rows","5",3,"ngModel","placeholder","ngModelChange"],["ApprovedResult",""],["matInput","","name","dataModel.ApproveCheckDate",3,"matDatepicker","ngModel","ngModelChange"],["matSuffix","",3,"for"],["touchUi",""],["ApproveCheckDate",""],["matInput","","name","dataModel.ExpireDate",3,"matDatepicker","ngModel","ngModelChange"],["ExpireDate",""],["type","button",1,"btn","btn-light",3,"click"],[1,"ft-x"],["type","submit",1,"btn","btn-success",3,"disabled","click"],[1,"fa","fa-check-square-o"]],template:function(o,t){if(1&o&&(e.TgZ(0,"form",0,1),e.NdJ("ngSubmit",function(){return t.onFormSubmit()}),e.TgZ(2,"div",2),e._uU(3),e.qZA(),e.TgZ(4,"div",3),e._UZ(5,"app-progress-spinner",4),e.YNc(6,u,8,8,"mat-form-field",5),e.YNc(7,v,11,6,"mat-form-field",5),e.TgZ(8,"mat-form-field",6),e.TgZ(9,"mat-label"),e._uU(10),e.qZA(),e.TgZ(11,"input",7,8),e.NdJ("ngModelChange",function(r){return t.dataModel.TitleResourceLanguage=r}),e.qZA(),e.YNc(13,w,2,0,"mat-icon",9),e.TgZ(14,"mat-icon",10),e._uU(15,"mode_edit"),e.qZA(),e.TgZ(16,"mat-hint",11),e._uU(17),e.qZA(),e.YNc(18,Q,5,4,"mat-error",12),e.qZA(),e.YNc(19,W,1,3,"app-cms-user-selector",13),e.YNc(20,K,1,3,"app-cms-site-selector",13),e.TgZ(21,"app-core-userclaimtype-selector",14),e.NdJ("optionChange",function(r){return t.onActionSelectClaimType(r)}),e.qZA(),e.TgZ(22,"div",15),e.YNc(23,B,2,3,"img",16),e.qZA(),e.TgZ(24,"div",17),e.TgZ(25,"mat-form-field",6),e.TgZ(26,"mat-label",18),e.NdJ("click",function(){return t.fileManagerOpenForm=!0}),e._uU(27,"\u0641\u0627\u06cc\u0644 \u0645\u062f\u0627\u0631\u06a9 "),e.qZA(),e.TgZ(28,"input",19,20),e.NdJ("ngModelChange",function(r){return t.dataModel.LinkFileContentId=r})("click",function(){return t.fileManagerOpenForm=!0}),e.qZA(),e.YNc(30,Y,2,0,"mat-icon",9),e.TgZ(31,"mat-icon",21),e.NdJ("click",function(){return t.fileManagerOpenForm=!0}),e._uU(32,"mode_edit"),e.qZA(),e.qZA(),e.TgZ(33,"cms-file-manager",22),e.NdJ("itemSelected",function(r){return t.onActionFileSelected(r)})("openFormChange",function(r){return t.fileManagerOpenForm=r}),e.qZA(),e.qZA(),e.TgZ(34,"mat-form-field",6),e.TgZ(35,"mat-label"),e._uU(36),e.qZA(),e.TgZ(37,"textarea",23,24),e.NdJ("ngModelChange",function(r){return t.dataModel.Description=r}),e.qZA(),e.YNc(39,H,2,0,"mat-icon",9),e.TgZ(40,"mat-icon",10),e._uU(41,"mode_edit"),e.qZA(),e.TgZ(42,"mat-hint",11),e._uU(43),e.qZA(),e.YNc(44,G,5,4,"mat-error",12),e.qZA(),e._UZ(45,"hr"),e.TgZ(46,"div",6),e.YNc(47,j,2,3,"mat-slide-toggle",25),e.qZA(),e.YNc(48,X,11,6,"mat-form-field",5),e.YNc(49,te,9,6,"mat-form-field",5),e.YNc(50,ne,8,5,"mat-form-field",5),e.qZA(),e.TgZ(51,"div",26),e.TgZ(52,"div",27),e.TgZ(53,"small",28),e._uU(54),e.qZA(),e.TgZ(55,"small",29),e._uU(56),e.qZA(),e.qZA(),e.qZA(),e.TgZ(57,"div",30),e.YNc(58,le,9,7,"div",31),e.qZA(),e.qZA()),2&o){const l=e.MAs(12),r=e.MAs(38);e.xp6(3),e.hij(" ",t.formInfo.FormTitle," "),e.xp6(2),e.Q6J("options",t.loading),e.xp6(1),e.Q6J("ngIf",t.ProfessionalData),e.xp6(1),e.Q6J("ngIf",t.ProfessionalData),e.xp6(3),e.Oqu(null==t.fieldsInfo.TitleResourceLanguage?null:t.fieldsInfo.TitleResourceLanguage.FieldTitle),e.xp6(1),e.s9C("placeholder",null==t.fieldsInfo.Title?null:t.fieldsInfo.Title.FieldTitle),e.Q6J("ngModel",t.dataModel.TitleResourceLanguage)("disabled",!(null!=t.fieldsInfo.TitleResourceLanguage&&t.fieldsInfo.TitleResourceLanguage.AccessAddField)),e.xp6(2),e.Q6J("ngIf",t.dataModel.TitleResourceLanguage),e.xp6(4),e.hij("",l.value.length," / 100"),e.xp6(1),e.Q6J("ngIf",null==l.errors?null:l.errors.required),e.xp6(1),e.Q6J("ngIf",t.ProfessionalData),e.xp6(1),e.Q6J("ngIf",t.ProfessionalData),e.xp6(1),e.Q6J("optionSelectForce",t.dataModel.LinkUserClaimTypeId)("optionPlaceholder","\u062f\u0633\u062a\u0647 \u0645\u062f\u0627\u0631\u06a9")("optionDisabled",!(null!=t.fieldsInfo.LinkUserClaimTypeId&&t.fieldsInfo.LinkUserClaimTypeId.AccessAddField)||t.requestLinkUserClaimTypeId&&t.requestLinkUserClaimTypeId>0),e.xp6(2),e.Q6J("ngIf",(null==t.dataModel||null==t.dataModel.LinkFileContentIdSrc?null:t.dataModel.LinkFileContentIdSrc.length)>0),e.xp6(5),e.Q6J("ngModel",t.dataModel.LinkFileContentId),e.xp6(2),e.Q6J("ngIf",t.dataModel.LinkFileContentId),e.xp6(3),e.Q6J("language",t.appLanguage)("isPopup",!0)("openForm",t.fileManagerOpenForm)("tree",t.fileManagerTree)("openFilemanagerButtonLabelKey","select")("openDirectUploadView",!0)("selectFileType",t.selectFileTypeMainImage)("openFilemanagerButtonView",!1),e.xp6(3),e.Oqu(null==t.fieldsInfo.Description?null:t.fieldsInfo.Description.FieldTitle),e.xp6(1),e.s9C("placeholder",null==t.fieldsInfo.Description?null:t.fieldsInfo.Description.FieldTitle),e.Q6J("ngModel",t.dataModel.Description),e.xp6(2),e.Q6J("ngIf",t.dataModel.Description),e.xp6(4),e.hij("",r.value.length," / 500"),e.xp6(1),e.Q6J("ngIf",null==r.errors?null:r.errors.required),e.xp6(3),e.Q6J("ngIf",null==t.fieldsInfo.IsApproved?null:t.fieldsInfo.IsApproved.AccessWatchField),e.xp6(1),e.Q6J("ngIf",t.ProfessionalData),e.xp6(1),e.Q6J("ngIf",(null==t.fieldsInfo.ApproveCheckDate?null:t.fieldsInfo.ApproveCheckDate.AccessWatchField)&&t.ProfessionalData),e.xp6(1),e.Q6J("ngIf",(null==t.fieldsInfo.ExpireDate?null:t.fieldsInfo.ExpireDate.AccessWatchField)&&t.ProfessionalData),e.xp6(4),e.hij("",t.formInfo.FormAlert," "),e.xp6(2),e.hij("",t.formInfo.FormError," "),e.xp6(2),e.Q6J("ngIf",t.formInfo.FormSubmitAllow)}},directives:[c._Y,c.JL,c.F,I.O,h.O5,C.KE,D.gD,c.JJ,c.On,h.sg,k.ey,C.bx,C.TO,C.hX,P.Nt,c.Fj,c.wO,c.nD,R.Hw,C.R9,c.Q7,y.g,J.P,q.b,b.HG,N.Rr,A.hl,A.nW,A.Mq],pipes:[T.X$,m.v],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:yellow}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:black}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}"]}),n})()},3193:(de,F,a)=>{a.d(F,{D:()=>ie});var Z=a(8239),i=a(7977),p=a(8485),M=a(656),e=a(9724),O=a(3029),L=a(2607),T=a(4817),S=a(727),c=a(1659),I=a(5738),h=a(1048),C=a(5691),D=a(1450),k=a(1531),P=a(8904),R=a(4848),y=a(3181),J=a(6599),q=a(6014),b=a(8572),N=a(1582),A=a(38),m=a(1418);const g=["vform"];function _(n,s){if(1&n&&(e.TgZ(0,"mat-option",37),e._uU(1),e.qZA()),2&n){const o=s.$implicit;e.Q6J("value",o.Value),e.xp6(1),e.Oqu(o.Description)}}function d(n,s){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," RecordStatus is "),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.qZA()),2&n&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"MESSAGE.required")))}function u(n,s){if(1&n){const o=e.EpF();e.TgZ(0,"mat-form-field",6),e.TgZ(1,"mat-select",34,35),e.NdJ("ngModelChange",function(l){return e.CHM(o),e.oxw().dataModel.RecordStatus=l}),e.YNc(3,_,2,2,"mat-option",36),e.qZA(),e.TgZ(4,"mat-hint",12),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.YNc(7,d,5,3,"mat-error",13),e.qZA()}if(2&n){const o=e.MAs(2),t=e.oxw();e.xp6(1),e.s9C("placeholder",null==t.fieldsInfo.RecordStatus?null:t.fieldsInfo.RecordStatus.FieldTitle),e.MGl("panelClass","recordStatus-",t.dataModel.RecordStatus,""),e.Q6J("ngModel",t.dataModel.RecordStatus),e.xp6(2),e.Q6J("ngForOf",t.dataModelEnumRecordStatusResult.ListItems),e.xp6(2),e.Oqu(e.lcZ(6,6,"TITLE.SELECT_STATUS")),e.xp6(2),e.Q6J("ngIf",null==o.errors?null:o.errors.required)}}function f(n,s){if(1&n){const o=e.EpF();e.TgZ(0,"mat-icon",40),e.NdJ("click",function(){return e.CHM(o),e.oxw(2).dataModel.Title=""}),e._uU(1,"close"),e.qZA()}}function x(n,s){if(1&n&&(e.TgZ(0,"mat-error"),e._uU(1),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.qZA()),2&n){const o=e.oxw(2);e.xp6(1),e.hij(" ",null==o.fieldsInfo.Title?null:o.fieldsInfo.Title.FieldTitle," is "),e.xp6(2),e.Oqu(e.lcZ(4,2,"MESSAGE.required"))}}function v(n,s){if(1&n){const o=e.EpF();e.TgZ(0,"mat-form-field",6),e.TgZ(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"input",38,39),e.NdJ("ngModelChange",function(l){return e.CHM(o),e.oxw().dataModel.Title=l}),e.qZA(),e.YNc(5,f,2,0,"mat-icon",10),e.TgZ(6,"mat-icon",11),e._uU(7,"mode_edit"),e.qZA(),e.TgZ(8,"mat-hint",12),e._uU(9),e.qZA(),e.YNc(10,x,5,4,"mat-error",13),e.qZA()}if(2&n){const o=e.MAs(4),t=e.oxw();e.xp6(2),e.Oqu(null==t.fieldsInfo.Title?null:t.fieldsInfo.Title.FieldTitle),e.xp6(1),e.s9C("placeholder",null==t.fieldsInfo.Title?null:t.fieldsInfo.Title.FieldTitle),e.Q6J("ngModel",t.dataModel.Title),e.xp6(2),e.Q6J("ngIf",t.dataModel.Title),e.xp6(4),e.hij("",o.value.length," / 100"),e.xp6(1),e.Q6J("ngIf",null==o.errors?null:o.errors.required)}}function w(n,s){if(1&n){const o=e.EpF();e.TgZ(0,"mat-icon",40),e.NdJ("click",function(){return e.CHM(o),e.oxw().dataModel.TitleResourceLanguage=""}),e._uU(1,"close"),e.qZA()}}function Q(n,s){if(1&n&&(e.TgZ(0,"mat-error"),e._uU(1),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.qZA()),2&n){const o=e.oxw();e.xp6(1),e.hij(" ",null==o.fieldsInfo.TitleResourceLanguage?null:o.fieldsInfo.TitleResourceLanguage.FieldTitle," is "),e.xp6(2),e.Oqu(e.lcZ(4,2,"MESSAGE.required"))}}function W(n,s){if(1&n){const o=e.EpF();e.TgZ(0,"app-cms-user-selector",41),e.NdJ("optionChange",function(l){return e.CHM(o),e.oxw().onActionSelectUser(l)}),e.qZA()}if(2&n){const o=e.oxw();e.Q6J("optionSelectForce",o.dataModel.LinkUserId)("optionPlaceholder","\u06a9\u0627\u0631\u0628\u0631")("optionDisabled",!(null!=o.fieldsInfo.LinkUserId&&o.fieldsInfo.LinkUserId.AccessEditField))}}function K(n,s){if(1&n){const o=e.EpF();e.TgZ(0,"app-cms-site-selector",41),e.NdJ("optionChange",function(l){return e.CHM(o),e.oxw().onActionSelectSite(l)}),e.qZA()}if(2&n){const o=e.oxw();e.Q6J("optionSelectForce",o.dataModel.LinkSiteId)("optionPlaceholder","\u0633\u0627\u06cc\u062a")("optionDisabled",!(null!=o.fieldsInfo.LinkSiteId&&o.fieldsInfo.LinkSiteId.AccessEditField))}}function B(n,s){if(1&n){const o=e.EpF();e.TgZ(0,"app-core-userclaimtype-selector",41),e.NdJ("optionChange",function(l){return e.CHM(o),e.oxw().onActionSelectClaimType(l)}),e.qZA()}if(2&n){const o=e.oxw();e.Q6J("optionSelectForce",o.dataModel.LinkUserClaimTypeId)("optionPlaceholder","\u062f\u0633\u062a\u0647 \u0645\u062f\u0627\u0631\u06a9")("optionDisabled",!(null!=o.fieldsInfo.LinkUserClaimTypeId&&o.fieldsInfo.LinkUserClaimTypeId.AccessEditField))}}function Y(n,s){if(1&n&&(e._UZ(0,"img",42),e.ALo(1,"cmsthumbnail")),2&n){const o=e.oxw();e.s9C("src",e.lcZ(1,1,o.dataModel.LinkFileContentIdSrc),e.LSH)}}function H(n,s){if(1&n){const o=e.EpF();e.TgZ(0,"mat-icon",40),e.NdJ("click",function(){return e.CHM(o),e.oxw().dataModel.LinkFileContentId=null}),e._uU(1,"close"),e.qZA()}}function G(n,s){if(1&n){const o=e.EpF();e.TgZ(0,"mat-icon",40),e.NdJ("click",function(){return e.CHM(o),e.oxw().dataModel.Description=""}),e._uU(1,"close"),e.qZA()}}function j(n,s){if(1&n&&(e.TgZ(0,"mat-error"),e._uU(1),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.qZA()),2&n){const o=e.oxw();e.xp6(1),e.hij(" ",null==o.fieldsInfo.Description?null:o.fieldsInfo.Description.FieldTitle," is "),e.xp6(2),e.Oqu(e.lcZ(4,2,"MESSAGE.required"))}}function V(n,s){if(1&n){const o=e.EpF();e.TgZ(0,"mat-slide-toggle",43),e.NdJ("ngModelChange",function(l){return e.CHM(o),e.oxw().dataModel.IsApproved=l}),e._uU(1),e.qZA()}if(2&n){const o=e.oxw();e.Q6J("ngModel",o.dataModel.IsApproved)("disabled",!(null!=o.fieldsInfo.IsApproved&&o.fieldsInfo.IsApproved.AccessEditField)),e.xp6(1),e.hij(" ",null==o.fieldsInfo.IsApproved?null:o.fieldsInfo.IsApproved.FieldTitle," ")}}function $(n,s){if(1&n){const o=e.EpF();e.TgZ(0,"mat-icon",40),e.NdJ("click",function(){return e.CHM(o),e.oxw().dataModel.ApprovedResult=""}),e._uU(1,"close"),e.qZA()}}function X(n,s){if(1&n&&(e.TgZ(0,"mat-error"),e._uU(1),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.qZA()),2&n){const o=e.oxw();e.xp6(1),e.hij(" ",null==o.fieldsInfo.ApprovedResult?null:o.fieldsInfo.ApprovedResult.FieldTitle," is "),e.xp6(2),e.Oqu(e.lcZ(4,2,"MESSAGE.required"))}}function z(n,s){if(1&n){const o=e.EpF();e.TgZ(0,"mat-icon",40),e.NdJ("click",function(){return e.CHM(o),e.oxw(2).dataModel.ApproveCheckDate=null}),e._uU(1,"close"),e.qZA()}}function ee(n,s){if(1&n){const o=e.EpF();e.TgZ(0,"mat-icon",40),e.NdJ("click",function(){return e.CHM(o),e.oxw(2).dataModel.ApproveCheckDate=null}),e._uU(1,"close"),e.qZA()}}function te(n,s){if(1&n){const o=e.EpF();e.TgZ(0,"mat-form-field",6),e.TgZ(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"input",44),e.NdJ("ngModelChange",function(l){return e.CHM(o),e.oxw().dataModel.ApproveCheckDate=l}),e.qZA(),e.YNc(4,z,2,0,"mat-icon",10),e.YNc(5,ee,2,0,"mat-icon",10),e._UZ(6,"mat-datepicker-toggle",45),e._UZ(7,"mat-datepicker",46,47),e.qZA()}if(2&n){const o=e.MAs(8),t=e.oxw();e.xp6(2),e.Oqu(null==t.fieldsInfo.ApproveCheckDate?null:t.fieldsInfo.ApproveCheckDate.FieldTitle),e.xp6(1),e.Q6J("matDatepicker",o)("ngModel",t.dataModel.ApproveCheckDate),e.xp6(1),e.Q6J("ngIf",t.dataModel.ApproveCheckDate&&(null==t.fieldsInfo.ApproveCheckDate?null:t.fieldsInfo.ApproveCheckDate.AccessEditField)),e.xp6(1),e.Q6J("ngIf",t.dataModel.ApproveCheckDate&&(null==t.fieldsInfo.ApproveCheckDate?null:t.fieldsInfo.ApproveCheckDate.AccessEditField)),e.xp6(1),e.Q6J("for",o)}}function oe(n,s){if(1&n){const o=e.EpF();e.TgZ(0,"mat-icon",40),e.NdJ("click",function(){return e.CHM(o),e.oxw(2).dataModel.ExpireDate=null}),e._uU(1,"close"),e.qZA()}}function ne(n,s){if(1&n){const o=e.EpF();e.TgZ(0,"mat-form-field",6),e.TgZ(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"input",48),e.NdJ("ngModelChange",function(l){return e.CHM(o),e.oxw().dataModel.ExpireDate=l}),e.qZA(),e.YNc(4,oe,2,0,"mat-icon",10),e._UZ(5,"mat-datepicker-toggle",45),e._UZ(6,"mat-datepicker",46,49),e.qZA()}if(2&n){const o=e.MAs(7),t=e.oxw();e.xp6(2),e.Oqu(null==t.fieldsInfo.ExpireDate?null:t.fieldsInfo.ExpireDate.FieldTitle),e.xp6(1),e.Q6J("matDatepicker",o)("ngModel",t.dataModel.ExpireDate),e.xp6(1),e.Q6J("ngIf",t.dataModel.ExpireDate&&(null==t.fieldsInfo.ExpireDate?null:t.fieldsInfo.ExpireDate.AccessEditField)),e.xp6(1),e.Q6J("for",o)}}function le(n,s){if(1&n){const o=e.EpF();e.TgZ(0,"div",29),e.TgZ(1,"button",50),e.NdJ("click",function(){return e.CHM(o),e.oxw().onFormCancel()}),e._UZ(2,"i",51),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"button",52),e.NdJ("click",function(){return e.CHM(o),e.oxw().onFormSubmit()}),e._UZ(6,"i",53),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.qZA()}if(2&n){e.oxw();const o=e.MAs(1);e.xp6(3),e.hij(" ",e.lcZ(4,3,"ACTION.CANCEL")," "),e.xp6(2),e.Q6J("disabled",!o.form.valid),e.xp6(2),e.hij(" ",e.lcZ(8,5,"ACTION.SAVE")," ")}}let ie=(()=>{class n{constructor(o,t,l,r,E,ae,re,se,_e){this.data=o,this.dialogRef=t,this.coreEnumService=l,this.coreUserClaimContentService=r,this.publicHelper=E,this.cmsToastrService=ae,this.cdr=re,this.translate=se,this.tokenHelper=_e,this.requestId=0,this.fieldsInfo=new Map,this.selectFileTypeMainImage=["jpg","jpeg","png"],this.tokenInfo=new i.OdC,this.ProfessionalData=!1,this.appLanguage="fa",this.loading=new M.O,this.dataModelResult=new i.y$4,this.dataModel=new i.NQc,this.formInfo=new i.LEF,this.dataModelEnumRecordStatusResult=new i.y$4,this.fileManagerOpenForm=!1,this.loading.cdr=this.cdr,o&&(this.requestId=+o.id||0),this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig(),this.tokenHelper.getCurrentToken().then(U=>{this.tokenInfo=U,!this.tokenInfo.UserAccessAdminAllowToProfessionalData&&this.tokenInfo.UserAccessAdminAllowToAllData?(this.dataModel.LinkUserId=this.tokenInfo.UserId,this.dataModel.LinkSiteId=this.tokenInfo.SiteId,this.ProfessionalData=!0):this.ProfessionalData=!1}),this.cmsApiStoreSubscribe=this.tokenHelper.getCurrentTokenOnChange().subscribe(U=>{this.tokenInfo=U,!this.tokenInfo.UserAccessAdminAllowToProfessionalData&&this.tokenInfo.UserAccessAdminAllowToAllData?(this.dataModel.LinkUserId=this.tokenInfo.UserId,this.dataModel.LinkSiteId=this.tokenInfo.SiteId,this.ProfessionalData=!0):this.ProfessionalData=!1})}ngOnInit(){if(!(this.requestId>0))return this.cmsToastrService.typeErrorComponentAction(),void this.dialogRef.close({dialogChangedDate:!1});this.formInfo.FormTitle="\u0648\u06cc\u0631\u0627\u06cc\u0634  ",this.DataGetOneContent(),this.getEnumRecordStatus()}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}getEnumRecordStatus(){var o=this;return(0,Z.Z)(function*(){o.dataModelEnumRecordStatusResult=yield o.publicHelper.getEnumRecordStatus()})()}DataGetOneContent(){if(this.requestId<=0)return void this.cmsToastrService.typeErrorEditRowIsNull();this.formInfo.FormAlert="\u062f\u0631 \u062f\u0631\u06cc\u0627\u0641\u062a \u0627\u0631\u0633\u0627\u0644 \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0627\u0632 \u0633\u0631\u0648\u0631",this.formInfo.FormError="";const o=this.constructor.name+"main";this.loading.Start(o),this.coreUserClaimContentService.setAccessLoad(),this.coreUserClaimContentService.ServiceGetOneById(this.requestId).subscribe(t=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(t.Access),this.dataModel=t.Item,t.IsSuccess?(this.formInfo.FormTitle=this.formInfo.FormTitle+" "+t.Item.Id,this.formInfo.FormAlert=""):(this.formInfo.FormAlert="\u0628\u0631\u0631\u0648\u0632 \u062e\u0637\u0627",this.formInfo.FormError=t.ErrorMessage,this.cmsToastrService.typeErrorMessage(t.ErrorMessage)),this.loading.Stop(o)},t=>{this.cmsToastrService.typeError(t),this.loading.Stop(o)})}DataEditContent(){this.formInfo.FormAlert=this.translate.instant("MESSAGE.sending_information_to_the_server"),this.formInfo.FormError="";const o=this.constructor.name+"main";this.loading.Start(o),this.coreUserClaimContentService.ServiceEdit(this.dataModel).subscribe(t=>{this.formInfo.FormSubmitAllow=!0,this.dataModelResult=t,t.IsSuccess?(this.formInfo.FormAlert=this.translate.instant("MESSAGE.registration_completed_successfully"),this.cmsToastrService.typeSuccessEdit(),this.dialogRef.close({dialogChangedDate:!0})):(this.formInfo.FormAlert="\u0628\u0631\u0631\u0648\u0632 \u062e\u0637\u0627",this.formInfo.FormError=t.ErrorMessage,this.cmsToastrService.typeErrorMessage(t.ErrorMessage)),this.loading.Stop(o)},t=>{this.formInfo.FormSubmitAllow=!0,this.cmsToastrService.typeError(t),this.loading.Stop(o)})}onActionFileSelected(o){this.dataModel.LinkFileContentId=o.id,this.dataModel.LinkFileContentIdSrc=o.downloadLinksrc}onActionSelectUser(o){!o||o.Id<=0?this.cmsToastrService.typeErrorMessage("\u06a9\u0627\u0631\u0628\u0631 \u0631\u0627 \u0645\u0634\u062e\u0635 \u06a9\u0646\u06cc\u062f","\u06a9\u0627\u0631\u0628\u0631  \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0645\u0634\u062e\u0635 \u0646\u06cc\u0633\u062a"):this.dataModel.LinkUserId=o.Id}onActionSelectSite(o){!o||o.Id<=0?this.cmsToastrService.typeErrorMessage("\u0633\u0627\u06cc\u062a \u0631\u0627 \u0645\u0634\u062e\u0635 \u06a9\u0646\u06cc\u062f","\u0633\u0627\u06cc\u062a  \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0645\u0634\u062e\u0635 \u0646\u06cc\u0633\u062a"):this.dataModel.LinkSiteId=o.Id}onActionSelectClaimType(o){!o||o.Id<=0?this.cmsToastrService.typeErrorMessage("\u062f\u0633\u062a\u0647 \u0631\u0627 \u0645\u0634\u062e\u0635 \u06a9\u0646\u06cc\u062f","\u0646\u0648\u0639 \u0645\u062f\u0627\u0631\u06a9 \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0645\u0634\u062e\u0635 \u0646\u06cc\u0633\u062a"):this.dataModel.LinkUserClaimTypeId=o.Id}onFormSubmit(){!this.formGroup.valid||(this.formInfo.FormSubmitAllow=!1,this.DataEditContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}}return n.\u0275fac=function(o){return new(o||n)(e.Y36(p.WI),e.Y36(p.so),e.Y36(i.FLW),e.Y36(i.qlG),e.Y36(O.i),e.Y36(L.e),e.Y36(e.sBO),e.Y36(T.sK),e.Y36(S.v))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-core-userclaim-edit"]],viewQuery:function(o,t){if(1&o&&e.Gf(g,5),2&o){let l;e.iGM(l=e.CRH())&&(t.formGroup=l.first)}},decls:73,vars:46,consts:[[3,"ngSubmit"],["vform","ngForm"],[1,"ntk-cms-html-card-header"],[1,"ntk-cms-html-card-body"],[3,"options"],["class","ntk-full-width",4,"ngIf"],[1,"ntk-full-width"],["matInput","","name","dataModel.TitleML","type","text",3,"ngModel","disabled","ngModelChange"],["matInput","","name","dataModel.TitleResourceLanguage","type","text","minlength","3","maxlength","100","required","",3,"ngModel","placeholder","disabled","ngModelChange"],["TitleResourceLanguage",""],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matSuffix",""],["align","end"],[4,"ngIf"],[3,"optionSelectForce","optionPlaceholder","optionDisabled","optionChange",4,"ngIf"],[1,"mb-3"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","50","width","50",3,"src",4,"ngIf"],[1,"mb-9"],[3,"click"],["matInput","","name"," dataModel.LinkFileContentId","type","text","placeholder","\u0634\u0646\u0627\u0633\u0647 \u0641\u0627\u06cc\u0644 \u0627\u0635\u0644\u06cc","autocomplete","off",3,"ngModel","ngModelChange","click"],["LinkFileContentId",""],["matSuffix","",3,"click"],[3,"language","isPopup","openForm","tree","openFilemanagerButtonLabelKey","openDirectUploadView","selectFileType","openFilemanagerButtonView","itemSelected","openFormChange"],["matInput","","name","dataModel.Description","type","text","minlength","0","maxlength","500","rows","5",3,"ngModel","placeholder","ngModelChange"],["Description",""],["name","dataModel.IsApproved",3,"ngModel","disabled","ngModelChange",4,"ngIf"],["matInput","","name","dataModel.ApprovedResult","type","text","minlength","0","maxlength","500","rows","5",3,"ngModel","placeholder","ngModelChange"],["ApprovedResult",""],[1,"ntk-cms-html-card-message"],[1,"form-actions"],[1,"form-text","text-muted"],[1,"form-text","text-muted","danger"],[1,"ntk-cms-html-card-footer"],["class","form-actions",4,"ngIf"],["name","dataModel.RecordStatus",3,"placeholder","ngModel","panelClass","ngModelChange"],["RecordStatus","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["matInput","","name","dataModel.Title","type","text","minlength","0","maxlength","100",3,"ngModel","placeholder","ngModelChange"],["Title",""],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[3,"optionSelectForce","optionPlaceholder","optionDisabled","optionChange"],["aria-hidden","","height","50","width","50",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],["name","dataModel.IsApproved",3,"ngModel","disabled","ngModelChange"],["matInput","","name","dataModel.ApproveCheckDate",3,"matDatepicker","ngModel","ngModelChange"],["matSuffix","",3,"for"],["touchUi",""],["ApproveCheckDate",""],["matInput","","name","dataModel.ExpireDate",3,"matDatepicker","ngModel","ngModelChange"],["ExpireDate",""],["type","button",1,"btn","btn-light",3,"click"],[1,"ft-x"],["type","submit",1,"btn","btn-success",3,"disabled","click"],[1,"fa","fa-check-square-o"]],template:function(o,t){if(1&o&&(e.TgZ(0,"form",0,1),e.NdJ("ngSubmit",function(){return t.onFormSubmit()}),e.TgZ(2,"div",2),e._uU(3),e.qZA(),e.TgZ(4,"div",3),e._UZ(5,"app-progress-spinner",4),e.YNc(6,u,8,8,"mat-form-field",5),e.YNc(7,v,11,6,"mat-form-field",5),e.TgZ(8,"mat-form-field",6),e.TgZ(9,"mat-label"),e._uU(10),e.qZA(),e.TgZ(11,"input",7),e.NdJ("ngModelChange",function(r){return t.dataModel.TitleML=r}),e.qZA(),e.qZA(),e.TgZ(12,"mat-form-field",6),e.TgZ(13,"mat-label"),e._uU(14),e.qZA(),e.TgZ(15,"input",8,9),e.NdJ("ngModelChange",function(r){return t.dataModel.TitleResourceLanguage=r}),e.qZA(),e.YNc(17,w,2,0,"mat-icon",10),e.TgZ(18,"mat-icon",11),e._uU(19,"mode_edit"),e.qZA(),e.TgZ(20,"mat-hint",12),e._uU(21),e.qZA(),e.YNc(22,Q,5,4,"mat-error",13),e.qZA(),e.YNc(23,W,1,3,"app-cms-user-selector",14),e.YNc(24,K,1,3,"app-cms-site-selector",14),e.YNc(25,B,1,3,"app-core-userclaimtype-selector",14),e.TgZ(26,"div",15),e.YNc(27,Y,2,3,"img",16),e.qZA(),e.TgZ(28,"div",17),e.TgZ(29,"mat-form-field",6),e.TgZ(30,"mat-label",18),e.NdJ("click",function(){return t.fileManagerOpenForm=!0}),e._uU(31,"\u0641\u0627\u06cc\u0644 \u0645\u062f\u0627\u0631\u06a9 "),e.qZA(),e.TgZ(32,"input",19,20),e.NdJ("ngModelChange",function(r){return t.dataModel.LinkFileContentId=r})("click",function(){return t.fileManagerOpenForm=!0}),e.qZA(),e.YNc(34,H,2,0,"mat-icon",10),e.TgZ(35,"mat-icon",21),e.NdJ("click",function(){return t.fileManagerOpenForm=!0}),e._uU(36,"mode_edit"),e.qZA(),e.qZA(),e.TgZ(37,"cms-file-manager",22),e.NdJ("itemSelected",function(r){return t.onActionFileSelected(r)})("openFormChange",function(r){return t.fileManagerOpenForm=r}),e.qZA(),e.qZA(),e.TgZ(38,"mat-form-field",6),e.TgZ(39,"mat-label"),e._uU(40),e.qZA(),e.TgZ(41,"textarea",23,24),e.NdJ("ngModelChange",function(r){return t.dataModel.Description=r}),e.qZA(),e.YNc(43,G,2,0,"mat-icon",10),e.TgZ(44,"mat-icon",11),e._uU(45,"mode_edit"),e.qZA(),e.TgZ(46,"mat-hint",12),e._uU(47),e.qZA(),e.YNc(48,j,5,4,"mat-error",13),e.qZA(),e._UZ(49,"hr"),e.TgZ(50,"div",6),e.YNc(51,V,2,3,"mat-slide-toggle",25),e.qZA(),e.TgZ(52,"mat-form-field",6),e.TgZ(53,"mat-label"),e._uU(54),e.qZA(),e.TgZ(55,"textarea",26,27),e.NdJ("ngModelChange",function(r){return t.dataModel.ApprovedResult=r}),e.qZA(),e.YNc(57,$,2,0,"mat-icon",10),e.TgZ(58,"mat-icon",11),e._uU(59,"mode_edit"),e.qZA(),e.TgZ(60,"mat-hint",12),e._uU(61),e.qZA(),e.YNc(62,X,5,4,"mat-error",13),e.qZA(),e.YNc(63,te,9,6,"mat-form-field",5),e.YNc(64,ne,8,5,"mat-form-field",5),e.qZA(),e.TgZ(65,"div",28),e.TgZ(66,"div",29),e.TgZ(67,"small",30),e._uU(68),e.qZA(),e.TgZ(69,"small",31),e._uU(70),e.qZA(),e.qZA(),e.qZA(),e.TgZ(71,"div",32),e.YNc(72,le,9,7,"div",33),e.qZA(),e.qZA()),2&o){const l=e.MAs(16),r=e.MAs(42),E=e.MAs(56);e.xp6(3),e.hij(" ",t.formInfo.FormTitle," "),e.xp6(2),e.Q6J("options",t.loading),e.xp6(1),e.Q6J("ngIf",t.ProfessionalData),e.xp6(1),e.Q6J("ngIf",t.ProfessionalData),e.xp6(3),e.hij(" ",null==t.fieldsInfo.TitleML?null:t.fieldsInfo.TitleML.FieldTitle,""),e.xp6(1),e.Q6J("ngModel",t.dataModel.TitleML)("disabled",!0),e.xp6(3),e.Oqu(null==t.fieldsInfo.TitleResourceLanguage?null:t.fieldsInfo.TitleResourceLanguage.FieldTitle),e.xp6(1),e.s9C("placeholder",null==t.fieldsInfo.Title?null:t.fieldsInfo.Title.FieldTitle),e.Q6J("ngModel",t.dataModel.TitleResourceLanguage)("disabled",!(null!=t.fieldsInfo.TitleResourceLanguage&&t.fieldsInfo.TitleResourceLanguage.AccessEditField)),e.xp6(2),e.Q6J("ngIf",t.dataModel.TitleResourceLanguage),e.xp6(4),e.hij("",l.value.length," / 100"),e.xp6(1),e.Q6J("ngIf",null==l.errors?null:l.errors.required),e.xp6(1),e.Q6J("ngIf",t.ProfessionalData),e.xp6(1),e.Q6J("ngIf",t.ProfessionalData),e.xp6(1),e.Q6J("ngIf",t.ProfessionalData),e.xp6(2),e.Q6J("ngIf",(null==t.dataModel||null==t.dataModel.LinkFileContentIdSrc?null:t.dataModel.LinkFileContentIdSrc.length)>0),e.xp6(5),e.Q6J("ngModel",t.dataModel.LinkFileContentId),e.xp6(2),e.Q6J("ngIf",t.dataModel.LinkFileContentId),e.xp6(3),e.Q6J("language",t.appLanguage)("isPopup",!0)("openForm",t.fileManagerOpenForm)("tree",t.fileManagerTree)("openFilemanagerButtonLabelKey","select")("openDirectUploadView",!0)("selectFileType",t.selectFileTypeMainImage)("openFilemanagerButtonView",!1),e.xp6(3),e.Oqu(null==t.fieldsInfo.Description?null:t.fieldsInfo.Description.FieldTitle),e.xp6(1),e.s9C("placeholder",null==t.fieldsInfo.Description?null:t.fieldsInfo.Description.FieldTitle),e.Q6J("ngModel",t.dataModel.Description),e.xp6(2),e.Q6J("ngIf",t.dataModel.Description),e.xp6(4),e.hij("",r.value.length," / 500"),e.xp6(1),e.Q6J("ngIf",null==r.errors?null:r.errors.required),e.xp6(3),e.Q6J("ngIf",null==t.fieldsInfo.IsApproved?null:t.fieldsInfo.IsApproved.AccessWatchField),e.xp6(3),e.Oqu(null==t.fieldsInfo.ApprovedResult?null:t.fieldsInfo.ApprovedResult.FieldTitle),e.xp6(1),e.s9C("placeholder",null==t.fieldsInfo.Description?null:t.fieldsInfo.Description.FieldTitle),e.Q6J("ngModel",t.dataModel.ApprovedResult),e.xp6(2),e.Q6J("ngIf",t.dataModel.ApprovedResult),e.xp6(4),e.hij("",E.value.length," / 500"),e.xp6(1),e.Q6J("ngIf",null==E.errors?null:E.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.fieldsInfo.ApproveCheckDate?null:t.fieldsInfo.ApproveCheckDate.AccessWatchField),e.xp6(1),e.Q6J("ngIf",null==t.fieldsInfo.ExpireDate?null:t.fieldsInfo.ExpireDate.AccessWatchField),e.xp6(4),e.hij("",t.formInfo.FormAlert," "),e.xp6(2),e.hij("",t.formInfo.FormError," "),e.xp6(2),e.Q6J("ngIf",t.formInfo.FormSubmitAllow)}},directives:[c._Y,c.JL,c.F,I.O,h.O5,C.KE,D.gD,c.JJ,c.On,h.sg,k.ey,C.bx,C.TO,C.hX,P.Nt,c.Fj,c.wO,c.nD,R.Hw,C.R9,c.Q7,y.g,J.P,q.b,b.HG,N.Rr,A.hl,A.nW,A.Mq],pipes:[T.X$,m.v],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:yellow}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:black}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}"]}),n})()},6014:(de,F,a)=>{a.d(F,{b:()=>A});var Z=a(8239),i=a(9724),p=a(7977),M=a(1659),e=a(1927),O=a(3151),L=a(2147),T=a(1528),S=a(7969),c=a(656),I=a(5691),h=a(1048),C=a(8904),D=a(5821),k=a(1531),P=a(4848),R=a(1418);function y(m,g){if(1&m&&(i._UZ(0,"img",8),i.ALo(1,"cmsthumbnail")),2&m){const _=i.oxw();i.s9C("src",i.lcZ(1,1,_.dataModelSelect.LinkMainImageIdSrc),i.LSH)}}function J(m,g){if(1&m&&(i._UZ(0,"img",8),i.ALo(1,"cmsthumbnail")),2&m){const _=i.oxw().$implicit;i.s9C("src",i.lcZ(1,1,_.LinkMainImageIdSrc),i.LSH)}}function q(m,g){if(1&m&&(i.TgZ(0,"mat-option",9),i.YNc(1,J,2,3,"img",2),i.TgZ(2,"span"),i._uU(3),i.qZA(),i.qZA()),2&m){const _=g.$implicit,d=i.oxw();i.Q6J("value",_)("disabled",d.optionDisabled),i.xp6(1),i.Q6J("ngIf",_.LinkMainImageIdSrc),i.xp6(2),i.Oqu(d.displayOption(_))}}function b(m,g){if(1&m){const _=i.EpF();i.TgZ(0,"mat-icon",10),i.NdJ("click",function(){return i.CHM(_),i.oxw().onActionSelectClear()}),i._uU(1,"close"),i.qZA()}}const N=["*"];let A=(()=>{class m{constructor(_,d,u){this.coreEnumService=_,this.cdr=d,this.categoryService=u,this.dataModelResult=new p.y$4,this.dataModelSelect=new p.OoK,this.loading=new c.O,this.formControl=new M.NI,this.optionDisabled=!1,this.optionSelectFirstItem=!1,this.optionPlaceholder="",this.optionChange=new i.vpe,this.optionReload=()=>this.onActionReload(),this.loading.cdr=this.cdr}set optionSelectForce(_){this.onActionSelectForce(_)}ngOnInit(){this.loadOptions()}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe((0,e.O)(""),(0,O.b)(1e3),(0,L.x)(),(0,T.w)(_=>"string"==typeof _||"number"==typeof _?this.DataGetAll(_||""):[]))}displayFn(_){return _?_.TitleML:void 0}displayOption(_){return _?_.TitleML:void 0}DataGetAll(_){var d=this;return(0,Z.Z)(function*(){const u=new p.Hay;u.RowPerPage=20,u.AccessLoad=!0;let f=new p.AO3;f.PropertyName="Title",f.Value=_,f.SearchType=p.b3P.Contains,f.ClauseType=p.KT6.Or,u.Filters.push(f),_&&"number"==typeof+_&&+_>0&&(f=new p.AO3,f.PropertyName="Id",f.Value=_,f.SearchType=p.b3P.Equal,f.ClauseType=p.KT6.Or,u.Filters.push(f));const x=d.constructor.name+"main";return d.loading.Start(x),yield d.categoryService.ServiceGetAll(u).pipe((0,S.U)(v=>(d.dataModelResult=v,d.optionSelectFirstItem&&(!d.dataModelSelect||!d.dataModelSelect.Id||d.dataModelSelect.Id<=0)&&d.dataModelResult.ListItems.length>0&&(d.optionSelectFirstItem=!1,setTimeout(()=>{d.formControl.setValue(d.dataModelResult.ListItems[0])},1e3),d.onActionSelect(d.dataModelResult.ListItems[0])),d.loading.Stop(x),v.ListItems))).toPromise()})()}onActionSelect(_){this.optionDisabled||(this.dataModelSelect=_,this.optionChange.emit(this.dataModelSelect))}onActionSelectClear(){this.optionDisabled||(this.formControl.setValue(null),this.optionChange.emit(null))}push(_){return this.filteredOptions.pipe((0,S.U)(d=>(d.find(u=>u.Id===_.Id)||d.push(_),d)))}onActionSelectForce(_){if("number"==typeof _&&_>0){if(this.dataModelSelect&&this.dataModelSelect.Id===_)return;if(this.dataModelResult&&this.dataModelResult.ListItems&&this.dataModelResult.ListItems.find(d=>d.Id===_)){const d=this.dataModelResult.ListItems.find(u=>u.Id===_);return this.dataModelSelect=d,void this.formControl.setValue(d)}this.categoryService.ServiceGetOneById(_).subscribe(d=>{d.IsSuccess&&(this.filteredOptions=this.push(d.Item),this.dataModelSelect=d.Item,this.formControl.setValue(d.Item),this.optionChange.emit(d.Item))})}else{if(typeof _==typeof p.OoK)return this.filteredOptions=this.push(_),this.dataModelSelect=_,void this.formControl.setValue(_);this.formControl.setValue(null)}}onActionReload(){this.dataModelSelect=new p.OoK,this.DataGetAll(null)}}return m.\u0275fac=function(_){return new(_||m)(i.Y36(p.FLW),i.Y36(i.sBO),i.Y36(p.kf3))},m.\u0275cmp=i.Xpm({type:m,selectors:[["app-core-userclaimtype-selector"]],inputs:{optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange"},ngContentSelectors:N,decls:11,vars:10,consts:[[1,"ntk-full-width"],["matPrefix",""],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","25","width","25",3,"src",4,"ngIf"],["type","text","aria-label","Assignee","matInput","",3,"placeholder","formControl","matAutocomplete"],[3,"displayWith","optionSelected"],["auto17","matAutocomplete"],[3,"value","disabled",4,"ngFor","ngForOf"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["aria-hidden","","height","25","width","25",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],[3,"value","disabled"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(_,d){if(1&_&&(i.F$t(),i.TgZ(0,"mat-form-field",0),i.TgZ(1,"span",1),i.YNc(2,y,2,3,"img",2),i._uU(3," \xa0"),i.qZA(),i._UZ(4,"input",3),i.TgZ(5,"mat-autocomplete",4,5),i.NdJ("optionSelected",function(f){return d.onActionSelect(f.option.value)}),i.YNc(7,q,4,4,"mat-option",6),i.ALo(8,"async"),i.qZA(),i.YNc(9,b,2,0,"mat-icon",7),i.Hsn(10),i.qZA()),2&_){const u=i.MAs(6);i.xp6(2),i.Q6J("ngIf",d.dataModelSelect&&d.dataModelSelect.LinkMainImageIdSrc),i.xp6(2),i.s9C("placeholder",d.optionPlaceholder),i.Q6J("formControl",d.formControl)("matAutocomplete",u),i.uIk("disabled",!!d.optionDisabled||null),i.xp6(1),i.Q6J("displayWith",d.displayFn),i.xp6(2),i.Q6J("ngForOf",i.lcZ(8,8,d.filteredOptions)),i.xp6(2),i.Q6J("ngIf",d.dataModelSelect.Id)}},directives:[I.KE,I.qo,h.O5,C.Nt,M.Fj,D.ZL,M.JJ,M.oH,D.XC,h.sg,k.ey,P.Hw,I.R9],pipes:[R.v,h.Ov],styles:[""]}),m})()}}]);