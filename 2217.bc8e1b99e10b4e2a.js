"use strict";(self.webpackChunkntk_cms_web=self.webpackChunkntk_cms_web||[]).push([[2217],{643:(de,D,a)=>{a.d(D,{K:()=>le});var v=a(8239),l=a(7977),f=a(5019),M=a(656),e=a(9724),O=a(3987),k=a(2607),A=a(4817),x=a(727),E=a(1048),c=a(1659),P=a(1531),g=a(38),C=a(5691),R=a(4848),I=a(8904),L=a(1450),F=a(1582),y=a(8572),J=a(6599),b=a(3181),N=a(5738),q=a(6014),K=a(1418);const G=["vform"];function m(o,s){if(1&o&&(e.TgZ(0,"mat-option",35),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(t.description)}}function h(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," RecordStatus is "),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&o&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"MESSAGE.required")))}function _(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"mat-form-field",6)(1,"mat-select",32,33),e.NdJ("ngModelChange",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.dataModel.recordStatus=i)}),e.YNc(3,m,2,2,"mat-option",34),e.qZA(),e.TgZ(4,"mat-hint",11),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.YNc(7,h,5,3,"mat-error",12),e.qZA()}if(2&o){const t=e.MAs(2),n=e.oxw();e.xp6(1),e.s9C("placeholder",null==n.fieldsInfo.RecordStatus?null:n.fieldsInfo.RecordStatus.fieldTitle),e.MGl("panelClass","recordStatus-",n.dataModel.recordStatus,""),e.Q6J("ngModel",n.dataModel.recordStatus),e.xp6(2),e.Q6J("ngForOf",n.dataModelEnumRecordStatusResult.listItems),e.xp6(2),e.Oqu(e.lcZ(6,6,"TITLE.SELECT_STATUS")),e.xp6(2),e.Q6J("ngIf",null==t.errors?null:t.errors.required)}}function d(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"mat-icon",38),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.dataModel.title="")}),e._uU(1,"close"),e.qZA()}}function p(o,s){if(1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&o){const t=e.oxw(2);e.xp6(1),e.hij(" ",null==t.fieldsInfo.Title?null:t.fieldsInfo.Title.fieldTitle," is "),e.xp6(2),e.Oqu(e.lcZ(4,2,"MESSAGE.required"))}}function u(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"mat-form-field",6)(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"input",36,37),e.NdJ("ngModelChange",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.dataModel.title=i)}),e.qZA(),e.YNc(5,d,2,0,"mat-icon",9),e.TgZ(6,"mat-icon",10),e._uU(7,"mode_edit"),e.qZA(),e.TgZ(8,"mat-hint",11),e._uU(9),e.qZA(),e.YNc(10,p,5,4,"mat-error",12),e.qZA()}if(2&o){const t=e.MAs(4),n=e.oxw();e.xp6(2),e.Oqu(null==n.fieldsInfo.Title?null:n.fieldsInfo.Title.fieldTitle),e.xp6(1),e.s9C("placeholder",null==n.fieldsInfo.Title?null:n.fieldsInfo.Title.fieldTitle),e.Q6J("ngModel",n.dataModel.title),e.xp6(2),e.Q6J("ngIf",n.dataModel.title),e.xp6(4),e.hij("",t.value.length," / 100"),e.xp6(1),e.Q6J("ngIf",null==t.errors?null:t.errors.required)}}function T(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"mat-icon",38),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.dataModel.titleResourceLanguage="")}),e._uU(1,"close"),e.qZA()}}function Z(o,s){if(1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&o){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.fieldsInfo.TitleResourceLanguage?null:t.fieldsInfo.TitleResourceLanguage.fieldTitle," is "),e.xp6(2),e.Oqu(e.lcZ(4,2,"MESSAGE.required"))}}function Q(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"app-cms-user-selector",14),e.NdJ("optionChange",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.onActionSelectUser(i))}),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("optionSelectForce",t.dataModel.linkUserId)("optionPlaceholder",t.translate.instant("TITLE.USER"))("optionDisabled",!(null!=t.fieldsInfo.LinkUserId&&t.fieldsInfo.LinkUserId.accessAddField))}}function w(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"app-cms-site-selector",14),e.NdJ("optionChange",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.onActionSelectSite(i))}),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("optionSelectForce",t.dataModel.linkSiteId)("optionPlaceholder",t.translate.instant("TITLE.SITE"))("optionDisabled",!(null!=t.fieldsInfo.LinkSiteId&&t.fieldsInfo.LinkSiteId.accessAddField))}}function W(o,s){if(1&o&&(e._UZ(0,"img",39),e.ALo(1,"cmsthumbnail")),2&o){const t=e.oxw();e.s9C("src",e.lcZ(1,1,t.dataModel.linkFileContentIdSrc),e.LSH)}}function B(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"mat-icon",38),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.dataModel.linkFileContentId=null)}),e._uU(1,"close"),e.qZA()}}function Y(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"mat-icon",38),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.dataModel.description="")}),e._uU(1,"close"),e.qZA()}}function H(o,s){if(1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&o){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.fieldsInfo.Description?null:t.fieldsInfo.Description.fieldTitle," is "),e.xp6(2),e.Oqu(e.lcZ(4,2,"MESSAGE.required"))}}function j(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"mat-slide-toggle",40),e.NdJ("ngModelChange",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.dataModel.isApproved=i)}),e._uU(1),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("ngModel",t.dataModel.isApproved)("disabled",!(null!=t.fieldsInfo.IsApproved&&t.fieldsInfo.IsApproved.accessAddField)),e.xp6(1),e.hij(" ",null==t.fieldsInfo.IsApproved?null:t.fieldsInfo.IsApproved.fieldTitle," ")}}function V(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"mat-icon",38),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.dataModel.approvedResult="")}),e._uU(1,"close"),e.qZA()}}function $(o,s){if(1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&o){const t=e.oxw(2);e.xp6(1),e.hij(" ",null==t.fieldsInfo.ApprovedResult?null:t.fieldsInfo.ApprovedResult.fieldTitle," is "),e.xp6(2),e.Oqu(e.lcZ(4,2,"MESSAGE.required"))}}function X(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"mat-form-field",6)(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"textarea",41,42),e.NdJ("ngModelChange",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.dataModel.approvedResult=i)}),e.qZA(),e.YNc(5,V,2,0,"mat-icon",9),e.TgZ(6,"mat-icon",10),e._uU(7,"mode_edit"),e.qZA(),e.TgZ(8,"mat-hint",11),e._uU(9),e.qZA(),e.YNc(10,$,5,4,"mat-error",12),e.qZA()}if(2&o){const t=e.MAs(4),n=e.oxw();e.xp6(2),e.Oqu(null==n.fieldsInfo.ApprovedResult?null:n.fieldsInfo.ApprovedResult.fieldTitle),e.xp6(1),e.s9C("placeholder",null==n.fieldsInfo.Description?null:n.fieldsInfo.Description.fieldTitle),e.Q6J("ngModel",n.dataModel.approvedResult),e.xp6(2),e.Q6J("ngIf",n.dataModel.approvedResult),e.xp6(4),e.hij("",t.value.length," / 500"),e.xp6(1),e.Q6J("ngIf",null==t.errors?null:t.errors.required)}}function z(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"mat-icon",38),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.dataModel.approveCheckDate=null)}),e._uU(1,"close"),e.qZA()}}function ee(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"mat-icon",38),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.dataModel.approveCheckDate=null)}),e._uU(1,"close"),e.qZA()}}function te(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"mat-form-field",6)(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"input",43),e.NdJ("ngModelChange",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.dataModel.approveCheckDate=i)}),e.qZA(),e.YNc(4,z,2,0,"mat-icon",9),e.YNc(5,ee,2,0,"mat-icon",9),e._UZ(6,"mat-datepicker-toggle",44)(7,"mat-datepicker",45,46),e.qZA()}if(2&o){const t=e.MAs(8),n=e.oxw();e.xp6(2),e.Oqu(null==n.fieldsInfo.ApproveCheckDate?null:n.fieldsInfo.ApproveCheckDate.fieldTitle),e.xp6(1),e.Q6J("matDatepicker",t)("ngModel",n.dataModel.approveCheckDate),e.xp6(1),e.Q6J("ngIf",n.dataModel.approveCheckDate&&(null==n.fieldsInfo.ApproveCheckDate?null:n.fieldsInfo.ApproveCheckDate.accessAddField)),e.xp6(1),e.Q6J("ngIf",n.dataModel.approveCheckDate&&(null==n.fieldsInfo.ApproveCheckDate?null:n.fieldsInfo.ApproveCheckDate.accessAddField)),e.xp6(1),e.Q6J("for",t)}}function ne(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"mat-icon",38),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.dataModel.expireDate=null)}),e._uU(1,"close"),e.qZA()}}function oe(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"mat-form-field",6)(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"input",47),e.NdJ("ngModelChange",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.dataModel.expireDate=i)}),e.qZA(),e.YNc(4,ne,2,0,"mat-icon",9),e._UZ(5,"mat-datepicker-toggle",44)(6,"mat-datepicker",45,48),e.qZA()}if(2&o){const t=e.MAs(7),n=e.oxw();e.xp6(2),e.Oqu(null==n.fieldsInfo.ExpireDate?null:n.fieldsInfo.ExpireDate.fieldTitle),e.xp6(1),e.Q6J("matDatepicker",t)("ngModel",n.dataModel.expireDate),e.xp6(1),e.Q6J("ngIf",n.dataModel.expireDate&&(null==n.fieldsInfo.ExpireDate?null:n.fieldsInfo.ExpireDate.accessAddField)),e.xp6(1),e.Q6J("for",t)}}function ie(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",27)(1,"button",49),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.onFormCancel())}),e._UZ(2,"i",50),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"button",51),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.onFormSubmit())}),e._UZ(6,"i",52),e._uU(7),e.ALo(8,"translate"),e.qZA()()}if(2&o){e.oxw();const t=e.MAs(1);e.xp6(3),e.hij(" ",e.lcZ(4,3,"ACTION.CANCEL")," "),e.xp6(2),e.Q6J("disabled",!t.form.valid),e.xp6(2),e.hij(" ",e.lcZ(8,5,"ACTION.SAVE")," ")}}let le=(()=>{class o{constructor(t,n,i,r,S,ae,re,se,_e){this.data=t,this.dialogRef=n,this.coreEnumService=i,this.coreUserClaimContentService=r,this.publicHelper=S,this.cmsToastrService=ae,this.cdr=re,this.translate=se,this.tokenHelper=_e,this.requestLinkUserClaimTypeId=0,this.fieldsInfo=new Map,this.selectFileTypeMainImage=["jpg","jpeg","png"],this.appLanguage="fa",this.loading=new M.O,this.dataModelResult=new l.y$4,this.dataModel=new l.NQc,this.tokenInfo=new l.OdC,this.ProfessionalData=!1,this.formInfo=new l.LEF,this.dataModelEnumRecordStatusResult=new l.y$4,this.fileManagerOpenForm=!1,this.loading.cdr=this.cdr,this.loading.message=this.translate.instant("MESSAGE.Receiving_information"),t&&(this.requestLinkUserClaimTypeId=+t.linkUserClaimTypeId||0),this.requestLinkUserClaimTypeId>0&&(this.dataModel.linkUserClaimTypeId=this.requestLinkUserClaimTypeId),this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig(),this.tokenHelper.getCurrentToken().then(U=>{this.tokenInfo=U,!this.tokenInfo.userAccessAdminAllowToProfessionalData&&this.tokenInfo.userAccessAdminAllowToAllData?(this.dataModel.linkUserId=this.tokenInfo.userId,this.dataModel.linkSiteId=this.tokenInfo.siteId,this.ProfessionalData=!0):this.ProfessionalData=!1}),this.cmsApiStoreSubscribe=this.tokenHelper.getCurrentTokenOnChange().subscribe(U=>{this.tokenInfo=U,!this.tokenInfo.userAccessAdminAllowToProfessionalData&&this.tokenInfo.userAccessAdminAllowToAllData?(this.dataModel.linkUserId=this.tokenInfo.userId,this.dataModel.linkSiteId=this.tokenInfo.siteId,this.ProfessionalData=!0):this.ProfessionalData=!1})}ngOnInit(){this.formInfo.formTitle=this.translate.instant("TITLE.ADD"),this.getEnumRecordStatus(),this.DataGetAccess()}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}DataGetAccess(){this.coreUserClaimContentService.ServiceViewModel().subscribe({next:t=>{t.isSuccess?this.fieldsInfo=this.publicHelper.fieldInfoConvertor(t.access):this.cmsToastrService.typeErrorGetAccess(t.errorMessage)},error:t=>{this.cmsToastrService.typeErrorGetAccess(t)}})}getEnumRecordStatus(){var t=this;return(0,v.Z)(function*(){t.dataModelEnumRecordStatusResult=yield t.publicHelper.getEnumRecordStatus()})()}DataAddContent(){this.formInfo.formAlert=this.translate.instant("MESSAGE.sending_information_to_the_server"),this.formInfo.formError="";const t=this.constructor.name+"main";this.loading.Start(t),this.coreUserClaimContentService.ServiceAdd(this.dataModel).subscribe({next:n=>{this.formInfo.formSubmitAllow=!0,this.dataModelResult=n,n.isSuccess?(this.formInfo.formAlert=this.translate.instant("MESSAGE.registration_completed_successfully"),this.cmsToastrService.typeSuccessAdd(),this.dialogRef.close({dialogChangedDate:!0})):(this.formInfo.formAlert=this.translate.instant("ERRORMESSAGE.MESSAGE.typeError"),this.formInfo.formError=n.errorMessage,this.cmsToastrService.typeErrorMessage(n.errorMessage)),this.loading.Stop(t)},error:n=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(n),this.loading.Stop(t)}})}onActionFileSelected(t){this.dataModel.linkFileContentId=t.id,this.dataModel.linkFileContentIdSrc=t.downloadLinksrc}onActionSelectUser(t){!t||t.id<=0?this.cmsToastrService.typeErrorMessage(this.translate.instant("MESSAGE.Specify_the_user"),this.translate.instant("MESSAGE.Information_user_is_not_clear")):this.dataModel.linkUserId=t.id}onActionSelectSite(t){!t||t.id<=0?this.cmsToastrService.typeErrorMessage(this.translate.instant("MESSAGE.Specify_the_site"),this.translate.instant("MESSAGE.Information_site_is_not_clear")):this.dataModel.linkSiteId=t.id}onActionSelectClaimType(t){!t||t.id<=0?this.cmsToastrService.typeErrorMessage(this.translate.instant("MESSAGE.Specify_the_category"),this.translate.instant("MESSAGE.type_of_information_documents_is_not_clear")):this.dataModel.linkUserClaimTypeId=t.id}onFormSubmit(){!this.formGroup.valid||(this.formInfo.formSubmitAllow=!1,this.DataAddContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(f.WI),e.Y36(f.so),e.Y36(l.FLW),e.Y36(l.qlG),e.Y36(O.i),e.Y36(k.e),e.Y36(e.sBO),e.Y36(A.sK),e.Y36(x.v))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-core-userclaimcontent-add"]],viewQuery:function(t,n){if(1&t&&e.Gf(G,5),2&t){let i;e.iGM(i=e.CRH())&&(n.formGroup=i.first)}},decls:61,vars:46,consts:[[3,"ngSubmit"],["vform","ngForm"],[1,"ntk-cms-html-card-header"],[1,"ntk-cms-html-card-body"],[3,"options"],["class","ntk-full-width",4,"ngIf"],[1,"ntk-full-width"],["matInput","","name","dataModel.titleResourceLanguage","type","text","minlength","3","maxlength","100","required","",3,"ngModel","placeholder","disabled","ngModelChange"],["TitleResourceLanguage",""],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matSuffix",""],["align","end"],[4,"ngIf"],[3,"optionSelectForce","optionPlaceholder","optionDisabled","optionChange",4,"ngIf"],[3,"optionSelectForce","optionPlaceholder","optionDisabled","optionChange"],[1,"mb-3"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","50","width","50",3,"src",4,"ngIf"],[1,"mb-9"],[3,"click"],["matInput","","name","dataModel.linkFileContentId","type","text","autocomplete","off",3,"ngModel","placeholder","ngModelChange","click"],["LinkFileContentId",""],["matSuffix","",3,"click"],[3,"language","isPopup","openForm","tree","openFilemanagerButtonLabelKey","openDirectUploadView","selectFileType","openFilemanagerButtonView","itemSelected","openFormChange"],["matInput","","name","dataModel.description","type","text","minlength","1","maxlength","500","rows","0",3,"ngModel","placeholder","ngModelChange"],["Description",""],["name","dataModel.isApproved",3,"ngModel","disabled","ngModelChange",4,"ngIf"],[1,"ntk-cms-html-card-message"],[1,"form-actions"],[1,"form-text","text-muted"],[1,"form-text","text-muted","danger"],[1,"ntk-cms-html-card-footer"],["class","form-actions",4,"ngIf"],["name","dataModel.recordStatus",3,"placeholder","ngModel","panelClass","ngModelChange"],["RecordStatus","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["matInput","","name","dataModel.title","type","text","minlength","0","maxlength","100",3,"ngModel","placeholder","ngModelChange"],["Title",""],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["aria-hidden","","height","50","width","50",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],["name","dataModel.isApproved",3,"ngModel","disabled","ngModelChange"],["matInput","","name","dataModel.approvedResult","type","text","minlength","0","maxlength","500","rows","5",3,"ngModel","placeholder","ngModelChange"],["ApprovedResult",""],["matInput","","name","dataModel.approveCheckDate",3,"matDatepicker","ngModel","ngModelChange"],["matSuffix","",3,"for"],["touchUi",""],["ApproveCheckDate",""],["matInput","","name","dataModel.expireDate",3,"matDatepicker","ngModel","ngModelChange"],["ExpireDate",""],["type","button",1,"btn","btn-light",3,"click"],[1,"ft-x"],["type","submit",1,"btn","btn-success",3,"disabled","click"],[1,"fa","fa-check-square-o"]],template:function(t,n){if(1&t&&(e.TgZ(0,"form",0,1),e.NdJ("ngSubmit",function(){return n.onFormSubmit()}),e.TgZ(2,"div",2),e._uU(3),e.qZA(),e.TgZ(4,"div",3),e._UZ(5,"app-progress-spinner",4),e.YNc(6,_,8,8,"mat-form-field",5),e.YNc(7,u,11,6,"mat-form-field",5),e.TgZ(8,"mat-form-field",6)(9,"mat-label"),e._uU(10),e.qZA(),e.TgZ(11,"input",7,8),e.NdJ("ngModelChange",function(r){return n.dataModel.titleResourceLanguage=r}),e.qZA(),e.YNc(13,T,2,0,"mat-icon",9),e.TgZ(14,"mat-icon",10),e._uU(15,"mode_edit"),e.qZA(),e.TgZ(16,"mat-hint",11),e._uU(17),e.qZA(),e.YNc(18,Z,5,4,"mat-error",12),e.qZA(),e.YNc(19,Q,1,3,"app-cms-user-selector",13),e.YNc(20,w,1,3,"app-cms-site-selector",13),e.TgZ(21,"app-core-userclaimtype-selector",14),e.NdJ("optionChange",function(r){return n.onActionSelectClaimType(r)}),e.qZA(),e.TgZ(22,"div",15),e.YNc(23,W,2,3,"img",16),e.qZA(),e.TgZ(24,"div",17)(25,"mat-form-field",6)(26,"mat-label",18),e.NdJ("click",function(){return n.fileManagerOpenForm=!0}),e._uU(27),e.ALo(28,"translate"),e.qZA(),e.TgZ(29,"input",19,20),e.NdJ("ngModelChange",function(r){return n.dataModel.linkFileContentId=r})("click",function(){return n.fileManagerOpenForm=!0}),e.ALo(31,"translate"),e.qZA(),e.YNc(32,B,2,0,"mat-icon",9),e.TgZ(33,"mat-icon",21),e.NdJ("click",function(){return n.fileManagerOpenForm=!0}),e._uU(34,"mode_edit"),e.qZA()(),e.TgZ(35,"cms-file-manager",22),e.NdJ("itemSelected",function(r){return n.onActionFileSelected(r)})("openFormChange",function(r){return n.fileManagerOpenForm=r}),e.qZA()(),e.TgZ(36,"mat-form-field",6)(37,"mat-label"),e._uU(38),e.qZA(),e.TgZ(39,"textarea",23,24),e.NdJ("ngModelChange",function(r){return n.dataModel.description=r}),e.qZA(),e.YNc(41,Y,2,0,"mat-icon",9),e.TgZ(42,"mat-icon",10),e._uU(43,"mode_edit"),e.qZA(),e.TgZ(44,"mat-hint",11),e._uU(45),e.qZA(),e.YNc(46,H,5,4,"mat-error",12),e.qZA(),e._UZ(47,"hr"),e.TgZ(48,"div",6),e.YNc(49,j,2,3,"mat-slide-toggle",25),e.qZA(),e.YNc(50,X,11,6,"mat-form-field",5),e.YNc(51,te,9,6,"mat-form-field",5),e.YNc(52,oe,8,5,"mat-form-field",5),e.qZA(),e.TgZ(53,"div",26)(54,"div",27)(55,"small",28),e._uU(56),e.qZA(),e.TgZ(57,"small",29),e._uU(58),e.qZA()()(),e.TgZ(59,"div",30),e.YNc(60,ie,9,7,"div",31),e.qZA()()),2&t){const i=e.MAs(12),r=e.MAs(40);e.xp6(3),e.hij(" ",n.formInfo.formTitle," "),e.xp6(2),e.Q6J("options",n.loading),e.xp6(1),e.Q6J("ngIf",n.ProfessionalData),e.xp6(1),e.Q6J("ngIf",n.ProfessionalData),e.xp6(3),e.Oqu(null==n.fieldsInfo.TitleResourceLanguage?null:n.fieldsInfo.TitleResourceLanguage.fieldTitle),e.xp6(1),e.s9C("placeholder",null==n.fieldsInfo.Title?null:n.fieldsInfo.Title.fieldTitle),e.Q6J("ngModel",n.dataModel.titleResourceLanguage)("disabled",!(null!=n.fieldsInfo.TitleResourceLanguage&&n.fieldsInfo.TitleResourceLanguage.accessAddField)),e.xp6(2),e.Q6J("ngIf",n.dataModel.titleResourceLanguage),e.xp6(4),e.hij("",i.value.length," / 100"),e.xp6(1),e.Q6J("ngIf",null==i.errors?null:i.errors.required),e.xp6(1),e.Q6J("ngIf",n.ProfessionalData),e.xp6(1),e.Q6J("ngIf",n.ProfessionalData),e.xp6(1),e.Q6J("optionSelectForce",n.dataModel.linkUserClaimTypeId)("optionPlaceholder",n.translate.instant("TITLE.DOCUMENT_CATEGORY"))("optionDisabled",!(null!=n.fieldsInfo.LinkUserClaimTypeId&&n.fieldsInfo.LinkUserClaimTypeId.accessAddField)||n.requestLinkUserClaimTypeId&&n.requestLinkUserClaimTypeId>0),e.xp6(2),e.Q6J("ngIf",(null==n.dataModel||null==n.dataModel.linkFileContentIdSrc?null:n.dataModel.linkFileContentIdSrc.length)>0),e.xp6(4),e.hij("",e.lcZ(28,42,"TITLE.Document_File")," "),e.xp6(2),e.s9C("placeholder",e.lcZ(31,44,"TITLE.Original_File_ID")),e.Q6J("ngModel",n.dataModel.linkFileContentId),e.xp6(3),e.Q6J("ngIf",n.dataModel.linkFileContentId),e.xp6(3),e.Q6J("language",n.appLanguage)("isPopup",!0)("openForm",n.fileManagerOpenForm)("tree",n.fileManagerTree)("openFilemanagerButtonLabelKey","select")("openDirectUploadView",!0)("selectFileType",n.selectFileTypeMainImage)("openFilemanagerButtonView",!1),e.xp6(3),e.Oqu(null==n.fieldsInfo.Description?null:n.fieldsInfo.Description.fieldTitle),e.xp6(1),e.s9C("placeholder",null==n.fieldsInfo.Description?null:n.fieldsInfo.Description.fieldTitle),e.Q6J("ngModel",n.dataModel.description),e.xp6(2),e.Q6J("ngIf",n.dataModel.description),e.xp6(4),e.hij("",r.value.length," / 500"),e.xp6(1),e.Q6J("ngIf",null==r.errors?null:r.errors.required),e.xp6(3),e.Q6J("ngIf",null==n.fieldsInfo.IsApproved?null:n.fieldsInfo.IsApproved.accessWatchField),e.xp6(1),e.Q6J("ngIf",n.ProfessionalData),e.xp6(1),e.Q6J("ngIf",(null==n.fieldsInfo.ApproveCheckDate?null:n.fieldsInfo.ApproveCheckDate.accessWatchField)&&n.ProfessionalData),e.xp6(1),e.Q6J("ngIf",(null==n.fieldsInfo.ExpireDate?null:n.fieldsInfo.ExpireDate.accessWatchField)&&n.ProfessionalData),e.xp6(4),e.hij("",n.formInfo.formAlert," "),e.xp6(2),e.hij("",n.formInfo.formError," "),e.xp6(2),e.Q6J("ngIf",n.formInfo.formSubmitAllow&&!n.loading.display)}},dependencies:[E.sg,E.O5,c._Y,c.Fj,c.JJ,c.JL,c.Q7,c.wO,c.nD,c.On,c.F,P.ey,g.Mq,g.hl,g.nW,C.TO,C.KE,C.bx,C.hX,C.R9,R.Hw,I.Nt,L.gD,F.Rr,y.HG,J.P,b.g,N.O,q.b,A.X$,K.v],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:yellow}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:black}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}"]}),o})()},3193:(de,D,a)=>{a.d(D,{D:()=>le});var v=a(8239),l=a(7977),f=a(5019),M=a(656),e=a(9724),O=a(3987),k=a(2607),A=a(4817),x=a(727),E=a(1048),c=a(1659),P=a(1531),g=a(38),C=a(5691),R=a(4848),I=a(8904),L=a(1450),F=a(1582),y=a(8572),J=a(6599),b=a(3181),N=a(5738),q=a(6014),K=a(1418);const G=["vform"];function m(o,s){if(1&o&&(e.TgZ(0,"mat-option",37),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(t.description)}}function h(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," RecordStatus is "),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&o&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"MESSAGE.required")))}function _(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"mat-form-field",6)(1,"mat-select",34,35),e.NdJ("ngModelChange",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.dataModel.recordStatus=i)}),e.YNc(3,m,2,2,"mat-option",36),e.qZA(),e.TgZ(4,"mat-hint",12),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.YNc(7,h,5,3,"mat-error",13),e.qZA()}if(2&o){const t=e.MAs(2),n=e.oxw();e.xp6(1),e.s9C("placeholder",null==n.fieldsInfo.RecordStatus?null:n.fieldsInfo.RecordStatus.fieldTitle),e.MGl("panelClass","recordStatus-",n.dataModel.recordStatus,""),e.Q6J("ngModel",n.dataModel.recordStatus),e.xp6(2),e.Q6J("ngForOf",n.dataModelEnumRecordStatusResult.listItems),e.xp6(2),e.Oqu(e.lcZ(6,6,"TITLE.SELECT_STATUS")),e.xp6(2),e.Q6J("ngIf",null==t.errors?null:t.errors.required)}}function d(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"mat-icon",40),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.dataModel.title="")}),e._uU(1,"close"),e.qZA()}}function p(o,s){if(1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&o){const t=e.oxw(2);e.xp6(1),e.hij(" ",null==t.fieldsInfo.Title?null:t.fieldsInfo.Title.fieldTitle," is "),e.xp6(2),e.Oqu(e.lcZ(4,2,"MESSAGE.required"))}}function u(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"mat-form-field",6)(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"input",38,39),e.NdJ("ngModelChange",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.dataModel.title=i)}),e.qZA(),e.YNc(5,d,2,0,"mat-icon",10),e.TgZ(6,"mat-icon",11),e._uU(7,"mode_edit"),e.qZA(),e.TgZ(8,"mat-hint",12),e._uU(9),e.qZA(),e.YNc(10,p,5,4,"mat-error",13),e.qZA()}if(2&o){const t=e.MAs(4),n=e.oxw();e.xp6(2),e.Oqu(null==n.fieldsInfo.Title?null:n.fieldsInfo.Title.fieldTitle),e.xp6(1),e.s9C("placeholder",null==n.fieldsInfo.Title?null:n.fieldsInfo.Title.fieldTitle),e.Q6J("ngModel",n.dataModel.title),e.xp6(2),e.Q6J("ngIf",n.dataModel.title),e.xp6(4),e.hij("",t.value.length," / 100"),e.xp6(1),e.Q6J("ngIf",null==t.errors?null:t.errors.required)}}function T(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"mat-icon",40),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.dataModel.titleResourceLanguage="")}),e._uU(1,"close"),e.qZA()}}function Z(o,s){if(1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&o){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.fieldsInfo.TitleResourceLanguage?null:t.fieldsInfo.TitleResourceLanguage.fieldTitle," is "),e.xp6(2),e.Oqu(e.lcZ(4,2,"MESSAGE.required"))}}function Q(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"app-cms-user-selector",41),e.NdJ("optionChange",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.onActionSelectUser(i))}),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("optionSelectForce",t.dataModel.linkUserId)("optionPlaceholder",t.translate.instant("TITLE.USER"))("optionDisabled",!(null!=t.fieldsInfo.LinkUserId&&t.fieldsInfo.LinkUserId.accessEditField))}}function w(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"app-cms-site-selector",41),e.NdJ("optionChange",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.onActionSelectSite(i))}),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("optionSelectForce",t.dataModel.linkSiteId)("optionPlaceholder",t.translate.instant("TITLE.SITE"))("optionDisabled",!(null!=t.fieldsInfo.LinkSiteId&&t.fieldsInfo.LinkSiteId.accessEditField))}}function W(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"app-core-userclaimtype-selector",41),e.NdJ("optionChange",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.onActionSelectClaimType(i))}),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("optionSelectForce",t.dataModel.linkUserClaimTypeId)("optionPlaceholder",t.translate.instant("TITLE.DOCUMENT_CATEGORY"))("optionDisabled",!(null!=t.fieldsInfo.LinkUserClaimTypeId&&t.fieldsInfo.LinkUserClaimTypeId.accessEditField))}}function B(o,s){if(1&o&&(e._UZ(0,"img",42),e.ALo(1,"cmsthumbnail")),2&o){const t=e.oxw();e.s9C("src",e.lcZ(1,1,t.dataModel.linkFileContentIdSrc),e.LSH)}}function Y(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"mat-icon",40),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.dataModel.linkFileContentId=null)}),e._uU(1,"close"),e.qZA()}}function H(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"mat-icon",40),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.dataModel.description="")}),e._uU(1,"close"),e.qZA()}}function j(o,s){if(1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&o){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.fieldsInfo.Description?null:t.fieldsInfo.Description.fieldTitle," is "),e.xp6(2),e.Oqu(e.lcZ(4,2,"MESSAGE.required"))}}function V(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"mat-slide-toggle",43),e.NdJ("ngModelChange",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.dataModel.isApproved=i)}),e._uU(1),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("ngModel",t.dataModel.isApproved)("disabled",!(null!=t.fieldsInfo.IsApproved&&t.fieldsInfo.IsApproved.accessEditField)),e.xp6(1),e.hij(" ",null==t.fieldsInfo.IsApproved?null:t.fieldsInfo.IsApproved.fieldTitle," ")}}function $(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"mat-icon",40),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.dataModel.approvedResult="")}),e._uU(1,"close"),e.qZA()}}function X(o,s){if(1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&o){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.fieldsInfo.ApprovedResult?null:t.fieldsInfo.ApprovedResult.fieldTitle," is "),e.xp6(2),e.Oqu(e.lcZ(4,2,"MESSAGE.required"))}}function z(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"mat-icon",40),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.dataModel.approveCheckDate=null)}),e._uU(1,"close"),e.qZA()}}function ee(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"mat-icon",40),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.dataModel.approveCheckDate=null)}),e._uU(1,"close"),e.qZA()}}function te(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"mat-form-field",6)(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"input",44),e.NdJ("ngModelChange",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.dataModel.approveCheckDate=i)}),e.qZA(),e.YNc(4,z,2,0,"mat-icon",10),e.YNc(5,ee,2,0,"mat-icon",10),e._UZ(6,"mat-datepicker-toggle",45)(7,"mat-datepicker",46,47),e.qZA()}if(2&o){const t=e.MAs(8),n=e.oxw();e.xp6(2),e.Oqu(null==n.fieldsInfo.ApproveCheckDate?null:n.fieldsInfo.ApproveCheckDate.fieldTitle),e.xp6(1),e.Q6J("matDatepicker",t)("ngModel",n.dataModel.approveCheckDate),e.xp6(1),e.Q6J("ngIf",n.dataModel.approveCheckDate&&(null==n.fieldsInfo.ApproveCheckDate?null:n.fieldsInfo.ApproveCheckDate.accessEditField)),e.xp6(1),e.Q6J("ngIf",n.dataModel.approveCheckDate&&(null==n.fieldsInfo.ApproveCheckDate?null:n.fieldsInfo.ApproveCheckDate.accessEditField)),e.xp6(1),e.Q6J("for",t)}}function ne(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"mat-icon",40),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.dataModel.expireDate=null)}),e._uU(1,"close"),e.qZA()}}function oe(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"mat-form-field",6)(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"input",48),e.NdJ("ngModelChange",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.dataModel.expireDate=i)}),e.qZA(),e.YNc(4,ne,2,0,"mat-icon",10),e._UZ(5,"mat-datepicker-toggle",45)(6,"mat-datepicker",46,49),e.qZA()}if(2&o){const t=e.MAs(7),n=e.oxw();e.xp6(2),e.Oqu(null==n.fieldsInfo.ExpireDate?null:n.fieldsInfo.ExpireDate.fieldTitle),e.xp6(1),e.Q6J("matDatepicker",t)("ngModel",n.dataModel.expireDate),e.xp6(1),e.Q6J("ngIf",n.dataModel.expireDate&&(null==n.fieldsInfo.ExpireDate?null:n.fieldsInfo.ExpireDate.accessEditField)),e.xp6(1),e.Q6J("for",t)}}function ie(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",29)(1,"button",50),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.onFormCancel())}),e._UZ(2,"i",51),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"button",52),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.onFormSubmit())}),e._UZ(6,"i",53),e._uU(7),e.ALo(8,"translate"),e.qZA()()}if(2&o){e.oxw();const t=e.MAs(1);e.xp6(3),e.hij(" ",e.lcZ(4,3,"ACTION.CANCEL")," "),e.xp6(2),e.Q6J("disabled",!t.form.valid),e.xp6(2),e.hij(" ",e.lcZ(8,5,"ACTION.SAVE")," ")}}let le=(()=>{class o{constructor(t,n,i,r,S,ae,re,se,_e){this.data=t,this.dialogRef=n,this.coreEnumService=i,this.coreUserClaimContentService=r,this.publicHelper=S,this.cmsToastrService=ae,this.cdr=re,this.translate=se,this.tokenHelper=_e,this.requestId=0,this.fieldsInfo=new Map,this.selectFileTypeMainImage=["jpg","jpeg","png"],this.tokenInfo=new l.OdC,this.ProfessionalData=!1,this.appLanguage="fa",this.loading=new M.O,this.dataModelResult=new l.y$4,this.dataModel=new l.NQc,this.formInfo=new l.LEF,this.dataModelEnumRecordStatusResult=new l.y$4,this.fileManagerOpenForm=!1,this.loading.cdr=this.cdr,this.loading.message=this.translate.instant("MESSAGE.Receiving_information"),t&&(this.requestId=+t.id||0),this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig(),this.tokenHelper.getCurrentToken().then(U=>{this.tokenInfo=U,!this.tokenInfo.userAccessAdminAllowToProfessionalData&&this.tokenInfo.userAccessAdminAllowToAllData?(this.dataModel.linkUserId=this.tokenInfo.userId,this.dataModel.linkSiteId=this.tokenInfo.siteId,this.ProfessionalData=!0):this.ProfessionalData=!1}),this.cmsApiStoreSubscribe=this.tokenHelper.getCurrentTokenOnChange().subscribe({next:U=>{this.tokenInfo=U,!this.tokenInfo.userAccessAdminAllowToProfessionalData&&this.tokenInfo.userAccessAdminAllowToAllData?(this.dataModel.linkUserId=this.tokenInfo.userId,this.dataModel.linkSiteId=this.tokenInfo.siteId,this.ProfessionalData=!0):this.ProfessionalData=!1}})}ngOnInit(){if(!(this.requestId>0))return this.cmsToastrService.typeErrorComponentAction(),void this.dialogRef.close({dialogChangedDate:!1});this.formInfo.formTitle=this.translate.instant("TITLE.Edit"),this.DataGetOneContent(),this.getEnumRecordStatus()}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}getEnumRecordStatus(){var t=this;return(0,v.Z)(function*(){t.dataModelEnumRecordStatusResult=yield t.publicHelper.getEnumRecordStatus()})()}DataGetOneContent(){if(this.requestId<=0)return void this.cmsToastrService.typeErrorEditRowIsNull();this.formInfo.formAlert=this.translate.instant("MESSAGE.Receiving_Information_From_The_Server"),this.formInfo.formError="";const t=this.constructor.name+"main";this.loading.Start(t),this.coreUserClaimContentService.setAccessLoad(),this.coreUserClaimContentService.setAccessDataType(l.MZK.Editor),this.coreUserClaimContentService.ServiceGetOneById(this.requestId).subscribe({next:n=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(n.access),this.dataModel=n.item,n.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+n.item.id,this.formInfo.formAlert=""):(this.formInfo.formAlert=this.translate.instant("ERRORMESSAGE.MESSAGE.typeError"),this.formInfo.formError=n.errorMessage,this.cmsToastrService.typeErrorMessage(n.errorMessage)),this.loading.Stop(t)},error:n=>{this.cmsToastrService.typeError(n),this.loading.Stop(t)}})}DataEditContent(){this.formInfo.formAlert=this.translate.instant("MESSAGE.sending_information_to_the_server"),this.formInfo.formError="";const t=this.constructor.name+"main";this.loading.Start(t,this.translate.instant("MESSAGE.sending_information_to_the_server")),this.coreUserClaimContentService.ServiceEdit(this.dataModel).subscribe({next:n=>{this.formInfo.formSubmitAllow=!0,this.dataModelResult=n,n.isSuccess?(this.formInfo.formAlert=this.translate.instant("MESSAGE.registration_completed_successfully"),this.cmsToastrService.typeSuccessEdit(),this.dialogRef.close({dialogChangedDate:!0})):(this.formInfo.formAlert=this.translate.instant("ERRORMESSAGE.MESSAGE.typeError"),this.formInfo.formError=n.errorMessage,this.cmsToastrService.typeErrorMessage(n.errorMessage)),this.loading.Stop(t)},error:n=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(n),this.loading.Stop(t)}})}onActionFileSelected(t){this.dataModel.linkFileContentId=t.id,this.dataModel.linkFileContentIdSrc=t.downloadLinksrc}onActionSelectUser(t){!t||t.id<=0?this.cmsToastrService.typeErrorMessage(this.translate.instant("MESSAGE.Specify_the_user"),this.translate.instant("MESSAGE.Information_user_is_not_clear")):this.dataModel.linkUserId=t.id}onActionSelectSite(t){!t||t.id<=0?this.cmsToastrService.typeErrorMessage(this.translate.instant("MESSAGE.Specify_the_site"),this.translate.instant("MESSAGE.Information_site_is_not_clear")):this.dataModel.linkSiteId=t.id}onActionSelectClaimType(t){!t||t.id<=0?this.cmsToastrService.typeErrorMessage(this.translate.instant("MESSAGE.Specify_the_category"),this.translate.instant("MESSAGE.type_of_information_documents_is_not_clear")):this.dataModel.linkUserClaimTypeId=t.id}onFormSubmit(){!this.formGroup.valid||(this.formInfo.formSubmitAllow=!1,this.DataEditContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(f.WI),e.Y36(f.so),e.Y36(l.FLW),e.Y36(l.qlG),e.Y36(O.i),e.Y36(k.e),e.Y36(e.sBO),e.Y36(A.sK),e.Y36(x.v))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-core-userclaim-edit"]],viewQuery:function(t,n){if(1&t&&e.Gf(G,5),2&t){let i;e.iGM(i=e.CRH())&&(n.formGroup=i.first)}},decls:76,vars:54,consts:[[3,"ngSubmit"],["vform","ngForm"],[1,"ntk-cms-html-card-header"],[1,"ntk-cms-html-card-body"],[3,"options"],["class","ntk-full-width",4,"ngIf"],[1,"ntk-full-width"],["matInput","","name","dataModel.titleML","type","text",3,"ngModel","disabled","ngModelChange"],["matInput","","name","dataModel.titleResourceLanguage","type","text","minlength","3","maxlength","100","required","",3,"ngModel","placeholder","disabled","ngModelChange"],["TitleResourceLanguage",""],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matSuffix",""],["align","end"],[4,"ngIf"],[3,"optionSelectForce","optionPlaceholder","optionDisabled","optionChange",4,"ngIf"],[1,"mb-3"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","50","width","50",3,"src",4,"ngIf"],[1,"mb-9"],[3,"click"],["matInput","","name"," dataModel.linkFileContentId","type","text","autocomplete","off",3,"ngModel","placeholder","ngModelChange","click"],["LinkFileContentId",""],["matSuffix","",3,"click"],[3,"language","isPopup","openForm","tree","openFilemanagerButtonLabelKey","openDirectUploadView","selectFileType","openFilemanagerButtonView","itemSelected","openFormChange"],["matInput","","name","dataModel.description","type","text","minlength","0","maxlength","500","rows","5",3,"ngModel","placeholder","ngModelChange"],["Description",""],["name","dataModel.isApproved",3,"ngModel","disabled","ngModelChange",4,"ngIf"],["matInput","","name","dataModel.approvedResult","type","text","minlength","0","maxlength","500","rows","5",3,"ngModel","placeholder","ngModelChange"],["ApprovedResult",""],[1,"ntk-cms-html-card-message"],[1,"form-actions"],[1,"form-text","text-muted"],[1,"form-text","text-muted","danger"],[1,"ntk-cms-html-card-footer"],["class","form-actions",4,"ngIf"],["name","dataModel.recordStatus",3,"placeholder","ngModel","panelClass","ngModelChange"],["RecordStatus","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["matInput","","name","dataModel.title","type","text","minlength","0","maxlength","100",3,"ngModel","placeholder","ngModelChange"],["Title",""],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[3,"optionSelectForce","optionPlaceholder","optionDisabled","optionChange"],["aria-hidden","","height","50","width","50",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],["name","dataModel.isApproved",3,"ngModel","disabled","ngModelChange"],["matInput","","name","dataModel.approveCheckDate",3,"matDatepicker","ngModel","ngModelChange"],["matSuffix","",3,"for"],["touchUi",""],["ApproveCheckDate",""],["matInput","","name","dataModel.expireDate",3,"matDatepicker","ngModel","ngModelChange"],["ExpireDate",""],["type","button",1,"btn","btn-light",3,"click"],[1,"ft-x"],["type","submit",1,"btn","btn-success",3,"disabled","click"],[1,"fa","fa-check-square-o"]],template:function(t,n){if(1&t&&(e.TgZ(0,"form",0,1),e.NdJ("ngSubmit",function(){return n.onFormSubmit()}),e.TgZ(2,"div",2),e._uU(3),e.qZA(),e.TgZ(4,"div",3),e._UZ(5,"app-progress-spinner",4),e.YNc(6,_,8,8,"mat-form-field",5),e.YNc(7,u,11,6,"mat-form-field",5),e.TgZ(8,"mat-form-field",6)(9,"mat-label"),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"input",7),e.NdJ("ngModelChange",function(r){return n.dataModel.titleML=r}),e.qZA()(),e.TgZ(13,"mat-form-field",6)(14,"mat-label"),e._uU(15),e.qZA(),e.TgZ(16,"input",8,9),e.NdJ("ngModelChange",function(r){return n.dataModel.titleResourceLanguage=r}),e.qZA(),e.YNc(18,T,2,0,"mat-icon",10),e.TgZ(19,"mat-icon",11),e._uU(20,"mode_edit"),e.qZA(),e.TgZ(21,"mat-hint",12),e._uU(22),e.qZA(),e.YNc(23,Z,5,4,"mat-error",13),e.qZA(),e.YNc(24,Q,1,3,"app-cms-user-selector",14),e.YNc(25,w,1,3,"app-cms-site-selector",14),e.YNc(26,W,1,3,"app-core-userclaimtype-selector",14),e.TgZ(27,"div",15),e.YNc(28,B,2,3,"img",16),e.qZA(),e.TgZ(29,"div",17)(30,"mat-form-field",6)(31,"mat-label",18),e.NdJ("click",function(){return n.fileManagerOpenForm=!0}),e._uU(32),e.ALo(33,"translate"),e.qZA(),e.TgZ(34,"input",19,20),e.NdJ("ngModelChange",function(r){return n.dataModel.linkFileContentId=r})("click",function(){return n.fileManagerOpenForm=!0}),e.ALo(36,"translate"),e.qZA(),e.YNc(37,Y,2,0,"mat-icon",10),e.TgZ(38,"mat-icon",21),e.NdJ("click",function(){return n.fileManagerOpenForm=!0}),e._uU(39,"mode_edit"),e.qZA()(),e.TgZ(40,"cms-file-manager",22),e.NdJ("itemSelected",function(r){return n.onActionFileSelected(r)})("openFormChange",function(r){return n.fileManagerOpenForm=r}),e.qZA()(),e.TgZ(41,"mat-form-field",6)(42,"mat-label"),e._uU(43),e.qZA(),e.TgZ(44,"textarea",23,24),e.NdJ("ngModelChange",function(r){return n.dataModel.description=r}),e.qZA(),e.YNc(46,H,2,0,"mat-icon",10),e.TgZ(47,"mat-icon",11),e._uU(48,"mode_edit"),e.qZA(),e.TgZ(49,"mat-hint",12),e._uU(50),e.qZA(),e.YNc(51,j,5,4,"mat-error",13),e.qZA(),e._UZ(52,"hr"),e.TgZ(53,"div",6),e.YNc(54,V,2,3,"mat-slide-toggle",25),e.qZA(),e.TgZ(55,"mat-form-field",6)(56,"mat-label"),e._uU(57),e.qZA(),e.TgZ(58,"textarea",26,27),e.NdJ("ngModelChange",function(r){return n.dataModel.approvedResult=r}),e.qZA(),e.YNc(60,$,2,0,"mat-icon",10),e.TgZ(61,"mat-icon",11),e._uU(62,"mode_edit"),e.qZA(),e.TgZ(63,"mat-hint",12),e._uU(64),e.qZA(),e.YNc(65,X,5,4,"mat-error",13),e.qZA(),e.YNc(66,te,9,6,"mat-form-field",5),e.YNc(67,oe,8,5,"mat-form-field",5),e.qZA(),e.TgZ(68,"div",28)(69,"div",29)(70,"small",30),e._uU(71),e.qZA(),e.TgZ(72,"small",31),e._uU(73),e.qZA()()(),e.TgZ(74,"div",32),e.YNc(75,ie,9,7,"div",33),e.qZA()()),2&t){const i=e.MAs(17),r=e.MAs(45),S=e.MAs(59);e.xp6(3),e.hij(" ",n.formInfo.formTitle," "),e.xp6(2),e.Q6J("options",n.loading),e.xp6(1),e.Q6J("ngIf",n.ProfessionalData),e.xp6(1),e.Q6J("ngIf",n.ProfessionalData),e.xp6(3),e.hij(" ",e.lcZ(11,48,"TITLE.TitleML"),""),e.xp6(2),e.Q6J("ngModel",n.dataModel.titleML)("disabled",!0),e.xp6(3),e.Oqu(null==n.fieldsInfo.TitleResourceLanguage?null:n.fieldsInfo.TitleResourceLanguage.fieldTitle),e.xp6(1),e.s9C("placeholder",null==n.fieldsInfo.Title?null:n.fieldsInfo.Title.fieldTitle),e.Q6J("ngModel",n.dataModel.titleResourceLanguage)("disabled",!(null!=n.fieldsInfo.TitleResourceLanguage&&n.fieldsInfo.TitleResourceLanguage.accessEditField)),e.xp6(2),e.Q6J("ngIf",n.dataModel.titleResourceLanguage),e.xp6(4),e.hij("",i.value.length," / 100"),e.xp6(1),e.Q6J("ngIf",null==i.errors?null:i.errors.required),e.xp6(1),e.Q6J("ngIf",n.ProfessionalData),e.xp6(1),e.Q6J("ngIf",n.ProfessionalData),e.xp6(1),e.Q6J("ngIf",n.ProfessionalData),e.xp6(2),e.Q6J("ngIf",(null==n.dataModel||null==n.dataModel.linkFileContentIdSrc?null:n.dataModel.linkFileContentIdSrc.length)>0),e.xp6(4),e.hij("",e.lcZ(33,50,"TITLE.Document_File")," "),e.xp6(2),e.s9C("placeholder",e.lcZ(36,52,"TITLE.Original_File_ID")),e.Q6J("ngModel",n.dataModel.linkFileContentId),e.xp6(3),e.Q6J("ngIf",n.dataModel.linkFileContentId),e.xp6(3),e.Q6J("language",n.appLanguage)("isPopup",!0)("openForm",n.fileManagerOpenForm)("tree",n.fileManagerTree)("openFilemanagerButtonLabelKey","select")("openDirectUploadView",!0)("selectFileType",n.selectFileTypeMainImage)("openFilemanagerButtonView",!1),e.xp6(3),e.Oqu(null==n.fieldsInfo.Description?null:n.fieldsInfo.Description.fieldTitle),e.xp6(1),e.s9C("placeholder",null==n.fieldsInfo.Description?null:n.fieldsInfo.Description.fieldTitle),e.Q6J("ngModel",n.dataModel.description),e.xp6(2),e.Q6J("ngIf",n.dataModel.description),e.xp6(4),e.hij("",r.value.length," / 500"),e.xp6(1),e.Q6J("ngIf",null==r.errors?null:r.errors.required),e.xp6(3),e.Q6J("ngIf",null==n.fieldsInfo.IsApproved?null:n.fieldsInfo.IsApproved.accessWatchField),e.xp6(3),e.Oqu(null==n.fieldsInfo.ApprovedResult?null:n.fieldsInfo.ApprovedResult.fieldTitle),e.xp6(1),e.s9C("placeholder",null==n.fieldsInfo.Description?null:n.fieldsInfo.Description.fieldTitle),e.Q6J("ngModel",n.dataModel.approvedResult),e.xp6(2),e.Q6J("ngIf",n.dataModel.approvedResult),e.xp6(4),e.hij("",S.value.length," / 500"),e.xp6(1),e.Q6J("ngIf",null==S.errors?null:S.errors.required),e.xp6(1),e.Q6J("ngIf",null==n.fieldsInfo.ApproveCheckDate?null:n.fieldsInfo.ApproveCheckDate.accessWatchField),e.xp6(1),e.Q6J("ngIf",null==n.fieldsInfo.ExpireDate?null:n.fieldsInfo.ExpireDate.accessWatchField),e.xp6(4),e.hij("",n.formInfo.formAlert," "),e.xp6(2),e.hij("",n.formInfo.formError," "),e.xp6(2),e.Q6J("ngIf",n.formInfo.formSubmitAllow&&!n.loading.display)}},dependencies:[E.sg,E.O5,c._Y,c.Fj,c.JJ,c.JL,c.Q7,c.wO,c.nD,c.On,c.F,P.ey,g.Mq,g.hl,g.nW,C.TO,C.KE,C.bx,C.hX,C.R9,R.Hw,I.Nt,L.gD,F.Rr,y.HG,J.P,b.g,N.O,q.b,A.X$,K.v],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:yellow}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:black}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}"]}),o})()},6014:(de,D,a)=>{a.d(D,{b:()=>G});var v=a(8239),l=a(9724),f=a(7977),M=a(1659),e=a(1927),O=a(3151),k=a(2147),A=a(1528),x=a(7969),E=a(656),c=a(2607),P=a(4817),g=a(1048),C=a(5821),R=a(1531),I=a(5691),L=a(4848),F=a(8904),y=a(1418);function J(m,h){if(1&m&&(l._UZ(0,"img",8),l.ALo(1,"cmsthumbnail")),2&m){const _=l.oxw();l.s9C("src",l.lcZ(1,1,_.dataModelSelect.linkMainImageIdSrc),l.LSH)}}function b(m,h){if(1&m&&(l._UZ(0,"img",8),l.ALo(1,"cmsthumbnail")),2&m){const _=l.oxw().$implicit;l.s9C("src",l.lcZ(1,1,_.linkMainImageIdSrc),l.LSH)}}function N(m,h){if(1&m&&(l.TgZ(0,"mat-option",9),l.YNc(1,b,2,3,"img",2),l.TgZ(2,"span"),l._uU(3),l.qZA()()),2&m){const _=h.$implicit,d=l.oxw();l.Q6J("value",_)("disabled",d.optionDisabled),l.xp6(1),l.Q6J("ngIf",_.linkMainImageIdSrc),l.xp6(2),l.Oqu(d.displayOption(_))}}function q(m,h){if(1&m){const _=l.EpF();l.TgZ(0,"mat-icon",10),l.NdJ("click",function(){l.CHM(_);const p=l.oxw();return l.KtG(p.onActionSelectClear())}),l._uU(1,"close"),l.qZA()}}const K=["*"];let G=(()=>{class m{constructor(_,d,p,u,T){this.coreEnumService=_,this.cmsToastrService=d,this.cdr=p,this.translate=u,this.categoryService=T,this.dataModelResult=new f.y$4,this.dataModelSelect=new f.OoK,this.loading=new E.O,this.formControl=new M.NI,this.optionDisabled=!1,this.optionSelectFirstItem=!1,this.optionPlaceholder="",this.optionChange=new l.vpe,this.optionReload=()=>this.onActionReload(),this.loading.cdr=this.cdr,this.loading.message=this.translate.instant("MESSAGE.Receiving_information")}set optionSelectForce(_){this.onActionSelectForce(_)}ngOnInit(){this.loadOptions()}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe((0,e.O)(""),(0,O.b)(1500),(0,k.x)(),(0,A.w)(_=>"string"==typeof _||"number"==typeof _?this.DataGetAll(_||""):[]))}displayFn(_){return _?_.titleML:void 0}displayOption(_){return _?_.titleML:void 0}DataGetAll(_){var d=this;return(0,v.Z)(function*(){const p=new f.Hay;p.rowPerPage=20,p.accessLoad=!0;let u=new f.AO3;u.propertyName="Title",u.value=_,u.searchType=f.b3P.Contains,u.clauseType=f.KT6.Or,p.filters.push(u),_&&"number"==typeof+_&&+_>0&&(u=new f.AO3,u.propertyName="Id",u.value=_,u.searchType=f.b3P.Equal,u.clauseType=f.KT6.Or,p.filters.push(u));const T=d.constructor.name+"main";return d.loading.Start(T),yield d.categoryService.ServiceGetAll(p).pipe((0,x.U)(Z=>(d.dataModelResult=Z,d.optionSelectFirstItem&&(!d.dataModelSelect||!d.dataModelSelect.id||d.dataModelSelect.id<=0)&&d.dataModelResult.listItems.length>0&&(d.optionSelectFirstItem=!1,setTimeout(()=>{d.formControl.setValue(d.dataModelResult.listItems[0])},1e3),d.onActionSelect(d.dataModelResult.listItems[0])),d.loading.Stop(T),Z.listItems))).toPromise()})()}onActionSelect(_){this.optionDisabled||(this.dataModelSelect=_,this.optionChange.emit(this.dataModelSelect))}onActionSelectClear(){this.optionDisabled||(this.formControl.setValue(null),this.optionChange.emit(null))}push(_){return this.filteredOptions.pipe((0,x.U)(d=>(d.find(p=>p.id===_.id)||d.push(_),d)))}onActionSelectForce(_){if("number"==typeof _&&_>0){if(this.dataModelSelect&&this.dataModelSelect.id===_)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(d=>d.id===_)){const d=this.dataModelResult.listItems.find(p=>p.id===_);return this.dataModelSelect=d,void this.formControl.setValue(d)}this.categoryService.ServiceGetOneById(_).subscribe({next:d=>{d.isSuccess?(this.filteredOptions=this.push(d.item),this.dataModelSelect=d.item,this.formControl.setValue(d.item),this.optionChange.emit(d.item)):this.cmsToastrService.typeErrorMessage(d.errorMessage)}})}else{if(typeof _==typeof f.OoK)return this.filteredOptions=this.push(_),this.dataModelSelect=_,void this.formControl.setValue(_);this.formControl.setValue(null)}}onActionReload(){this.dataModelSelect=new f.OoK,this.loadOptions()}}return m.\u0275fac=function(_){return new(_||m)(l.Y36(f.FLW),l.Y36(c.e),l.Y36(l.sBO),l.Y36(P.sK),l.Y36(f.kf3))},m.\u0275cmp=l.Xpm({type:m,selectors:[["app-core-userclaimtype-selector"]],inputs:{optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange"},ngContentSelectors:K,decls:11,vars:10,consts:[[1,"ntk-full-width"],["matPrefix",""],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","25","width","25",3,"src",4,"ngIf"],["type","text","aria-label","Assignee","matInput","",3,"placeholder","formControl","matAutocomplete"],[3,"displayWith","optionSelected"],["auto17","matAutocomplete"],[3,"value","disabled",4,"ngFor","ngForOf"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["aria-hidden","","height","25","width","25",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],[3,"value","disabled"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(_,d){if(1&_&&(l.F$t(),l.TgZ(0,"mat-form-field",0)(1,"span",1),l.YNc(2,J,2,3,"img",2),l._uU(3," \xa0"),l.qZA(),l._UZ(4,"input",3),l.TgZ(5,"mat-autocomplete",4,5),l.NdJ("optionSelected",function(u){return d.onActionSelect(u.option.value)}),l.YNc(7,N,4,4,"mat-option",6),l.ALo(8,"async"),l.qZA(),l.YNc(9,q,2,0,"mat-icon",7),l.Hsn(10),l.qZA()),2&_){const p=l.MAs(6);l.xp6(2),l.Q6J("ngIf",d.dataModelSelect&&d.dataModelSelect.linkMainImageIdSrc),l.xp6(2),l.s9C("placeholder",d.optionPlaceholder),l.Q6J("formControl",d.formControl)("matAutocomplete",p),l.uIk("disabled",!!d.optionDisabled||null),l.xp6(1),l.Q6J("displayWith",d.displayFn),l.xp6(2),l.Q6J("ngForOf",l.lcZ(8,8,d.filteredOptions)),l.xp6(2),l.Q6J("ngIf",d.dataModelSelect.id)}},dependencies:[g.sg,g.O5,M.Fj,M.JJ,M.oH,C.XC,C.ZL,R.ey,I.KE,I.qo,I.R9,L.Hw,F.Nt,g.Ov,y.v]}),m})()}}]);