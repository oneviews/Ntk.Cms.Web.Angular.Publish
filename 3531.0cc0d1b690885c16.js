"use strict";(self.webpackChunkntk_cms_web=self.webpackChunkntk_cms_web||[]).push([[3531],{7907:(b,O,i)=>{i.d(O,{H:()=>M});var u=i(7977),e=i(656),l=i(8485),t=i(9724),S=i(2607),f=i(4817),v=i(3987),A=i(5738),C=i(1048),T=i(6997),I=i(4929);function P(c,m){1&c&&(t.TgZ(0,"div"),t._UZ(1,"span",13)(2,"br"),t.qZA()),2&c&&(t.xp6(1),t.Q6J("inlineSVG","assets/media/svg/icons/General/Shield-check.svg"))}function g(c,m){if(1&c&&(t.TgZ(0,"div",8)(1,"div",9)(2,"div",10),t._uU(3,"\u0634\u0646\u0627\u0633\u0647 \u062a\u0631\u0627\u06a9\u0646\u0634"),t.qZA(),t.TgZ(4,"div",10),t._uU(5),t.qZA(),t._UZ(6,"div",11),t.qZA(),t.TgZ(7,"div",9)(8,"div",10),t._uU(9,"\u0648\u0636\u0639\u06cc\u062a \u062a\u0631\u0627\u06a9\u0646\u0634"),t.qZA(),t.TgZ(10,"div",10),t.YNc(11,P,3,1,"div",12),t._uU(12),t.ALo(13,"enums"),t.qZA(),t._UZ(14,"div",11),t.qZA(),t.TgZ(15,"div",9)(16,"div",10),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"div",10),t._uU(20),t.qZA(),t._UZ(21,"div",11),t.qZA(),t.TgZ(22,"div",9)(23,"div",10),t._uU(24,"\u067e\u06cc\u0627\u0645"),t.qZA(),t.TgZ(25,"div",10),t._uU(26),t.qZA(),t._UZ(27,"div",11),t.qZA()()),2&c){const a=t.oxw();t.xp6(5),t.Oqu(a.dataModelResult.item.id),t.xp6(6),t.Q6J("ngIf",a.dataModelResult.item.transactionStatus==a.TransactionSuccessful),t.xp6(1),t.hij(" ",t.xi3(13,7,a.dataModelResult.item.transactionStatus,a.dataModelEnumTransactionRecordStatusResult.listItems)," "),t.xp6(5),t.hij(" ",t.lcZ(18,10,"TITLE.Amount")," "),t.xp6(3),t.AsE("",a.dataModelResult.item.amount," ",a.dataModelResult.item.currencyUnit,""),t.xp6(6),t.Oqu(a.dataModelResult.item.lastStatusMessage)}}let M=(()=>{class c{constructor(a,_,E,y,R,D,U,Z){this.data=a,this.bankPaymentTransactionService=_,this.dialogRef=E,this.bankPaymentEnumService=y,this.cmsToastrService=R,this.translate=D,this.cdr=U,this.publicHelper=Z,this.id=++c.nextId,this.requestId=0,this.loading=new e.O,this.dataModelResult=new u.y$4,this.dataModelEnumTransactionRecordStatusResult=new u.y$4,this.TransactionSuccessful=u.iZe.TransactionSuccessful,this.loading.cdr=this.cdr,this.loading.message=this.translate.instant("MESSAGE.Receiving_information"),a&&(this.requestId=+a.id||0)}ngOnInit(){if(this.requestId<=0)return this.cmsToastrService.typeErrorComponentAction(),void this.dialogRef.close({dialogChangedDate:!1});this.DataGeOne(),this.getEnumTransactionRecordStatus()}getEnumTransactionRecordStatus(){this.bankPaymentEnumService.ServiceEnumTransactionRecordStatus().subscribe(a=>{this.dataModelEnumTransactionRecordStatusResult=a})}DataGeOne(){const a=this.constructor.name+"main";this.loading.Start(a),this.bankPaymentTransactionService.ServiceGetOneById(this.requestId).subscribe(_=>{_.isSuccess?this.dataModelResult=_:this.cmsToastrService.typeErrorMessage(_.errorMessage),this.loading.Stop(a)},_=>{this.cmsToastrService.typeError(_),this.loading.Stop(a)})}onFormCancel(){this.dialogRef.close({dialogChangedDate:!0})}}return c.nextId=0,c.\u0275fac=function(a){return new(a||c)(t.Y36(l.WI),t.Y36(u.zRJ),t.Y36(l.so),t.Y36(u.T7Z),t.Y36(S.e),t.Y36(f.sK),t.Y36(t.sBO),t.Y36(v.i))},c.\u0275cmp=t.Xpm({type:c,selectors:[["app-cms-bankpayment-transaction-info"]],inputs:{loading:"loading"},decls:11,vars:6,consts:[[1,"ntk-cms-html-card-header"],[1,"ntk-cms-html-card-body"],[3,"options"],["class","table",4,"ngIf"],[1,"ntk-cms-html-card-footer"],[1,"form-actions"],["type","button",1,"btn","btn-light",3,"click"],[1,"ft-x"],[1,"table"],[1,"tr"],[1,"td"],[2,"clear","both"],[4,"ngIf"],[1,"svg-icon","svg-icon-3x","svg-icon-primary",3,"inlineSVG"]],template:function(a,_){1&a&&(t.TgZ(0,"div",0),t._uU(1),t.qZA(),t.TgZ(2,"div",1),t._UZ(3,"app-progress-spinner",2),t.YNc(4,g,28,12,"div",3),t.qZA(),t.TgZ(5,"div",4)(6,"div",5)(7,"button",6),t.NdJ("click",function(){return _.onFormCancel()}),t._UZ(8,"i",7),t._uU(9),t.ALo(10,"translate"),t.qZA()()()),2&a&&(t.xp6(1),t.hij(" \u0648\u0636\u0639\u06cc\u062a \u062a\u0631\u0627\u06a9\u0646\u0634 :",_.requestId," "),t.xp6(2),t.Q6J("options",_.loading),t.xp6(1),t.Q6J("ngIf",_.dataModelResult.item&&_.dataModelResult.item.id>0),t.xp6(5),t.hij(" ",t.lcZ(10,4,"ACTION.BACK")," "))},directives:[A.O,C.O5,T.d$],pipes:[I.B,f.X$],styles:[".table[_ngcontent-%COMP%]{display:table;border:1px solid #40A1F5}.table[_ngcontent-%COMP%]   .th[_ngcontent-%COMP%]{display:table-row;background-color:#40a1f5;color:#fff;font-weight:700}.table[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#f9f9f9}.table[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%]{display:table-row;border-bottom:1px solid #000}.table[_ngcontent-%COMP%]   .td[_ngcontent-%COMP%]{display:table-cell;padding:15px;border-bottom:1px solid #40A1F5}.table[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%]:last-child   .td[_ngcontent-%COMP%]{border:0}.clear[_ngcontent-%COMP%]{clear:both}"]}),c})()},6049:(b,O,i)=>{i.d(O,{T:()=>L});var u=i(8239),e=i(9724),l=i(7977),t=i(1659),S=i(1927),f=i(3151),v=i(2147),A=i(1528),C=i(7969),T=i(656),I=i(4817),P=i(3987),g=i(5691),M=i(1048),c=i(8904),m=i(5821),a=i(1531),_=i(4848),E=i(1418);function y(r,p){if(1&r&&(e._UZ(0,"img",8),e.ALo(1,"cmsthumbnail")),2&r){const n=e.oxw();e.s9C("src",e.lcZ(1,1,n.dataModelSelect.linkMainImageIdSrc),e.LSH)}}function R(r,p){if(1&r&&(e._UZ(0,"img",8),e.ALo(1,"cmsthumbnail")),2&r){const n=e.oxw().$implicit;e.s9C("src",e.lcZ(1,1,n.linkMainImageIdSrc),e.LSH)}}function D(r,p){if(1&r&&(e.TgZ(0,"mat-option",9),e.YNc(1,R,2,3,"img",2),e.TgZ(2,"span"),e._uU(3),e.qZA()()),2&r){const n=p.$implicit,o=e.oxw();e.Q6J("value",n)("disabled",o.optionDisabled),e.xp6(1),e.Q6J("ngIf",n.linkMainImageIdSrc),e.xp6(2),e.Oqu(o.displayOption(n))}}function U(r,p){if(1&r){const n=e.EpF();e.TgZ(0,"mat-icon",10),e.NdJ("click",function(){return e.CHM(n),e.oxw().onActionSelectClear()}),e._uU(1,"close"),e.qZA()}}const Z=["*"];let L=(()=>{class r{constructor(n,o,d,h,s){this.coreEnumService=n,this.translate=o,this.cdr=d,this.publicHelper=h,this.categoryService=s,this.id=++r.nextId,this.dataModelResult=new l.y$4,this.dataModelSelect=new l.CWo,this.loading=new T.O,this.formControl=new t.NI,this.optionDisabled=!1,this.optionSelectFirstItem=!1,this.optionPlaceholder="",this.optionChange=new e.vpe,this.optionReload=()=>this.onActionReload(),this.dateUseStore=!0,this.loading.cdr=this.cdr,this.loading.message=this.translate.instant("MESSAGE.Receiving_information")}set optionSelectForce(n){this.onActionSelectForce(n)}ngOnInit(){this.loadOptions()}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe((0,S.O)(""),(0,f.b)(1500),(0,v.x)(),(0,A.w)(n=>this.DataGetAll("string"==typeof n||"number"==typeof n?n:"")))}displayFn(n){return n?n.titleML:void 0}displayOption(n){return n?n.titleML:void 0}DataGetAll(n){var o=this;return(0,u.Z)(function*(){if(o.dateUseStore&&(o.dataModelResult=yield o.publicHelper.getCurrency(),o.dataModelResult.isSuccess))return o.optionSelectFirstItem&&(!o.dataModelSelect||!o.dataModelSelect.id||o.dataModelSelect.id<=0)&&o.dataModelResult.listItems.length>0&&(o.optionSelectFirstItem=!1,setTimeout(()=>{o.formControl.setValue(o.dataModelResult.listItems[0])},1e3),o.onActionSelect(o.dataModelResult.listItems[0])),o.dataModelResult.listItems;const d=new l.Hay;if(d.rowPerPage=20,d.accessLoad=!0,n&&n.length>0){let s=new l.AO3;s=new l.AO3,s.propertyName="Symbol",s.value=n,s.searchType=l.b3P.Contains,s.clauseType=l.KT6.Or,d.filters.push(s),s=new l.AO3,s.propertyName="Title",s.value=n,s.searchType=l.b3P.Contains,s.clauseType=l.KT6.Or,d.filters.push(s),n&&"number"==typeof+n&&+n>0&&(s=new l.AO3,s.propertyName="Id",s.value=n,s.searchType=l.b3P.Equal,s.clauseType=l.KT6.Or,d.filters.push(s))}const h=o.constructor.name+"ServiceGetAll";return o.loading.Start(h),o.categoryService.setAccessDataType(l.MZK.Viewer),yield o.categoryService.ServiceGetAll(d).pipe((0,C.U)(s=>(o.dataModelResult=s,o.optionSelectFirstItem&&(!o.dataModelSelect||!o.dataModelSelect.id||o.dataModelSelect.id<=0)&&o.dataModelResult.listItems.length>0&&(o.optionSelectFirstItem=!1,setTimeout(()=>{o.formControl.setValue(o.dataModelResult.listItems[0])},1e3),o.onActionSelect(o.dataModelResult.listItems[0])),o.loading.Stop(h),s.listItems))).toPromise()})()}onActionSelect(n){this.optionDisabled||(this.dataModelSelect=n,this.optionChange.emit(this.dataModelSelect))}onActionSelectClear(){this.optionDisabled||(this.formControl.setValue(null),this.optionChange.emit(null))}push(n){return this.filteredOptions.pipe((0,C.U)(o=>(o.find(d=>d.id===n.id)||o.push(n),o)))}onActionSelectForce(n){if("number"==typeof n&&n>0){if(this.dataModelSelect&&this.dataModelSelect.id===n)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(o=>o.id===n)){const o=this.dataModelResult.listItems.find(d=>d.id===n);return this.dataModelSelect=o,void this.formControl.setValue(o)}this.categoryService.ServiceGetOneById(n).subscribe(o=>{o.isSuccess&&(this.filteredOptions=this.push(o.item),this.dataModelSelect=o.item,this.formControl.setValue(o.item),this.optionChange.emit(o.item))})}else{if(typeof n==typeof l.CWo)return this.filteredOptions=this.push(n),this.dataModelSelect=n,void this.formControl.setValue(n);this.formControl.setValue(null)}}onActionReload(){this.dataModelSelect=new l.CWo,this.loadOptions()}}return r.nextId=0,r.\u0275fac=function(n){return new(n||r)(e.Y36(l.FLW),e.Y36(I.sK),e.Y36(e.sBO),e.Y36(P.i),e.Y36(l._GB))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-cms-currency-selector"]],inputs:{optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange"},ngContentSelectors:Z,decls:11,vars:10,consts:[[1,"ntk-full-width"],["matPrefix",""],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","25","width","25",3,"src",4,"ngIf"],["type","text","aria-label","Assignee","matInput","",3,"placeholder","formControl","matAutocomplete"],[3,"displayWith","optionSelected"],["auto34","matAutocomplete"],[3,"value","disabled",4,"ngFor","ngForOf"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["aria-hidden","","height","25","width","25",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],[3,"value","disabled"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(n,o){if(1&n&&(e.F$t(),e.TgZ(0,"mat-form-field",0)(1,"span",1),e.YNc(2,y,2,3,"img",2),e._uU(3," \xa0"),e.qZA(),e._UZ(4,"input",3),e.TgZ(5,"mat-autocomplete",4,5),e.NdJ("optionSelected",function(h){return o.onActionSelect(h.option.value)}),e.YNc(7,D,4,4,"mat-option",6),e.ALo(8,"async"),e.qZA(),e.YNc(9,U,2,0,"mat-icon",7),e.Hsn(10),e.qZA()),2&n){const d=e.MAs(6);e.xp6(2),e.Q6J("ngIf",o.dataModelSelect&&o.dataModelSelect.linkMainImageIdSrc),e.xp6(2),e.s9C("placeholder",o.optionPlaceholder),e.Q6J("formControl",o.formControl)("matAutocomplete",d),e.uIk("disabled",!!o.optionDisabled||null),e.xp6(1),e.Q6J("displayWith",o.displayFn),e.xp6(2),e.Q6J("ngForOf",e.lcZ(8,8,o.filteredOptions)),e.xp6(2),e.Q6J("ngIf",o.dataModelSelect.id)}},directives:[g.KE,g.qo,M.O5,c.Nt,t.Fj,m.ZL,t.JJ,t.oH,m.XC,M.sg,a.ey,_.Hw,g.R9],pipes:[E.v,M.Ov],encapsulation:2}),r})()}}]);