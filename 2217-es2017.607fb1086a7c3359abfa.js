"use strict";(self.webpackChunkntk_cms_web_angular_v2=self.webpackChunkntk_cms_web_angular_v2||[]).push([[2217],{30643:function(e,t,o){o.d(t,{K:function(){return X}});var n=o(8239),i=o(2769),l=o(22238),a=o(60656),r=o(37716),s=o(3029),d=o(32607),c=o(29790),u=o(50727),f=o(3679),p=o(75738),g=o(38583),m=o(98295),h=o(49983),I=o(76627),A=o(56014),M=o(91457),Z=o(67441),T=o(72458),x=o(63181),C=o(56599),S=o(45396),F=o(43220),k=o(81418);const q=["vform"];function v(e,t){if(1&e&&(r.TgZ(0,"mat-option",35),r._uU(1),r.qZA()),2&e){const e=t.$implicit;r.Q6J("value",e.Value),r.xp6(1),r.Oqu(e.Description)}}function b(e,t){1&e&&(r.TgZ(0,"mat-error"),r._uU(1," RecordStatus is "),r.TgZ(2,"strong"),r._uU(3),r.ALo(4,"translate"),r.qZA(),r.qZA()),2&e&&(r.xp6(3),r.Oqu(r.lcZ(4,1,"MESSAGE.required")))}function U(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"mat-form-field",6),r.TgZ(1,"mat-select",32,33),r.NdJ("ngModelChange",function(t){return r.CHM(e),r.oxw().dataModel.RecordStatus=t}),r.YNc(3,v,2,2,"mat-option",34),r.qZA(),r.TgZ(4,"mat-hint",11),r._uU(5),r.ALo(6,"translate"),r.qZA(),r.YNc(7,b,5,3,"mat-error",12),r.qZA()}if(2&e){const e=r.MAs(2),t=r.oxw();r.xp6(1),r.s9C("placeholder",null==t.fieldsInfo.RecordStatus?null:t.fieldsInfo.RecordStatus.FieldTitle),r.MGl("panelClass","recordStatus-",t.dataModel.RecordStatus,""),r.Q6J("ngModel",t.dataModel.RecordStatus),r.xp6(2),r.Q6J("ngForOf",t.dataModelEnumRecordStatusResult.ListItems),r.xp6(2),r.Oqu(r.lcZ(6,6,"TITLE.SELECT_STATUS")),r.xp6(2),r.Q6J("ngIf",null==e.errors?null:e.errors.required)}}function D(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"mat-icon",38),r.NdJ("click",function(){return r.CHM(e),r.oxw(2).dataModel.Title=""}),r._uU(1,"close"),r.qZA()}}function E(e,t){if(1&e&&(r.TgZ(0,"mat-error"),r._uU(1),r.TgZ(2,"strong"),r._uU(3),r.ALo(4,"translate"),r.qZA(),r.qZA()),2&e){const e=r.oxw(2);r.xp6(1),r.hij(" ",null==e.fieldsInfo.Title?null:e.fieldsInfo.Title.FieldTitle," is "),r.xp6(2),r.Oqu(r.lcZ(4,2,"MESSAGE.required"))}}function w(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"mat-form-field",6),r.TgZ(1,"mat-label"),r._uU(2),r.qZA(),r.TgZ(3,"input",36,37),r.NdJ("ngModelChange",function(t){return r.CHM(e),r.oxw().dataModel.Title=t}),r.qZA(),r.YNc(5,D,2,0,"mat-icon",9),r.TgZ(6,"mat-icon",10),r._uU(7,"mode_edit"),r.qZA(),r.TgZ(8,"mat-hint",11),r._uU(9),r.qZA(),r.YNc(10,E,5,4,"mat-error",12),r.qZA()}if(2&e){const e=r.MAs(4),t=r.oxw();r.xp6(2),r.Oqu(null==t.fieldsInfo.Title?null:t.fieldsInfo.Title.FieldTitle),r.xp6(1),r.s9C("placeholder",null==t.fieldsInfo.Title?null:t.fieldsInfo.Title.FieldTitle),r.Q6J("ngModel",t.dataModel.Title),r.xp6(2),r.Q6J("ngIf",t.dataModel.Title),r.xp6(4),r.hij("",e.value.length," / 100"),r.xp6(1),r.Q6J("ngIf",null==e.errors?null:e.errors.required)}}function J(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"mat-icon",38),r.NdJ("click",function(){return r.CHM(e),r.oxw().dataModel.TitleResourceLanguage=""}),r._uU(1,"close"),r.qZA()}}function L(e,t){if(1&e&&(r.TgZ(0,"mat-error"),r._uU(1),r.TgZ(2,"strong"),r._uU(3),r.ALo(4,"translate"),r.qZA(),r.qZA()),2&e){const e=r.oxw();r.xp6(1),r.hij(" ",null==e.fieldsInfo.TitleResourceLanguage?null:e.fieldsInfo.TitleResourceLanguage.FieldTitle," is "),r.xp6(2),r.Oqu(r.lcZ(4,2,"MESSAGE.required"))}}function _(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"app-cms-user-selector",14),r.NdJ("optionChange",function(t){return r.CHM(e),r.oxw().onActionSelectUser(t)}),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("optionSelectForce",e.dataModel.LinkUserId)("optionPlaceholder","\u06a9\u0627\u0631\u0628\u0631")("optionDisabled",!(null!=e.fieldsInfo.LinkUserId&&e.fieldsInfo.LinkUserId.AccessAddField))}}function y(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"app-cms-site-selector",14),r.NdJ("optionChange",function(t){return r.CHM(e),r.oxw().onActionSelectSite(t)}),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("optionSelectForce",e.dataModel.LinkSiteId)("optionPlaceholder","\u0633\u0627\u06cc\u062a")("optionDisabled",!(null!=e.fieldsInfo.LinkSiteId&&e.fieldsInfo.LinkSiteId.AccessAddField))}}function N(e,t){if(1&e&&(r._UZ(0,"img",39),r.ALo(1,"cmsthumbnail")),2&e){const e=r.oxw();r.s9C("src",r.lcZ(1,1,e.dataModel.LinkFileContentIdSrc),r.LSH)}}function R(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"mat-icon",38),r.NdJ("click",function(){return r.CHM(e),r.oxw().dataModel.LinkFileContentId=null}),r._uU(1,"close"),r.qZA()}}function O(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"mat-icon",38),r.NdJ("click",function(){return r.CHM(e),r.oxw().dataModel.Description=""}),r._uU(1,"close"),r.qZA()}}function Q(e,t){if(1&e&&(r.TgZ(0,"mat-error"),r._uU(1),r.TgZ(2,"strong"),r._uU(3),r.ALo(4,"translate"),r.qZA(),r.qZA()),2&e){const e=r.oxw();r.xp6(1),r.hij(" ",null==e.fieldsInfo.Description?null:e.fieldsInfo.Description.FieldTitle," is "),r.xp6(2),r.Oqu(r.lcZ(4,2,"MESSAGE.required"))}}function Y(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"mat-slide-toggle",40),r.NdJ("ngModelChange",function(t){return r.CHM(e),r.oxw().dataModel.IsApproved=t}),r._uU(1),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("ngModel",e.dataModel.IsApproved)("disabled",!(null!=e.fieldsInfo.IsApproved&&e.fieldsInfo.IsApproved.AccessAddField)),r.xp6(1),r.hij(" ",null==e.fieldsInfo.IsApproved?null:e.fieldsInfo.IsApproved.FieldTitle," ")}}function P(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"mat-icon",38),r.NdJ("click",function(){return r.CHM(e),r.oxw(2).dataModel.ApprovedResult=""}),r._uU(1,"close"),r.qZA()}}function H(e,t){if(1&e&&(r.TgZ(0,"mat-error"),r._uU(1),r.TgZ(2,"strong"),r._uU(3),r.ALo(4,"translate"),r.qZA(),r.qZA()),2&e){const e=r.oxw(2);r.xp6(1),r.hij(" ",null==e.fieldsInfo.ApprovedResult?null:e.fieldsInfo.ApprovedResult.FieldTitle," is "),r.xp6(2),r.Oqu(r.lcZ(4,2,"MESSAGE.required"))}}function G(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"mat-form-field",6),r.TgZ(1,"mat-label"),r._uU(2),r.qZA(),r.TgZ(3,"textarea",41,42),r.NdJ("ngModelChange",function(t){return r.CHM(e),r.oxw().dataModel.ApprovedResult=t}),r.qZA(),r.YNc(5,P,2,0,"mat-icon",9),r.TgZ(6,"mat-icon",10),r._uU(7,"mode_edit"),r.qZA(),r.TgZ(8,"mat-hint",11),r._uU(9),r.qZA(),r.YNc(10,H,5,4,"mat-error",12),r.qZA()}if(2&e){const e=r.MAs(4),t=r.oxw();r.xp6(2),r.Oqu(null==t.fieldsInfo.ApprovedResult?null:t.fieldsInfo.ApprovedResult.FieldTitle),r.xp6(1),r.s9C("placeholder",null==t.fieldsInfo.Description?null:t.fieldsInfo.Description.FieldTitle),r.Q6J("ngModel",t.dataModel.ApprovedResult),r.xp6(2),r.Q6J("ngIf",t.dataModel.ApprovedResult),r.xp6(4),r.hij("",e.value.length," / 500"),r.xp6(1),r.Q6J("ngIf",null==e.errors?null:e.errors.required)}}function j(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"mat-icon",38),r.NdJ("click",function(){return r.CHM(e),r.oxw(2).dataModel.ApproveCheckDate=null}),r._uU(1,"close"),r.qZA()}}function V(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"mat-icon",38),r.NdJ("click",function(){return r.CHM(e),r.oxw(2).dataModel.ApproveCheckDate=null}),r._uU(1,"close"),r.qZA()}}function K(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"mat-form-field",6),r.TgZ(1,"mat-label"),r._uU(2),r.qZA(),r.TgZ(3,"input",43),r.NdJ("ngModelChange",function(t){return r.CHM(e),r.oxw().dataModel.ApproveCheckDate=t}),r.qZA(),r.YNc(4,j,2,0,"mat-icon",9),r.YNc(5,V,2,0,"mat-icon",9),r._UZ(6,"mat-datepicker-toggle",44),r._UZ(7,"mat-datepicker",45,46),r.qZA()}if(2&e){const e=r.MAs(8),t=r.oxw();r.xp6(2),r.Oqu(null==t.fieldsInfo.ApproveCheckDate?null:t.fieldsInfo.ApproveCheckDate.FieldTitle),r.xp6(1),r.Q6J("matDatepicker",e)("ngModel",t.dataModel.ApproveCheckDate),r.xp6(1),r.Q6J("ngIf",t.dataModel.ApproveCheckDate&&(null==t.fieldsInfo.ApproveCheckDate?null:t.fieldsInfo.ApproveCheckDate.AccessAddField)),r.xp6(1),r.Q6J("ngIf",t.dataModel.ApproveCheckDate&&(null==t.fieldsInfo.ApproveCheckDate?null:t.fieldsInfo.ApproveCheckDate.AccessAddField)),r.xp6(1),r.Q6J("for",e)}}function W(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"mat-icon",38),r.NdJ("click",function(){return r.CHM(e),r.oxw(2).dataModel.ExpireDate=null}),r._uU(1,"close"),r.qZA()}}function B(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"mat-form-field",6),r.TgZ(1,"mat-label"),r._uU(2),r.qZA(),r.TgZ(3,"input",47),r.NdJ("ngModelChange",function(t){return r.CHM(e),r.oxw().dataModel.ExpireDate=t}),r.qZA(),r.YNc(4,W,2,0,"mat-icon",9),r._UZ(5,"mat-datepicker-toggle",44),r._UZ(6,"mat-datepicker",45,48),r.qZA()}if(2&e){const e=r.MAs(7),t=r.oxw();r.xp6(2),r.Oqu(null==t.fieldsInfo.ExpireDate?null:t.fieldsInfo.ExpireDate.FieldTitle),r.xp6(1),r.Q6J("matDatepicker",e)("ngModel",t.dataModel.ExpireDate),r.xp6(1),r.Q6J("ngIf",t.dataModel.ExpireDate&&(null==t.fieldsInfo.ExpireDate?null:t.fieldsInfo.ExpireDate.AccessAddField)),r.xp6(1),r.Q6J("for",e)}}function $(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",27),r.TgZ(1,"button",49),r.NdJ("click",function(){return r.CHM(e),r.oxw().onFormCancel()}),r._UZ(2,"i",50),r._uU(3),r.ALo(4,"translate"),r.qZA(),r.TgZ(5,"button",51),r.NdJ("click",function(){return r.CHM(e),r.oxw().onFormSubmit()}),r._UZ(6,"i",52),r._uU(7),r.ALo(8,"translate"),r.qZA(),r.qZA()}if(2&e){r.oxw();const e=r.MAs(1);r.xp6(3),r.hij(" ",r.lcZ(4,3,"ACTION.CANCEL")," "),r.xp6(2),r.Q6J("disabled",!e.form.valid),r.xp6(2),r.hij(" ",r.lcZ(8,5,"ACTION.SAVE")," ")}}let X=(()=>{class e{constructor(e,t,o,n,l,r,s,d,c){this.data=e,this.dialogRef=t,this.coreEnumService=o,this.coreUserClaimContentService=n,this.publicHelper=l,this.cmsToastrService=r,this.cdr=s,this.translate=d,this.tokenHelper=c,this.requestLinkUserClaimTypeId=0,this.fieldsInfo=new Map,this.selectFileTypeMainImage=["jpg","jpeg","png"],this.appLanguage="fa",this.loading=new a.O,this.dataModelResult=new i.y$4,this.dataModel=new i.NQc,this.tokenInfo=new i.OdC,this.ProfessionalData=!1,this.formInfo=new i.LEF,this.dataModelEnumRecordStatusResult=new i.y$4,this.fileManagerOpenForm=!1,this.loading.cdr=this.cdr,e&&(this.requestLinkUserClaimTypeId=+e.LinkUserClaimTypeId||0),this.requestLinkUserClaimTypeId>0&&(this.dataModel.LinkUserClaimTypeId=this.requestLinkUserClaimTypeId),this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig(),this.tokenHelper.getCurrentToken().then(e=>{this.tokenInfo=e,!this.tokenInfo.UserAccessAdminAllowToProfessionalData&&this.tokenInfo.UserAccessAdminAllowToAllData?(this.dataModel.LinkUserId=this.tokenInfo.UserId,this.dataModel.LinkSiteId=this.tokenInfo.SiteId,this.ProfessionalData=!0):this.ProfessionalData=!1}),this.cmsApiStoreSubscribe=this.tokenHelper.getCurrentTokenOnChange().subscribe(e=>{this.tokenInfo=e,!this.tokenInfo.UserAccessAdminAllowToProfessionalData&&this.tokenInfo.UserAccessAdminAllowToAllData?(this.dataModel.LinkUserId=this.tokenInfo.UserId,this.dataModel.LinkSiteId=this.tokenInfo.SiteId,this.ProfessionalData=!0):this.ProfessionalData=!1})}ngOnInit(){this.formInfo.FormTitle="\u0627\u0636\u0627\u0641\u0647 \u06a9\u0631\u062f\u0646  ",this.getEnumRecordStatus(),this.DataGetAccess()}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}DataGetAccess(){var e=this;this.coreUserClaimContentService.ServiceViewModel().subscribe(function(){var t=(0,n.Z)(function*(t){t.IsSuccess?e.fieldsInfo=e.publicHelper.fieldInfoConvertor(t.Access):e.cmsToastrService.typeErrorGetAccess(t.ErrorMessage)});return function(e){return t.apply(this,arguments)}}(),e=>{this.cmsToastrService.typeErrorGetAccess(e)})}getEnumRecordStatus(){var e=this;return(0,n.Z)(function*(){e.dataModelEnumRecordStatusResult=yield e.publicHelper.getEnumRecordStatus()})()}DataAddContent(){this.formInfo.FormAlert=this.translate.instant("MESSAGE.sending_information_to_the_server"),this.formInfo.FormError="";const e=this.constructor.name+"main";this.loading.Start(e),this.coreUserClaimContentService.ServiceAdd(this.dataModel).subscribe(t=>{this.formInfo.FormSubmitAllow=!0,this.dataModelResult=t,t.IsSuccess?(this.formInfo.FormAlert=this.translate.instant("MESSAGE.registration_completed_successfully"),this.cmsToastrService.typeSuccessAdd(),this.dialogRef.close({dialogChangedDate:!0})):(this.formInfo.FormAlert="\u0628\u0631\u0631\u0648\u0632 \u062e\u0637\u0627",this.formInfo.FormError=t.ErrorMessage,this.cmsToastrService.typeErrorMessage(t.ErrorMessage)),this.loading.Stop(e)},t=>{this.formInfo.FormSubmitAllow=!0,this.cmsToastrService.typeError(t),this.loading.Stop(e)})}onActionFileSelected(e){this.dataModel.LinkFileContentId=e.id,this.dataModel.LinkFileContentIdSrc=e.downloadLinksrc}onActionSelectUser(e){!e||e.Id<=0?this.cmsToastrService.typeErrorMessage("\u06a9\u0627\u0631\u0628\u0631 \u0631\u0627 \u0645\u0634\u062e\u0635 \u06a9\u0646\u06cc\u062f","\u06a9\u0627\u0631\u0628\u0631  \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0645\u0634\u062e\u0635 \u0646\u06cc\u0633\u062a"):this.dataModel.LinkUserId=e.Id}onActionSelectSite(e){!e||e.Id<=0?this.cmsToastrService.typeErrorMessage("\u0633\u0627\u06cc\u062a \u0631\u0627 \u0645\u0634\u062e\u0635 \u06a9\u0646\u06cc\u062f","\u0633\u0627\u06cc\u062a  \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0645\u0634\u062e\u0635 \u0646\u06cc\u0633\u062a"):this.dataModel.LinkSiteId=e.Id}onActionSelectClaimType(e){!e||e.Id<=0?this.cmsToastrService.typeErrorMessage("\u062f\u0633\u062a\u0647 \u0631\u0627 \u0645\u0634\u062e\u0635 \u06a9\u0646\u06cc\u062f","\u0646\u0648\u0639 \u0645\u062f\u0627\u0631\u06a9 \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0645\u0634\u062e\u0635 \u0646\u06cc\u0633\u062a"):this.dataModel.LinkUserClaimTypeId=e.Id}onFormSubmit(){!this.formGroup.valid||(this.formInfo.FormSubmitAllow=!1,this.DataAddContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(l.WI),r.Y36(l.so),r.Y36(i.FLW),r.Y36(i.qlG),r.Y36(s.i),r.Y36(d.e),r.Y36(r.sBO),r.Y36(c.sK),r.Y36(u.v))},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-core-userclaimcontent-add"]],viewQuery:function(e,t){if(1&e&&r.Gf(q,5),2&e){let e;r.iGM(e=r.CRH())&&(t.formGroup=e.first)}},decls:59,vars:40,consts:[[3,"ngSubmit"],["vform","ngForm"],[1,"ntk-cms-html-card-header"],[1,"ntk-cms-html-card-body"],[3,"options"],["class","ntk-full-width",4,"ngIf"],[1,"ntk-full-width"],["matInput","","name","dataModel.TitleResourceLanguage","type","text","minlength","3","maxlength","100","required","",3,"ngModel","placeholder","disabled","ngModelChange"],["TitleResourceLanguage",""],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matSuffix",""],["align","end"],[4,"ngIf"],[3,"optionSelectForce","optionPlaceholder","optionDisabled","optionChange",4,"ngIf"],[3,"optionSelectForce","optionPlaceholder","optionDisabled","optionChange"],[1,"mb-3"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","50","width","50",3,"src",4,"ngIf"],[1,"mb-9"],[3,"click"],["matInput","","name","dataModel.LinkFileContentId","type","text","placeholder","\u0634\u0646\u0627\u0633\u0647 \u0641\u0627\u06cc\u0644 \u0627\u0635\u0644\u06cc","autocomplete","off",3,"ngModel","ngModelChange","click"],["LinkFileContentId",""],["matSuffix","",3,"click"],[3,"language","isPopup","openForm","tree","openFilemanagerButtonLabelKey","openDirectUploadView","selectFileType","openFilemanagerButtonView","itemSelected","openFormChange"],["matInput","","name","dataModel.Description","type","text","minlength","1","maxlength","500","rows","0",3,"ngModel","placeholder","ngModelChange"],["Description",""],["name","dataModel.IsApproved",3,"ngModel","disabled","ngModelChange",4,"ngIf"],[1,"ntk-cms-html-card-message"],[1,"form-actions"],[1,"form-text","text-muted"],[1,"form-text","text-muted","danger"],[1,"ntk-cms-html-card-footer"],["class","form-actions",4,"ngIf"],["name","dataModel.RecordStatus",3,"placeholder","ngModel","panelClass","ngModelChange"],["RecordStatus","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["matInput","","name","dataModel.Title","type","text","minlength","0","maxlength","100",3,"ngModel","placeholder","ngModelChange"],["Title",""],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["aria-hidden","","height","50","width","50",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],["name","dataModel.IsApproved",3,"ngModel","disabled","ngModelChange"],["matInput","","name","dataModel.ApprovedResult","type","text","minlength","0","maxlength","500","rows","5",3,"ngModel","placeholder","ngModelChange"],["ApprovedResult",""],["matInput","","name","dataModel.ApproveCheckDate",3,"matDatepicker","ngModel","ngModelChange"],["matSuffix","",3,"for"],["touchUi",""],["ApproveCheckDate",""],["matInput","","name","dataModel.ExpireDate",3,"matDatepicker","ngModel","ngModelChange"],["ExpireDate",""],["type","button",1,"btn","btn-light",3,"click"],[1,"ft-x"],["type","submit",1,"btn","btn-success",3,"disabled","click"],[1,"fa","fa-check-square-o"]],template:function(e,t){if(1&e&&(r.TgZ(0,"form",0,1),r.NdJ("ngSubmit",function(){return t.onFormSubmit()}),r.TgZ(2,"div",2),r._uU(3),r.qZA(),r.TgZ(4,"div",3),r._UZ(5,"app-progress-spinner",4),r.YNc(6,U,8,8,"mat-form-field",5),r.YNc(7,w,11,6,"mat-form-field",5),r.TgZ(8,"mat-form-field",6),r.TgZ(9,"mat-label"),r._uU(10),r.qZA(),r.TgZ(11,"input",7,8),r.NdJ("ngModelChange",function(e){return t.dataModel.TitleResourceLanguage=e}),r.qZA(),r.YNc(13,J,2,0,"mat-icon",9),r.TgZ(14,"mat-icon",10),r._uU(15,"mode_edit"),r.qZA(),r.TgZ(16,"mat-hint",11),r._uU(17),r.qZA(),r.YNc(18,L,5,4,"mat-error",12),r.qZA(),r.YNc(19,_,1,3,"app-cms-user-selector",13),r.YNc(20,y,1,3,"app-cms-site-selector",13),r.TgZ(21,"app-core-userclaimtype-selector",14),r.NdJ("optionChange",function(e){return t.onActionSelectClaimType(e)}),r.qZA(),r.TgZ(22,"div",15),r.YNc(23,N,2,3,"img",16),r.qZA(),r.TgZ(24,"div",17),r.TgZ(25,"mat-form-field",6),r.TgZ(26,"mat-label",18),r.NdJ("click",function(){return t.fileManagerOpenForm=!0}),r._uU(27,"\u0641\u0627\u06cc\u0644 \u0645\u062f\u0627\u0631\u06a9 "),r.qZA(),r.TgZ(28,"input",19,20),r.NdJ("ngModelChange",function(e){return t.dataModel.LinkFileContentId=e})("click",function(){return t.fileManagerOpenForm=!0}),r.qZA(),r.YNc(30,R,2,0,"mat-icon",9),r.TgZ(31,"mat-icon",21),r.NdJ("click",function(){return t.fileManagerOpenForm=!0}),r._uU(32,"mode_edit"),r.qZA(),r.qZA(),r.TgZ(33,"cms-file-manager",22),r.NdJ("itemSelected",function(e){return t.onActionFileSelected(e)})("openFormChange",function(e){return t.fileManagerOpenForm=e}),r.qZA(),r.qZA(),r.TgZ(34,"mat-form-field",6),r.TgZ(35,"mat-label"),r._uU(36),r.qZA(),r.TgZ(37,"textarea",23,24),r.NdJ("ngModelChange",function(e){return t.dataModel.Description=e}),r.qZA(),r.YNc(39,O,2,0,"mat-icon",9),r.TgZ(40,"mat-icon",10),r._uU(41,"mode_edit"),r.qZA(),r.TgZ(42,"mat-hint",11),r._uU(43),r.qZA(),r.YNc(44,Q,5,4,"mat-error",12),r.qZA(),r._UZ(45,"hr"),r.TgZ(46,"div",6),r.YNc(47,Y,2,3,"mat-slide-toggle",25),r.qZA(),r.YNc(48,G,11,6,"mat-form-field",5),r.YNc(49,K,9,6,"mat-form-field",5),r.YNc(50,B,8,5,"mat-form-field",5),r.qZA(),r.TgZ(51,"div",26),r.TgZ(52,"div",27),r.TgZ(53,"small",28),r._uU(54),r.qZA(),r.TgZ(55,"small",29),r._uU(56),r.qZA(),r.qZA(),r.qZA(),r.TgZ(57,"div",30),r.YNc(58,$,9,7,"div",31),r.qZA(),r.qZA()),2&e){const e=r.MAs(12),o=r.MAs(38);r.xp6(3),r.hij(" ",t.formInfo.FormTitle," "),r.xp6(2),r.Q6J("options",t.loading),r.xp6(1),r.Q6J("ngIf",t.ProfessionalData),r.xp6(1),r.Q6J("ngIf",t.ProfessionalData),r.xp6(3),r.Oqu(null==t.fieldsInfo.TitleResourceLanguage?null:t.fieldsInfo.TitleResourceLanguage.FieldTitle),r.xp6(1),r.s9C("placeholder",null==t.fieldsInfo.Title?null:t.fieldsInfo.Title.FieldTitle),r.Q6J("ngModel",t.dataModel.TitleResourceLanguage)("disabled",!(null!=t.fieldsInfo.TitleResourceLanguage&&t.fieldsInfo.TitleResourceLanguage.AccessAddField)),r.xp6(2),r.Q6J("ngIf",t.dataModel.TitleResourceLanguage),r.xp6(4),r.hij("",e.value.length," / 100"),r.xp6(1),r.Q6J("ngIf",null==e.errors?null:e.errors.required),r.xp6(1),r.Q6J("ngIf",t.ProfessionalData),r.xp6(1),r.Q6J("ngIf",t.ProfessionalData),r.xp6(1),r.Q6J("optionSelectForce",t.dataModel.LinkUserClaimTypeId)("optionPlaceholder","\u062f\u0633\u062a\u0647 \u0645\u062f\u0627\u0631\u06a9")("optionDisabled",!(null!=t.fieldsInfo.LinkUserClaimTypeId&&t.fieldsInfo.LinkUserClaimTypeId.AccessAddField)||t.requestLinkUserClaimTypeId&&t.requestLinkUserClaimTypeId>0),r.xp6(2),r.Q6J("ngIf",(null==t.dataModel||null==t.dataModel.LinkFileContentIdSrc?null:t.dataModel.LinkFileContentIdSrc.length)>0),r.xp6(5),r.Q6J("ngModel",t.dataModel.LinkFileContentId),r.xp6(2),r.Q6J("ngIf",t.dataModel.LinkFileContentId),r.xp6(3),r.Q6J("language",t.appLanguage)("isPopup",!0)("openForm",t.fileManagerOpenForm)("tree",t.fileManagerTree)("openFilemanagerButtonLabelKey","select")("openDirectUploadView",!0)("selectFileType",t.selectFileTypeMainImage)("openFilemanagerButtonView",!1),r.xp6(3),r.Oqu(null==t.fieldsInfo.Description?null:t.fieldsInfo.Description.FieldTitle),r.xp6(1),r.s9C("placeholder",null==t.fieldsInfo.Description?null:t.fieldsInfo.Description.FieldTitle),r.Q6J("ngModel",t.dataModel.Description),r.xp6(2),r.Q6J("ngIf",t.dataModel.Description),r.xp6(4),r.hij("",o.value.length," / 500"),r.xp6(1),r.Q6J("ngIf",null==o.errors?null:o.errors.required),r.xp6(3),r.Q6J("ngIf",null==t.fieldsInfo.IsApproved?null:t.fieldsInfo.IsApproved.AccessWatchField),r.xp6(1),r.Q6J("ngIf",t.ProfessionalData),r.xp6(1),r.Q6J("ngIf",(null==t.fieldsInfo.ApproveCheckDate?null:t.fieldsInfo.ApproveCheckDate.AccessWatchField)&&t.ProfessionalData),r.xp6(1),r.Q6J("ngIf",(null==t.fieldsInfo.ExpireDate?null:t.fieldsInfo.ExpireDate.AccessWatchField)&&t.ProfessionalData),r.xp6(4),r.hij("",t.formInfo.FormAlert," "),r.xp6(2),r.hij("",t.formInfo.FormError," "),r.xp6(2),r.Q6J("ngIf",t.formInfo.FormSubmitAllow)}},directives:[f._Y,f.JL,f.F,p.O,g.O5,m.KE,m.hX,h.Nt,f.Fj,f.wO,f.nD,f.Q7,f.JJ,f.On,I.Hw,m.R9,m.bx,A.b,M.HG,Z.gD,g.sg,T.ey,m.TO,x.g,C.P,S.Rr,F.hl,F.nW,F.Mq],pipes:[c.X$,k.v],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:yellow}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:black}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}"]}),e})()},3193:function(e,t,o){o.d(t,{D:function(){return X}});var n=o(8239),i=o(2769),l=o(22238),a=o(60656),r=o(37716),s=o(3029),d=o(32607),c=o(29790),u=o(50727),f=o(3679),p=o(75738),g=o(38583),m=o(98295),h=o(49983),I=o(76627),A=o(91457),M=o(67441),Z=o(72458),T=o(63181),x=o(56599),C=o(56014),S=o(45396),F=o(43220),k=o(81418);const q=["vform"];function v(e,t){if(1&e&&(r.TgZ(0,"mat-option",37),r._uU(1),r.qZA()),2&e){const e=t.$implicit;r.Q6J("value",e.Value),r.xp6(1),r.Oqu(e.Description)}}function b(e,t){1&e&&(r.TgZ(0,"mat-error"),r._uU(1," RecordStatus is "),r.TgZ(2,"strong"),r._uU(3),r.ALo(4,"translate"),r.qZA(),r.qZA()),2&e&&(r.xp6(3),r.Oqu(r.lcZ(4,1,"MESSAGE.required")))}function U(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"mat-form-field",6),r.TgZ(1,"mat-select",34,35),r.NdJ("ngModelChange",function(t){return r.CHM(e),r.oxw().dataModel.RecordStatus=t}),r.YNc(3,v,2,2,"mat-option",36),r.qZA(),r.TgZ(4,"mat-hint",12),r._uU(5),r.ALo(6,"translate"),r.qZA(),r.YNc(7,b,5,3,"mat-error",13),r.qZA()}if(2&e){const e=r.MAs(2),t=r.oxw();r.xp6(1),r.s9C("placeholder",null==t.fieldsInfo.RecordStatus?null:t.fieldsInfo.RecordStatus.FieldTitle),r.MGl("panelClass","recordStatus-",t.dataModel.RecordStatus,""),r.Q6J("ngModel",t.dataModel.RecordStatus),r.xp6(2),r.Q6J("ngForOf",t.dataModelEnumRecordStatusResult.ListItems),r.xp6(2),r.Oqu(r.lcZ(6,6,"TITLE.SELECT_STATUS")),r.xp6(2),r.Q6J("ngIf",null==e.errors?null:e.errors.required)}}function D(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"mat-icon",40),r.NdJ("click",function(){return r.CHM(e),r.oxw(2).dataModel.Title=""}),r._uU(1,"close"),r.qZA()}}function E(e,t){if(1&e&&(r.TgZ(0,"mat-error"),r._uU(1),r.TgZ(2,"strong"),r._uU(3),r.ALo(4,"translate"),r.qZA(),r.qZA()),2&e){const e=r.oxw(2);r.xp6(1),r.hij(" ",null==e.fieldsInfo.Title?null:e.fieldsInfo.Title.FieldTitle," is "),r.xp6(2),r.Oqu(r.lcZ(4,2,"MESSAGE.required"))}}function w(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"mat-form-field",6),r.TgZ(1,"mat-label"),r._uU(2),r.qZA(),r.TgZ(3,"input",38,39),r.NdJ("ngModelChange",function(t){return r.CHM(e),r.oxw().dataModel.Title=t}),r.qZA(),r.YNc(5,D,2,0,"mat-icon",10),r.TgZ(6,"mat-icon",11),r._uU(7,"mode_edit"),r.qZA(),r.TgZ(8,"mat-hint",12),r._uU(9),r.qZA(),r.YNc(10,E,5,4,"mat-error",13),r.qZA()}if(2&e){const e=r.MAs(4),t=r.oxw();r.xp6(2),r.Oqu(null==t.fieldsInfo.Title?null:t.fieldsInfo.Title.FieldTitle),r.xp6(1),r.s9C("placeholder",null==t.fieldsInfo.Title?null:t.fieldsInfo.Title.FieldTitle),r.Q6J("ngModel",t.dataModel.Title),r.xp6(2),r.Q6J("ngIf",t.dataModel.Title),r.xp6(4),r.hij("",e.value.length," / 100"),r.xp6(1),r.Q6J("ngIf",null==e.errors?null:e.errors.required)}}function J(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"mat-icon",40),r.NdJ("click",function(){return r.CHM(e),r.oxw().dataModel.TitleResourceLanguage=""}),r._uU(1,"close"),r.qZA()}}function L(e,t){if(1&e&&(r.TgZ(0,"mat-error"),r._uU(1),r.TgZ(2,"strong"),r._uU(3),r.ALo(4,"translate"),r.qZA(),r.qZA()),2&e){const e=r.oxw();r.xp6(1),r.hij(" ",null==e.fieldsInfo.TitleResourceLanguage?null:e.fieldsInfo.TitleResourceLanguage.FieldTitle," is "),r.xp6(2),r.Oqu(r.lcZ(4,2,"MESSAGE.required"))}}function _(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"app-cms-user-selector",41),r.NdJ("optionChange",function(t){return r.CHM(e),r.oxw().onActionSelectUser(t)}),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("optionSelectForce",e.dataModel.LinkUserId)("optionPlaceholder","\u06a9\u0627\u0631\u0628\u0631")("optionDisabled",!(null!=e.fieldsInfo.LinkUserId&&e.fieldsInfo.LinkUserId.AccessEditField))}}function y(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"app-cms-site-selector",41),r.NdJ("optionChange",function(t){return r.CHM(e),r.oxw().onActionSelectSite(t)}),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("optionSelectForce",e.dataModel.LinkSiteId)("optionPlaceholder","\u0633\u0627\u06cc\u062a")("optionDisabled",!(null!=e.fieldsInfo.LinkSiteId&&e.fieldsInfo.LinkSiteId.AccessEditField))}}function N(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"app-core-userclaimtype-selector",41),r.NdJ("optionChange",function(t){return r.CHM(e),r.oxw().onActionSelectClaimType(t)}),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("optionSelectForce",e.dataModel.LinkUserClaimTypeId)("optionPlaceholder","\u062f\u0633\u062a\u0647 \u0645\u062f\u0627\u0631\u06a9")("optionDisabled",!(null!=e.fieldsInfo.LinkUserClaimTypeId&&e.fieldsInfo.LinkUserClaimTypeId.AccessEditField))}}function R(e,t){if(1&e&&(r._UZ(0,"img",42),r.ALo(1,"cmsthumbnail")),2&e){const e=r.oxw();r.s9C("src",r.lcZ(1,1,e.dataModel.LinkFileContentIdSrc),r.LSH)}}function O(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"mat-icon",40),r.NdJ("click",function(){return r.CHM(e),r.oxw().dataModel.LinkFileContentId=null}),r._uU(1,"close"),r.qZA()}}function Q(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"mat-icon",40),r.NdJ("click",function(){return r.CHM(e),r.oxw().dataModel.Description=""}),r._uU(1,"close"),r.qZA()}}function Y(e,t){if(1&e&&(r.TgZ(0,"mat-error"),r._uU(1),r.TgZ(2,"strong"),r._uU(3),r.ALo(4,"translate"),r.qZA(),r.qZA()),2&e){const e=r.oxw();r.xp6(1),r.hij(" ",null==e.fieldsInfo.Description?null:e.fieldsInfo.Description.FieldTitle," is "),r.xp6(2),r.Oqu(r.lcZ(4,2,"MESSAGE.required"))}}function P(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"mat-slide-toggle",43),r.NdJ("ngModelChange",function(t){return r.CHM(e),r.oxw().dataModel.IsApproved=t}),r._uU(1),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("ngModel",e.dataModel.IsApproved)("disabled",!(null!=e.fieldsInfo.IsApproved&&e.fieldsInfo.IsApproved.AccessEditField)),r.xp6(1),r.hij(" ",null==e.fieldsInfo.IsApproved?null:e.fieldsInfo.IsApproved.FieldTitle," ")}}function H(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"mat-icon",40),r.NdJ("click",function(){return r.CHM(e),r.oxw().dataModel.ApprovedResult=""}),r._uU(1,"close"),r.qZA()}}function G(e,t){if(1&e&&(r.TgZ(0,"mat-error"),r._uU(1),r.TgZ(2,"strong"),r._uU(3),r.ALo(4,"translate"),r.qZA(),r.qZA()),2&e){const e=r.oxw();r.xp6(1),r.hij(" ",null==e.fieldsInfo.ApprovedResult?null:e.fieldsInfo.ApprovedResult.FieldTitle," is "),r.xp6(2),r.Oqu(r.lcZ(4,2,"MESSAGE.required"))}}function j(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"mat-icon",40),r.NdJ("click",function(){return r.CHM(e),r.oxw(2).dataModel.ApproveCheckDate=null}),r._uU(1,"close"),r.qZA()}}function V(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"mat-icon",40),r.NdJ("click",function(){return r.CHM(e),r.oxw(2).dataModel.ApproveCheckDate=null}),r._uU(1,"close"),r.qZA()}}function K(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"mat-form-field",6),r.TgZ(1,"mat-label"),r._uU(2),r.qZA(),r.TgZ(3,"input",44),r.NdJ("ngModelChange",function(t){return r.CHM(e),r.oxw().dataModel.ApproveCheckDate=t}),r.qZA(),r.YNc(4,j,2,0,"mat-icon",10),r.YNc(5,V,2,0,"mat-icon",10),r._UZ(6,"mat-datepicker-toggle",45),r._UZ(7,"mat-datepicker",46,47),r.qZA()}if(2&e){const e=r.MAs(8),t=r.oxw();r.xp6(2),r.Oqu(null==t.fieldsInfo.ApproveCheckDate?null:t.fieldsInfo.ApproveCheckDate.FieldTitle),r.xp6(1),r.Q6J("matDatepicker",e)("ngModel",t.dataModel.ApproveCheckDate),r.xp6(1),r.Q6J("ngIf",t.dataModel.ApproveCheckDate&&(null==t.fieldsInfo.ApproveCheckDate?null:t.fieldsInfo.ApproveCheckDate.AccessEditField)),r.xp6(1),r.Q6J("ngIf",t.dataModel.ApproveCheckDate&&(null==t.fieldsInfo.ApproveCheckDate?null:t.fieldsInfo.ApproveCheckDate.AccessEditField)),r.xp6(1),r.Q6J("for",e)}}function W(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"mat-icon",40),r.NdJ("click",function(){return r.CHM(e),r.oxw(2).dataModel.ExpireDate=null}),r._uU(1,"close"),r.qZA()}}function B(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"mat-form-field",6),r.TgZ(1,"mat-label"),r._uU(2),r.qZA(),r.TgZ(3,"input",48),r.NdJ("ngModelChange",function(t){return r.CHM(e),r.oxw().dataModel.ExpireDate=t}),r.qZA(),r.YNc(4,W,2,0,"mat-icon",10),r._UZ(5,"mat-datepicker-toggle",45),r._UZ(6,"mat-datepicker",46,49),r.qZA()}if(2&e){const e=r.MAs(7),t=r.oxw();r.xp6(2),r.Oqu(null==t.fieldsInfo.ExpireDate?null:t.fieldsInfo.ExpireDate.FieldTitle),r.xp6(1),r.Q6J("matDatepicker",e)("ngModel",t.dataModel.ExpireDate),r.xp6(1),r.Q6J("ngIf",t.dataModel.ExpireDate&&(null==t.fieldsInfo.ExpireDate?null:t.fieldsInfo.ExpireDate.AccessEditField)),r.xp6(1),r.Q6J("for",e)}}function $(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",29),r.TgZ(1,"button",50),r.NdJ("click",function(){return r.CHM(e),r.oxw().onFormCancel()}),r._UZ(2,"i",51),r._uU(3),r.ALo(4,"translate"),r.qZA(),r.TgZ(5,"button",52),r.NdJ("click",function(){return r.CHM(e),r.oxw().onFormSubmit()}),r._UZ(6,"i",53),r._uU(7),r.ALo(8,"translate"),r.qZA(),r.qZA()}if(2&e){r.oxw();const e=r.MAs(1);r.xp6(3),r.hij(" ",r.lcZ(4,3,"ACTION.CANCEL")," "),r.xp6(2),r.Q6J("disabled",!e.form.valid),r.xp6(2),r.hij(" ",r.lcZ(8,5,"ACTION.SAVE")," ")}}let X=(()=>{class e{constructor(e,t,o,n,l,r,s,d,c){this.data=e,this.dialogRef=t,this.coreEnumService=o,this.coreUserClaimContentService=n,this.publicHelper=l,this.cmsToastrService=r,this.cdr=s,this.translate=d,this.tokenHelper=c,this.requestId=0,this.fieldsInfo=new Map,this.selectFileTypeMainImage=["jpg","jpeg","png"],this.tokenInfo=new i.OdC,this.ProfessionalData=!1,this.appLanguage="fa",this.loading=new a.O,this.dataModelResult=new i.y$4,this.dataModel=new i.NQc,this.formInfo=new i.LEF,this.dataModelEnumRecordStatusResult=new i.y$4,this.fileManagerOpenForm=!1,this.loading.cdr=this.cdr,e&&(this.requestId=+e.id||0),this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig(),this.tokenHelper.getCurrentToken().then(e=>{this.tokenInfo=e,!this.tokenInfo.UserAccessAdminAllowToProfessionalData&&this.tokenInfo.UserAccessAdminAllowToAllData?(this.dataModel.LinkUserId=this.tokenInfo.UserId,this.dataModel.LinkSiteId=this.tokenInfo.SiteId,this.ProfessionalData=!0):this.ProfessionalData=!1}),this.cmsApiStoreSubscribe=this.tokenHelper.getCurrentTokenOnChange().subscribe(e=>{this.tokenInfo=e,!this.tokenInfo.UserAccessAdminAllowToProfessionalData&&this.tokenInfo.UserAccessAdminAllowToAllData?(this.dataModel.LinkUserId=this.tokenInfo.UserId,this.dataModel.LinkSiteId=this.tokenInfo.SiteId,this.ProfessionalData=!0):this.ProfessionalData=!1})}ngOnInit(){if(!(this.requestId>0))return this.cmsToastrService.typeErrorComponentAction(),void this.dialogRef.close({dialogChangedDate:!1});this.formInfo.FormTitle="\u0648\u06cc\u0631\u0627\u06cc\u0634  ",this.DataGetOneContent(),this.getEnumRecordStatus()}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}getEnumRecordStatus(){var e=this;return(0,n.Z)(function*(){e.dataModelEnumRecordStatusResult=yield e.publicHelper.getEnumRecordStatus()})()}DataGetOneContent(){if(this.requestId<=0)return void this.cmsToastrService.typeErrorEditRowIsNull();this.formInfo.FormAlert="\u062f\u0631 \u062f\u0631\u06cc\u0627\u0641\u062a \u0627\u0631\u0633\u0627\u0644 \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0627\u0632 \u0633\u0631\u0648\u0631",this.formInfo.FormError="";const e=this.constructor.name+"main";this.loading.Start(e),this.coreUserClaimContentService.setAccessLoad(),this.coreUserClaimContentService.ServiceGetOneById(this.requestId).subscribe(t=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(t.Access),this.dataModel=t.Item,t.IsSuccess?(this.formInfo.FormTitle=this.formInfo.FormTitle+" "+t.Item.Id,this.formInfo.FormAlert=""):(this.formInfo.FormAlert="\u0628\u0631\u0631\u0648\u0632 \u062e\u0637\u0627",this.formInfo.FormError=t.ErrorMessage,this.cmsToastrService.typeErrorMessage(t.ErrorMessage)),this.loading.Stop(e)},t=>{this.cmsToastrService.typeError(t),this.loading.Stop(e)})}DataEditContent(){this.formInfo.FormAlert=this.translate.instant("MESSAGE.sending_information_to_the_server"),this.formInfo.FormError="";const e=this.constructor.name+"main";this.loading.Start(e),this.coreUserClaimContentService.ServiceEdit(this.dataModel).subscribe(t=>{this.formInfo.FormSubmitAllow=!0,this.dataModelResult=t,t.IsSuccess?(this.formInfo.FormAlert=this.translate.instant("MESSAGE.registration_completed_successfully"),this.cmsToastrService.typeSuccessEdit(),this.dialogRef.close({dialogChangedDate:!0})):(this.formInfo.FormAlert="\u0628\u0631\u0631\u0648\u0632 \u062e\u0637\u0627",this.formInfo.FormError=t.ErrorMessage,this.cmsToastrService.typeErrorMessage(t.ErrorMessage)),this.loading.Stop(e)},t=>{this.formInfo.FormSubmitAllow=!0,this.cmsToastrService.typeError(t),this.loading.Stop(e)})}onActionFileSelected(e){this.dataModel.LinkFileContentId=e.id,this.dataModel.LinkFileContentIdSrc=e.downloadLinksrc}onActionSelectUser(e){!e||e.Id<=0?this.cmsToastrService.typeErrorMessage("\u06a9\u0627\u0631\u0628\u0631 \u0631\u0627 \u0645\u0634\u062e\u0635 \u06a9\u0646\u06cc\u062f","\u06a9\u0627\u0631\u0628\u0631  \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0645\u0634\u062e\u0635 \u0646\u06cc\u0633\u062a"):this.dataModel.LinkUserId=e.Id}onActionSelectSite(e){!e||e.Id<=0?this.cmsToastrService.typeErrorMessage("\u0633\u0627\u06cc\u062a \u0631\u0627 \u0645\u0634\u062e\u0635 \u06a9\u0646\u06cc\u062f","\u0633\u0627\u06cc\u062a  \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0645\u0634\u062e\u0635 \u0646\u06cc\u0633\u062a"):this.dataModel.LinkSiteId=e.Id}onActionSelectClaimType(e){!e||e.Id<=0?this.cmsToastrService.typeErrorMessage("\u062f\u0633\u062a\u0647 \u0631\u0627 \u0645\u0634\u062e\u0635 \u06a9\u0646\u06cc\u062f","\u0646\u0648\u0639 \u0645\u062f\u0627\u0631\u06a9 \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0645\u0634\u062e\u0635 \u0646\u06cc\u0633\u062a"):this.dataModel.LinkUserClaimTypeId=e.Id}onFormSubmit(){!this.formGroup.valid||(this.formInfo.FormSubmitAllow=!1,this.DataEditContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(l.WI),r.Y36(l.so),r.Y36(i.FLW),r.Y36(i.qlG),r.Y36(s.i),r.Y36(d.e),r.Y36(r.sBO),r.Y36(c.sK),r.Y36(u.v))},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-core-userclaim-edit"]],viewQuery:function(e,t){if(1&e&&r.Gf(q,5),2&e){let e;r.iGM(e=r.CRH())&&(t.formGroup=e.first)}},decls:73,vars:46,consts:[[3,"ngSubmit"],["vform","ngForm"],[1,"ntk-cms-html-card-header"],[1,"ntk-cms-html-card-body"],[3,"options"],["class","ntk-full-width",4,"ngIf"],[1,"ntk-full-width"],["matInput","","name","dataModel.TitleML","type","text",3,"ngModel","disabled","ngModelChange"],["matInput","","name","dataModel.TitleResourceLanguage","type","text","minlength","3","maxlength","100","required","",3,"ngModel","placeholder","disabled","ngModelChange"],["TitleResourceLanguage",""],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matSuffix",""],["align","end"],[4,"ngIf"],[3,"optionSelectForce","optionPlaceholder","optionDisabled","optionChange",4,"ngIf"],[1,"mb-3"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","50","width","50",3,"src",4,"ngIf"],[1,"mb-9"],[3,"click"],["matInput","","name"," dataModel.LinkFileContentId","type","text","placeholder","\u0634\u0646\u0627\u0633\u0647 \u0641\u0627\u06cc\u0644 \u0627\u0635\u0644\u06cc","autocomplete","off",3,"ngModel","ngModelChange","click"],["LinkFileContentId",""],["matSuffix","",3,"click"],[3,"language","isPopup","openForm","tree","openFilemanagerButtonLabelKey","openDirectUploadView","selectFileType","openFilemanagerButtonView","itemSelected","openFormChange"],["matInput","","name","dataModel.Description","type","text","minlength","0","maxlength","500","rows","5",3,"ngModel","placeholder","ngModelChange"],["Description",""],["name","dataModel.IsApproved",3,"ngModel","disabled","ngModelChange",4,"ngIf"],["matInput","","name","dataModel.ApprovedResult","type","text","minlength","0","maxlength","500","rows","5",3,"ngModel","placeholder","ngModelChange"],["ApprovedResult",""],[1,"ntk-cms-html-card-message"],[1,"form-actions"],[1,"form-text","text-muted"],[1,"form-text","text-muted","danger"],[1,"ntk-cms-html-card-footer"],["class","form-actions",4,"ngIf"],["name","dataModel.RecordStatus",3,"placeholder","ngModel","panelClass","ngModelChange"],["RecordStatus","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["matInput","","name","dataModel.Title","type","text","minlength","0","maxlength","100",3,"ngModel","placeholder","ngModelChange"],["Title",""],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[3,"optionSelectForce","optionPlaceholder","optionDisabled","optionChange"],["aria-hidden","","height","50","width","50",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],["name","dataModel.IsApproved",3,"ngModel","disabled","ngModelChange"],["matInput","","name","dataModel.ApproveCheckDate",3,"matDatepicker","ngModel","ngModelChange"],["matSuffix","",3,"for"],["touchUi",""],["ApproveCheckDate",""],["matInput","","name","dataModel.ExpireDate",3,"matDatepicker","ngModel","ngModelChange"],["ExpireDate",""],["type","button",1,"btn","btn-light",3,"click"],[1,"ft-x"],["type","submit",1,"btn","btn-success",3,"disabled","click"],[1,"fa","fa-check-square-o"]],template:function(e,t){if(1&e&&(r.TgZ(0,"form",0,1),r.NdJ("ngSubmit",function(){return t.onFormSubmit()}),r.TgZ(2,"div",2),r._uU(3),r.qZA(),r.TgZ(4,"div",3),r._UZ(5,"app-progress-spinner",4),r.YNc(6,U,8,8,"mat-form-field",5),r.YNc(7,w,11,6,"mat-form-field",5),r.TgZ(8,"mat-form-field",6),r.TgZ(9,"mat-label"),r._uU(10),r.qZA(),r.TgZ(11,"input",7),r.NdJ("ngModelChange",function(e){return t.dataModel.TitleML=e}),r.qZA(),r.qZA(),r.TgZ(12,"mat-form-field",6),r.TgZ(13,"mat-label"),r._uU(14),r.qZA(),r.TgZ(15,"input",8,9),r.NdJ("ngModelChange",function(e){return t.dataModel.TitleResourceLanguage=e}),r.qZA(),r.YNc(17,J,2,0,"mat-icon",10),r.TgZ(18,"mat-icon",11),r._uU(19,"mode_edit"),r.qZA(),r.TgZ(20,"mat-hint",12),r._uU(21),r.qZA(),r.YNc(22,L,5,4,"mat-error",13),r.qZA(),r.YNc(23,_,1,3,"app-cms-user-selector",14),r.YNc(24,y,1,3,"app-cms-site-selector",14),r.YNc(25,N,1,3,"app-core-userclaimtype-selector",14),r.TgZ(26,"div",15),r.YNc(27,R,2,3,"img",16),r.qZA(),r.TgZ(28,"div",17),r.TgZ(29,"mat-form-field",6),r.TgZ(30,"mat-label",18),r.NdJ("click",function(){return t.fileManagerOpenForm=!0}),r._uU(31,"\u0641\u0627\u06cc\u0644 \u0645\u062f\u0627\u0631\u06a9 "),r.qZA(),r.TgZ(32,"input",19,20),r.NdJ("ngModelChange",function(e){return t.dataModel.LinkFileContentId=e})("click",function(){return t.fileManagerOpenForm=!0}),r.qZA(),r.YNc(34,O,2,0,"mat-icon",10),r.TgZ(35,"mat-icon",21),r.NdJ("click",function(){return t.fileManagerOpenForm=!0}),r._uU(36,"mode_edit"),r.qZA(),r.qZA(),r.TgZ(37,"cms-file-manager",22),r.NdJ("itemSelected",function(e){return t.onActionFileSelected(e)})("openFormChange",function(e){return t.fileManagerOpenForm=e}),r.qZA(),r.qZA(),r.TgZ(38,"mat-form-field",6),r.TgZ(39,"mat-label"),r._uU(40),r.qZA(),r.TgZ(41,"textarea",23,24),r.NdJ("ngModelChange",function(e){return t.dataModel.Description=e}),r.qZA(),r.YNc(43,Q,2,0,"mat-icon",10),r.TgZ(44,"mat-icon",11),r._uU(45,"mode_edit"),r.qZA(),r.TgZ(46,"mat-hint",12),r._uU(47),r.qZA(),r.YNc(48,Y,5,4,"mat-error",13),r.qZA(),r._UZ(49,"hr"),r.TgZ(50,"div",6),r.YNc(51,P,2,3,"mat-slide-toggle",25),r.qZA(),r.TgZ(52,"mat-form-field",6),r.TgZ(53,"mat-label"),r._uU(54),r.qZA(),r.TgZ(55,"textarea",26,27),r.NdJ("ngModelChange",function(e){return t.dataModel.ApprovedResult=e}),r.qZA(),r.YNc(57,H,2,0,"mat-icon",10),r.TgZ(58,"mat-icon",11),r._uU(59,"mode_edit"),r.qZA(),r.TgZ(60,"mat-hint",12),r._uU(61),r.qZA(),r.YNc(62,G,5,4,"mat-error",13),r.qZA(),r.YNc(63,K,9,6,"mat-form-field",5),r.YNc(64,B,8,5,"mat-form-field",5),r.qZA(),r.TgZ(65,"div",28),r.TgZ(66,"div",29),r.TgZ(67,"small",30),r._uU(68),r.qZA(),r.TgZ(69,"small",31),r._uU(70),r.qZA(),r.qZA(),r.qZA(),r.TgZ(71,"div",32),r.YNc(72,$,9,7,"div",33),r.qZA(),r.qZA()),2&e){const e=r.MAs(16),o=r.MAs(42),n=r.MAs(56);r.xp6(3),r.hij(" ",t.formInfo.FormTitle," "),r.xp6(2),r.Q6J("options",t.loading),r.xp6(1),r.Q6J("ngIf",t.ProfessionalData),r.xp6(1),r.Q6J("ngIf",t.ProfessionalData),r.xp6(3),r.hij(" ",null==t.fieldsInfo.TitleML?null:t.fieldsInfo.TitleML.FieldTitle,""),r.xp6(1),r.Q6J("ngModel",t.dataModel.TitleML)("disabled",!0),r.xp6(3),r.Oqu(null==t.fieldsInfo.TitleResourceLanguage?null:t.fieldsInfo.TitleResourceLanguage.FieldTitle),r.xp6(1),r.s9C("placeholder",null==t.fieldsInfo.Title?null:t.fieldsInfo.Title.FieldTitle),r.Q6J("ngModel",t.dataModel.TitleResourceLanguage)("disabled",!(null!=t.fieldsInfo.TitleResourceLanguage&&t.fieldsInfo.TitleResourceLanguage.AccessEditField)),r.xp6(2),r.Q6J("ngIf",t.dataModel.TitleResourceLanguage),r.xp6(4),r.hij("",e.value.length," / 100"),r.xp6(1),r.Q6J("ngIf",null==e.errors?null:e.errors.required),r.xp6(1),r.Q6J("ngIf",t.ProfessionalData),r.xp6(1),r.Q6J("ngIf",t.ProfessionalData),r.xp6(1),r.Q6J("ngIf",t.ProfessionalData),r.xp6(2),r.Q6J("ngIf",(null==t.dataModel||null==t.dataModel.LinkFileContentIdSrc?null:t.dataModel.LinkFileContentIdSrc.length)>0),r.xp6(5),r.Q6J("ngModel",t.dataModel.LinkFileContentId),r.xp6(2),r.Q6J("ngIf",t.dataModel.LinkFileContentId),r.xp6(3),r.Q6J("language",t.appLanguage)("isPopup",!0)("openForm",t.fileManagerOpenForm)("tree",t.fileManagerTree)("openFilemanagerButtonLabelKey","select")("openDirectUploadView",!0)("selectFileType",t.selectFileTypeMainImage)("openFilemanagerButtonView",!1),r.xp6(3),r.Oqu(null==t.fieldsInfo.Description?null:t.fieldsInfo.Description.FieldTitle),r.xp6(1),r.s9C("placeholder",null==t.fieldsInfo.Description?null:t.fieldsInfo.Description.FieldTitle),r.Q6J("ngModel",t.dataModel.Description),r.xp6(2),r.Q6J("ngIf",t.dataModel.Description),r.xp6(4),r.hij("",o.value.length," / 500"),r.xp6(1),r.Q6J("ngIf",null==o.errors?null:o.errors.required),r.xp6(3),r.Q6J("ngIf",null==t.fieldsInfo.IsApproved?null:t.fieldsInfo.IsApproved.AccessWatchField),r.xp6(3),r.Oqu(null==t.fieldsInfo.ApprovedResult?null:t.fieldsInfo.ApprovedResult.FieldTitle),r.xp6(1),r.s9C("placeholder",null==t.fieldsInfo.Description?null:t.fieldsInfo.Description.FieldTitle),r.Q6J("ngModel",t.dataModel.ApprovedResult),r.xp6(2),r.Q6J("ngIf",t.dataModel.ApprovedResult),r.xp6(4),r.hij("",n.value.length," / 500"),r.xp6(1),r.Q6J("ngIf",null==n.errors?null:n.errors.required),r.xp6(1),r.Q6J("ngIf",null==t.fieldsInfo.ApproveCheckDate?null:t.fieldsInfo.ApproveCheckDate.AccessWatchField),r.xp6(1),r.Q6J("ngIf",null==t.fieldsInfo.ExpireDate?null:t.fieldsInfo.ExpireDate.AccessWatchField),r.xp6(4),r.hij("",t.formInfo.FormAlert," "),r.xp6(2),r.hij("",t.formInfo.FormError," "),r.xp6(2),r.Q6J("ngIf",t.formInfo.FormSubmitAllow)}},directives:[f._Y,f.JL,f.F,p.O,g.O5,m.KE,m.hX,h.Nt,f.Fj,f.JJ,f.On,f.wO,f.nD,f.Q7,I.Hw,m.R9,m.bx,A.HG,M.gD,g.sg,Z.ey,m.TO,T.g,x.P,C.b,S.Rr,F.hl,F.nW,F.Mq],pipes:[c.X$,k.v],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:yellow}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:black}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}"]}),e})()},56014:function(e,t,o){o.d(t,{b:function(){return F}});var n=o(8239),i=o(37716),l=o(2769),a=o(3679),r=o(39761),s=o(54395),d=o(87519),c=o(43190),u=o(88002),f=o(60656),p=o(98295),g=o(38583),m=o(49983),h=o(21554),I=o(72458),A=o(76627),M=o(81418);function Z(e,t){if(1&e&&(i._UZ(0,"img",8),i.ALo(1,"cmsthumbnail")),2&e){const e=i.oxw();i.s9C("src",i.lcZ(1,1,e.dataModelSelect.LinkMainImageIdSrc),i.LSH)}}function T(e,t){if(1&e&&(i._UZ(0,"img",8),i.ALo(1,"cmsthumbnail")),2&e){const e=i.oxw().$implicit;i.s9C("src",i.lcZ(1,1,e.LinkMainImageIdSrc),i.LSH)}}function x(e,t){if(1&e&&(i.TgZ(0,"mat-option",9),i.YNc(1,T,2,3,"img",2),i.TgZ(2,"span"),i._uU(3),i.qZA(),i.qZA()),2&e){const e=t.$implicit,o=i.oxw();i.Q6J("value",e)("disabled",o.optionDisabled),i.xp6(1),i.Q6J("ngIf",e.LinkMainImageIdSrc),i.xp6(2),i.Oqu(o.displayOption(e))}}function C(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"mat-icon",10),i.NdJ("click",function(){return i.CHM(e),i.oxw().onActionSelectClear()}),i._uU(1,"close"),i.qZA()}}const S=["*"];let F=(()=>{class e{constructor(e,t,o){this.coreEnumService=e,this.cdr=t,this.categoryService=o,this.dataModelResult=new l.y$4,this.dataModelSelect=new l.OoK,this.loading=new f.O,this.formControl=new a.NI,this.optionDisabled=!1,this.optionSelectFirstItem=!1,this.optionPlaceholder="",this.optionChange=new i.vpe,this.optionReload=()=>this.onActionReload(),this.loading.cdr=this.cdr}set optionSelectForce(e){this.onActionSelectForce(e)}ngOnInit(){this.loadOptions()}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe((0,r.O)(""),(0,s.b)(1e3),(0,d.x)(),(0,c.w)(e=>"string"==typeof e||"number"==typeof e?this.DataGetAll(e||""):[]))}displayFn(e){return e?e.Title:void 0}displayOption(e){return e?e.Title:void 0}DataGetAll(e){var t=this;return(0,n.Z)(function*(){const o=new l.Hay;o.RowPerPage=20,o.AccessLoad=!0;let n=new l.AO3;n.PropertyName="Title",n.Value=e,n.SearchType=l.b3P.Contains,n.ClauseType=l.KT6.Or,o.Filters.push(n),e&&"number"==typeof+e&&+e>0&&(n=new l.AO3,n.PropertyName="Id",n.Value=e,n.SearchType=l.b3P.Equal,n.ClauseType=l.KT6.Or,o.Filters.push(n));const i=t.constructor.name+"main";return t.loading.Start(i),yield t.categoryService.ServiceGetAll(o).pipe((0,u.U)(e=>(t.dataModelResult=e,t.optionSelectFirstItem&&(!t.dataModelSelect||!t.dataModelSelect.Id||t.dataModelSelect.Id<=0)&&t.dataModelResult.ListItems.length>0&&(t.optionSelectFirstItem=!1,setTimeout(()=>{t.formControl.setValue(t.dataModelResult.ListItems[0])},1e3),t.onActionSelect(t.dataModelResult.ListItems[0])),t.loading.Stop(i),e.ListItems))).toPromise()})()}onActionSelect(e){this.optionDisabled||(this.dataModelSelect=e,this.optionChange.emit(this.dataModelSelect))}onActionSelectClear(){this.optionDisabled||(this.formControl.setValue(null),this.optionChange.emit(null))}push(e){return this.filteredOptions.pipe((0,u.U)(t=>(t.find(t=>t.Id===e.Id)||t.push(e),t)))}onActionSelectForce(e){if("number"==typeof e&&e>0){if(this.dataModelSelect&&this.dataModelSelect.Id===e)return;if(this.dataModelResult&&this.dataModelResult.ListItems&&this.dataModelResult.ListItems.find(t=>t.Id===e)){const t=this.dataModelResult.ListItems.find(t=>t.Id===e);return this.dataModelSelect=t,void this.formControl.setValue(t)}this.categoryService.ServiceGetOneById(e).subscribe(e=>{e.IsSuccess&&(this.filteredOptions=this.push(e.Item),this.dataModelSelect=e.Item,this.formControl.setValue(e.Item),this.optionChange.emit(e.Item))})}else{if(typeof e==typeof l.OoK)return this.filteredOptions=this.push(e),this.dataModelSelect=e,void this.formControl.setValue(e);this.formControl.setValue(null)}}onActionReload(){this.dataModelSelect=new l.OoK,this.DataGetAll(null)}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(l.FLW),i.Y36(i.sBO),i.Y36(l.kf3))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-core-userclaimtype-selector"]],inputs:{optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange"},ngContentSelectors:S,decls:11,vars:10,consts:[[1,"ntk-full-width"],["matPrefix",""],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","25","width","25",3,"src",4,"ngIf"],["type","text","aria-label","Assignee","matInput","",3,"placeholder","formControl","matAutocomplete"],[3,"displayWith","optionSelected"],["auto17","matAutocomplete"],[3,"value","disabled",4,"ngFor","ngForOf"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["aria-hidden","","height","25","width","25",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],[3,"value","disabled"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(e,t){if(1&e&&(i.F$t(),i.TgZ(0,"mat-form-field",0),i.TgZ(1,"span",1),i.YNc(2,Z,2,3,"img",2),i._uU(3," \xa0"),i.qZA(),i._UZ(4,"input",3),i.TgZ(5,"mat-autocomplete",4,5),i.NdJ("optionSelected",function(e){return t.onActionSelect(e.option.value)}),i.YNc(7,x,4,4,"mat-option",6),i.ALo(8,"async"),i.qZA(),i.YNc(9,C,2,0,"mat-icon",7),i.Hsn(10),i.qZA()),2&e){const e=i.MAs(6);i.xp6(2),i.Q6J("ngIf",t.dataModelSelect&&t.dataModelSelect.LinkMainImageIdSrc),i.xp6(2),i.s9C("placeholder",t.optionPlaceholder),i.Q6J("formControl",t.formControl)("matAutocomplete",e),i.uIk("disabled",!!t.optionDisabled||null),i.xp6(1),i.Q6J("displayWith",t.displayFn),i.xp6(2),i.Q6J("ngForOf",i.lcZ(8,8,t.filteredOptions)),i.xp6(2),i.Q6J("ngIf",t.dataModelSelect.Id)}},directives:[p.KE,p.qo,g.O5,m.Nt,a.Fj,h.ZL,a.JJ,a.oH,h.XC,g.sg,I.ey,A.Hw,p.R9],pipes:[g.Ov,M.v],styles:[""]}),e})()}}]);