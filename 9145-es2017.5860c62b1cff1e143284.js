"use strict";(self.webpackChunkntk_cms_web_angular_v2=self.webpackChunkntk_cms_web_angular_v2||[]).push([[9145],{73830:function(o,e,t){t.d(e,{J:function(){return k}});var i=t(37716),n=t(3679),r=t(54395),l=t(38583);function s(o,e){if(1&o&&i._UZ(0,"input",2),2&o){const o=i.oxw();i.Q6J("id",o.field.name)("name",o.field.name)("formControl",o.optionFormControl),i.uIk("type",o.field.type)}}function a(o,e){if(1&o&&i._UZ(0,"textarea",3),2&o){const o=i.oxw();i.ekj("is-invalid",o.isDirty&&!o.isValid),i.Q6J("formControl",o.optionFormControl)("id",o.field.name)("placeholder",o.field.placeholder)}}let c=(()=>{class o{constructor(){this.field={}}get isValid(){return this.optionFormControl.valid}get isDirty(){return this.optionFormControl.dirty}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=i.Xpm({type:o,selectors:[["textbox"]],inputs:{field:"field",optionFormControl:"optionFormControl"},decls:2,vars:2,consts:[["class","form-control",3,"id","name","formControl",4,"ngIf"],["rows","9","class","form-control",3,"is-invalid","formControl","id","placeholder",4,"ngIf"],[1,"form-control",3,"id","name","formControl"],["rows","9",1,"form-control",3,"formControl","id","placeholder"]],template:function(o,e){1&o&&(i.YNc(0,s,1,4,"input",0),i.YNc(1,a,1,5,"textarea",1)),2&o&&(i.Q6J("ngIf",!e.field.multiline),i.xp6(1),i.Q6J("ngIf",e.field.multiline))},directives:[l.O5,n.Fj,n.JJ,n.oH],encapsulation:2}),o})();function f(o,e){if(1&o&&(i.TgZ(0,"option",2),i._uU(1),i.qZA()),2&o){const o=e.$implicit;i.Q6J("value",o.key),i.xp6(1),i.Oqu(o.label)}}let d=(()=>{class o{constructor(){this.field={}}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=i.Xpm({type:o,selectors:[["dropdown"]],inputs:{field:"field",optionFormControl:"optionFormControl"},decls:2,vars:3,consts:[[1,"form-control",3,"id","formControl"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(o,e){1&o&&(i.TgZ(0,"select",0),i.YNc(1,f,2,2,"option",1),i.qZA()),2&o&&(i.Q6J("id",e.field.name)("formControl",e.optionFormControl),i.xp6(1),i.Q6J("ngForOf",e.field.options))},directives:[n.EJ,n.JJ,n.oH,l.sg,n.YN,n.Kr],encapsulation:2}),o})();function p(o,e){if(1&o&&(i.TgZ(0,"div",2),i.TgZ(1,"label",3),i._UZ(2,"input",4),i._uU(3),i.qZA(),i.qZA()),2&o){const o=e.$implicit;i.xp6(2),i.Q6J("formControlName",o.key),i.xp6(1),i.hij(" ",o.label,"")}}let u=(()=>{class o{constructor(){this.field={}}get isValid(){return this.optionFormGroup.controls[this.field.name].valid}get isDirty(){return this.optionFormGroup.controls[this.field.name].dirty}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=i.Xpm({type:o,selectors:[["checkbox"]],inputs:{field:"field",optionFormGroup:"optionFormGroup"},decls:2,vars:2,consts:[[3,"formGroup"],["class","form-check form-check",4,"ngFor","ngForOf"],[1,"form-check","form-check"],[1,"form-check-label"],["type","checkbox","id","inlineCheckbox1","value","option1",1,"form-check-input",3,"formControlName"]],template:function(o,e){1&o&&(i.TgZ(0,"div",0),i.YNc(1,p,4,2,"div",1),i.qZA()),2&o&&(i.Q6J("formGroup",e.optionFormGroup),i.xp6(1),i.Q6J("ngForOf",e.field.options))},directives:[n.JL,n.sg,l.sg,n.Wl,n.JJ,n.u],encapsulation:2}),o})();function m(o,e){if(1&o&&(i.TgZ(0,"div",1),i._UZ(1,"input",2),i.TgZ(2,"label",3),i._uU(3),i.qZA(),i.qZA()),2&o){const o=e.$implicit,t=i.oxw();i.xp6(1),i.Q6J("formControl",t.optionFormControl)("value",o.key),i.xp6(2),i.hij(" ",o.label," ")}}let h=(()=>{class o{constructor(){this.field={}}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=i.Xpm({type:o,selectors:[["radio"]],inputs:{field:"field",optionFormControl:"optionFormControl"},decls:1,vars:1,consts:[["class","form-check",4,"ngFor","ngForOf"],[1,"form-check"],["type","radio",1,"form-check-input",3,"formControl","value"],[1,"form-check-label"]],template:function(o,e){1&o&&i.YNc(0,m,4,3,"div",0),2&o&&i.Q6J("ngForOf",e.field.options)},directives:[l.sg,n._,n.Fj,n.JJ,n.oH],encapsulation:2}),o})();function g(o,e){if(1&o){const o=i.EpF();i.TgZ(0,"div",3),i.NdJ("hovered",function(e){return i.CHM(o),i.oxw().toggleHover(e)})("dropped",function(e){return i.CHM(o),i.oxw().field.onUpload(e)}),i.TgZ(1,"p",4),i._uU(2," Drag a file here or "),i.TgZ(3,"label",5),i.TgZ(4,"input",6),i.NdJ("change",function(e){return i.CHM(o),i.oxw().field.onUpload(e.target.files)}),i.qZA(),i._uU(5," browse "),i.qZA(),i._uU(6," to upload. "),i.qZA(),i.qZA()}if(2&o){const o=i.oxw();i.ekj("hovering",o.isHovering)}}function v(o,e){if(1&o&&(i.TgZ(0,"div"),i.TgZ(1,"div",7),i._UZ(2,"img",8),i.qZA(),i.qZA()),2&o){const o=i.oxw();i.xp6(2),i.Q6J("src",o.field.value,i.LSH)}}let x=(()=>{class o{constructor(){this.field={},this.isHovering=!1}get isValid(){return this.optionFormControl.controls[this.field.name].valid}get isDirty(){return this.optionFormControl.controls[this.field.name].dirty}ngOnChange(){console.log(this.field.value)}toggleHover(o){this.isHovering=!0}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=i.Xpm({type:o,selectors:[["file"]],inputs:{field:"field",optionFormControl:"optionFormControl"},decls:3,vars:3,consts:[[3,"formGroup"],["class","drop-container dropzone","dropZone","",3,"hovering","hovered","dropped",4,"ngIf"],[4,"ngIf"],["dropZone","",1,"drop-container","dropzone",3,"hovered","dropped"],[1,"m-0"],[1,"upload-button"],["type","file","multiple","",3,"change"],[1,"card"],[1,"card-img-top",3,"src"]],template:function(o,e){1&o&&(i.TgZ(0,"div",0),i.YNc(1,g,7,2,"div",1),i.YNc(2,v,3,1,"div",2),i.qZA()),2&o&&(i.Q6J("formGroup",e.optionFormControl),i.xp6(1),i.Q6J("ngIf",!e.field.value),i.xp6(1),i.Q6J("ngIf",e.field.value))},directives:[n.JL,n.sg,l.O5],styles:[".drop-container[_ngcontent-%COMP%]{background:#fff;border-radius:6px;height:150px;width:100%;box-shadow:1px 2px 20px #0a0a0a1a;display:flex;align-items:center;justify-content:center;border:2px dashed #c0c4c7}p[_ngcontent-%COMP%]{font-size:16px;font-weight:400;color:#c0c4c7}.upload-button[_ngcontent-%COMP%]{display:inline-block;border:none;outline:none;cursor:pointer;color:#5754a3}.upload-button[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.dropzone[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:column;border-radius:5px;background:white;margin:10px 0}.dropzone.hovering[_ngcontent-%COMP%]{border:2px solid #f16624;color:#dadada!important}progress[_ngcontent-%COMP%]::-webkit-progress-value{-webkit-transition:width .1s ease;transition:width .1s ease}"]}),o})();function C(o,e){1&o&&(i.TgZ(0,"strong",8),i._uU(1,"*"),i.qZA())}function F(o,e){if(1&o&&i._UZ(0,"textbox",9),2&o){const o=i.oxw();i.Q6J("field",o.field)("optionFormControl",o.convertToFormControl(o.formGroup.get(o.field.name)))}}function w(o,e){if(1&o&&i._UZ(0,"textbox",9),2&o){const o=i.oxw();i.Q6J("field",o.field)("optionFormControl",o.convertToFormControl(o.formGroup.get(o.field.name)))}}function J(o,e){if(1&o&&i._UZ(0,"dropdown",9),2&o){const o=i.oxw();i.Q6J("field",o.field)("optionFormControl",o.convertToFormControl(o.formGroup.get(o.field.name)))}}function b(o,e){if(1&o&&i._UZ(0,"checkbox",10),2&o){const o=i.oxw();i.Q6J("field",o.field)("optionFormGroup",o.convertToFormGroup(o.formGroup.get(o.field.name)))}}function Z(o,e){if(1&o&&i._UZ(0,"radio",9),2&o){const o=i.oxw();i.Q6J("field",o.field)("optionFormControl",o.convertToFormControl(o.formGroup.get(o.field.name)))}}function y(o,e){if(1&o&&i._UZ(0,"file",11),2&o){const o=i.oxw();i.Q6J("field",o.field)("formControl",o.convertToFormControl(o.formGroup.get(o.field.name)))}}function N(o,e){if(1&o&&(i.TgZ(0,"div",12),i._uU(1),i.qZA()),2&o){const o=i.oxw();i.xp6(1),i.hij("",o.field.label," is required")}}let _=(()=>{class o{constructor(){}get isValid(){return this.formGroup.controls[this.field.name].valid}get isDirty(){return this.formGroup.controls[this.field.name].dirty}ngOnInit(){}convertToFormControl(o){return o}convertToFormGroup(o){return o}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=i.Xpm({type:o,selectors:[["field-builder"]],inputs:{field:"field",formGroup:"formGroup"},decls:12,vars:12,consts:[[1,"form-group","row",3,"formGroup"],[1,"col-md-3","form-control-label"],["class","text-danger",4,"ngIf"],[1,"col-md-9",3,"ngSwitch"],[3,"field","optionFormControl",4,"ngSwitchCase"],[3,"field","optionFormGroup",4,"ngSwitchCase"],[3,"field","formControl",4,"ngSwitchCase"],["class","alert alert-danger my-1 p-2 fadeInDown animated",4,"ngIf"],[1,"text-danger"],[3,"field","optionFormControl"],[3,"field","optionFormGroup"],[3,"field","formControl"],[1,"alert","alert-danger","my-1","p-2","fadeInDown","animated"]],template:function(o,e){1&o&&(i.TgZ(0,"div",0),i.TgZ(1,"label",1),i._uU(2),i.YNc(3,C,2,0,"strong",2),i.qZA(),i.TgZ(4,"div",3),i.YNc(5,F,1,2,"textbox",4),i.YNc(6,w,1,2,"textbox",4),i.YNc(7,J,1,2,"dropdown",4),i.YNc(8,b,1,2,"checkbox",5),i.YNc(9,Z,1,2,"radio",4),i.YNc(10,y,1,2,"file",6),i.YNc(11,N,2,1,"div",7),i.qZA(),i.qZA()),2&o&&(i.Q6J("formGroup",e.formGroup),i.xp6(1),i.uIk("for",e.field.label),i.xp6(1),i.hij(" ",e.field.label," "),i.xp6(1),i.Q6J("ngIf",e.field.required&&e.formGroup.get(e.field.name).invalid),i.xp6(1),i.Q6J("ngSwitch",e.field.type),i.xp6(1),i.Q6J("ngSwitchCase","text"),i.xp6(1),i.Q6J("ngSwitchCase","date"),i.xp6(1),i.Q6J("ngSwitchCase","dropdown"),i.xp6(1),i.Q6J("ngSwitchCase","checkbox"),i.xp6(1),i.Q6J("ngSwitchCase","radio"),i.xp6(1),i.Q6J("ngSwitchCase","file"),i.xp6(1),i.Q6J("ngIf",!e.isValid&&e.isDirty))},directives:[n.JL,n.sg,l.O5,l.RF,l.n9,c,d,u,h,x,n.JJ,n.oH],encapsulation:2}),o})();function I(o,e){if(1&o&&(i.TgZ(0,"div"),i._UZ(1,"field-builder",1),i.qZA()),2&o){const o=e.$implicit,t=i.oxw();i.xp6(1),i.Q6J("field",o)("formGroup",t.formGroup)}}let k=(()=>{class o{constructor(){this.jsonValueChange=new i.vpe,this.privatePropertiesInfos=[],this.formValues={},this.fields=[],this.DEBOUNCE_TIME_FORM_INPUT=250}set jsonValue(o){o&&o.length>0&&(this.privateJsonValue=JSON.parse(o),this.actionSetValue())}set propertiesInfos(o){this.privatePropertiesInfos=o,this.actionFormMake(),this.actionSetValue()}ngOnInit(){}ngAfterViewInit(){this.unsubcribe=this.formGroup.valueChanges.pipe((0,r.b)(this.DEBOUNCE_TIME_FORM_INPUT)).subscribe(o=>{this.formValues||(this.formValues={}),this.privatePropertiesInfos&&this.privatePropertiesInfos.length>0&&this.privatePropertiesInfos.forEach(e=>{(o[e.FieldName]||""===o[e.FieldName])&&(this.formValues[e.FieldName]=o[e.FieldName]),this.jsonValueChange.emit(JSON.stringify(this.formValues))})})}actionFormMake(){this.privatePropertiesInfos&&(this.fields=[],this.privatePropertiesInfos.forEach(o=>{let e="";switch(this.formValues&&this.formValues[o.FieldName]&&(e=this.formValues[o.FieldName]),o.FieldType){case"System.String":case"System.Int64":case"System.Int32":default:this.fields.push({type:"text",name:o.FieldName,label:o.FieldTitle,value:e,required:!1})}})),this.fields.forEach(o=>{"checkbox"===o.type?(this.formGroup.addControl(o.name,new n.cw({})),o.options.forEach(e=>{this.formGroup.get(o.name).addControl(e.key,new n.NI(!1))})):this.formGroup.addControl(o.name,new n.NI(o.value||"",o.required?n.kI.required:null))})}actionSetValue(){this.privateJsonValue&&this.privatePropertiesInfos&&this.privatePropertiesInfos.length>0&&this.privatePropertiesInfos.forEach(o=>{if(this.formValues||(this.formValues={}),this.formValues[o.FieldName]=this.privateJsonValue[o.FieldName]?this.privateJsonValue[o.FieldName]:"",this.formValues[o.FieldName]&&this.fields.findIndex(e=>e.name===o.FieldName)>=0){const e=this.formValues[o.FieldName];this.fields.find(e=>e.name===o.FieldName).value=e,this.formGroup.get(o.FieldName).setValue(e,{emitEvent:!1})}})}ngDistroy(){this.unsubcribe()}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=i.Xpm({type:o,selectors:[["dynamic-form-builder-cms"]],inputs:{jsonValue:"jsonValue",propertiesInfos:"propertiesInfos",formGroup:"formGroup"},outputs:{jsonValueChange:"jsonValueChange"},decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[3,"field","formGroup"]],template:function(o,e){1&o&&i.YNc(0,I,2,2,"div",0),2&o&&i.Q6J("ngForOf",e.fields)},directives:[l.sg,_,n.JL,n.sg],encapsulation:2}),o})()},87407:function(o,e,t){t.d(e,{d:function(){return l}});var i=t(38583),n=t(3679),r=t(37716);let l=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=r.oAB({type:o}),o.\u0275inj=r.cJS({providers:[],imports:[[i.ez,n.UX]]}),o})()}}]);