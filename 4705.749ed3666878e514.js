"use strict";(self.webpackChunkntk_cms_web=self.webpackChunkntk_cms_web||[]).push([[4705],{4705:(_t,T,i)=>{i.r(T),i.d(T,{SmsActionModule:()=>Mt});var C=i(1048),v=i(7076),x=i(8239),l=i(7977),M=i(656),t=i(9724),y=i(2607),F=i(3029),_=i(4817),d=i(1659),N=i(5738),Z=i(4311),E=i(8024),J=i(8161),O=i(600),P=i(1927),w=i(3151),L=i(2147),U=i(1528),b=i(7969),u=i(5691),I=i(8904),k=i(5821),R=i(1531),A=i(4848);function Q(n,r){if(1&n&&(t.TgZ(0,"mat-option",6)(1,"span"),t._uU(2),t.qZA()()),2&n){const e=r.$implicit,o=t.oxw();t.Q6J("value",e)("disabled",o.optionDisabled),t.xp6(2),t.Oqu(o.displayOption(e))}}function Y(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"mat-icon",7),t.NdJ("click",function(){return t.CHM(e),t.oxw().onActionSelectClear()}),t._uU(1,"close"),t.qZA()}}const D=["*"];let G=(()=>{class n{constructor(e,o,s,a,c){this.coreEnumService=e,this.cmsToastrService=o,this.cdr=s,this.translate=a,this.categoryService=c,this.dataModelResult=new l.y$4,this.dataModelSelect=new l.Lnx,this.loading=new M.O,this.formControl=new d.NI,this.optionPlaceholder="",this.optionSelectFirstItem=!1,this.optionChange=new t.vpe,this.optionReload=()=>this.onActionReload(),this.optionDisabled=!1,this.privateLinkCategryId="",this.loading.cdr=this.cdr,this.loading.message=this.translate.instant("MESSAGE.Receiving_information")}set optionSelectForce(e){this.onActionSelectForce(e)}set optionLinkCategryId(e){e!=this.privateLinkCategryId&&(""!=this.privateLinkCategryId&&this.onActionSelectClear(),this.privateLinkCategryId=e,this.loadOptions())}ngOnInit(){this.loadOptions()}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe((0,P.O)(""),(0,w.b)(1500),(0,L.x)(),(0,U.w)(e=>"string"==typeof e||"number"==typeof e?this.DataGetAll(e||""):[]))}displayFn(e){return e?e.title:void 0}displayOption(e){return e?e.title:void 0}DataGetAll(e){var o=this;return(0,x.Z)(function*(){const s=new l.Hay;s.rowPerPage=20,s.accessLoad=!0;let a=new l.AO3;a.propertyName="Title",a.value=e,a.searchType=l.b3P.Contains,a.clauseType=l.KT6.Or,s.filters.push(a),e&&"string"==typeof+e&&+e>0&&(a=new l.AO3,a.propertyName="Id",a.value=e,a.searchType=l.b3P.Equal,a.clauseType=l.KT6.Or,s.filters.push(a)),o.privateLinkCategryId&&o.privateLinkCategryId.length>0&&(a=new l.AO3,a.propertyName="linkCategoryId",a.value=o.privateLinkCategryId,a.searchType=l.b3P.Equal,s.filters.push(a));const c=o.constructor.name+"main";return o.loading.Start(c),yield o.categoryService.ServiceGetAll(s).pipe((0,b.U)(g=>(o.dataModelResult=g,o.optionSelectFirstItem&&(!o.dataModelSelect||!o.dataModelSelect.id||0==o.dataModelSelect.id.length)&&o.dataModelResult.listItems.length>0&&(o.optionSelectFirstItem=!1,setTimeout(()=>{o.formControl.setValue(o.dataModelResult.listItems[0]),o.onActionSelect(o.dataModelResult.listItems[0])},1e3)),o.loading.Stop(c),g.listItems))).toPromise()})()}onActionSelect(e){this.dataModelSelect=e,this.optionChange.emit(this.dataModelSelect)}onActionSelectClear(){this.formControl.setValue(null),this.optionChange.emit(null)}push(e){return this.filteredOptions.pipe((0,b.U)(o=>(o.find(s=>s.id===e.id)||o.push(e),o)))}onActionSelectForce(e){if("string"==typeof e&&e.length>0){if(this.dataModelSelect&&this.dataModelSelect.id===e)return;if(this.dataModelResult&&this.dataModelResult.listItems&&this.dataModelResult.listItems.find(o=>o.id===e)){const o=this.dataModelResult.listItems.find(s=>s.id===e);return this.dataModelSelect=o,void this.formControl.setValue(o)}this.categoryService.ServiceGetOneById(e).subscribe({next:o=>{o.isSuccess?(this.filteredOptions=this.push(o.item),this.dataModelSelect=o.item,this.formControl.setValue(o.item),this.optionChange.emit(o.item)):this.cmsToastrService.typeErrorMessage(o.errorMessage)}})}else{if(typeof e==typeof l.Lnx)return this.filteredOptions=this.push(e),this.dataModelSelect=e,void this.formControl.setValue(e);this.formControl.setValue(null)}}onActionReload(){this.dataModelSelect=new l.Lnx,this.DataGetAll(null)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(l.FLW),t.Y36(y.e),t.Y36(t.sBO),t.Y36(_.sK),t.Y36(l.ULy))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-sms-main-message-content-selector"]],inputs:{loading:"loading",optionPlaceholder:"optionPlaceholder",optionSelectFirstItem:"optionSelectFirstItem",optionReload:"optionReload",optionSelectForce:"optionSelectForce",optionLinkCategryId:"optionLinkCategryId",optionDisabled:"optionDisabled"},outputs:{optionChange:"optionChange"},ngContentSelectors:D,decls:8,vars:8,consts:[[1,"ntk-full-width"],["type","text","aria-label","Assignee","matInput","",3,"placeholder","formControl","matAutocomplete"],[3,"displayWith","optionSelected"],["auto27","matAutocomplete"],[3,"value","disabled",4,"ngFor","ngForOf"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[3,"value","disabled"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(e,o){if(1&e&&(t.F$t(),t.TgZ(0,"mat-form-field",0),t._UZ(1,"input",1),t.TgZ(2,"mat-autocomplete",2,3),t.NdJ("optionSelected",function(a){return o.onActionSelect(a.option.value)}),t.YNc(4,Q,3,3,"mat-option",4),t.ALo(5,"async"),t.qZA(),t.YNc(6,Y,2,0,"mat-icon",5),t.Hsn(7),t.qZA()),2&e){const s=t.MAs(3);t.xp6(1),t.s9C("placeholder",o.optionPlaceholder),t.Q6J("formControl",o.formControl)("matAutocomplete",s),t.xp6(1),t.Q6J("displayWith",o.displayFn),t.xp6(2),t.Q6J("ngForOf",t.lcZ(5,6,o.filteredOptions)),t.xp6(2),t.Q6J("ngIf",o.dataModelSelect.id)}},directives:[u.KE,I.Nt,d.Fj,k.ZL,d.JJ,d.oH,k.XC,C.sg,R.ey,C.O5,A.Hw,u.R9],pipes:[C.Ov],encapsulation:2}),n})();var H=i(4405),p=i(4187),j=i(9252),B=i(8485),q=i(727),W=i(3472),X=i(6088);function $(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"mat-tree-node",6),t._UZ(1,"button",7),t.TgZ(2,"mat-checkbox",8),t.NdJ("change",function(){const a=t.CHM(e).$implicit;return t.oxw().checklistSelection.toggle(a)}),t._uU(3),t.qZA()()}if(2&n){const e=r.$implicit,o=t.oxw();t.xp6(2),t.Q6J("checked",o.checklistSelection.isSelected(e)),t.xp6(1),t.Oqu(e.title)}}function K(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"mat-nested-tree-node")(1,"li")(2,"div",9)(3,"button",10)(4,"mat-icon",11),t._uU(5),t.qZA()(),t.TgZ(6,"mat-checkbox",12),t.NdJ("change",function(){const a=t.CHM(e).$implicit;return t.oxw().todoItemSelectionToggle(a)}),t._uU(7),t.qZA()(),t.TgZ(8,"ul"),t.GkF(9,13),t.qZA()()()}if(2&n){const e=r.$implicit,o=t.oxw();t.xp6(3),t.uIk("aria-label","Toggle "+e.title),t.xp6(2),t.hij(" ",o.treeControl.isExpanded(e)?"expand_more":"chevron_right"," "),t.xp6(1),t.Q6J("checked",o.checklistSelection.isSelected(e))("indeterminate",o.descendantsPartiallySelected(e)),t.xp6(1),t.hij(" ",e.title,""),t.xp6(1),t.ekj("category-tree-invisible",!o.treeControl.isExpanded(e))}}let V=(()=>{class n{constructor(e,o,s,a,c,g,f){this.cmsToastrService=e,this.coreEnumService=o,this.categoryService=s,this.cdr=a,this.dialog=c,this.translate=g,this.tokenHelper=f,this.dataModelSelect=[],this.dataModelResult=new l.y$4,this.filteModel=new l.Hay,this.loading=new M.O,this.treeControl=new H.VY(m=>m.children),this.dataSource=new p.WX,this.runComplate=!1,this.optionSelectChecked=new t.vpe,this.optionSelectDisChecked=new t.vpe,this.optionModelChange=new t.vpe,this.checklistSelection=new j.Ov(!0),this.hasChild=(m,h)=>!!h.children&&h.children.length>0,this.hasNoContent=(m,h)=>h.children,this.loading.cdr=this.cdr,this.loading.message=this.translate.instant("MESSAGE.Receiving_information"),this.checklistSelection.changed.subscribe(m=>{if(!this.runComplate)return;const h=[];this.checklistSelection.selected.forEach(S=>{h.push(S.id)}),this.optionModelChange.emit(h),m.added&&m.added.length>0&&m.added.forEach(S=>{this.optionSelectChecked.emit(S.id)}),m.removed&&m.removed.length>0&&m.removed.forEach(S=>{this.optionSelectDisChecked.emit(S.id)})})}set optionModel(e){this.dataModelSelect=e,this.loadCheked()}ngOnInit(){this.DataGetAll(),this.cmsApiStoreSubscribe=this.tokenHelper.getCurrentTokenOnChange().subscribe(e=>{this.DataGetAll()})}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}loadCheked(e=this.treeControl.dataNodes){this.runComplate=!1,this.treeControl.dataNodes&&this.dataModelSelect&&this.dataModelSelect.length>0&&e.forEach(o=>{this.dataModelSelect.find(a=>a===o.id)&&this.checklistSelection.select(o),o.children&&o.children.length>0&&this.loadCheked(o.children)}),this.runComplate=!0}DataGetAll(){this.filteModel.rowPerPage=200,this.filteModel.accessLoad=!0;const e=this.constructor.name+"main";this.loading.Start(e),this.categoryService.ServiceGetAll(this.filteModel).subscribe({next:o=>{o.isSuccess?(this.dataModelResult=o,this.dataSource.data=this.dataModelResult.listItems,this.treeControl.dataNodes=this.dataModelResult.listItems,this.loadCheked()):this.cmsToastrService.typeErrorMessage(o.errorMessage),this.loading.Stop(e)},error:o=>{this.loading.Stop(e),this.cmsToastrService.typeError(o)}})}descendantsAllSelected(e){return this.treeControl.getDescendants(e).every(s=>this.checklistSelection.isSelected(s))}descendantsPartiallySelected(e){return this.treeControl.getDescendants(e).some(a=>this.checklistSelection.isSelected(a))&&!this.descendantsAllSelected(e)}todoItemSelectionToggle(e){this.checklistSelection.toggle(e);const o=this.treeControl.getDescendants(e);this.checklistSelection.isSelected(e)?this.checklistSelection.select(...o):this.checklistSelection.deselect(...o)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(y.e),t.Y36(l.FLW),t.Y36(l.buc),t.Y36(t.sBO),t.Y36(B.uw),t.Y36(_.sK),t.Y36(q.v))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-cms-contact-category-tree-selector"]],inputs:{optionModel:"optionModel"},outputs:{optionSelectChecked:"optionSelectChecked",optionSelectDisChecked:"optionSelectDisChecked",optionModelChange:"optionModelChange"},decls:6,vars:3,consts:[[1,"ntk-cms-html-tree-header"],[1,"ntk-cms-html-tree-body"],[1,"category-tree","cursor-pointer",3,"dataSource","treeControl"],["matTreeNodePadding","",4,"matTreeNodeDef"],[4,"matTreeNodeDef","matTreeNodeDefWhen"],[1,"ntk-cms-html-tree-footer"],["matTreeNodePadding",""],["type","button","mat-icon-button","","disabled",""],[1,"checklist-leaf-node",3,"checked","change"],[1,"mat-tree-node"],["type","button","mat-icon-button","","matTreeNodeToggle",""],[1,"mat-icon-rtl-mirror"],[3,"checked","indeterminate","change"],["matTreeNodeOutlet",""]],template:function(e,o){1&e&&(t._UZ(0,"div",0),t.TgZ(1,"div",1)(2,"mat-tree",2),t.YNc(3,$,4,2,"mat-tree-node",3),t.YNc(4,K,10,7,"mat-nested-tree-node",4),t.qZA()(),t._UZ(5,"div",5)),2&e&&(t.xp6(2),t.Q6J("dataSource",o.dataSource)("treeControl",o.treeControl),t.xp6(2),t.Q6J("matTreeNodeDefWhen",o.hasChild))},directives:[p.gi,p.fQ,p.uo,p.ah,W.lW,X.oG,p.GZ,p.eu,A.Hw,p.Ar],encapsulation:2}),n})();var z=i(1582),tt=i(2370);const et=["vform"];function ot(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"app-sms-api-number-selector",37),t.NdJ("optionChange",function(s){return t.CHM(e),t.oxw().onActionSelectApiNumber(s)}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("loading",e.loading)("optionLinkApiPathId",e.dataModel.linkApiPathId)("optionPlaceholder"," \u0634\u0645\u0627\u0631\u0647 \u0641\u0631\u0633\u062a\u0646\u062f\u0647")("optionSelectFirstItem",!0)}}function nt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"textarea",38),t.NdJ("ngModelChange",function(s){return t.CHM(e),t.oxw().dataMessageContentModel.messageBody=s}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("ngModel",e.dataMessageContentModel.messageBody)}}function st(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"mat-icon",39),t.NdJ("click",function(){return t.CHM(e),t.oxw().dataModel.message=""}),t._uU(1,"close"),t.qZA()}}function at(n,r){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," \u0645\u062a\u0646 \u067e\u06cc\u0627\u0645 "),t.TgZ(2,"strong"),t._uU(3),t.ALo(4,"translate"),t.qZA()()),2&n&&(t.xp6(3),t.Oqu(t.lcZ(4,1,"MESSAGE.required")))}function it(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"mat-icon",39),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).dataModel.toNumbers=""}),t._uU(1,"close"),t.qZA()}}function lt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"mat-form-field",19)(1,"mat-label"),t._uU(2,"\u0634\u0645\u0627\u0631\u0647 \u06af\u06cc\u0631\u0646\u062f\u0647"),t.qZA(),t.TgZ(3,"textarea",40,41),t.NdJ("ngModelChange",function(s){return t.CHM(e),t.oxw().dataModel.toNumbers=s}),t.qZA(),t.YNc(5,it,2,0,"mat-icon",25),t.TgZ(6,"mat-icon",26),t._uU(7,"mode_edit"),t.qZA(),t.TgZ(8,"mat-hint",42)(9,"mat-icon",43),t._uU(10,"info"),t.qZA(),t.TgZ(11,"strong",44),t._uU(12,"\u0634\u0645\u0627\u0631\u0647 \u06af\u06cc\u0631\u0646\u062f\u0647 \u067e\u06cc\u0627\u0645 \u0631\u0627 \u0645\u06cc \u062a\u0648\u0627\u0646\u06cc\u062f \u0628\u0627 \u06a9\u0627\u0645\u0627 \u0627\u0632 \u0647\u0645 \u062c\u062f\u0627 \u06a9\u0646\u06cc\u062f"),t.qZA()(),t.TgZ(13,"mat-hint",27),t._uU(14),t.qZA()()}if(2&n){const e=t.MAs(4),o=t.oxw();t.xp6(3),t.Q6J("ngModel",o.dataModel.toNumbers),t.xp6(2),t.Q6J("ngIf",o.dataModel.toNumbers),t.xp6(9),t.hij("",e.value.length," / 500")}}function rt(n,r){if(1&n&&t._UZ(0,"app-cms-json-list",45),2&n){const e=t.oxw();t.Q6J("dataModel",e.dataModelResult.item)("optionMethod",1)}}function ct(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",49),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).onFormSubmit()}),t._UZ(1,"i",50),t._uU(2),t.ALo(3,"translate"),t.qZA()}if(2&n){t.oxw(2);const e=t.MAs(1);t.Q6J("disabled",!e.valid),t.xp6(2),t.hij(" ",t.lcZ(3,2,"ACTION.Send_Message")," ")}}function dt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",32)(1,"button",46),t.NdJ("click",function(){return t.CHM(e),t.oxw().onFormCancel()}),t._UZ(2,"i",47),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.YNc(5,ct,4,4,"button",48),t.qZA()}if(2&n){const e=t.oxw();t.xp6(3),t.hij(" ",t.lcZ(4,2,"ACTION.CANCEL")," "),t.xp6(2),t.Q6J("ngIf",!e.loading.display)}}const mt=[{path:"",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-sms-action"]],decls:1,vars:0,template:function(e,o){1&e&&t._UZ(0,"router-outlet")},directives:[v.lC],encapsulation:2}),n})(),children:[{path:"send-message",component:(()=>{class n{constructor(e,o,s,a,c,g){var f;this.coreEnumService=e,this.smsMainApiPathService=o,this.cmsToastrService=s,this.cdr=a,this.publicHelper=c,this.translate=g,this.requestLinkApiPathId="",this.loading=new M.O,this.loadingAction=new M.O,this.dataModelParentSelected=new l.lWT,this.dataModel=new l.sh1,this.dataModelResult=new l.y$4,this.formInfo=new l.LEF,this.clipboardText="",this.dataMessageCategoryModel=new l._fd,this.dataMessageContentModel=new l.Lnx,this.loading.cdr=this.cdr,this.loading.message=this.translate.instant("MESSAGE.Receiving_information"),this.loadingAction.cdr=this.cdr,(null===(f=this.requestLinkApiPathId)||void 0===f?void 0:f.length)>0&&(this.dataModel.linkApiPathId=this.requestLinkApiPathId)}ngOnInit(){}readClipboardFromDevTools(){return new Promise((e,o)=>{const s=function(){var a=(0,x.Z)(function*(){try{const c=yield navigator.clipboard.readText();e(c)}catch(c){o(c)}window.removeEventListener("focus",s)});return function(){return a.apply(this,arguments)}}();window.addEventListener("focus",s),console.log("Hit <Tab> to give focus back to document (or we will face a DOMException);")})}onActionSelectPrivateSiteConfig(e){this.dataModel.linkApiPathId=this.requestLinkApiPathId,this.dataModelParentSelected=e,e&&e.id.length>0&&(this.dataModel.linkApiPathId=e.id)}onActionSelectMessageCategory(e){this.dataMessageCategoryModel=e&&e.id.length>0?e:new l._fd}onActionSelectMessageContent(e){this.dataMessageContentModel=e&&e.id.length>0?e:new l.Lnx}onActionSelectApiNumber(e){e&&e.id.length>0&&(this.dataModel.linkFromNumber=e.id)}onFormSubmit(){if(!this.formGroup.valid)return;(!this.dataModel.linkApiPathId||this.dataModel.linkApiPathId.length<=0)&&this.cmsToastrService.typeErrorFormInvalid(),this.formInfo.formSubmitAllow=!1;const e=this.constructor.name+"main";this.loadingAction.Start(e),this.smsMainApiPathService.ServiceSendMessage(this.dataModel).subscribe({next:o=>{this.formInfo.formSubmitAllow=!0,this.dataModelResult=o,o.isSuccess?(this.formInfo.formAlert="\u062f\u0631\u062e\u0648\u0627\u0633\u062a \u0627\u0631\u0633\u0627\u0644 \u0628\u0627 \u0645\u0648\u0641\u0642\u06cc\u062a \u062b\u0628\u062a \u0634\u062f",this.cmsToastrService.typeSuccessMessage(this.translate.instant("MESSAGE.Send_request_was_successfully_registered"))):(this.formInfo.formAlert=this.translate.instant("ERRORMESSAGE.MESSAGE.typeError"),this.formInfo.formError=o.errorMessage,this.cmsToastrService.typeErrorMessage(o.errorMessage)),this.loadingAction.Stop(e)},error:o=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(o),this.loadingAction.Stop(e)},complete:()=>{}})}onFormCancel(){}onActionContactCategorySelectChecked(e){if(!e||e.length<=0){const o=this.translate.instant("MESSAGE.category_of_information_is_not_clear");this.cmsToastrService.typeErrorSelected(o)}else this.dataModel.toContactCategories||(this.dataModel.toContactCategories=[]),this.dataModel.toContactContents||(this.dataModel.toContactContents=[]),this.publicHelper.listAddIfNotExist(this.dataModel.toContactCategories,e,0),(this.dataModel.toContactCategories.length>0||this.dataModel.toContactContents.length>0)&&(this.dataModel.toNumbers="")}onActionContactCategorySelectDisChecked(e){if(!e||e.length<=0){const o=this.translate.instant("MESSAGE.category_of_information_is_not_clear");this.cmsToastrService.typeErrorSelected(o)}else this.dataModel.toContactCategories||(this.dataModel.toContactCategories=[]),this.dataModel.toContactContents||(this.dataModel.toContactContents=[]),this.publicHelper.listRemoveIfExist(this.dataModel.toContactCategories,e),(this.dataModel.toContactCategories.length>0||this.dataModel.toContactContents.length>0)&&(this.dataModel.toNumbers="")}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(l.FLW),t.Y36(l.sZP),t.Y36(y.e),t.Y36(t.sBO),t.Y36(F.i),t.Y36(_.sK))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-sms-action-send-message"]],viewQuery:function(e,o){if(1&e&&t.Gf(et,5),2&e){let s;t.iGM(s=t.CRH())&&(o.formGroup=s.first)}},decls:50,vars:20,consts:[[3,"ngSubmit"],["vform","ngForm"],[1,"ntk-cms-html-card-header"],[1,"ntk-cms-html-card-body"],[3,"options"],[1,"row"],[1,"col-6"],["mat-stretch-tabs","",1,"example-stretched-tabs","mat-elevation-z4"],["label","\u0645\u0633\u06cc\u0631"],[3,"loading","optionSelectForce","optionPlaceholder","optionChange"],[3,"loading","optionSelectForce","optionLinkApiPathId","optionPlaceholder","optionSelectFirstItem","optionChange",4,"ngIf"],["label","\u067e\u06cc\u0627\u0645 \u0647\u0627"],[3,"optionChange"],[3,"optionLinkCategryId","optionChange"],["matInput","","name","dataMessageContentModel.messageBody","type","text","rows","10",3,"ngModel","ngModelChange",4,"ngIf"],["label","\u0645\u062e\u0627\u0637\u0628"],[3,"optionSelectChecked","optionSelectDisChecked"],["label","\u0632\u0645\u0627\u0646 \u0627\u0631\u0633\u0627\u0644"],["label","\u062a\u0646\u0638\u06cc\u0645\u0627\u062a"],[1,"ntk-full-width"],["name","dataModel.isFlash",3,"ngModel","ngModelChange"],["name","dataModel.sendByQeue",3,"ngModel","ngModelChange"],[1,"col-3"],["matInput","","name","dataModel.message","type","text","placeholder","...","minlength","1","maxlength","500","rows","5",3,"ngModel","ngModelChange"],["Message",""],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matSuffix",""],[2,"text-align","left"],[4,"ngIf"],["class","ntk-full-width",4,"ngIf"],[3,"dataModel","optionMethod",4,"ngIf"],[1,"ntk-cms-html-card-message"],[1,"form-actions"],[1,"form-text","text-muted"],[1,"form-text","text-muted","danger"],[1,"ntk-cms-html-card-footer"],["class","form-actions",4,"ngIf"],[3,"loading","optionSelectForce","optionLinkApiPathId","optionPlaceholder","optionSelectFirstItem","optionChange"],["matInput","","name","dataMessageContentModel.messageBody","type","text","rows","10",3,"ngModel","ngModelChange"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["matInput","","name","dataModel.toNumbers","type","text","placeholder","0912","rows","5",3,"ngModel","ngModelChange"],["ToNumbers",""],[2,"text-align","right"],["matSuffix","",1,"info-field-icon"],[1,"info-field-text"],[3,"dataModel","optionMethod"],["type","button",1,"btn","btn-light",3,"click"],[1,"ft-x"],["type","submit","class","btn btn-success",3,"disabled","click",4,"ngIf"],["type","submit",1,"btn","btn-success",3,"disabled","click"],[1,"fa","fa-check-square-o"]],template:function(e,o){if(1&e&&(t.TgZ(0,"form",0,1),t.NdJ("ngSubmit",function(){return o.onFormSubmit()}),t.TgZ(2,"div",2),t._uU(3),t.qZA(),t.TgZ(4,"div",3),t._UZ(5,"app-progress-spinner",4),t.TgZ(6,"div",5)(7,"div",6)(8,"mat-tab-group",7)(9,"mat-tab",8)(10,"app-sms-apipath-selector",9),t.NdJ("optionChange",function(a){return o.onActionSelectPrivateSiteConfig(a)}),t.qZA(),t.YNc(11,ot,1,4,"app-sms-api-number-selector",10),t.qZA(),t.TgZ(12,"mat-tab",11)(13,"app-sms-main-message-category-selector",12),t.NdJ("optionChange",function(a){return o.onActionSelectMessageCategory(a)}),t.qZA(),t.TgZ(14,"app-sms-main-message-content-selector",13),t.NdJ("optionChange",function(a){return o.onActionSelectMessageContent(a)}),t.qZA(),t.YNc(15,nt,1,1,"textarea",14),t.qZA(),t.TgZ(16,"mat-tab",15)(17,"app-cms-contact-category-tree-selector",16),t.NdJ("optionSelectChecked",function(a){return o.onActionContactCategorySelectChecked(a)})("optionSelectDisChecked",function(a){return o.onActionContactCategorySelectDisChecked(a)}),t.qZA()(),t.TgZ(18,"mat-tab",17),t._uU(19," \u0632\u0645\u0627\u0646 \u0627\u0631\u0633\u0627\u0644 "),t.qZA(),t.TgZ(20,"mat-tab",18)(21,"div",19)(22,"mat-slide-toggle",20),t.NdJ("ngModelChange",function(a){return o.dataModel.isFlash=a}),t._uU(23," \u0627\u0631\u0633\u0627\u0644 \u0628\u0647 \u0635\u0648\u0631\u062a \u0641\u0644\u0634 "),t.qZA()(),t.TgZ(24,"div",19)(25,"mat-slide-toggle",21),t.NdJ("ngModelChange",function(a){return o.dataModel.sendByQeue=a}),t._uU(26," \u0627\u0631\u0633\u0627\u0644 \u062f\u0631 \u0635\u0641 "),t.qZA()()()()(),t.TgZ(27,"div",22)(28,"mat-form-field",19)(29,"mat-label"),t._uU(30,"\u0645\u062a\u0646 \u067e\u06cc\u0627\u0645"),t.qZA(),t.TgZ(31,"textarea",23,24),t.NdJ("ngModelChange",function(a){return o.dataModel.message=a}),t.qZA(),t.YNc(33,st,2,0,"mat-icon",25),t.TgZ(34,"mat-icon",26),t._uU(35,"mode_edit"),t.qZA(),t.TgZ(36,"mat-hint",27),t._uU(37),t.qZA(),t.YNc(38,at,5,3,"mat-error",28),t.qZA(),t.YNc(39,lt,15,3,"mat-form-field",29),t.qZA()(),t.YNc(40,rt,1,2,"app-cms-json-list",30),t.qZA(),t.TgZ(41,"div",31)(42,"div",32)(43,"small",33),t._uU(44),t.qZA(),t.TgZ(45,"small",34),t._uU(46),t.qZA()()(),t.TgZ(47,"div",35),t._UZ(48,"app-progress-spinner",4),t.YNc(49,dt,6,4,"div",36),t.qZA()()),2&e){const s=t.MAs(32);t.xp6(3),t.hij(" ",o.formInfo.formTitle," "),t.xp6(2),t.Q6J("options",o.loading),t.xp6(5),t.Q6J("loading",o.loading)("optionSelectForce",o.dataModel.linkApiPathId)("optionPlaceholder"," \u0645\u0633\u06cc\u0631"),t.xp6(1),t.Q6J("ngIf",(null==o.dataModel.linkApiPathId?null:o.dataModel.linkApiPathId.length)>0),t.xp6(3),t.Q6J("optionLinkCategryId",o.dataMessageCategoryModel.id),t.xp6(1),t.Q6J("ngIf",(null==o.dataMessageContentModel||null==o.dataMessageContentModel.messageBody?null:o.dataMessageContentModel.messageBody.length)>0),t.xp6(7),t.Q6J("ngModel",o.dataModel.isFlash),t.xp6(3),t.Q6J("ngModel",o.dataModel.sendByQeue),t.xp6(6),t.Q6J("ngModel",o.dataModel.message),t.xp6(2),t.Q6J("ngIf",o.dataModel.message),t.xp6(4),t.hij("",s.value.length," / 500"),t.xp6(1),t.Q6J("ngIf",null==s.errors?null:s.errors.required),t.xp6(1),t.Q6J("ngIf",!(o.dataModel.toContactCategories&&0!=(null==o.dataModel.toContactCategories?null:o.dataModel.toContactCategories.length)||o.dataModel.toContactContents&&0!=(null==o.dataModel.toContactContents?null:o.dataModel.toContactContents.length))),t.xp6(1),t.Q6J("ngIf",null==o.dataModelResult?null:o.dataModelResult.item),t.xp6(4),t.hij("",o.formInfo.formAlert," "),t.xp6(2),t.hij("",o.formInfo.formError," "),t.xp6(2),t.Q6J("options",o.loadingAction),t.xp6(1),t.Q6J("ngIf",o.formInfo.formSubmitAllow&&!o.loading.display)}},directives:[d._Y,d.JL,d.F,N.O,Z.SP,Z.uX,E.s,C.O5,J.y,O.b,G,I.Nt,d.Fj,d.JJ,d.On,V,z.Rr,u.KE,u.hX,d.wO,d.nD,A.Hw,u.R9,u.bx,u.TO,tt.v],pipes:[_.X$],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:yellow}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:black}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}.mat-tab-group[_ngcontent-%COMP%]{height:95%}"]}),n})()}]}];let ut=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[v.Bz.forChild(mt)],v.Bz]}),n})();var pt=i(2489),ht=i(8601),gt=i(6720),Ct=i(3914),ft=i(5103),St=i(4586);let Mt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[l.EAm,l.FLW,l.Z8z,Ct.s,l.dF2,l.sZP,l.buc,l.GrT],imports:[[C.ez,St.SmsMainModule,ut,d.u5,d.UX.withConfig({warnOnNgModelWithFormControl:"never"}),pt.m.forRoot(),ht.UM,A.Ps,u.lN,gt.T5,ft.r]]}),n})()}}]);