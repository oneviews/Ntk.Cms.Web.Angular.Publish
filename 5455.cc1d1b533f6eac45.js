"use strict";(self.webpackChunkntk_cms_web=self.webpackChunkntk_cms_web||[]).push([[5455],{5455:(_t,v,r)=>{r.r(v),r.d(v,{CoreCurrencyCmsModule:()=>ft});var g=r(1048),T=r(7076),m=r(8774),c=r(7977),J=r(6964),M=r(656),U=r(9723),O=r(9312),w=r(8239),h=r(8485),e=r(9724),S=r(2607),A=r(3987),C=r(4817),d=r(1659),q=r(5738),f=r(5691),L=r(1450),N=r(1531),y=r(8904),Z=r(4848),I=r(1582),x=r(8572),E=r(1418);const D=["vform"];function F(o,l){if(1&o&&(e.TgZ(0,"mat-option",36),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(t.description)}}function Q(o,l){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," RecordStatus is "),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&o&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"MESSAGE.required")))}function Y(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"mat-icon",37),e.NdJ("click",function(){return e.CHM(t),e.oxw().dataModel.title=""}),e._uU(1,"close"),e.qZA()}}function G(o,l){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Title is "),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&o&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"MESSAGE.required")))}function B(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"mat-slide-toggle",38),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().dataModel.isDefault=i}),e._uU(1),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("ngModel",t.dataModel.isDefault)("disabled",!(null!=t.fieldsInfo.IsDefault&&t.fieldsInfo.IsDefault.accessEditField)),e.xp6(1),e.hij(" ",null==t.fieldsInfo.IsDefault?null:t.fieldsInfo.IsDefault.fieldTitle," ")}}function H(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"mat-icon",37),e.NdJ("click",function(){return e.CHM(t),e.oxw().dataModel.symbol=""}),e._uU(1,"close"),e.qZA()}}function j(o,l){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Symbol is "),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&o&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"MESSAGE.required")))}function P(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"mat-icon",37),e.NdJ("click",function(){return e.CHM(t),e.oxw().dataModel.exchangeBuyRatio=1}),e._uU(1,"close"),e.qZA()}}function $(o,l){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," ExchangeBuyRatio is "),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&o&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"MESSAGE.required")))}function V(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"mat-icon",37),e.NdJ("click",function(){return e.CHM(t),e.oxw().dataModel.exchangeSaleRatio=1}),e._uU(1,"close"),e.qZA()}}function z(o,l){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," ExchangeSaleRatio is "),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&o&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"MESSAGE.required")))}function K(o,l){if(1&o&&(e._UZ(0,"img",39),e.ALo(1,"cmsthumbnail")),2&o){const t=e.oxw();e.s9C("src",e.lcZ(1,1,t.dataModel.linkMainImageIdSrc),e.LSH)}}function W(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"mat-icon",37),e.NdJ("click",function(){return e.CHM(t),e.oxw().dataModel.linkMainImageId=null}),e._uU(1,"close"),e.qZA()}}function X(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",31)(1,"button",40),e.NdJ("click",function(){return e.CHM(t),e.oxw().onFormCancel()}),e._UZ(2,"i",41),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"button",42),e.NdJ("click",function(){return e.CHM(t),e.oxw().onFormSubmit()}),e._UZ(6,"i",43),e._uU(7),e.ALo(8,"translate"),e.qZA()()}if(2&o){e.oxw();const t=e.MAs(1);e.xp6(3),e.hij(" ",e.lcZ(4,3,"ACTION.CANCEL")," "),e.xp6(2),e.Q6J("disabled",!t.form.valid),e.xp6(2),e.hij(" ",e.lcZ(8,5,"ACTION.SAVE")," ")}}let ee=(()=>{class o{constructor(t,n,i,a,s,u,p,_){this.data=t,this.dialogRef=n,this.coreEnumService=i,this.coreCurrencyService=a,this.cmsToastrService=s,this.publicHelper=u,this.cdr=p,this.translate=_,this.requestId=0,this.fieldsInfo=new Map,this.selectFileTypeMainImage=["jpg","jpeg","png"],this.appLanguage="fa",this.loading=new M.O,this.dataModelResult=new c.y$4,this.dataModel=new c.CWo,this.formInfo=new c.LEF,this.dataModelEnumRecordStatusResult=new c.y$4,this.fileManagerOpenForm=!1,this.loading.cdr=this.cdr,this.loading.message=this.translate.instant("MESSAGE.Receiving_information"),t&&(this.requestId=+t.id||0),this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}ngOnInit(){if(!(this.requestId>0))return this.cmsToastrService.typeErrorComponentAction(),void this.dialogRef.close({dialogChangedDate:!1});this.formInfo.formTitle=this.translate.instant("TITLE.Edit"),this.DataGetOneContent(),this.getEnumRecordStatus()}getEnumRecordStatus(){var t=this;return(0,w.Z)(function*(){t.dataModelEnumRecordStatusResult=yield t.publicHelper.getEnumRecordStatus()})()}DataGetOneContent(){if(this.requestId<=0)return void this.cmsToastrService.typeErrorEditRowIsNull();this.formInfo.formAlert=this.translate.instant("MESSAGE.Receiving_Information_From_The_Server"),this.formInfo.formError="";const t=this.constructor.name+"main";this.loading.Start(t),this.coreCurrencyService.setAccessLoad(),this.coreCurrencyService.setAccessDataType(c.MZK.Editor),this.coreCurrencyService.ServiceGetOneById(this.requestId).subscribe({next:n=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(n.access),this.dataModel=n.item,n.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+n.item.title,this.formInfo.formAlert=""):(this.formInfo.formAlert=this.translate.instant("ERRORMESSAGE.MESSAGE.typeError"),this.formInfo.formError=n.errorMessage,this.cmsToastrService.typeErrorMessage(n.errorMessage)),this.loading.Stop(t)},error:n=>{this.cmsToastrService.typeError(n),this.loading.Stop(t)}})}DataEditContent(){this.formInfo.formAlert=this.translate.instant("MESSAGE.sending_information_to_the_server"),this.formInfo.formError="";const t=this.constructor.name+"main";this.loading.Start(t,this.translate.instant("MESSAGE.sending_information_to_the_server")),this.coreCurrencyService.ServiceEdit(this.dataModel).subscribe({next:n=>{this.formInfo.formSubmitAllow=!0,this.dataModelResult=n,n.isSuccess?(this.formInfo.formAlert=this.translate.instant("MESSAGE.registration_completed_successfully"),this.cmsToastrService.typeSuccessEdit(),this.dialogRef.close({dialogChangedDate:!0})):(this.formInfo.formAlert=this.translate.instant("ERRORMESSAGE.MESSAGE.typeError"),this.formInfo.formError=n.errorMessage,this.cmsToastrService.typeErrorMessage(n.errorMessage)),this.loading.Stop(t)},error:n=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(n),this.loading.Stop(t)}})}onActionFileSelected(t){this.dataModel.linkMainImageId=t.id,this.dataModel.linkMainImageIdSrc=t.downloadLinksrc}onFormSubmit(){!this.formGroup.valid||(this.formInfo.formSubmitAllow=!1,this.DataEditContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(h.WI),e.Y36(h.so),e.Y36(c.FLW),e.Y36(c._GB),e.Y36(S.e),e.Y36(A.i),e.Y36(e.sBO),e.Y36(C.sK))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-core-currency-edit"]],viewQuery:function(t,n){if(1&t&&e.Gf(D,5),2&t){let i;e.iGM(i=e.CRH())&&(n.formGroup=i.first)}},decls:78,vars:53,consts:[[3,"ngSubmit"],["vform","ngForm"],[1,"ntk-cms-html-card-header"],[1,"ntk-cms-html-card-body"],[3,"options"],[1,"ntk-full-width"],["name","dataModel.recordStatus","required","",3,"placeholder","ngModel","panelClass","ngModelChange"],["RecordStatus","ngModel"],[3,"value",4,"ngFor","ngForOf"],["align","end"],[4,"ngIf"],["matInput","","name","dataModel.title","type","text","minlength","3","maxlength","20","required","",3,"ngModel","placeholder","ngModelChange"],["Title",""],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matSuffix",""],["name","dataModel.isDefault",3,"ngModel","disabled","ngModelChange",4,"ngIf"],["matInput","","name","dataModel.symbol","type","text","minlength","1","maxlength","20","required","",3,"ngModel","placeholder","ngModelChange"],["Symbol",""],["matInput","","name","dataModel.exchangeBuyRatio","type","number","required","","step","0.001",3,"ngModel","placeholder","ngModelChange"],["ExchangeBuyRatio",""],["matInput","","name","dataModel.exchangeSaleRatio","type","number","required","","step","0.001",3,"ngModel","placeholder","ngModelChange"],["ExchangeSaleRatio",""],[1,"mb-3"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","50","width","50",3,"src",4,"ngIf"],[1,"mb-9"],[3,"click"],["matInput","","name","dataModel.linkMainImageId","type","text","autocomplete","off",3,"ngModel","placeholder","ngModelChange","click"],["LinkMainImageId",""],["matSuffix","",3,"click"],[3,"language","isPopup","openForm","tree","openFilemanagerButtonLabelKey","openDirectUploadView","selectFileType","openFilemanagerButtonView","itemSelected","openFormChange"],[1,"ntk-cms-html-card-message"],[1,"form-actions"],[1,"form-text","text-muted"],[1,"form-text","text-muted","danger"],[1,"ntk-cms-html-card-footer"],["class","form-actions",4,"ngIf"],[3,"value"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["name","dataModel.isDefault",3,"ngModel","disabled","ngModelChange"],["aria-hidden","","height","50","width","50",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],["type","button",1,"btn","btn-light",3,"click"],[1,"ft-x"],["type","submit",1,"btn","btn-success",3,"disabled","click"],[1,"fa","fa-check-square-o"]],template:function(t,n){if(1&t&&(e.TgZ(0,"form",0,1),e.NdJ("ngSubmit",function(){return n.onFormSubmit()}),e.TgZ(2,"div",2),e._uU(3),e.qZA(),e.TgZ(4,"div",3),e._UZ(5,"app-progress-spinner",4),e.TgZ(6,"mat-form-field",5)(7,"mat-select",6,7),e.NdJ("ngModelChange",function(a){return n.dataModel.recordStatus=a}),e.YNc(9,F,2,2,"mat-option",8),e.qZA(),e.TgZ(10,"mat-hint",9),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.YNc(13,Q,5,3,"mat-error",10),e.qZA(),e.TgZ(14,"mat-form-field",5)(15,"mat-label"),e._uU(16),e.qZA(),e.TgZ(17,"input",11,12),e.NdJ("ngModelChange",function(a){return n.dataModel.title=a}),e.qZA(),e.YNc(19,Y,2,0,"mat-icon",13),e.TgZ(20,"mat-icon",14),e._uU(21,"mode_edit"),e.qZA(),e.TgZ(22,"mat-hint",9),e._uU(23),e.qZA(),e.YNc(24,G,5,3,"mat-error",10),e.qZA(),e.TgZ(25,"div",5),e.YNc(26,B,2,3,"mat-slide-toggle",15),e.qZA(),e.TgZ(27,"mat-form-field",5)(28,"mat-label"),e._uU(29),e.qZA(),e.TgZ(30,"input",16,17),e.NdJ("ngModelChange",function(a){return n.dataModel.symbol=a}),e.qZA(),e.YNc(32,H,2,0,"mat-icon",13),e.TgZ(33,"mat-icon",14),e._uU(34,"mode_edit"),e.qZA(),e.TgZ(35,"mat-hint",9),e._uU(36),e.qZA(),e.YNc(37,j,5,3,"mat-error",10),e.qZA(),e.TgZ(38,"mat-form-field",5)(39,"mat-label"),e._uU(40),e.qZA(),e.TgZ(41,"input",18,19),e.NdJ("ngModelChange",function(a){return n.dataModel.exchangeBuyRatio=a}),e.qZA(),e.YNc(43,P,2,0,"mat-icon",13),e.TgZ(44,"mat-icon",14),e._uU(45,"mode_edit"),e.qZA(),e.YNc(46,$,5,3,"mat-error",10),e.qZA(),e.TgZ(47,"mat-form-field",5)(48,"mat-label"),e._uU(49),e.qZA(),e.TgZ(50,"input",20,21),e.NdJ("ngModelChange",function(a){return n.dataModel.exchangeSaleRatio=a}),e.qZA(),e.YNc(52,V,2,0,"mat-icon",13),e.TgZ(53,"mat-icon",14),e._uU(54,"mode_edit"),e.qZA(),e.YNc(55,z,5,3,"mat-error",10),e.qZA(),e.TgZ(56,"div",22),e.YNc(57,K,2,3,"img",23),e.qZA(),e.TgZ(58,"div",24)(59,"mat-form-field",5)(60,"mat-label",25),e.NdJ("click",function(){return n.fileManagerOpenForm=!0}),e._uU(61),e.ALo(62,"translate"),e.qZA(),e.TgZ(63,"input",26,27),e.NdJ("ngModelChange",function(a){return n.dataModel.linkMainImageId=a})("click",function(){return n.fileManagerOpenForm=!0}),e.ALo(65,"translate"),e.qZA(),e.YNc(66,W,2,0,"mat-icon",13),e.TgZ(67,"mat-icon",28),e.NdJ("click",function(){return n.fileManagerOpenForm=!0}),e._uU(68,"mode_edit"),e.qZA()(),e.TgZ(69,"cms-file-manager",29),e.NdJ("itemSelected",function(a){return n.onActionFileSelected(a)})("openFormChange",function(a){return n.fileManagerOpenForm=a}),e.qZA()()(),e.TgZ(70,"div",30)(71,"div",31)(72,"small",32),e._uU(73),e.qZA(),e.TgZ(74,"small",33),e._uU(75),e.qZA()()(),e.TgZ(76,"div",34),e.YNc(77,X,9,7,"div",35),e.qZA()()),2&t){const i=e.MAs(8),a=e.MAs(18),s=e.MAs(31),u=e.MAs(42),p=e.MAs(51);e.xp6(3),e.hij(" ",n.formInfo.formTitle," "),e.xp6(2),e.Q6J("options",n.loading),e.xp6(2),e.s9C("placeholder",null==n.fieldsInfo.RecordStatus?null:n.fieldsInfo.RecordStatus.fieldTitle),e.MGl("panelClass","recordStatus-",n.dataModel.recordStatus,""),e.Q6J("ngModel",n.dataModel.recordStatus),e.xp6(2),e.Q6J("ngForOf",n.dataModelEnumRecordStatusResult.listItems),e.xp6(2),e.Oqu(e.lcZ(12,47,"TITLE.SELECT_STATUS")),e.xp6(2),e.Q6J("ngIf",null==i.errors?null:i.errors.required),e.xp6(3),e.Oqu(null==n.fieldsInfo.Title?null:n.fieldsInfo.Title.fieldTitle),e.xp6(1),e.s9C("placeholder",null==n.fieldsInfo.Title?null:n.fieldsInfo.Title.fieldTitle),e.Q6J("ngModel",n.dataModel.title),e.xp6(2),e.Q6J("ngIf",n.dataModel.title),e.xp6(4),e.hij("",a.value.length," / 20"),e.xp6(1),e.Q6J("ngIf",null==a.errors?null:a.errors.required),e.xp6(2),e.Q6J("ngIf",null==n.fieldsInfo.IsDefault?null:n.fieldsInfo.IsDefault.accessWatchField),e.xp6(3),e.Oqu(null==n.fieldsInfo.Symbol?null:n.fieldsInfo.Symbol.fieldTitle),e.xp6(1),e.s9C("placeholder",null==n.fieldsInfo.Symbol?null:n.fieldsInfo.Symbol.fieldTitle),e.Q6J("ngModel",n.dataModel.symbol),e.xp6(2),e.Q6J("ngIf",n.dataModel.symbol),e.xp6(4),e.hij("",s.value.length," / 20"),e.xp6(1),e.Q6J("ngIf",null==s.errors?null:s.errors.required),e.xp6(3),e.Oqu(null==n.fieldsInfo.ExchangeBuyRatio?null:n.fieldsInfo.ExchangeBuyRatio.fieldTitle),e.xp6(1),e.s9C("placeholder",null==n.fieldsInfo.ExchangeBuyRatio?null:n.fieldsInfo.ExchangeBuyRatio.fieldTitle),e.Q6J("ngModel",n.dataModel.exchangeBuyRatio),e.xp6(2),e.Q6J("ngIf",n.dataModel.exchangeBuyRatio),e.xp6(3),e.Q6J("ngIf",null==u.errors?null:u.errors.required),e.xp6(3),e.Oqu(null==n.fieldsInfo.ExchangeSaleRatio?null:n.fieldsInfo.ExchangeSaleRatio.fieldTitle),e.xp6(1),e.s9C("placeholder",null==n.fieldsInfo.ExchangeSaleRatio?null:n.fieldsInfo.ExchangeSaleRatio.fieldTitle),e.Q6J("ngModel",n.dataModel.exchangeSaleRatio),e.xp6(2),e.Q6J("ngIf",n.dataModel.exchangeSaleRatio),e.xp6(3),e.Q6J("ngIf",null==p.errors?null:p.errors.required),e.xp6(2),e.Q6J("ngIf",(null==n.dataModel||null==n.dataModel.linkMainImageIdSrc?null:n.dataModel.linkMainImageIdSrc.length)>0),e.xp6(4),e.hij(" ",e.lcZ(62,49,"TITLE.Icon_File")," "),e.xp6(2),e.MGl("placeholder","",e.lcZ(65,51,"TITLE.Original_File_ID"),"al_File_ID' | translate}}"),e.Q6J("ngModel",n.dataModel.linkMainImageId),e.xp6(3),e.Q6J("ngIf",n.dataModel.linkMainImageId),e.xp6(3),e.Q6J("language",n.appLanguage)("isPopup",!0)("openForm",n.fileManagerOpenForm)("tree",n.fileManagerTree)("openFilemanagerButtonLabelKey","select")("openDirectUploadView",!0)("selectFileType",n.selectFileTypeMainImage)("openFilemanagerButtonView",!1),e.xp6(4),e.hij("",n.formInfo.formAlert," "),e.xp6(2),e.hij("",n.formInfo.formError," "),e.xp6(2),e.Q6J("ngIf",n.formInfo.formSubmitAllow&&!n.loading.display)}},directives:[d._Y,d.JL,d.F,q.O,f.KE,L.gD,d.Q7,d.JJ,d.On,g.sg,N.ey,f.bx,g.O5,f.TO,f.hX,y.Nt,d.Fj,d.wO,d.nD,Z.Hw,f.R9,I.Rr,d.wV,x.HG],pipes:[C.X$,E.v],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:yellow}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:black}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}"]}),o})();const te=["vform"];function ne(o,l){if(1&o&&(e.TgZ(0,"mat-option",38),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(t.description)}}function oe(o,l){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," RecordStatus is "),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&o&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"MESSAGE.required")))}function ie(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"mat-icon",39),e.NdJ("click",function(){return e.CHM(t),e.oxw().dataModel.title=""}),e._uU(1,"close"),e.qZA()}}function le(o,l){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Title is "),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&o&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"MESSAGE.required")))}function ae(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"mat-icon",39),e.NdJ("click",function(){return e.CHM(t),e.oxw().dataModel.titleResourceLanguage=""}),e._uU(1,"close"),e.qZA()}}function re(o,l){if(1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&o){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.fieldsInfo.TitleResourceLanguage?null:t.fieldsInfo.TitleResourceLanguage.fieldTitle," is "),e.xp6(2),e.Oqu(e.lcZ(4,2,"MESSAGE.required"))}}function se(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"mat-slide-toggle",40),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().dataModel.isDefault=i}),e._uU(1),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("ngModel",t.dataModel.isDefault)("disabled",!(null!=t.fieldsInfo.IsDefault&&t.fieldsInfo.IsDefault.accessAddField)),e.xp6(1),e.hij(" ",null==t.fieldsInfo.IsDefault?null:t.fieldsInfo.IsDefault.fieldTitle," ")}}function ce(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"mat-icon",39),e.NdJ("click",function(){return e.CHM(t),e.oxw().dataModel.symbol=""}),e._uU(1,"close"),e.qZA()}}function de(o,l){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Symbol is "),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&o&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"MESSAGE.required")))}function ue(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"mat-icon",39),e.NdJ("click",function(){return e.CHM(t),e.oxw().dataModel.exchangeBuyRatio=1}),e._uU(1,"close"),e.qZA()}}function me(o,l){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," ExchangeBuyRatio is "),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&o&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"MESSAGE.required")))}function pe(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"mat-icon",39),e.NdJ("click",function(){return e.CHM(t),e.oxw().dataModel.exchangeSaleRatio=1}),e._uU(1,"close"),e.qZA()}}function fe(o,l){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," ExchangeSaleRatio is "),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&o&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"MESSAGE.required")))}function ge(o,l){if(1&o&&(e._UZ(0,"img",41),e.ALo(1,"cmsthumbnail")),2&o){const t=e.oxw();e.s9C("src",e.lcZ(1,1,t.dataModel.linkMainImageIdSrc),e.LSH)}}function _e(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"mat-icon",39),e.NdJ("click",function(){return e.CHM(t),e.oxw().dataModel.linkMainImageId=null}),e._uU(1,"close"),e.qZA()}}function Ce(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",33)(1,"button",42),e.NdJ("click",function(){return e.CHM(t),e.oxw().onFormCancel()}),e._UZ(2,"i",43),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"button",44),e.NdJ("click",function(){return e.CHM(t),e.oxw().onFormSubmit()}),e._UZ(6,"i",45),e._uU(7),e.ALo(8,"translate"),e.qZA()()}if(2&o){e.oxw();const t=e.MAs(1);e.xp6(3),e.hij(" ",e.lcZ(4,3,"ACTION.CANCEL")," "),e.xp6(2),e.Q6J("disabled",!t.form.valid),e.xp6(2),e.hij(" ",e.lcZ(8,5,"ACTION.SAVE")," ")}}let he=(()=>{class o{constructor(t,n,i,a,s,u,p,_){this.data=t,this.dialogRef=n,this.coreEnumService=i,this.coreCurrencyService=a,this.cmsToastrService=s,this.publicHelper=u,this.cdr=p,this.translate=_,this.fieldsInfo=new Map,this.selectFileTypeMainImage=["jpg","jpeg","png"],this.appLanguage="fa",this.loading=new M.O,this.dataModelResult=new c.y$4,this.dataModel=new c.CWo,this.formInfo=new c.LEF,this.dataModelEnumRecordStatusResult=new c.y$4,this.fileManagerOpenForm=!1,this.loading.cdr=this.cdr,this.loading.message=this.translate.instant("MESSAGE.Receiving_information"),this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}ngOnInit(){this.formInfo.formTitle=this.translate.instant("TITLE.ADD"),this.getEnumRecordStatus(),this.DataGetAccess()}getEnumRecordStatus(){var t=this;return(0,w.Z)(function*(){t.dataModelEnumRecordStatusResult=yield t.publicHelper.getEnumRecordStatus()})()}DataGetAccess(){this.coreCurrencyService.ServiceViewModel().subscribe({next:t=>{t.isSuccess?this.fieldsInfo=this.publicHelper.fieldInfoConvertor(t.access):this.cmsToastrService.typeErrorGetAccess(t.errorMessage)},error:t=>{this.cmsToastrService.typeErrorGetAccess(t)}})}DataAddContent(){this.formInfo.formAlert=this.translate.instant("MESSAGE.sending_information_to_the_server"),this.formInfo.formError="";const t=this.constructor.name+"main";this.loading.Start(t),this.coreCurrencyService.ServiceAdd(this.dataModel).subscribe({next:n=>{this.formInfo.formSubmitAllow=!0,this.dataModelResult=n,n.isSuccess?(this.formInfo.formAlert=this.translate.instant("MESSAGE.registration_completed_successfully"),this.cmsToastrService.typeSuccessAdd(),this.dialogRef.close({dialogChangedDate:!0})):(this.formInfo.formAlert=this.translate.instant("ERRORMESSAGE.MESSAGE.typeError"),this.formInfo.formError=n.errorMessage,this.cmsToastrService.typeErrorMessage(n.errorMessage)),this.loading.Stop(t)},error:n=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(n),this.loading.Stop(t)}})}onActionFileSelected(t){this.dataModel.linkMainImageId=t.id,this.dataModel.linkMainImageIdSrc=t.downloadLinksrc}onFormSubmit(){!this.formGroup.valid||(this.formInfo.formSubmitAllow=!1,this.DataAddContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(h.WI),e.Y36(h.so),e.Y36(c.FLW),e.Y36(c._GB),e.Y36(S.e),e.Y36(A.i),e.Y36(e.sBO),e.Y36(C.sK))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-core-currency-add"]],viewQuery:function(t,n){if(1&t&&e.Gf(te,5),2&t){let i;e.iGM(i=e.CRH())&&(n.formGroup=i.first)}},decls:89,vars:60,consts:[[3,"ngSubmit"],["vform","ngForm"],[1,"ntk-cms-html-card-header"],[1,"ntk-cms-html-card-body"],[3,"options"],[1,"ntk-full-width"],["name","dataModel.recordStatus","required","",3,"placeholder","ngModel","panelClass","ngModelChange"],["RecordStatus","ngModel"],[3,"value",4,"ngFor","ngForOf"],["align","end"],[4,"ngIf"],["matInput","","name","dataModel.title","type","text","minlength","3","maxlength","20","required","",3,"ngModel","placeholder","ngModelChange"],["Title",""],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matSuffix",""],["matInput","","name","dataModel.titleResourceLanguage","type","text","minlength","3","maxlength","100","required","",3,"ngModel","placeholder","disabled","ngModelChange"],["TitleResourceLanguage",""],["name","dataModel.isDefault",3,"ngModel","disabled","ngModelChange",4,"ngIf"],["matInput","","name","dataModel.symbol","type","text","minlength","1","maxlength","20","required","",3,"ngModel","placeholder","ngModelChange"],["Symbol",""],["matInput","","name","dataModel.exchangeBuyRatio","type","number","required","","step","0.001",3,"ngModel","placeholder","ngModelChange"],["ExchangeBuyRatio",""],["matInput","","name","dataModel.exchangeSaleRatio","type","number","required","","step","0.001",3,"ngModel","placeholder","ngModelChange"],["ExchangeSaleRatio",""],[1,"mb-3"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","50","width","50",3,"src",4,"ngIf"],[1,"mb-9"],[3,"click"],["matInput","","name","dataModel.linkMainImageId","type","text","autocomplete","off",3,"ngModel","placeholder","ngModelChange","click"],["LinkMainImageId",""],["matSuffix","",3,"click"],[3,"language","isPopup","openForm","tree","openFilemanagerButtonLabelKey","openDirectUploadView","selectFileType","openFilemanagerButtonView","itemSelected","openFormChange"],[1,"ntk-cms-html-card-message"],[1,"form-actions"],[1,"form-text","text-muted"],[1,"form-text","text-muted","danger"],[1,"ntk-cms-html-card-footer"],["class","form-actions",4,"ngIf"],[3,"value"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["name","dataModel.isDefault",3,"ngModel","disabled","ngModelChange"],["aria-hidden","","height","50","width","50",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],["type","button",1,"btn","btn-light",3,"click"],[1,"ft-x"],["type","submit",1,"btn","btn-success",3,"disabled","click"],[1,"fa","fa-check-square-o"]],template:function(t,n){if(1&t&&(e.TgZ(0,"form",0,1),e.NdJ("ngSubmit",function(){return n.onFormSubmit()}),e.TgZ(2,"div",2),e._uU(3),e.qZA(),e.TgZ(4,"div",3),e._UZ(5,"app-progress-spinner",4),e.TgZ(6,"mat-form-field",5)(7,"mat-select",6,7),e.NdJ("ngModelChange",function(a){return n.dataModel.recordStatus=a}),e.YNc(9,ne,2,2,"mat-option",8),e.qZA(),e.TgZ(10,"mat-hint",9),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.YNc(13,oe,5,3,"mat-error",10),e.qZA(),e.TgZ(14,"mat-form-field",5)(15,"mat-label"),e._uU(16),e.qZA(),e.TgZ(17,"input",11,12),e.NdJ("ngModelChange",function(a){return n.dataModel.title=a}),e.qZA(),e.YNc(19,ie,2,0,"mat-icon",13),e.TgZ(20,"mat-icon",14),e._uU(21,"mode_edit"),e.qZA(),e.TgZ(22,"mat-hint",9),e._uU(23),e.qZA(),e.YNc(24,le,5,3,"mat-error",10),e.qZA(),e.TgZ(25,"mat-form-field",5)(26,"mat-label"),e._uU(27),e.qZA(),e.TgZ(28,"input",15,16),e.NdJ("ngModelChange",function(a){return n.dataModel.titleResourceLanguage=a}),e.qZA(),e.YNc(30,ae,2,0,"mat-icon",13),e.TgZ(31,"mat-icon",14),e._uU(32,"mode_edit"),e.qZA(),e.TgZ(33,"mat-hint",9),e._uU(34),e.qZA(),e.YNc(35,re,5,4,"mat-error",10),e.qZA(),e.TgZ(36,"div",5),e.YNc(37,se,2,3,"mat-slide-toggle",17),e.qZA(),e.TgZ(38,"mat-form-field",5)(39,"mat-label"),e._uU(40),e.qZA(),e.TgZ(41,"input",18,19),e.NdJ("ngModelChange",function(a){return n.dataModel.symbol=a}),e.qZA(),e.YNc(43,ce,2,0,"mat-icon",13),e.TgZ(44,"mat-icon",14),e._uU(45,"mode_edit"),e.qZA(),e.TgZ(46,"mat-hint",9),e._uU(47),e.qZA(),e.YNc(48,de,5,3,"mat-error",10),e.qZA(),e.TgZ(49,"mat-form-field",5)(50,"mat-label"),e._uU(51),e.qZA(),e.TgZ(52,"input",20,21),e.NdJ("ngModelChange",function(a){return n.dataModel.exchangeBuyRatio=a}),e.qZA(),e.YNc(54,ue,2,0,"mat-icon",13),e.TgZ(55,"mat-icon",14),e._uU(56,"mode_edit"),e.qZA(),e.YNc(57,me,5,3,"mat-error",10),e.qZA(),e.TgZ(58,"mat-form-field",5)(59,"mat-label"),e._uU(60),e.qZA(),e.TgZ(61,"input",22,23),e.NdJ("ngModelChange",function(a){return n.dataModel.exchangeSaleRatio=a}),e.qZA(),e.YNc(63,pe,2,0,"mat-icon",13),e.TgZ(64,"mat-icon",14),e._uU(65,"mode_edit"),e.qZA(),e.YNc(66,fe,5,3,"mat-error",10),e.qZA(),e.TgZ(67,"div",24),e.YNc(68,ge,2,3,"img",25),e.qZA(),e.TgZ(69,"div",26)(70,"mat-form-field",5)(71,"mat-label",27),e.NdJ("click",function(){return n.fileManagerOpenForm=!0}),e._uU(72),e.ALo(73,"translate"),e.qZA(),e.TgZ(74,"input",28,29),e.NdJ("ngModelChange",function(a){return n.dataModel.linkMainImageId=a})("click",function(){return n.fileManagerOpenForm=!0}),e.ALo(76,"translate"),e.qZA(),e.YNc(77,_e,2,0,"mat-icon",13),e.TgZ(78,"mat-icon",30),e.NdJ("click",function(){return n.fileManagerOpenForm=!0}),e._uU(79,"mode_edit"),e.qZA()(),e.TgZ(80,"cms-file-manager",31),e.NdJ("itemSelected",function(a){return n.onActionFileSelected(a)})("openFormChange",function(a){return n.fileManagerOpenForm=a}),e.qZA()()(),e.TgZ(81,"div",32)(82,"div",33)(83,"small",34),e._uU(84),e.qZA(),e.TgZ(85,"small",35),e._uU(86),e.qZA()()(),e.TgZ(87,"div",36),e.YNc(88,Ce,9,7,"div",37),e.qZA()()),2&t){const i=e.MAs(8),a=e.MAs(18),s=e.MAs(29),u=e.MAs(42),p=e.MAs(53),_=e.MAs(62);e.xp6(3),e.hij(" ",n.formInfo.formTitle," "),e.xp6(2),e.Q6J("options",n.loading),e.xp6(2),e.s9C("placeholder",null==n.fieldsInfo.RecordStatus?null:n.fieldsInfo.RecordStatus.fieldTitle),e.MGl("panelClass","recordStatus-",n.dataModel.recordStatus,""),e.Q6J("ngModel",n.dataModel.recordStatus),e.xp6(2),e.Q6J("ngForOf",n.dataModelEnumRecordStatusResult.listItems),e.xp6(2),e.Oqu(e.lcZ(12,54,"TITLE.SELECT_STATUS")),e.xp6(2),e.Q6J("ngIf",null==i.errors?null:i.errors.required),e.xp6(3),e.Oqu(null==n.fieldsInfo.Title?null:n.fieldsInfo.Title.fieldTitle),e.xp6(1),e.s9C("placeholder",null==n.fieldsInfo.Title?null:n.fieldsInfo.Title.fieldTitle),e.Q6J("ngModel",n.dataModel.title),e.xp6(2),e.Q6J("ngIf",n.dataModel.title),e.xp6(4),e.hij("",a.value.length," / 20"),e.xp6(1),e.Q6J("ngIf",null==a.errors?null:a.errors.required),e.xp6(3),e.Oqu(null==n.fieldsInfo.TitleResourceLanguage?null:n.fieldsInfo.TitleResourceLanguage.fieldTitle),e.xp6(1),e.s9C("placeholder",null==n.fieldsInfo.Title?null:n.fieldsInfo.Title.fieldTitle),e.Q6J("ngModel",n.dataModel.titleResourceLanguage)("disabled",!(null!=n.fieldsInfo.TitleResourceLanguage&&n.fieldsInfo.TitleResourceLanguage.accessAddField)),e.xp6(2),e.Q6J("ngIf",n.dataModel.titleResourceLanguage),e.xp6(4),e.hij("",s.value.length," / 100"),e.xp6(1),e.Q6J("ngIf",null==s.errors?null:s.errors.required),e.xp6(2),e.Q6J("ngIf",null==n.fieldsInfo.IsDefault?null:n.fieldsInfo.IsDefault.accessWatchField),e.xp6(3),e.Oqu(null==n.fieldsInfo.Symbol?null:n.fieldsInfo.Symbol.fieldTitle),e.xp6(1),e.s9C("placeholder",null==n.fieldsInfo.Symbol?null:n.fieldsInfo.Symbol.fieldTitle),e.Q6J("ngModel",n.dataModel.symbol),e.xp6(2),e.Q6J("ngIf",n.dataModel.symbol),e.xp6(4),e.hij("",u.value.length," / 20"),e.xp6(1),e.Q6J("ngIf",null==u.errors?null:u.errors.required),e.xp6(3),e.Oqu(null==n.fieldsInfo.ExchangeBuyRatio?null:n.fieldsInfo.ExchangeBuyRatio.fieldTitle),e.xp6(1),e.s9C("placeholder",null==n.fieldsInfo.ExchangeBuyRatio?null:n.fieldsInfo.ExchangeBuyRatio.fieldTitle),e.Q6J("ngModel",n.dataModel.exchangeBuyRatio),e.xp6(2),e.Q6J("ngIf",n.dataModel.exchangeBuyRatio),e.xp6(3),e.Q6J("ngIf",null==p.errors?null:p.errors.required),e.xp6(3),e.Oqu(null==n.fieldsInfo.ExchangeSaleRatio?null:n.fieldsInfo.ExchangeSaleRatio.fieldTitle),e.xp6(1),e.s9C("placeholder",null==n.fieldsInfo.ExchangeSaleRatio?null:n.fieldsInfo.ExchangeSaleRatio.fieldTitle),e.Q6J("ngModel",n.dataModel.exchangeSaleRatio),e.xp6(2),e.Q6J("ngIf",n.dataModel.exchangeSaleRatio),e.xp6(3),e.Q6J("ngIf",null==_.errors?null:_.errors.required),e.xp6(2),e.Q6J("ngIf",(null==n.dataModel||null==n.dataModel.linkMainImageIdSrc?null:n.dataModel.linkMainImageIdSrc.length)>0),e.xp6(4),e.hij(" ",e.lcZ(73,56,"TITLE.Icon_File")," "),e.xp6(2),e.s9C("placeholder",e.lcZ(76,58,"TITLE.Original_File_ID")),e.Q6J("ngModel",n.dataModel.linkMainImageId),e.xp6(3),e.Q6J("ngIf",n.dataModel.linkMainImageId),e.xp6(3),e.Q6J("language",n.appLanguage)("isPopup",!0)("openForm",n.fileManagerOpenForm)("tree",n.fileManagerTree)("openFilemanagerButtonLabelKey","select")("openDirectUploadView",!0)("selectFileType",n.selectFileTypeMainImage)("openFilemanagerButtonView",!1),e.xp6(4),e.hij("",n.formInfo.formAlert," "),e.xp6(2),e.hij("",n.formInfo.formError," "),e.xp6(2),e.Q6J("ngIf",n.formInfo.formSubmitAllow&&!n.loading.display)}},directives:[d._Y,d.JL,d.F,q.O,f.KE,L.gD,d.Q7,d.JJ,d.On,g.sg,N.ey,f.bx,g.O5,f.TO,f.hX,y.Nt,d.Fj,d.wO,d.nD,Z.Hw,f.R9,I.Rr,d.wV,x.HG],pipes:[C.X$,E.v],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:yellow}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:black}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}"]}),o})();var Te=r(3914),Me=r(727),Se=r(7980),Ae=r(3014),ye=r(7154),Ze=r(626),k=r(9988),Ie=r(3673),xe=r(3472),b=r(4545),Ee=r(5903),be=r(3953),Re=r(1101);function ve(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"button",38),e.NdJ("click",function(){return e.CHM(t),e.oxw().onActionbuttonNewRow()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&o&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"ACTION.ADD")))}function we(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"button",39),e.NdJ("click",function(){return e.CHM(t),e.oxw().onActionbuttonEditRow()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&o&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"ACTION.EDIT")))}function qe(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"button",40),e.NdJ("click",function(){return e.CHM(t),e.oxw().onActionbuttonDeleteRow()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&o&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"ACTION.DELETE")))}function Le(o,l){1&o&&(e.TgZ(0,"mat-header-cell",41),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"TITLE.PICTURE")," "))}function Ne(o,l){if(1&o&&(e._UZ(0,"img",43),e.ALo(1,"cmsthumbnail")),2&o){const t=e.oxw().$implicit;e.s9C("src",e.lcZ(1,1,t.linkMainImageIdSrc),e.LSH)}}function ke(o,l){if(1&o&&(e.TgZ(0,"mat-cell"),e.YNc(1,Ne,2,3,"img",42),e.qZA()),2&o){const t=l.$implicit;e.xp6(1),e.Q6J("ngIf",(null==t||null==t.linkMainImageIdSrc?null:t.linkMainImageIdSrc.length)>0)}}function Je(o,l){if(1&o&&(e.TgZ(0,"mat-header-cell",41),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.fieldsInfo.Id?null:t.fieldsInfo.Id.fieldTitle," ")}}function Ue(o,l){if(1&o&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.xp6(1),e.hij(" ",t.id," ")}}function Oe(o,l){if(1&o&&(e.TgZ(0,"mat-header-cell",41),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.fieldsInfo.RecordStatus?null:t.fieldsInfo.RecordStatus.fieldTitle," ")}}const De=function(o){return{display:o}};function Fe(o,l){if(1&o&&(e.TgZ(0,"mat-cell"),e._UZ(1,"i",44),e.ALo(2,"statusClass"),e._UZ(3,"select",45),e.qZA()),2&o){const t=l.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngClass",e.lcZ(2,4,t.recordStatus)),e.xp6(2),e.Q6J("contentService",n.contentService)("row",t)("ngStyle",e.VKq(6,De,t.id===n.tableRowSelected.id?"":"none"))}}function Qe(o,l){if(1&o&&(e.TgZ(0,"mat-header-cell",41),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.fieldsInfo.Title?null:t.fieldsInfo.Title.fieldTitle," ")}}function Ye(o,l){if(1&o&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.xp6(1),e.hij(" ",t.title," ")}}function Ge(o,l){if(1&o&&(e.TgZ(0,"mat-header-cell",41),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.fieldsInfo.Title?null:t.fieldsInfo.Title.fieldTitle," ")}}function Be(o,l){if(1&o&&(e.TgZ(0,"mat-cell",46),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.xp6(1),e.hij(" ",t.titleML," ")}}function He(o,l){if(1&o&&(e.TgZ(0,"mat-header-cell",41),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.fieldsInfo.Symbol?null:t.fieldsInfo.Symbol.fieldTitle," ")}}function je(o,l){if(1&o&&(e.TgZ(0,"mat-cell",46),e._uU(1),e.qZA()),2&o){const t=l.$implicit;e.xp6(1),e.AsE(" ",t.symbol," / ",t.masterCurrency," ")}}function Pe(o,l){if(1&o&&(e.TgZ(0,"mat-header-cell",41),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.fieldsInfo.IsDefault?null:t.fieldsInfo.IsDefault.fieldTitle," ")}}function $e(o,l){if(1&o&&(e.TgZ(0,"mat-cell"),e._UZ(1,"i",44),e.ALo(2,"boolclass"),e.qZA()),2&o){const t=l.$implicit;e.xp6(1),e.Q6J("ngClass",e.lcZ(2,1,t.isDefault))}}function Ve(o,l){if(1&o&&(e.TgZ(0,"mat-header-cell",41),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.fieldsInfo.ExchangeBuyRatio?null:t.fieldsInfo.ExchangeBuyRatio.fieldTitle," ")}}function ze(o,l){if(1&o&&(e.TgZ(0,"mat-cell",46),e._uU(1),e.ALo(2,"number"),e.qZA()),2&o){const t=l.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.exchangeBuyRatio)," ")}}function Ke(o,l){if(1&o&&(e.TgZ(0,"mat-header-cell",41),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.fieldsInfo.ExchangeSaleRatio?null:t.fieldsInfo.ExchangeSaleRatio.fieldTitle," ")}}function We(o,l){if(1&o&&(e.TgZ(0,"mat-cell",46),e._uU(1),e.ALo(2,"number"),e.qZA()),2&o){const t=l.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.exchangeSaleRatio)," ")}}function Xe(o,l){if(1&o&&(e.TgZ(0,"mat-header-cell",41),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.fieldsInfo.UpdatedDate?null:t.fieldsInfo.UpdatedDate.fieldTitle," ")}}function et(o,l){if(1&o&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&o){const t=l.$implicit,n=e.oxw();e.xp6(1),e.hij(" ",n.publicHelper.LocaleDate(t.updatedDate)," ")}}function tt(o,l){1&o&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"TITLE.OPTION")," "))}function nt(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"button",51),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit;return e.oxw().onActionbuttonEditRow(i)}),e.TgZ(1,"mat-icon"),e._uU(2,"mode_edit"),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA()()}2&o&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"ACTION.EDIT")))}function ot(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"button",51),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit;return e.oxw().onActionbuttonDeleteRow(i)}),e.TgZ(1,"mat-icon"),e._uU(2,"delete_forever"),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA()()}2&o&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"ACTION.DELETE")))}function it(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"button",51),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit;return e.oxw().onActionbuttonLog(i)}),e.TgZ(1,"mat-icon"),e._uU(2,"article"),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA()()}2&o&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"ACTION.LOG")))}function lt(o,l){if(1&o&&(e.TgZ(0,"mat-cell",47)(1,"button",48)(2,"mat-icon"),e._uU(3,"more_vert"),e.qZA()(),e.TgZ(4,"mat-menu",null,49),e.YNc(6,nt,6,3,"button",50),e.YNc(7,ot,6,3,"button",50),e.YNc(8,it,6,3,"button",50),e.qZA()()),2&o){const t=e.MAs(5),n=e.oxw();e.xp6(1),e.Q6J("matMenuTriggerFor",t),e.xp6(5),e.Q6J("ngIf",n.dataModelResult.access.accessEditRow),e.xp6(1),e.Q6J("ngIf",n.dataModelResult.access.accessDeleteRow),e.xp6(1),e.Q6J("ngIf",n.dataModelResult.access.accessDeleteRow)}}function at(o,l){1&o&&e._UZ(0,"mat-header-row")}const rt=function(o){return{background:o}};function st(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"mat-row",52),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().onActionTableRowSelect(a)}),e.qZA()}if(2&o){const t=l.$implicit,n=e.oxw();e.Q6J("ngStyle",e.VKq(1,rt,t.id===n.tableRowSelected.id?"#d3d3da":""))}}const ct=function(){return[5,10,20,100]},dt=[{path:"",children:[{path:"",component:(()=>{class o{constructor(t,n,i,a,s,u,p,_,gt){this.contentService=t,this.publicHelper=n,this.cmsToastrService=i,this.cmsConfirmationDialogService=a,this.router=s,this.tokenHelper=u,this.cdr=p,this.translate=_,this.dialog=gt,this.flag=!1,this.tableContentSelected=[],this.filteModelContent=new c.Hay,this.dataModelResult=new c.y$4,this.optionsSearch=new J.dj,this.optionsStatist=new O.TV,this.optionsExport=new U.zR,this.tokenInfo=new c.OdC,this.loading=new M.O,this.tableRowsSelected=[],this.tableRowSelected=new c.CWo,this.tableSource=new m.by,this.fieldsInfo=new Map,this.tabledisplayedColumns=["LinkMainImageIdSrc","Id","RecordStatus","Title","TitleML","IsDefault","Symbol","ExchangeBuyRatio","ExchangeSaleRatio","UpdatedDate","Action"],this.loading.cdr=this.cdr,this.loading.message=this.translate.instant("MESSAGE.Receiving_information"),this.optionsSearch.parentMethods={onSubmit:R=>this.onSubmitOptionsSearch(R)},this.optionsExport.parentMethods={onSubmit:R=>this.onSubmitOptionExport(R)},this.filteModelContent.sortColumn="Id",this.filteModelContent.sortType=c.oCf.Descending}ngOnInit(){this.filteModelContent.sortColumn="Title",this.tokenHelper.getCurrentToken().then(t=>{this.tokenInfo=t,this.DataGetAll()}),this.cmsApiStoreSubscribe=this.tokenHelper.getCurrentTokenOnChange().subscribe(t=>{this.tokenInfo=t,this.DataGetAll()})}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}DataGetAll(){this.tableRowsSelected=[],this.tableRowSelected=new c.CWo;const t=this.constructor.name+"main";this.loading.Start(t,this.translate.instant("MESSAGE.get_information_list")),this.filteModelContent.accessLoad=!0;const n=JSON.parse(JSON.stringify(this.filteModelContent));this.contentService.ServiceGetAllEditor(n).subscribe({next:i=>{i.isSuccess?(this.fieldsInfo=this.publicHelper.fieldInfoConvertor(i.access),this.dataModelResult=i,this.tableSource.data=i.listItems,this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(i.access)):this.cmsToastrService.typeErrorMessage(i.errorMessage),this.loading.Stop(t)},error:i=>{this.cmsToastrService.typeError(i),this.loading.Stop(t)}})}onTableSortData(t){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===t.active?"asc"===this.tableSource.sort.start?(t.start="desc",this.filteModelContent.sortColumn=t.active,this.filteModelContent.sortType=c.oCf.Descending):"desc"===this.tableSource.sort.start?(this.filteModelContent.sortColumn="",this.filteModelContent.sortType=c.oCf.Ascending):t.start="desc":(this.filteModelContent.sortColumn=t.active,this.filteModelContent.sortType=c.oCf.Ascending),this.tableSource.sort=t,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(t){this.filteModelContent.currentPageNumber=t.pageIndex+1,this.filteModelContent.rowPerPage=t.pageSize,this.DataGetAll()}onActionbuttonNewRow(){null!=this.dataModelResult&&null!=this.dataModelResult.access&&this.dataModelResult.access.accessAddRow?this.dialog.open(he,{height:"90%",data:{}}).afterClosed().subscribe(n=>{n&&n.dialogChangedDate&&this.DataGetAll()}):this.cmsToastrService.typeErrorAccessAdd()}onActionbuttonEditRow(t=this.tableRowSelected){t&&t.id&&0!==t.id?(this.tableRowSelected=t,null!=this.dataModelResult&&null!=this.dataModelResult.access&&this.dataModelResult.access.accessEditRow?this.dialog.open(ee,{height:"90%",data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(i=>{i&&i.dialogChangedDate&&this.DataGetAll()}):this.cmsToastrService.typeErrorAccessEdit()):this.cmsToastrService.typeErrorSelectedRow()}onActionbuttonLog(t=this.tableRowSelected){t&&t.id&&0!==t.id?(this.tableRowSelected=t,this.router.navigate(["/corelog/currency/",t.id])):this.cmsToastrService.typeErrorSelectedRow()}onActionbuttonDeleteRow(t=this.tableRowSelected){if(!t||!t.id||0===t.id){const a=this.translate.instant("MESSAGE.no_row_selected_to_delete");return void this.cmsToastrService.typeErrorSelected(a)}if(this.tableRowSelected=t,null==this.dataModelResult||null==this.dataModelResult.access||!this.dataModelResult.access.accessDeleteRow)return void this.cmsToastrService.typeErrorAccessDelete();const n=this.translate.instant("MESSAGE.Please_Confirm"),i=this.translate.instant("MESSAGE.Do_you_want_to_delete_this_content")+"?<br> ( "+this.tableRowSelected.title+" ) ";this.cmsConfirmationDialogService.confirm(n,i).then(a=>{if(a){const s=this.constructor.name+"main";this.loading.Start(s),this.contentService.ServiceDelete(this.tableRowSelected.id).subscribe({next:u=>{u.isSuccess?(this.cmsToastrService.typeSuccessRemove(),this.DataGetAll()):this.cmsToastrService.typeErrorRemove(),this.loading.Stop(s)},error:u=>{this.cmsToastrService.typeError(u),this.loading.Stop(s)}})}}).catch(()=>{})}onActionbuttonUserList(t=this.tableRowSelected){if(t&&t.id&&0!==t.id)this.tableRowSelected=t,this.router.navigate(["/core/site/userlist/LinkCurrencyId/",this.tableRowSelected.id]);else{const n=this.translate.instant("MESSAGE.no_row_selected_to_display");this.cmsToastrService.typeErrorSelected(n)}}onActionbuttonStatist(){if(this.optionsStatist.data.show=!this.optionsStatist.data.show,!this.optionsStatist.data.show)return;const t=new Map;t.set("Active",0),t.set("All",0),this.contentService.ServiceGetCount(this.filteModelContent).subscribe({next:a=>{a.isSuccess?(t.set("All",a.totalRowCount),this.optionsStatist.childMethods.setStatistValue(t)):this.cmsToastrService.typeErrorMessage(a.errorMessage)},error:a=>{this.cmsToastrService.typeError(a)}});const n=JSON.parse(JSON.stringify(this.filteModelContent)),i=new c.AO3;i.propertyName="RecordStatus",i.value=c.FVU.Available,n.filters.push(i),this.contentService.ServiceGetCount(n).subscribe({next:a=>{a.isSuccess?(t.set("Active",a.totalRowCount),this.optionsStatist.childMethods.setStatistValue(t)):this.cmsToastrService.typeErrorMessage(a.errorMessage)},error:a=>{this.cmsToastrService.typeError(a)}})}onActionbuttonExport(){this.optionsExport.data.show=!this.optionsExport.data.show,this.optionsExport.childMethods.setExportFilterModel(this.filteModelContent)}onSubmitOptionExport(t){const n=new Map;n.set("Download","loading ... "),this.contentService.ServiceExportFile(t).subscribe({next:i=>{i.isSuccess?(n.set("Download",i.linkFile),this.optionsExport.childMethods.setExportLinkFile(n)):this.cmsToastrService.typeErrorMessage(i.errorMessage)},error:i=>{this.cmsToastrService.typeError(i)}})}onActionbuttonReload(){this.DataGetAll()}onSubmitOptionsSearch(t){this.filteModelContent.filters=t,this.DataGetAll()}onActionTableRowSelect(t){this.tableRowSelected=t}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(c._GB),e.Y36(A.i),e.Y36(S.e),e.Y36(Te.s),e.Y36(T.F0),e.Y36(Me.v),e.Y36(e.sBO),e.Y36(C.sK),e.Y36(h.uw))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-core-currency-list"]],decls:69,vars:29,consts:[[3,"optionLoading","optionTreeDisplay"],["cms-tree",""],["cms-header",""],["cms-action",""],["type","button","class","btn btn-outline-primary","id","openModalButton","data-toggle","modal","data-target","#categoryModal",3,"click",4,"ngIf"],["type","button","class","btn btn-outline-warning","data-toggle","modal","data-target","#categoryModal",3,"click",4,"ngIf"],["type","button","class","btn btn-outline-danger",3,"click",4,"ngIf"],[1,"btn","btn-outline-info","btn-sm","BTN"],[3,"ngModel","ngModelChange"],[3,"click"],["type","button",1,"btn","btn-outline-secondary","BTN",3,"click"],[2,"font-size","20px","margin","-1px",3,"title"],["cms-action-area",""],[3,"options","optionsChange"],["cms-body",""],["matSort","",3,"dataSource","matSortChange"],["tableSort","matSort"],["matColumnDef","LinkMainImageIdSrc"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","Id"],["matColumnDef","RecordStatus"],["matColumnDef","Title"],["matColumnDef","TitleML"],["class","grid-row-ltr",4,"matCellDef"],["matColumnDef","Symbol"],["matColumnDef","IsDefault"],["matColumnDef","ExchangeBuyRatio"],["matColumnDef","ExchangeSaleRatio"],["matColumnDef","UpdatedDate"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class"," Action",4,"matCellDef"],[4,"matHeaderRowDef"],[3,"ngStyle","click",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"length","pageIndex","pageSize","pageSizeOptions","page"],["paginator",""],["type","button","id","openModalButton","data-toggle","modal","data-target","#categoryModal",1,"btn","btn-outline-primary",3,"click"],["type","button","data-toggle","modal","data-target","#categoryModal",1,"btn","btn-outline-warning",3,"click"],["type","button",1,"btn","btn-outline-danger",3,"click"],["mat-sort-header",""],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","40","width","40",3,"src",4,"ngIf"],["aria-hidden","","height","40","width","40",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],[3,"ngClass"],["matNativeControl","","cmsRecordStatusSelfSave","",3,"contentService","row","ngStyle"],[1,"grid-row-ltr"],[1,"Action"],["mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],["actionMenu","matMenu"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","",3,"click"],[3,"ngStyle","click"]],template:function(t,n){if(1&t){const i=e.EpF();e.TgZ(0,"app-cms-html-list",0),e.ynx(1,1),e._uU(2," -------------------------------------- "),e.BQk(),e.GkF(3,2),e.ynx(4,3),e.YNc(5,ve,3,3,"button",4),e.YNc(6,we,3,3,"button",5),e.YNc(7,qe,3,3,"button",6),e.TgZ(8,"a",7)(9,"mat-slide-toggle",8),e.NdJ("ngModelChange",function(s){return n.optionsSearch.data.show=s}),e._uU(10),e.ALo(11,"translate"),e.qZA()(),e.TgZ(12,"a",7)(13,"mat-slide-toggle",9),e.NdJ("click",function(){return n.onActionbuttonStatist()}),e._uU(14),e.ALo(15,"translate"),e.qZA()(),e.TgZ(16,"a",7)(17,"mat-slide-toggle",9),e.NdJ("click",function(){return n.onActionbuttonExport()}),e._uU(18),e.ALo(19,"translate"),e.qZA()(),e.TgZ(20,"button",10),e.NdJ("click",function(){return n.onActionbuttonReload()}),e.TgZ(21,"mat-icon",11),e.ALo(22,"translate"),e._uU(23,"refresh"),e.qZA()(),e.BQk(),e.ynx(24,12),e.TgZ(25,"app-cms-search-list",13),e.NdJ("optionsChange",function(s){return n.optionsSearch=s}),e.qZA(),e.TgZ(26,"app-cms-export-list",13),e.NdJ("optionsChange",function(s){return n.optionsExport=s}),e.qZA(),e.TgZ(27,"app-cms-statist-list",13),e.NdJ("optionsChange",function(s){return n.optionsStatist=s}),e.qZA(),e.BQk(),e.ynx(28,14),e.TgZ(29,"mat-table",15,16),e.NdJ("matSortChange",function(){e.CHM(i);const s=e.MAs(30);return n.onTableSortData(s)}),e.ynx(31,17),e.YNc(32,Le,3,3,"mat-header-cell",18),e.YNc(33,ke,2,1,"mat-cell",19),e.BQk(),e.ynx(34,20),e.YNc(35,Je,2,1,"mat-header-cell",18),e.YNc(36,Ue,2,1,"mat-cell",19),e.BQk(),e.ynx(37,21),e.YNc(38,Oe,2,1,"mat-header-cell",18),e.YNc(39,Fe,4,8,"mat-cell",19),e.BQk(),e.ynx(40,22),e.YNc(41,Qe,2,1,"mat-header-cell",18),e.YNc(42,Ye,2,1,"mat-cell",19),e.BQk(),e.ynx(43,23),e.YNc(44,Ge,2,1,"mat-header-cell",18),e.YNc(45,Be,2,1,"mat-cell",24),e.BQk(),e.ynx(46,25),e.YNc(47,He,2,1,"mat-header-cell",18),e.YNc(48,je,2,2,"mat-cell",24),e.BQk(),e.ynx(49,26),e.YNc(50,Pe,2,1,"mat-header-cell",18),e.YNc(51,$e,3,3,"mat-cell",19),e.BQk(),e.ynx(52,27),e.YNc(53,Ve,2,1,"mat-header-cell",18),e.YNc(54,ze,3,3,"mat-cell",24),e.BQk(),e.ynx(55,28),e.YNc(56,Ke,2,1,"mat-header-cell",18),e.YNc(57,We,3,3,"mat-cell",24),e.BQk(),e.ynx(58,29),e.YNc(59,Xe,2,1,"mat-header-cell",18),e.YNc(60,et,2,1,"mat-cell",19),e.BQk(),e.ynx(61,30),e.YNc(62,tt,3,3,"mat-header-cell",31),e.YNc(63,lt,9,4,"mat-cell",32),e.BQk(),e.YNc(64,at,1,0,"mat-header-row",33),e.YNc(65,st,1,3,"mat-row",34),e.qZA(),e.BQk(),e.ynx(66,35),e.TgZ(67,"mat-paginator",36,37),e.NdJ("page",function(s){return n.onTablePageingData(s)}),e.qZA(),e.BQk(),e.qZA()}2&t&&(e.Q6J("optionLoading",n.loading)("optionTreeDisplay",!1),e.xp6(5),e.Q6J("ngIf",n.dataModelResult.access.accessAddRow),e.xp6(1),e.Q6J("ngIf",n.dataModelResult.access.accessEditRow&&n.tableRowSelected.id>0),e.xp6(1),e.Q6J("ngIf",n.dataModelResult.access.accessDeleteRow&&n.tableRowSelected.id>0),e.xp6(2),e.Q6J("ngModel",n.optionsSearch.data.show),e.xp6(1),e.Oqu(e.lcZ(11,20,"ACTION.SEARCH")),e.xp6(4),e.hij("",e.lcZ(15,22,"ACTION.STATIST")," "),e.xp6(4),e.hij("",e.lcZ(19,24,"ACTION.EXPORTFILE")," "),e.xp6(3),e.s9C("title",e.lcZ(22,26,"ACTION.RELOAD")),e.xp6(4),e.Q6J("options",n.optionsSearch),e.xp6(1),e.Q6J("options",n.optionsExport),e.xp6(1),e.Q6J("options",n.optionsStatist),e.xp6(2),e.Q6J("dataSource",n.tableSource),e.xp6(35),e.Q6J("matHeaderRowDef",n.tabledisplayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",n.tabledisplayedColumns),e.xp6(2),e.Q6J("length",n.dataModelResult.totalRowCount)("pageIndex",n.dataModelResult.currentPageNumber-1)("pageSize",n.dataModelResult.rowPerPage)("pageSizeOptions",e.DdM(28,ct)))},directives:[Se.Z,g.O5,I.Rr,d.JJ,d.On,Z.Hw,Ae.y,ye.Z,Ze.q,m.BZ,k.YE,m.w1,m.fO,m.ge,k.nU,m.Dz,m.ev,g.mk,y.Nt,Ie.G,g.PC,xe.lW,b.p6,b.VK,b.OP,m.as,m.XQ,m.nj,m.Gk,Ee.NW],pipes:[C.X$,E.v,be.b,Re.r,g.JJ],encapsulation:2}),o})()}]}];let ut=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[T.Bz.forChild(dt)],T.Bz]}),o})();var mt=r(2489),pt=r(8601);let ft=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[c._GB,c.EAm],imports:[[g.ez,d.u5,ut,d.UX.withConfig({warnOnNgModelWithFormControl:"never"}),mt.m.forRoot(),pt.UM,x.wK]]}),o})()}}]);