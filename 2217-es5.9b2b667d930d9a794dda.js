!function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function n(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}(self.webpackChunkntk_cms_web_angular_v2=self.webpackChunkntk_cms_web_angular_v2||[]).push([[2217],{30643:function(t,o,i){i.d(o,{K:function(){return z}});var l=i(8239),a=i(2769),r=i(22238),d=i(60656),s=i(37716),c=i(3029),u=i(32607),f=i(29790),p=i(50727),m=i(3679),g=i(75738),h=i(38583),I=i(56014),A=i(98295),M=i(49983),v=i(76627),Z=i(91457),T=i(67441),x=i(72458),C=i(63181),S=i(56599),k=i(45396),F=i(43220),q=i(81418),b=["vform"];function D(e,t){if(1&e&&(s.TgZ(0,"mat-option",33),s._uU(1),s.qZA()),2&e){var n=t.$implicit;s.Q6J("value",n.Value),s.xp6(1),s.Oqu(n.Description)}}function w(e,t){1&e&&(s.TgZ(0,"mat-error"),s._uU(1," RecordStatus is "),s.TgZ(2,"strong"),s._uU(3),s.ALo(4,"translate"),s.qZA(),s.qZA()),2&e&&(s.xp6(3),s.Oqu(s.lcZ(4,1,"MESSAGE.required")))}function y(e,t){if(1&e){var n=s.EpF();s.TgZ(0,"mat-form-field",11),s.TgZ(1,"mat-select",30,31),s.NdJ("ngModelChange",function(e){return s.CHM(n),s.oxw().dataModel.RecordStatus=e}),s.YNc(3,D,2,2,"mat-option",32),s.qZA(),s.TgZ(4,"mat-hint",21),s._uU(5),s.ALo(6,"translate"),s.qZA(),s.YNc(7,w,5,3,"mat-error",22),s.qZA()}if(2&e){var o=s.MAs(2),i=s.oxw();s.xp6(1),s.s9C("placeholder",null==i.fieldsInfo.RecordStatus?null:i.fieldsInfo.RecordStatus.FieldTitle),s.MGl("panelClass","recordStatus-",i.dataModel.RecordStatus,""),s.Q6J("ngModel",i.dataModel.RecordStatus),s.xp6(2),s.Q6J("ngForOf",i.dataModelEnumRecordStatusResult.ListItems),s.xp6(2),s.Oqu(s.lcZ(6,6,"TITLE.SELECT_STATUS")),s.xp6(2),s.Q6J("ngIf",null==o.errors?null:o.errors.required)}}function U(e,t){if(1&e){var n=s.EpF();s.TgZ(0,"mat-icon",36),s.NdJ("click",function(){return s.CHM(n),s.oxw(2).dataModel.Title=""}),s._uU(1,"close"),s.qZA()}}function E(e,t){if(1&e&&(s.TgZ(0,"mat-error"),s._uU(1),s.TgZ(2,"strong"),s._uU(3),s.ALo(4,"translate"),s.qZA(),s.qZA()),2&e){var n=s.oxw(2);s.xp6(1),s.hij(" ",null==n.fieldsInfo.Title?null:n.fieldsInfo.Title.FieldTitle," is "),s.xp6(2),s.Oqu(s.lcZ(4,2,"MESSAGE.required"))}}function J(e,t){if(1&e){var n=s.EpF();s.TgZ(0,"mat-form-field",11),s.TgZ(1,"mat-label"),s._uU(2),s.qZA(),s.TgZ(3,"input",34,35),s.NdJ("ngModelChange",function(e){return s.CHM(n),s.oxw().dataModel.Title=e}),s.qZA(),s.YNc(5,U,2,0,"mat-icon",15),s.TgZ(6,"mat-icon",20),s._uU(7,"mode_edit"),s.qZA(),s.TgZ(8,"mat-hint",21),s._uU(9),s.qZA(),s.YNc(10,E,5,4,"mat-error",22),s.qZA()}if(2&e){var o=s.MAs(4),i=s.oxw();s.xp6(2),s.Oqu(null==i.fieldsInfo.Title?null:i.fieldsInfo.Title.FieldTitle),s.xp6(1),s.s9C("placeholder",null==i.fieldsInfo.Title?null:i.fieldsInfo.Title.FieldTitle),s.Q6J("ngModel",i.dataModel.Title),s.xp6(2),s.Q6J("ngIf",i.dataModel.Title),s.xp6(4),s.hij("",o.value.length," / 100"),s.xp6(1),s.Q6J("ngIf",null==o.errors?null:o.errors.required)}}function _(e,t){if(1&e){var n=s.EpF();s.TgZ(0,"app-cms-user-selector",7),s.NdJ("optionChange",function(e){return s.CHM(n),s.oxw().onActionSelectUser(e)}),s.qZA()}if(2&e){var o=s.oxw();s.Q6J("optionSelectForce",o.dataModel.LinkUserId)("optionPlaceholder","\u06a9\u0627\u0631\u0628\u0631")("optionDisabled",!(null!=o.fieldsInfo.LinkUserId&&o.fieldsInfo.LinkUserId.AccessAddField))}}function L(e,t){if(1&e){var n=s.EpF();s.TgZ(0,"app-cms-site-selector",7),s.NdJ("optionChange",function(e){return s.CHM(n),s.oxw().onActionSelectSite(e)}),s.qZA()}if(2&e){var o=s.oxw();s.Q6J("optionSelectForce",o.dataModel.LinkSiteId)("optionPlaceholder","\u0633\u0627\u06cc\u062a")("optionDisabled",!(null!=o.fieldsInfo.LinkSiteId&&o.fieldsInfo.LinkSiteId.AccessAddField))}}function N(e,t){if(1&e&&(s._UZ(0,"img",37),s.ALo(1,"cmsthumbnail")),2&e){var n=s.oxw();s.s9C("src",s.lcZ(1,1,n.dataModel.LinkFileContentIdSrc),s.LSH)}}function O(e,t){if(1&e){var n=s.EpF();s.TgZ(0,"mat-icon",36),s.NdJ("click",function(){return s.CHM(n),s.oxw().dataModel.LinkFileContentId=null}),s._uU(1,"close"),s.qZA()}}function R(e,t){if(1&e){var n=s.EpF();s.TgZ(0,"mat-icon",36),s.NdJ("click",function(){return s.CHM(n),s.oxw().dataModel.Description=""}),s._uU(1,"close"),s.qZA()}}function Q(e,t){if(1&e&&(s.TgZ(0,"mat-error"),s._uU(1),s.TgZ(2,"strong"),s._uU(3),s.ALo(4,"translate"),s.qZA(),s.qZA()),2&e){var n=s.oxw();s.xp6(1),s.hij(" ",null==n.fieldsInfo.Description?null:n.fieldsInfo.Description.FieldTitle," is "),s.xp6(2),s.Oqu(s.lcZ(4,2,"MESSAGE.required"))}}function Y(e,t){if(1&e){var n=s.EpF();s.TgZ(0,"mat-slide-toggle",38),s.NdJ("ngModelChange",function(e){return s.CHM(n),s.oxw().dataModel.IsApproved=e}),s._uU(1),s.qZA()}if(2&e){var o=s.oxw();s.Q6J("ngModel",o.dataModel.IsApproved)("disabled",!(null!=o.fieldsInfo.IsApproved&&o.fieldsInfo.IsApproved.AccessAddField)),s.xp6(1),s.hij(" ",null==o.fieldsInfo.IsApproved?null:o.fieldsInfo.IsApproved.FieldTitle," ")}}function P(e,t){if(1&e){var n=s.EpF();s.TgZ(0,"mat-icon",36),s.NdJ("click",function(){return s.CHM(n),s.oxw(2).dataModel.ApprovedResult=""}),s._uU(1,"close"),s.qZA()}}function H(e,t){if(1&e&&(s.TgZ(0,"mat-error"),s._uU(1),s.TgZ(2,"strong"),s._uU(3),s.ALo(4,"translate"),s.qZA(),s.qZA()),2&e){var n=s.oxw(2);s.xp6(1),s.hij(" ",null==n.fieldsInfo.ApprovedResult?null:n.fieldsInfo.ApprovedResult.FieldTitle," is "),s.xp6(2),s.Oqu(s.lcZ(4,2,"MESSAGE.required"))}}function G(e,t){if(1&e){var n=s.EpF();s.TgZ(0,"mat-form-field",11),s.TgZ(1,"mat-label"),s._uU(2),s.qZA(),s.TgZ(3,"textarea",39,40),s.NdJ("ngModelChange",function(e){return s.CHM(n),s.oxw().dataModel.ApprovedResult=e}),s.qZA(),s.YNc(5,P,2,0,"mat-icon",15),s.TgZ(6,"mat-icon",20),s._uU(7,"mode_edit"),s.qZA(),s.TgZ(8,"mat-hint",21),s._uU(9),s.qZA(),s.YNc(10,H,5,4,"mat-error",22),s.qZA()}if(2&e){var o=s.MAs(4),i=s.oxw();s.xp6(2),s.Oqu(null==i.fieldsInfo.ApprovedResult?null:i.fieldsInfo.ApprovedResult.FieldTitle),s.xp6(1),s.s9C("placeholder",null==i.fieldsInfo.Description?null:i.fieldsInfo.Description.FieldTitle),s.Q6J("ngModel",i.dataModel.ApprovedResult),s.xp6(2),s.Q6J("ngIf",i.dataModel.ApprovedResult),s.xp6(4),s.hij("",o.value.length," / 500"),s.xp6(1),s.Q6J("ngIf",null==o.errors?null:o.errors.required)}}function j(e,t){if(1&e){var n=s.EpF();s.TgZ(0,"mat-icon",36),s.NdJ("click",function(){return s.CHM(n),s.oxw(2).dataModel.ApproveCheckDate=null}),s._uU(1,"close"),s.qZA()}}function V(e,t){if(1&e){var n=s.EpF();s.TgZ(0,"mat-icon",36),s.NdJ("click",function(){return s.CHM(n),s.oxw(2).dataModel.ApproveCheckDate=null}),s._uU(1,"close"),s.qZA()}}function K(e,t){if(1&e){var n=s.EpF();s.TgZ(0,"mat-form-field",11),s.TgZ(1,"mat-label"),s._uU(2),s.qZA(),s.TgZ(3,"input",41),s.NdJ("ngModelChange",function(e){return s.CHM(n),s.oxw().dataModel.ApproveCheckDate=e}),s.qZA(),s.YNc(4,j,2,0,"mat-icon",15),s.YNc(5,V,2,0,"mat-icon",15),s._UZ(6,"mat-datepicker-toggle",42),s._UZ(7,"mat-datepicker",43,44),s.qZA()}if(2&e){var o=s.MAs(8),i=s.oxw();s.xp6(2),s.Oqu(null==i.fieldsInfo.ApproveCheckDate?null:i.fieldsInfo.ApproveCheckDate.FieldTitle),s.xp6(1),s.Q6J("matDatepicker",o)("ngModel",i.dataModel.ApproveCheckDate),s.xp6(1),s.Q6J("ngIf",i.dataModel.ApproveCheckDate&&(null==i.fieldsInfo.ApproveCheckDate?null:i.fieldsInfo.ApproveCheckDate.AccessAddField)),s.xp6(1),s.Q6J("ngIf",i.dataModel.ApproveCheckDate&&(null==i.fieldsInfo.ApproveCheckDate?null:i.fieldsInfo.ApproveCheckDate.AccessAddField)),s.xp6(1),s.Q6J("for",o)}}function W(e,t){if(1&e){var n=s.EpF();s.TgZ(0,"mat-icon",36),s.NdJ("click",function(){return s.CHM(n),s.oxw(2).dataModel.ExpireDate=null}),s._uU(1,"close"),s.qZA()}}function B(e,t){if(1&e){var n=s.EpF();s.TgZ(0,"mat-form-field",11),s.TgZ(1,"mat-label"),s._uU(2),s.qZA(),s.TgZ(3,"input",45),s.NdJ("ngModelChange",function(e){return s.CHM(n),s.oxw().dataModel.ExpireDate=e}),s.qZA(),s.YNc(4,W,2,0,"mat-icon",15),s._UZ(5,"mat-datepicker-toggle",42),s._UZ(6,"mat-datepicker",43,46),s.qZA()}if(2&e){var o=s.MAs(7),i=s.oxw();s.xp6(2),s.Oqu(null==i.fieldsInfo.ExpireDate?null:i.fieldsInfo.ExpireDate.FieldTitle),s.xp6(1),s.Q6J("matDatepicker",o)("ngModel",i.dataModel.ExpireDate),s.xp6(1),s.Q6J("ngIf",i.dataModel.ExpireDate&&(null==i.fieldsInfo.ExpireDate?null:i.fieldsInfo.ExpireDate.AccessAddField)),s.xp6(1),s.Q6J("for",o)}}function $(e,t){if(1&e){var n=s.EpF();s.TgZ(0,"div",25),s.TgZ(1,"button",47),s.NdJ("click",function(){return s.CHM(n),s.oxw().onFormCancel()}),s._UZ(2,"i",48),s._uU(3),s.ALo(4,"translate"),s.qZA(),s.TgZ(5,"button",49),s.NdJ("click",function(){return s.CHM(n),s.oxw().onFormSubmit()}),s._UZ(6,"i",50),s._uU(7),s.ALo(8,"translate"),s.qZA(),s.qZA()}if(2&e){s.oxw();var o=s.MAs(1);s.xp6(3),s.hij(" ",s.lcZ(4,3,"ACTION.CANCEL")," "),s.xp6(2),s.Q6J("disabled",!o.form.valid),s.xp6(2),s.hij(" ",s.lcZ(8,5,"ACTION.SAVE")," ")}}var X,z=((X=function(){function t(n,o,i,l,r,s,c,u,f){var p=this;e(this,t),this.data=n,this.dialogRef=o,this.coreEnumService=i,this.coreUserClaimContentService=l,this.publicHelper=r,this.cmsToastrService=s,this.cdr=c,this.translate=u,this.tokenHelper=f,this.requestLinkUserClaimTypeId=0,this.fieldsInfo=new Map,this.selectFileTypeMainImage=["jpg","jpeg","png"],this.appLanguage="fa",this.loading=new d.O,this.dataModelResult=new a.y$4,this.dataModel=new a.NQc,this.tokenInfo=new a.OdC,this.ProfessionalData=!1,this.formInfo=new a.LEF,this.dataModelEnumRecordStatusResult=new a.y$4,this.fileManagerOpenForm=!1,this.loading.cdr=this.cdr,n&&(this.requestLinkUserClaimTypeId=+n.LinkUserClaimTypeId||0),this.requestLinkUserClaimTypeId>0&&(this.dataModel.LinkUserClaimTypeId=this.requestLinkUserClaimTypeId),this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig(),this.tokenHelper.getCurrentToken().then(function(e){p.tokenInfo=e,!p.tokenInfo.UserAccessAdminAllowToProfessionalData&&p.tokenInfo.UserAccessAdminAllowToAllData?(p.dataModel.LinkUserId=p.tokenInfo.UserId,p.dataModel.LinkSiteId=p.tokenInfo.SiteId,p.ProfessionalData=!0):p.ProfessionalData=!1}),this.cmsApiStoreSubscribe=this.tokenHelper.getCurrentTokenOnChange().subscribe(function(e){p.tokenInfo=e,!p.tokenInfo.UserAccessAdminAllowToProfessionalData&&p.tokenInfo.UserAccessAdminAllowToAllData?(p.dataModel.LinkUserId=p.tokenInfo.UserId,p.dataModel.LinkSiteId=p.tokenInfo.SiteId,p.ProfessionalData=!0):p.ProfessionalData=!1})}return n(t,[{key:"ngOnInit",value:function(){this.formInfo.FormTitle="\u0627\u0636\u0627\u0641\u0647 \u06a9\u0631\u062f\u0646  ",this.getEnumRecordStatus(),this.DataGetAccess()}},{key:"ngOnDestroy",value:function(){this.cmsApiStoreSubscribe.unsubscribe()}},{key:"DataGetAccess",value:function(){var e,t=this,n=this;this.coreUserClaimContentService.ServiceViewModel().subscribe((e=(0,l.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.IsSuccess?n.fieldsInfo=n.publicHelper.fieldInfoConvertor(t.Access):n.cmsToastrService.typeErrorGetAccess(t.ErrorMessage);case 1:case"end":return e.stop()}},e)})),function(t){return e.apply(this,arguments)}),function(e){t.cmsToastrService.typeErrorGetAccess(e)})}},{key:"getEnumRecordStatus",value:function(){var e=this;return(0,l.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.publicHelper.getEnumRecordStatus();case 2:e.dataModelEnumRecordStatusResult=t.sent;case 3:case"end":return t.stop()}},t)}))()}},{key:"DataAddContent",value:function(){var e=this;this.formInfo.FormAlert=this.translate.instant("MESSAGE.sending_information_to_the_server"),this.formInfo.FormError="";var t=this.constructor.name+"main";this.loading.Start(t),this.coreUserClaimContentService.ServiceAdd(this.dataModel).subscribe(function(n){e.formInfo.FormSubmitAllow=!0,e.dataModelResult=n,n.IsSuccess?(e.formInfo.FormAlert=e.translate.instant("MESSAGE.registration_completed_successfully"),e.cmsToastrService.typeSuccessAdd(),e.dialogRef.close({dialogChangedDate:!0})):(e.formInfo.FormAlert="\u0628\u0631\u0631\u0648\u0632 \u062e\u0637\u0627",e.formInfo.FormError=n.ErrorMessage,e.cmsToastrService.typeErrorMessage(n.ErrorMessage)),e.loading.Stop(t)},function(n){e.formInfo.FormSubmitAllow=!0,e.cmsToastrService.typeError(n),e.loading.Stop(t)})}},{key:"onActionFileSelected",value:function(e){this.dataModel.LinkFileContentId=e.id,this.dataModel.LinkFileContentIdSrc=e.downloadLinksrc}},{key:"onActionSelectUser",value:function(e){!e||e.Id<=0?this.cmsToastrService.typeErrorMessage("\u06a9\u0627\u0631\u0628\u0631 \u0631\u0627 \u0645\u0634\u062e\u0635 \u06a9\u0646\u06cc\u062f","\u06a9\u0627\u0631\u0628\u0631  \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0645\u0634\u062e\u0635 \u0646\u06cc\u0633\u062a"):this.dataModel.LinkUserId=e.Id}},{key:"onActionSelectSite",value:function(e){!e||e.Id<=0?this.cmsToastrService.typeErrorMessage("\u0633\u0627\u06cc\u062a \u0631\u0627 \u0645\u0634\u062e\u0635 \u06a9\u0646\u06cc\u062f","\u0633\u0627\u06cc\u062a  \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0645\u0634\u062e\u0635 \u0646\u06cc\u0633\u062a"):this.dataModel.LinkSiteId=e.Id}},{key:"onActionSelectClaimType",value:function(e){!e||e.Id<=0?this.cmsToastrService.typeErrorMessage("\u062f\u0633\u062a\u0647 \u0631\u0627 \u0645\u0634\u062e\u0635 \u06a9\u0646\u06cc\u062f","\u0646\u0648\u0639 \u0645\u062f\u0627\u0631\u06a9 \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0645\u0634\u062e\u0635 \u0646\u06cc\u0633\u062a"):this.dataModel.LinkUserClaimTypeId=e.Id}},{key:"onFormSubmit",value:function(){!this.formGroup.valid||(this.formInfo.FormSubmitAllow=!1,this.DataAddContent())}},{key:"onFormCancel",value:function(){this.dialogRef.close({dialogChangedDate:!1})}}]),t}()).\u0275fac=function(e){return new(e||X)(s.Y36(r.WI),s.Y36(r.so),s.Y36(a.FLW),s.Y36(a.qlG),s.Y36(c.i),s.Y36(u.e),s.Y36(s.sBO),s.Y36(f.sK),s.Y36(p.v))},X.\u0275cmp=s.Xpm({type:X,selectors:[["app-core-userclaimcontent-add"]],viewQuery:function(e,t){var n;1&e&&s.Gf(b,5),2&e&&s.iGM(n=s.CRH())&&(t.formGroup=n.first)},decls:48,vars:33,consts:[[3,"ngSubmit"],["vform","ngForm"],[1,"ntk-cms-html-card-header"],[1,"ntk-cms-html-card-body"],[3,"options"],["class","ntk-full-width",4,"ngIf"],[3,"optionSelectForce","optionPlaceholder","optionDisabled","optionChange",4,"ngIf"],[3,"optionSelectForce","optionPlaceholder","optionDisabled","optionChange"],[1,"mb-3"],["style","vertical-align:middle;","aria-hidden","","height","50","width","50",3,"src",4,"ngIf"],[1,"mb-9"],[1,"ntk-full-width"],[3,"click"],["matInput","","name","dataModel.LinkFileContentId","type","text","placeholder","\u0634\u0646\u0627\u0633\u0647 \u0641\u0627\u06cc\u0644 \u0627\u0635\u0644\u06cc","autocomplete","off",3,"ngModel","ngModelChange","click"],["LinkFileContentId",""],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matSuffix","",3,"click"],[3,"language","isPopup","openForm","tree","openFilemanagerButtonLabelKey","openDirectUploadView","selectFileType","openFilemanagerButtonView","itemSelected","openFormChange"],["matInput","","name","dataModel.Description","type","text","minlength","1","maxlength","500","rows","0",3,"ngModel","placeholder","ngModelChange"],["Description",""],["matSuffix",""],["align","end"],[4,"ngIf"],["name","dataModel.IsApproved",3,"ngModel","disabled","ngModelChange",4,"ngIf"],[1,"ntk-cms-html-card-message"],[1,"form-actions"],[1,"form-text","text-muted"],[1,"form-text","text-muted","danger"],[1,"ntk-cms-html-card-footer"],["class","form-actions",4,"ngIf"],["name","dataModel.RecordStatus",3,"placeholder","ngModel","panelClass","ngModelChange"],["RecordStatus","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["matInput","","name","dataModel.Title","type","text","minlength","0","maxlength","100",3,"ngModel","placeholder","ngModelChange"],["Title",""],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["aria-hidden","","height","50","width","50",2,"vertical-align","middle",3,"src"],["name","dataModel.IsApproved",3,"ngModel","disabled","ngModelChange"],["matInput","","name","dataModel.ApprovedResult","type","text","minlength","0","maxlength","500","rows","5",3,"ngModel","placeholder","ngModelChange"],["ApprovedResult",""],["matInput","","name","dataModel.ApproveCheckDate",3,"matDatepicker","ngModel","ngModelChange"],["matSuffix","",3,"for"],["touchUi",""],["ApproveCheckDate",""],["matInput","","name","dataModel.ExpireDate",3,"matDatepicker","ngModel","ngModelChange"],["ExpireDate",""],["type","button",1,"btn","btn-light",3,"click"],[1,"ft-x"],["type","submit",1,"btn","btn-success",3,"disabled","click"],[1,"fa","fa-check-square-o"]],template:function(e,t){if(1&e&&(s.TgZ(0,"form",0,1),s.NdJ("ngSubmit",function(){return t.onFormSubmit()}),s.TgZ(2,"div",2),s._uU(3),s.qZA(),s.TgZ(4,"div",3),s._UZ(5,"app-progress-spinner",4),s.YNc(6,y,8,8,"mat-form-field",5),s.YNc(7,J,11,6,"mat-form-field",5),s.YNc(8,_,1,3,"app-cms-user-selector",6),s.YNc(9,L,1,3,"app-cms-site-selector",6),s.TgZ(10,"app-core-userclaimtype-selector",7),s.NdJ("optionChange",function(e){return t.onActionSelectClaimType(e)}),s.qZA(),s.TgZ(11,"div",8),s.YNc(12,N,2,3,"img",9),s.qZA(),s.TgZ(13,"div",10),s.TgZ(14,"mat-form-field",11),s.TgZ(15,"mat-label",12),s.NdJ("click",function(){return t.fileManagerOpenForm=!0}),s._uU(16,"\u0641\u0627\u06cc\u0644 \u0645\u062f\u0627\u0631\u06a9 "),s.qZA(),s.TgZ(17,"input",13,14),s.NdJ("ngModelChange",function(e){return t.dataModel.LinkFileContentId=e})("click",function(){return t.fileManagerOpenForm=!0}),s.qZA(),s.YNc(19,O,2,0,"mat-icon",15),s.TgZ(20,"mat-icon",16),s.NdJ("click",function(){return t.fileManagerOpenForm=!0}),s._uU(21,"mode_edit"),s.qZA(),s.qZA(),s.TgZ(22,"cms-file-manager",17),s.NdJ("itemSelected",function(e){return t.onActionFileSelected(e)})("openFormChange",function(e){return t.fileManagerOpenForm=e}),s.qZA(),s.qZA(),s.TgZ(23,"mat-form-field",11),s.TgZ(24,"mat-label"),s._uU(25),s.qZA(),s.TgZ(26,"textarea",18,19),s.NdJ("ngModelChange",function(e){return t.dataModel.Description=e}),s.qZA(),s.YNc(28,R,2,0,"mat-icon",15),s.TgZ(29,"mat-icon",20),s._uU(30,"mode_edit"),s.qZA(),s.TgZ(31,"mat-hint",21),s._uU(32),s.qZA(),s.YNc(33,Q,5,4,"mat-error",22),s.qZA(),s._UZ(34,"hr"),s.TgZ(35,"div",11),s.YNc(36,Y,2,3,"mat-slide-toggle",23),s.qZA(),s.YNc(37,G,11,6,"mat-form-field",5),s.YNc(38,K,9,6,"mat-form-field",5),s.YNc(39,B,8,5,"mat-form-field",5),s.qZA(),s.TgZ(40,"div",24),s.TgZ(41,"div",25),s.TgZ(42,"small",26),s._uU(43),s.qZA(),s.TgZ(44,"small",27),s._uU(45),s.qZA(),s.qZA(),s.qZA(),s.TgZ(46,"div",28),s.YNc(47,$,9,7,"div",29),s.qZA(),s.qZA()),2&e){var n=s.MAs(27);s.xp6(3),s.hij(" ",t.formInfo.FormTitle," "),s.xp6(2),s.Q6J("options",t.loading),s.xp6(1),s.Q6J("ngIf",t.ProfessionalData),s.xp6(1),s.Q6J("ngIf",t.ProfessionalData),s.xp6(1),s.Q6J("ngIf",t.ProfessionalData),s.xp6(1),s.Q6J("ngIf",t.ProfessionalData),s.xp6(1),s.Q6J("optionSelectForce",t.dataModel.LinkUserClaimTypeId)("optionPlaceholder","\u062f\u0633\u062a\u0647 \u0645\u062f\u0627\u0631\u06a9")("optionDisabled",!(null!=t.fieldsInfo.LinkUserClaimTypeId&&t.fieldsInfo.LinkUserClaimTypeId.AccessAddField)||t.requestLinkUserClaimTypeId&&t.requestLinkUserClaimTypeId>0),s.xp6(2),s.Q6J("ngIf",(null==t.dataModel||null==t.dataModel.LinkFileContentIdSrc?null:t.dataModel.LinkFileContentIdSrc.length)>0),s.xp6(5),s.Q6J("ngModel",t.dataModel.LinkFileContentId),s.xp6(2),s.Q6J("ngIf",t.dataModel.LinkFileContentId),s.xp6(3),s.Q6J("language",t.appLanguage)("isPopup",!0)("openForm",t.fileManagerOpenForm)("tree",t.fileManagerTree)("openFilemanagerButtonLabelKey","select")("openDirectUploadView",!0)("selectFileType",t.selectFileTypeMainImage)("openFilemanagerButtonView",!1),s.xp6(3),s.Oqu(null==t.fieldsInfo.Description?null:t.fieldsInfo.Description.FieldTitle),s.xp6(1),s.s9C("placeholder",null==t.fieldsInfo.Description?null:t.fieldsInfo.Description.FieldTitle),s.Q6J("ngModel",t.dataModel.Description),s.xp6(2),s.Q6J("ngIf",t.dataModel.Description),s.xp6(4),s.hij("",n.value.length," / 500"),s.xp6(1),s.Q6J("ngIf",null==n.errors?null:n.errors.required),s.xp6(3),s.Q6J("ngIf",null==t.fieldsInfo.IsApproved?null:t.fieldsInfo.IsApproved.AccessWatchField),s.xp6(1),s.Q6J("ngIf",t.ProfessionalData),s.xp6(1),s.Q6J("ngIf",(null==t.fieldsInfo.ApproveCheckDate?null:t.fieldsInfo.ApproveCheckDate.AccessWatchField)&&t.ProfessionalData),s.xp6(1),s.Q6J("ngIf",(null==t.fieldsInfo.ExpireDate?null:t.fieldsInfo.ExpireDate.AccessWatchField)&&t.ProfessionalData),s.xp6(4),s.hij("",t.formInfo.FormAlert," "),s.xp6(2),s.hij("",t.formInfo.FormError," "),s.xp6(2),s.Q6J("ngIf",t.formInfo.FormSubmitAllow)}},directives:[m._Y,m.JL,m.F,g.O,h.O5,I.b,A.KE,A.hX,M.Nt,m.Fj,m.JJ,m.On,v.Hw,A.R9,Z.HG,m.wO,m.nD,A.bx,T.gD,h.sg,x.ey,A.TO,C.g,S.P,k.Rr,F.hl,F.nW,F.Mq],pipes:[f.X$,q.v],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:yellow}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:black}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}"]}),X)},3193:function(t,o,i){i.d(o,{D:function(){return z}});var l=i(8239),a=i(2769),r=i(22238),d=i(60656),s=i(37716),c=i(3029),u=i(32607),f=i(29790),p=i(50727),m=i(3679),g=i(75738),h=i(38583),I=i(98295),A=i(49983),M=i(76627),v=i(91457),Z=i(67441),T=i(72458),x=i(63181),C=i(56599),S=i(56014),k=i(45396),F=i(43220),q=i(81418),b=["vform"];function D(e,t){if(1&e&&(s.TgZ(0,"mat-option",34),s._uU(1),s.qZA()),2&e){var n=t.$implicit;s.Q6J("value",n.Value),s.xp6(1),s.Oqu(n.Description)}}function w(e,t){1&e&&(s.TgZ(0,"mat-error"),s._uU(1," RecordStatus is "),s.TgZ(2,"strong"),s._uU(3),s.ALo(4,"translate"),s.qZA(),s.qZA()),2&e&&(s.xp6(3),s.Oqu(s.lcZ(4,1,"MESSAGE.required")))}function y(e,t){if(1&e){var n=s.EpF();s.TgZ(0,"mat-form-field",10),s.TgZ(1,"mat-select",31,32),s.NdJ("ngModelChange",function(e){return s.CHM(n),s.oxw().dataModel.RecordStatus=e}),s.YNc(3,D,2,2,"mat-option",33),s.qZA(),s.TgZ(4,"mat-hint",20),s._uU(5),s.ALo(6,"translate"),s.qZA(),s.YNc(7,w,5,3,"mat-error",21),s.qZA()}if(2&e){var o=s.MAs(2),i=s.oxw();s.xp6(1),s.s9C("placeholder",null==i.fieldsInfo.RecordStatus?null:i.fieldsInfo.RecordStatus.FieldTitle),s.MGl("panelClass","recordStatus-",i.dataModel.RecordStatus,""),s.Q6J("ngModel",i.dataModel.RecordStatus),s.xp6(2),s.Q6J("ngForOf",i.dataModelEnumRecordStatusResult.ListItems),s.xp6(2),s.Oqu(s.lcZ(6,6,"TITLE.SELECT_STATUS")),s.xp6(2),s.Q6J("ngIf",null==o.errors?null:o.errors.required)}}function U(e,t){if(1&e){var n=s.EpF();s.TgZ(0,"mat-icon",37),s.NdJ("click",function(){return s.CHM(n),s.oxw(2).dataModel.Title=""}),s._uU(1,"close"),s.qZA()}}function E(e,t){if(1&e&&(s.TgZ(0,"mat-error"),s._uU(1),s.TgZ(2,"strong"),s._uU(3),s.ALo(4,"translate"),s.qZA(),s.qZA()),2&e){var n=s.oxw(2);s.xp6(1),s.hij(" ",null==n.fieldsInfo.Title?null:n.fieldsInfo.Title.FieldTitle," is "),s.xp6(2),s.Oqu(s.lcZ(4,2,"MESSAGE.required"))}}function J(e,t){if(1&e){var n=s.EpF();s.TgZ(0,"mat-form-field",10),s.TgZ(1,"mat-label"),s._uU(2),s.qZA(),s.TgZ(3,"input",35,36),s.NdJ("ngModelChange",function(e){return s.CHM(n),s.oxw().dataModel.Title=e}),s.qZA(),s.YNc(5,U,2,0,"mat-icon",14),s.TgZ(6,"mat-icon",19),s._uU(7,"mode_edit"),s.qZA(),s.TgZ(8,"mat-hint",20),s._uU(9),s.qZA(),s.YNc(10,E,5,4,"mat-error",21),s.qZA()}if(2&e){var o=s.MAs(4),i=s.oxw();s.xp6(2),s.Oqu(null==i.fieldsInfo.Title?null:i.fieldsInfo.Title.FieldTitle),s.xp6(1),s.s9C("placeholder",null==i.fieldsInfo.Title?null:i.fieldsInfo.Title.FieldTitle),s.Q6J("ngModel",i.dataModel.Title),s.xp6(2),s.Q6J("ngIf",i.dataModel.Title),s.xp6(4),s.hij("",o.value.length," / 100"),s.xp6(1),s.Q6J("ngIf",null==o.errors?null:o.errors.required)}}function _(e,t){if(1&e){var n=s.EpF();s.TgZ(0,"app-cms-user-selector",38),s.NdJ("optionChange",function(e){return s.CHM(n),s.oxw().onActionSelectUser(e)}),s.qZA()}if(2&e){var o=s.oxw();s.Q6J("optionSelectForce",o.dataModel.LinkUserId)("optionPlaceholder","\u06a9\u0627\u0631\u0628\u0631")("optionDisabled",!(null!=o.fieldsInfo.LinkUserId&&o.fieldsInfo.LinkUserId.AccessEditField))}}function L(e,t){if(1&e){var n=s.EpF();s.TgZ(0,"app-cms-site-selector",38),s.NdJ("optionChange",function(e){return s.CHM(n),s.oxw().onActionSelectSite(e)}),s.qZA()}if(2&e){var o=s.oxw();s.Q6J("optionSelectForce",o.dataModel.LinkSiteId)("optionPlaceholder","\u0633\u0627\u06cc\u062a")("optionDisabled",!(null!=o.fieldsInfo.LinkSiteId&&o.fieldsInfo.LinkSiteId.AccessEditField))}}function N(e,t){if(1&e){var n=s.EpF();s.TgZ(0,"app-core-userclaimtype-selector",38),s.NdJ("optionChange",function(e){return s.CHM(n),s.oxw().onActionSelectClaimType(e)}),s.qZA()}if(2&e){var o=s.oxw();s.Q6J("optionSelectForce",o.dataModel.LinkUserClaimTypeId)("optionPlaceholder","\u062f\u0633\u062a\u0647 \u0645\u062f\u0627\u0631\u06a9")("optionDisabled",!(null!=o.fieldsInfo.LinkUserClaimTypeId&&o.fieldsInfo.LinkUserClaimTypeId.AccessEditField))}}function O(e,t){if(1&e&&(s._UZ(0,"img",39),s.ALo(1,"cmsthumbnail")),2&e){var n=s.oxw();s.s9C("src",s.lcZ(1,1,n.dataModel.LinkFileContentIdSrc),s.LSH)}}function R(e,t){if(1&e){var n=s.EpF();s.TgZ(0,"mat-icon",37),s.NdJ("click",function(){return s.CHM(n),s.oxw().dataModel.LinkFileContentId=null}),s._uU(1,"close"),s.qZA()}}function Q(e,t){if(1&e){var n=s.EpF();s.TgZ(0,"mat-icon",37),s.NdJ("click",function(){return s.CHM(n),s.oxw().dataModel.Description=""}),s._uU(1,"close"),s.qZA()}}function Y(e,t){if(1&e&&(s.TgZ(0,"mat-error"),s._uU(1),s.TgZ(2,"strong"),s._uU(3),s.ALo(4,"translate"),s.qZA(),s.qZA()),2&e){var n=s.oxw();s.xp6(1),s.hij(" ",null==n.fieldsInfo.Description?null:n.fieldsInfo.Description.FieldTitle," is "),s.xp6(2),s.Oqu(s.lcZ(4,2,"MESSAGE.required"))}}function P(e,t){if(1&e){var n=s.EpF();s.TgZ(0,"mat-slide-toggle",40),s.NdJ("ngModelChange",function(e){return s.CHM(n),s.oxw().dataModel.IsApproved=e}),s._uU(1),s.qZA()}if(2&e){var o=s.oxw();s.Q6J("ngModel",o.dataModel.IsApproved)("disabled",!(null!=o.fieldsInfo.IsApproved&&o.fieldsInfo.IsApproved.AccessEditField)),s.xp6(1),s.hij(" ",null==o.fieldsInfo.IsApproved?null:o.fieldsInfo.IsApproved.FieldTitle," ")}}function H(e,t){if(1&e){var n=s.EpF();s.TgZ(0,"mat-icon",37),s.NdJ("click",function(){return s.CHM(n),s.oxw().dataModel.ApprovedResult=""}),s._uU(1,"close"),s.qZA()}}function G(e,t){if(1&e&&(s.TgZ(0,"mat-error"),s._uU(1),s.TgZ(2,"strong"),s._uU(3),s.ALo(4,"translate"),s.qZA(),s.qZA()),2&e){var n=s.oxw();s.xp6(1),s.hij(" ",null==n.fieldsInfo.ApprovedResult?null:n.fieldsInfo.ApprovedResult.FieldTitle," is "),s.xp6(2),s.Oqu(s.lcZ(4,2,"MESSAGE.required"))}}function j(e,t){if(1&e){var n=s.EpF();s.TgZ(0,"mat-icon",37),s.NdJ("click",function(){return s.CHM(n),s.oxw(2).dataModel.ApproveCheckDate=null}),s._uU(1,"close"),s.qZA()}}function V(e,t){if(1&e){var n=s.EpF();s.TgZ(0,"mat-icon",37),s.NdJ("click",function(){return s.CHM(n),s.oxw(2).dataModel.ApproveCheckDate=null}),s._uU(1,"close"),s.qZA()}}function K(e,t){if(1&e){var n=s.EpF();s.TgZ(0,"mat-form-field",10),s.TgZ(1,"mat-label"),s._uU(2),s.qZA(),s.TgZ(3,"input",41),s.NdJ("ngModelChange",function(e){return s.CHM(n),s.oxw().dataModel.ApproveCheckDate=e}),s.qZA(),s.YNc(4,j,2,0,"mat-icon",14),s.YNc(5,V,2,0,"mat-icon",14),s._UZ(6,"mat-datepicker-toggle",42),s._UZ(7,"mat-datepicker",43,44),s.qZA()}if(2&e){var o=s.MAs(8),i=s.oxw();s.xp6(2),s.Oqu(null==i.fieldsInfo.ApproveCheckDate?null:i.fieldsInfo.ApproveCheckDate.FieldTitle),s.xp6(1),s.Q6J("matDatepicker",o)("ngModel",i.dataModel.ApproveCheckDate),s.xp6(1),s.Q6J("ngIf",i.dataModel.ApproveCheckDate&&(null==i.fieldsInfo.ApproveCheckDate?null:i.fieldsInfo.ApproveCheckDate.AccessEditField)),s.xp6(1),s.Q6J("ngIf",i.dataModel.ApproveCheckDate&&(null==i.fieldsInfo.ApproveCheckDate?null:i.fieldsInfo.ApproveCheckDate.AccessEditField)),s.xp6(1),s.Q6J("for",o)}}function W(e,t){if(1&e){var n=s.EpF();s.TgZ(0,"mat-icon",37),s.NdJ("click",function(){return s.CHM(n),s.oxw(2).dataModel.ExpireDate=null}),s._uU(1,"close"),s.qZA()}}function B(e,t){if(1&e){var n=s.EpF();s.TgZ(0,"mat-form-field",10),s.TgZ(1,"mat-label"),s._uU(2),s.qZA(),s.TgZ(3,"input",45),s.NdJ("ngModelChange",function(e){return s.CHM(n),s.oxw().dataModel.ExpireDate=e}),s.qZA(),s.YNc(4,W,2,0,"mat-icon",14),s._UZ(5,"mat-datepicker-toggle",42),s._UZ(6,"mat-datepicker",43,46),s.qZA()}if(2&e){var o=s.MAs(7),i=s.oxw();s.xp6(2),s.Oqu(null==i.fieldsInfo.ExpireDate?null:i.fieldsInfo.ExpireDate.FieldTitle),s.xp6(1),s.Q6J("matDatepicker",o)("ngModel",i.dataModel.ExpireDate),s.xp6(1),s.Q6J("ngIf",i.dataModel.ExpireDate&&(null==i.fieldsInfo.ExpireDate?null:i.fieldsInfo.ExpireDate.AccessEditField)),s.xp6(1),s.Q6J("for",o)}}function $(e,t){if(1&e){var n=s.EpF();s.TgZ(0,"div",26),s.TgZ(1,"button",47),s.NdJ("click",function(){return s.CHM(n),s.oxw().onFormCancel()}),s._UZ(2,"i",48),s._uU(3),s.ALo(4,"translate"),s.qZA(),s.TgZ(5,"button",49),s.NdJ("click",function(){return s.CHM(n),s.oxw().onFormSubmit()}),s._UZ(6,"i",50),s._uU(7),s.ALo(8,"translate"),s.qZA(),s.qZA()}if(2&e){s.oxw();var o=s.MAs(1);s.xp6(3),s.hij(" ",s.lcZ(4,3,"ACTION.CANCEL")," "),s.xp6(2),s.Q6J("disabled",!o.form.valid),s.xp6(2),s.hij(" ",s.lcZ(8,5,"ACTION.SAVE")," ")}}var X,z=((X=function(){function t(n,o,i,l,r,s,c,u,f){var p=this;e(this,t),this.data=n,this.dialogRef=o,this.coreEnumService=i,this.coreUserClaimContentService=l,this.publicHelper=r,this.cmsToastrService=s,this.cdr=c,this.translate=u,this.tokenHelper=f,this.requestId=0,this.fieldsInfo=new Map,this.selectFileTypeMainImage=["jpg","jpeg","png"],this.tokenInfo=new a.OdC,this.ProfessionalData=!1,this.appLanguage="fa",this.loading=new d.O,this.dataModelResult=new a.y$4,this.dataModel=new a.NQc,this.formInfo=new a.LEF,this.dataModelEnumRecordStatusResult=new a.y$4,this.fileManagerOpenForm=!1,this.loading.cdr=this.cdr,n&&(this.requestId=+n.id||0),this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig(),this.tokenHelper.getCurrentToken().then(function(e){p.tokenInfo=e,!p.tokenInfo.UserAccessAdminAllowToProfessionalData&&p.tokenInfo.UserAccessAdminAllowToAllData?(p.dataModel.LinkUserId=p.tokenInfo.UserId,p.dataModel.LinkSiteId=p.tokenInfo.SiteId,p.ProfessionalData=!0):p.ProfessionalData=!1}),this.cmsApiStoreSubscribe=this.tokenHelper.getCurrentTokenOnChange().subscribe(function(e){p.tokenInfo=e,!p.tokenInfo.UserAccessAdminAllowToProfessionalData&&p.tokenInfo.UserAccessAdminAllowToAllData?(p.dataModel.LinkUserId=p.tokenInfo.UserId,p.dataModel.LinkSiteId=p.tokenInfo.SiteId,p.ProfessionalData=!0):p.ProfessionalData=!1})}return n(t,[{key:"ngOnInit",value:function(){if(!(this.requestId>0))return this.cmsToastrService.typeErrorComponentAction(),void this.dialogRef.close({dialogChangedDate:!1});this.formInfo.FormTitle="\u0648\u06cc\u0631\u0627\u06cc\u0634  ",this.DataGetOneContent(),this.getEnumRecordStatus()}},{key:"ngOnDestroy",value:function(){this.cmsApiStoreSubscribe.unsubscribe()}},{key:"getEnumRecordStatus",value:function(){var e=this;return(0,l.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.publicHelper.getEnumRecordStatus();case 2:e.dataModelEnumRecordStatusResult=t.sent;case 3:case"end":return t.stop()}},t)}))()}},{key:"DataGetOneContent",value:function(){var e=this;if(this.requestId<=0)this.cmsToastrService.typeErrorEditRowIsNull();else{this.formInfo.FormAlert="\u062f\u0631 \u062f\u0631\u06cc\u0627\u0641\u062a \u0627\u0631\u0633\u0627\u0644 \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0627\u0632 \u0633\u0631\u0648\u0631",this.formInfo.FormError="";var t=this.constructor.name+"main";this.loading.Start(t),this.coreUserClaimContentService.setAccessLoad(),this.coreUserClaimContentService.ServiceGetOneById(this.requestId).subscribe(function(n){e.fieldsInfo=e.publicHelper.fieldInfoConvertor(n.Access),e.dataModel=n.Item,n.IsSuccess?(e.formInfo.FormTitle=e.formInfo.FormTitle+" "+n.Item.Id,e.formInfo.FormAlert=""):(e.formInfo.FormAlert="\u0628\u0631\u0631\u0648\u0632 \u062e\u0637\u0627",e.formInfo.FormError=n.ErrorMessage,e.cmsToastrService.typeErrorMessage(n.ErrorMessage)),e.loading.Stop(t)},function(n){e.cmsToastrService.typeError(n),e.loading.Stop(t)})}}},{key:"DataEditContent",value:function(){var e=this;this.formInfo.FormAlert=this.translate.instant("MESSAGE.sending_information_to_the_server"),this.formInfo.FormError="";var t=this.constructor.name+"main";this.loading.Start(t),this.coreUserClaimContentService.ServiceEdit(this.dataModel).subscribe(function(n){e.formInfo.FormSubmitAllow=!0,e.dataModelResult=n,n.IsSuccess?(e.formInfo.FormAlert=e.translate.instant("MESSAGE.registration_completed_successfully"),e.cmsToastrService.typeSuccessEdit(),e.dialogRef.close({dialogChangedDate:!0})):(e.formInfo.FormAlert="\u0628\u0631\u0631\u0648\u0632 \u062e\u0637\u0627",e.formInfo.FormError=n.ErrorMessage,e.cmsToastrService.typeErrorMessage(n.ErrorMessage)),e.loading.Stop(t)},function(n){e.formInfo.FormSubmitAllow=!0,e.cmsToastrService.typeError(n),e.loading.Stop(t)})}},{key:"onActionFileSelected",value:function(e){this.dataModel.LinkFileContentId=e.id,this.dataModel.LinkFileContentIdSrc=e.downloadLinksrc}},{key:"onActionSelectUser",value:function(e){!e||e.Id<=0?this.cmsToastrService.typeErrorMessage("\u06a9\u0627\u0631\u0628\u0631 \u0631\u0627 \u0645\u0634\u062e\u0635 \u06a9\u0646\u06cc\u062f","\u06a9\u0627\u0631\u0628\u0631  \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0645\u0634\u062e\u0635 \u0646\u06cc\u0633\u062a"):this.dataModel.LinkUserId=e.Id}},{key:"onActionSelectSite",value:function(e){!e||e.Id<=0?this.cmsToastrService.typeErrorMessage("\u0633\u0627\u06cc\u062a \u0631\u0627 \u0645\u0634\u062e\u0635 \u06a9\u0646\u06cc\u062f","\u0633\u0627\u06cc\u062a  \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0645\u0634\u062e\u0635 \u0646\u06cc\u0633\u062a"):this.dataModel.LinkSiteId=e.Id}},{key:"onActionSelectClaimType",value:function(e){!e||e.Id<=0?this.cmsToastrService.typeErrorMessage("\u062f\u0633\u062a\u0647 \u0631\u0627 \u0645\u0634\u062e\u0635 \u06a9\u0646\u06cc\u062f","\u0646\u0648\u0639 \u0645\u062f\u0627\u0631\u06a9 \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0645\u0634\u062e\u0635 \u0646\u06cc\u0633\u062a"):this.dataModel.LinkUserClaimTypeId=e.Id}},{key:"onFormSubmit",value:function(){!this.formGroup.valid||(this.formInfo.FormSubmitAllow=!1,this.DataEditContent())}},{key:"onFormCancel",value:function(){this.dialogRef.close({dialogChangedDate:!1})}}]),t}()).\u0275fac=function(e){return new(e||X)(s.Y36(r.WI),s.Y36(r.so),s.Y36(a.FLW),s.Y36(a.qlG),s.Y36(c.i),s.Y36(u.e),s.Y36(s.sBO),s.Y36(f.sK),s.Y36(p.v))},X.\u0275cmp=s.Xpm({type:X,selectors:[["app-core-userclaim-edit"]],viewQuery:function(e,t){var n;1&e&&s.Gf(b,5),2&e&&s.iGM(n=s.CRH())&&(t.formGroup=n.first)},decls:58,vars:36,consts:[[3,"ngSubmit"],["vform","ngForm"],[1,"ntk-cms-html-card-header"],[1,"ntk-cms-html-card-body"],[3,"options"],["class","ntk-full-width",4,"ngIf"],[3,"optionSelectForce","optionPlaceholder","optionDisabled","optionChange",4,"ngIf"],[1,"mb-3"],["style","vertical-align:middle;","aria-hidden","","height","50","width","50",3,"src",4,"ngIf"],[1,"mb-9"],[1,"ntk-full-width"],[3,"click"],["matInput","","name"," dataModel.LinkFileContentId","type","text","placeholder","\u0634\u0646\u0627\u0633\u0647 \u0641\u0627\u06cc\u0644 \u0627\u0635\u0644\u06cc","autocomplete","off",3,"ngModel","ngModelChange","click"],["LinkFileContentId",""],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matSuffix","",3,"click"],[3,"language","isPopup","openForm","tree","openFilemanagerButtonLabelKey","openDirectUploadView","selectFileType","openFilemanagerButtonView","itemSelected","openFormChange"],["matInput","","name","dataModel.Description","type","text","minlength","0","maxlength","500","rows","5",3,"ngModel","placeholder","ngModelChange"],["Description",""],["matSuffix",""],["align","end"],[4,"ngIf"],["name","dataModel.IsApproved",3,"ngModel","disabled","ngModelChange",4,"ngIf"],["matInput","","name","dataModel.ApprovedResult","type","text","minlength","0","maxlength","500","rows","5",3,"ngModel","placeholder","ngModelChange"],["ApprovedResult",""],[1,"ntk-cms-html-card-message"],[1,"form-actions"],[1,"form-text","text-muted"],[1,"form-text","text-muted","danger"],[1,"ntk-cms-html-card-footer"],["class","form-actions",4,"ngIf"],["name","dataModel.RecordStatus",3,"placeholder","ngModel","panelClass","ngModelChange"],["RecordStatus","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["matInput","","name","dataModel.Title","type","text","minlength","0","maxlength","100",3,"ngModel","placeholder","ngModelChange"],["Title",""],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[3,"optionSelectForce","optionPlaceholder","optionDisabled","optionChange"],["aria-hidden","","height","50","width","50",2,"vertical-align","middle",3,"src"],["name","dataModel.IsApproved",3,"ngModel","disabled","ngModelChange"],["matInput","","name","dataModel.ApproveCheckDate",3,"matDatepicker","ngModel","ngModelChange"],["matSuffix","",3,"for"],["touchUi",""],["ApproveCheckDate",""],["matInput","","name","dataModel.ExpireDate",3,"matDatepicker","ngModel","ngModelChange"],["ExpireDate",""],["type","button",1,"btn","btn-light",3,"click"],[1,"ft-x"],["type","submit",1,"btn","btn-success",3,"disabled","click"],[1,"fa","fa-check-square-o"]],template:function(e,t){if(1&e&&(s.TgZ(0,"form",0,1),s.NdJ("ngSubmit",function(){return t.onFormSubmit()}),s.TgZ(2,"div",2),s._uU(3),s.qZA(),s.TgZ(4,"div",3),s._UZ(5,"app-progress-spinner",4),s.YNc(6,y,8,8,"mat-form-field",5),s.YNc(7,J,11,6,"mat-form-field",5),s.YNc(8,_,1,3,"app-cms-user-selector",6),s.YNc(9,L,1,3,"app-cms-site-selector",6),s.YNc(10,N,1,3,"app-core-userclaimtype-selector",6),s.TgZ(11,"div",7),s.YNc(12,O,2,3,"img",8),s.qZA(),s.TgZ(13,"div",9),s.TgZ(14,"mat-form-field",10),s.TgZ(15,"mat-label",11),s.NdJ("click",function(){return t.fileManagerOpenForm=!0}),s._uU(16,"\u0641\u0627\u06cc\u0644 \u0645\u062f\u0627\u0631\u06a9 "),s.qZA(),s.TgZ(17,"input",12,13),s.NdJ("ngModelChange",function(e){return t.dataModel.LinkFileContentId=e})("click",function(){return t.fileManagerOpenForm=!0}),s.qZA(),s.YNc(19,R,2,0,"mat-icon",14),s.TgZ(20,"mat-icon",15),s.NdJ("click",function(){return t.fileManagerOpenForm=!0}),s._uU(21,"mode_edit"),s.qZA(),s.qZA(),s.TgZ(22,"cms-file-manager",16),s.NdJ("itemSelected",function(e){return t.onActionFileSelected(e)})("openFormChange",function(e){return t.fileManagerOpenForm=e}),s.qZA(),s.qZA(),s.TgZ(23,"mat-form-field",10),s.TgZ(24,"mat-label"),s._uU(25),s.qZA(),s.TgZ(26,"textarea",17,18),s.NdJ("ngModelChange",function(e){return t.dataModel.Description=e}),s.qZA(),s.YNc(28,Q,2,0,"mat-icon",14),s.TgZ(29,"mat-icon",19),s._uU(30,"mode_edit"),s.qZA(),s.TgZ(31,"mat-hint",20),s._uU(32),s.qZA(),s.YNc(33,Y,5,4,"mat-error",21),s.qZA(),s._UZ(34,"hr"),s.TgZ(35,"div",10),s.YNc(36,P,2,3,"mat-slide-toggle",22),s.qZA(),s.TgZ(37,"mat-form-field",10),s.TgZ(38,"mat-label"),s._uU(39),s.qZA(),s.TgZ(40,"textarea",23,24),s.NdJ("ngModelChange",function(e){return t.dataModel.ApprovedResult=e}),s.qZA(),s.YNc(42,H,2,0,"mat-icon",14),s.TgZ(43,"mat-icon",19),s._uU(44,"mode_edit"),s.qZA(),s.TgZ(45,"mat-hint",20),s._uU(46),s.qZA(),s.YNc(47,G,5,4,"mat-error",21),s.qZA(),s.YNc(48,K,9,6,"mat-form-field",5),s.YNc(49,B,8,5,"mat-form-field",5),s.qZA(),s.TgZ(50,"div",25),s.TgZ(51,"div",26),s.TgZ(52,"small",27),s._uU(53),s.qZA(),s.TgZ(54,"small",28),s._uU(55),s.qZA(),s.qZA(),s.qZA(),s.TgZ(56,"div",29),s.YNc(57,$,9,7,"div",30),s.qZA(),s.qZA()),2&e){var n=s.MAs(27),o=s.MAs(41);s.xp6(3),s.hij(" ",t.formInfo.FormTitle," "),s.xp6(2),s.Q6J("options",t.loading),s.xp6(1),s.Q6J("ngIf",t.ProfessionalData),s.xp6(1),s.Q6J("ngIf",t.ProfessionalData),s.xp6(1),s.Q6J("ngIf",t.ProfessionalData),s.xp6(1),s.Q6J("ngIf",t.ProfessionalData),s.xp6(1),s.Q6J("ngIf",t.ProfessionalData),s.xp6(2),s.Q6J("ngIf",(null==t.dataModel||null==t.dataModel.LinkFileContentIdSrc?null:t.dataModel.LinkFileContentIdSrc.length)>0),s.xp6(5),s.Q6J("ngModel",t.dataModel.LinkFileContentId),s.xp6(2),s.Q6J("ngIf",t.dataModel.LinkFileContentId),s.xp6(3),s.Q6J("language",t.appLanguage)("isPopup",!0)("openForm",t.fileManagerOpenForm)("tree",t.fileManagerTree)("openFilemanagerButtonLabelKey","select")("openDirectUploadView",!0)("selectFileType",t.selectFileTypeMainImage)("openFilemanagerButtonView",!1),s.xp6(3),s.Oqu(null==t.fieldsInfo.Description?null:t.fieldsInfo.Description.FieldTitle),s.xp6(1),s.s9C("placeholder",null==t.fieldsInfo.Description?null:t.fieldsInfo.Description.FieldTitle),s.Q6J("ngModel",t.dataModel.Description),s.xp6(2),s.Q6J("ngIf",t.dataModel.Description),s.xp6(4),s.hij("",n.value.length," / 500"),s.xp6(1),s.Q6J("ngIf",null==n.errors?null:n.errors.required),s.xp6(3),s.Q6J("ngIf",null==t.fieldsInfo.IsApproved?null:t.fieldsInfo.IsApproved.AccessWatchField),s.xp6(3),s.Oqu(null==t.fieldsInfo.ApprovedResult?null:t.fieldsInfo.ApprovedResult.FieldTitle),s.xp6(1),s.s9C("placeholder",null==t.fieldsInfo.Description?null:t.fieldsInfo.Description.FieldTitle),s.Q6J("ngModel",t.dataModel.ApprovedResult),s.xp6(2),s.Q6J("ngIf",t.dataModel.ApprovedResult),s.xp6(4),s.hij("",o.value.length," / 500"),s.xp6(1),s.Q6J("ngIf",null==o.errors?null:o.errors.required),s.xp6(1),s.Q6J("ngIf",null==t.fieldsInfo.ApproveCheckDate?null:t.fieldsInfo.ApproveCheckDate.AccessWatchField),s.xp6(1),s.Q6J("ngIf",null==t.fieldsInfo.ExpireDate?null:t.fieldsInfo.ExpireDate.AccessWatchField),s.xp6(4),s.hij("",t.formInfo.FormAlert," "),s.xp6(2),s.hij("",t.formInfo.FormError," "),s.xp6(2),s.Q6J("ngIf",t.formInfo.FormSubmitAllow)}},directives:[m._Y,m.JL,m.F,g.O,h.O5,I.KE,I.hX,A.Nt,m.Fj,m.JJ,m.On,M.Hw,I.R9,v.HG,m.wO,m.nD,I.bx,Z.gD,h.sg,T.ey,I.TO,x.g,C.P,S.b,k.Rr,F.hl,F.nW,F.Mq],pipes:[f.X$,q.v],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:yellow}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:black}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}"]}),X)},56014:function(t,o,i){i.d(o,{b:function(){return q}});var l=i(8239),a=i(37716),r=i(2769),d=i(3679),s=i(39761),c=i(54395),u=i(87519),f=i(43190),p=i(88002),m=i(60656),g=i(98295),h=i(38583),I=i(49983),A=i(21554),M=i(72458),v=i(76627),Z=i(81418);function T(e,t){if(1&e&&(a._UZ(0,"img",8),a.ALo(1,"cmsthumbnail")),2&e){var n=a.oxw();a.s9C("src",a.lcZ(1,1,n.dataModelSelect.LinkMainImageIdSrc),a.LSH)}}function x(e,t){if(1&e&&(a._UZ(0,"img",8),a.ALo(1,"cmsthumbnail")),2&e){var n=a.oxw().$implicit;a.s9C("src",a.lcZ(1,1,n.LinkMainImageIdSrc),a.LSH)}}function C(e,t){if(1&e&&(a.TgZ(0,"mat-option",9),a.YNc(1,x,2,3,"img",2),a.TgZ(2,"span"),a._uU(3),a.qZA(),a.qZA()),2&e){var n=t.$implicit,o=a.oxw();a.Q6J("value",n)("disabled",o.optionDisabled),a.xp6(1),a.Q6J("ngIf",n.LinkMainImageIdSrc),a.xp6(2),a.Oqu(o.displayOption(n))}}function S(e,t){if(1&e){var n=a.EpF();a.TgZ(0,"mat-icon",10),a.NdJ("click",function(){return a.CHM(n),a.oxw().onActionSelectClear()}),a._uU(1,"close"),a.qZA()}}var k,F=["*"],q=((k=function(){function t(n,o,i){var l=this;e(this,t),this.coreEnumService=n,this.cdr=o,this.categoryService=i,this.dataModelResult=new r.y$4,this.dataModelSelect=new r.OoK,this.loading=new m.O,this.formControl=new d.NI,this.optionDisabled=!1,this.optionSelectFirstItem=!1,this.optionPlaceholder="",this.optionChange=new a.vpe,this.optionReload=function(){return l.onActionReload()},this.loading.cdr=this.cdr}return n(t,[{key:"optionSelectForce",set:function(e){this.onActionSelectForce(e)}},{key:"ngOnInit",value:function(){this.loadOptions()}},{key:"loadOptions",value:function(){var e=this;this.filteredOptions=this.formControl.valueChanges.pipe((0,s.O)(""),(0,c.b)(1e3),(0,u.x)(),(0,f.w)(function(t){return"string"==typeof t||"number"==typeof t?e.DataGetAll(t||""):[]}))}},{key:"displayFn",value:function(e){return e?e.Title:void 0}},{key:"displayOption",value:function(e){return e?e.Title:void 0}},{key:"DataGetAll",value:function(e){var t=this;return(0,l.Z)(regeneratorRuntime.mark(function n(){var o,i,l;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return(o=new r.Hay).RowPerPage=20,o.AccessLoad=!0,(i=new r.AO3).PropertyName="Title",i.Value=e,i.SearchType=r.b3P.Contains,i.ClauseType=r.KT6.Or,o.Filters.push(i),e&&"number"==typeof+e&&+e>0&&((i=new r.AO3).PropertyName="Id",i.Value=e,i.SearchType=r.b3P.Equal,i.ClauseType=r.KT6.Or,o.Filters.push(i)),l=t.constructor.name+"main",t.loading.Start(l),n.next=8,t.categoryService.ServiceGetAll(o).pipe((0,p.U)(function(e){return t.dataModelResult=e,t.optionSelectFirstItem&&(!t.dataModelSelect||!t.dataModelSelect.Id||t.dataModelSelect.Id<=0)&&t.dataModelResult.ListItems.length>0&&(t.optionSelectFirstItem=!1,setTimeout(function(){t.formControl.setValue(t.dataModelResult.ListItems[0])},1e3),t.onActionSelect(t.dataModelResult.ListItems[0])),t.loading.Stop(l),e.ListItems})).toPromise();case 8:return n.abrupt("return",n.sent);case 9:case"end":return n.stop()}},n)}))()}},{key:"onActionSelect",value:function(e){this.optionDisabled||(this.dataModelSelect=e,this.optionChange.emit(this.dataModelSelect))}},{key:"onActionSelectClear",value:function(){this.optionDisabled||(this.formControl.setValue(null),this.optionChange.emit(null))}},{key:"push",value:function(e){return this.filteredOptions.pipe((0,p.U)(function(t){return t.find(function(t){return t.Id===e.Id})||t.push(e),t}))}},{key:"onActionSelectForce",value:function(e){var t=this;if("number"==typeof e&&e>0){if(this.dataModelSelect&&this.dataModelSelect.Id===e)return;if(this.dataModelResult&&this.dataModelResult.ListItems&&this.dataModelResult.ListItems.find(function(t){return t.Id===e})){var n=this.dataModelResult.ListItems.find(function(t){return t.Id===e});return this.dataModelSelect=n,void this.formControl.setValue(n)}this.categoryService.ServiceGetOneById(e).subscribe(function(e){e.IsSuccess&&(t.filteredOptions=t.push(e.Item),t.dataModelSelect=e.Item,t.formControl.setValue(e.Item),t.optionChange.emit(e.Item))})}else{if(typeof e==typeof r.OoK)return this.filteredOptions=this.push(e),this.dataModelSelect=e,void this.formControl.setValue(e);this.formControl.setValue(null)}}},{key:"onActionReload",value:function(){this.dataModelSelect=new r.OoK,this.DataGetAll(null)}}]),t}()).\u0275fac=function(e){return new(e||k)(a.Y36(r.FLW),a.Y36(a.sBO),a.Y36(r.kf3))},k.\u0275cmp=a.Xpm({type:k,selectors:[["app-core-userclaimtype-selector"]],inputs:{optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange"},ngContentSelectors:F,decls:11,vars:10,consts:[[1,"ntk-full-width"],["matPrefix",""],["style","vertical-align:middle;","aria-hidden","","height","25","width","25",3,"src",4,"ngIf"],["type","text","aria-label","Assignee","matInput","",3,"placeholder","formControl","matAutocomplete"],[3,"displayWith","optionSelected"],["auto17","matAutocomplete"],[3,"value","disabled",4,"ngFor","ngForOf"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["aria-hidden","","height","25","width","25",2,"vertical-align","middle",3,"src"],[3,"value","disabled"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(e,t){if(1&e&&(a.F$t(),a.TgZ(0,"mat-form-field",0),a.TgZ(1,"span",1),a.YNc(2,T,2,3,"img",2),a._uU(3," \xa0"),a.qZA(),a._UZ(4,"input",3),a.TgZ(5,"mat-autocomplete",4,5),a.NdJ("optionSelected",function(e){return t.onActionSelect(e.option.value)}),a.YNc(7,C,4,4,"mat-option",6),a.ALo(8,"async"),a.qZA(),a.YNc(9,S,2,0,"mat-icon",7),a.Hsn(10),a.qZA()),2&e){var n=a.MAs(6);a.xp6(2),a.Q6J("ngIf",t.dataModelSelect&&t.dataModelSelect.LinkMainImageIdSrc),a.xp6(2),a.s9C("placeholder",t.optionPlaceholder),a.Q6J("formControl",t.formControl)("matAutocomplete",n),a.uIk("disabled",!!t.optionDisabled||null),a.xp6(1),a.Q6J("displayWith",t.displayFn),a.xp6(2),a.Q6J("ngForOf",a.lcZ(8,8,t.filteredOptions)),a.xp6(2),a.Q6J("ngIf",t.dataModelSelect.Id)}},directives:[g.KE,g.qo,h.O5,I.Nt,d.Fj,A.ZL,d.JJ,d.oH,A.XC,h.sg,M.ey,v.Hw,g.R9],pipes:[h.Ov,Z.v],styles:[""]}),k)}}])}();