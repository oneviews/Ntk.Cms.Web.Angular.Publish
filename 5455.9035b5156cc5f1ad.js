"use strict";(self.webpackChunkntk_cms_web=self.webpackChunkntk_cms_web||[]).push([[5455],{5455:(ct,R,l)=>{l.r(R),l.d(R,{CoreCurrencyCmsModule:()=>lt});var f=l(1048),T=l(7076),m=l(8774),c=l(7977),k=l(6964),S=l(656),J=l(9723),U=l(9312),v=l(8239),C=l(8485),e=l(9724),M=l(2607),A=l(3987),h=l(4817),d=l(1659),w=l(5738),g=l(5691),q=l(1450),L=l(1531),y=l(8904),Z=l(4848),I=l(8572),x=l(1418);const O=["vform"];function F(o,r){if(1&o&&(e.TgZ(0,"mat-option",35),e._uU(1),e.qZA()),2&o){const n=r.$implicit;e.Q6J("value",n.value),e.xp6(1),e.Oqu(n.description)}}function D(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," RecordStatus is "),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&o&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"MESSAGE.required")))}function Q(o,r){if(1&o){const n=e.EpF();e.TgZ(0,"mat-icon",36),e.NdJ("click",function(){return e.CHM(n),e.oxw().dataModel.title=""}),e._uU(1,"close"),e.qZA()}}function Y(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Title is "),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&o&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"MESSAGE.required")))}function G(o,r){if(1&o){const n=e.EpF();e.TgZ(0,"mat-icon",36),e.NdJ("click",function(){return e.CHM(n),e.oxw().dataModel.symbol=""}),e._uU(1,"close"),e.qZA()}}function B(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Symbol is "),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&o&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"MESSAGE.required")))}function H(o,r){if(1&o){const n=e.EpF();e.TgZ(0,"mat-icon",36),e.NdJ("click",function(){return e.CHM(n),e.oxw().dataModel.exchangeBuyRatio=1}),e._uU(1,"close"),e.qZA()}}function j(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," ExchangeBuyRatio is "),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&o&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"MESSAGE.required")))}function P(o,r){if(1&o){const n=e.EpF();e.TgZ(0,"mat-icon",36),e.NdJ("click",function(){return e.CHM(n),e.oxw().dataModel.exchangeSaleRatio=1}),e._uU(1,"close"),e.qZA()}}function $(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," ExchangeSaleRatio is "),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&o&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"MESSAGE.required")))}function V(o,r){if(1&o&&(e._UZ(0,"img",37),e.ALo(1,"cmsthumbnail")),2&o){const n=e.oxw();e.s9C("src",e.lcZ(1,1,n.dataModel.linkMainImageIdSrc),e.LSH)}}function z(o,r){if(1&o){const n=e.EpF();e.TgZ(0,"mat-icon",36),e.NdJ("click",function(){return e.CHM(n),e.oxw().dataModel.linkMainImageId=null}),e._uU(1,"close"),e.qZA()}}function K(o,r){if(1&o){const n=e.EpF();e.TgZ(0,"div",30)(1,"button",38),e.NdJ("click",function(){return e.CHM(n),e.oxw().onFormCancel()}),e._UZ(2,"i",39),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"button",40),e.NdJ("click",function(){return e.CHM(n),e.oxw().onFormSubmit()}),e._UZ(6,"i",41),e._uU(7),e.ALo(8,"translate"),e.qZA()()}if(2&o){e.oxw();const n=e.MAs(1);e.xp6(3),e.hij(" ",e.lcZ(4,3,"ACTION.CANCEL")," "),e.xp6(2),e.Q6J("disabled",!n.form.valid),e.xp6(2),e.hij(" ",e.lcZ(8,5,"ACTION.SAVE")," ")}}let W=(()=>{class o{constructor(n,t,i,a,s,u,p,_){this.data=n,this.dialogRef=t,this.coreEnumService=i,this.coreCurrencyService=a,this.cmsToastrService=s,this.publicHelper=u,this.cdr=p,this.translate=_,this.requestId=0,this.fieldsInfo=new Map,this.selectFileTypeMainImage=["jpg","jpeg","png"],this.appLanguage="fa",this.loading=new S.O,this.dataModelResult=new c.y$4,this.dataModel=new c.CWo,this.formInfo=new c.LEF,this.dataModelEnumRecordStatusResult=new c.y$4,this.fileManagerOpenForm=!1,this.loading.cdr=this.cdr,this.loading.message=this.translate.instant("MESSAGE.Receiving_information"),n&&(this.requestId=+n.id||0),this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}ngOnInit(){if(!(this.requestId>0))return this.cmsToastrService.typeErrorComponentAction(),void this.dialogRef.close({dialogChangedDate:!1});this.formInfo.formTitle=this.translate.instant("TITLE.Edit"),this.DataGetOneContent(),this.getEnumRecordStatus()}getEnumRecordStatus(){var n=this;return(0,v.Z)(function*(){n.dataModelEnumRecordStatusResult=yield n.publicHelper.getEnumRecordStatus()})()}DataGetOneContent(){if(this.requestId<=0)return void this.cmsToastrService.typeErrorEditRowIsNull();this.formInfo.formAlert=this.translate.instant("MESSAGE.Receiving_Information_From_The_Server"),this.formInfo.formError="";const n=this.constructor.name+"main";this.loading.Start(n),this.coreCurrencyService.setAccessLoad(),this.coreCurrencyService.ServiceGetOneById(this.requestId).subscribe({next:t=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(t.access),this.dataModel=t.item,t.isSuccess?(this.formInfo.formTitle=this.formInfo.formTitle+" "+t.item.title,this.formInfo.formAlert=""):(this.formInfo.formAlert=this.translate.instant("ERRORMESSAGE.MESSAGE.typeError"),this.formInfo.formError=t.errorMessage,this.cmsToastrService.typeErrorMessage(t.errorMessage)),this.loading.Stop(n)},error:t=>{this.cmsToastrService.typeError(t),this.loading.Stop(n)}})}DataEditContent(){this.formInfo.formAlert=this.translate.instant("MESSAGE.sending_information_to_the_server"),this.formInfo.formError="";const n=this.constructor.name+"main";this.loading.Start(n,this.translate.instant("MESSAGE.sending_information_to_the_server")),this.coreCurrencyService.ServiceEdit(this.dataModel).subscribe({next:t=>{this.formInfo.formSubmitAllow=!0,this.dataModelResult=t,t.isSuccess?(this.formInfo.formAlert=this.translate.instant("MESSAGE.registration_completed_successfully"),this.cmsToastrService.typeSuccessEdit(),this.dialogRef.close({dialogChangedDate:!0})):(this.formInfo.formAlert=this.translate.instant("ERRORMESSAGE.MESSAGE.typeError"),this.formInfo.formError=t.errorMessage,this.cmsToastrService.typeErrorMessage(t.errorMessage)),this.loading.Stop(n)},error:t=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(t),this.loading.Stop(n)}})}onActionFileSelected(n){this.dataModel.linkMainImageId=n.id,this.dataModel.linkMainImageIdSrc=n.downloadLinksrc}onFormSubmit(){!this.formGroup.valid||(this.formInfo.formSubmitAllow=!1,this.DataEditContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}}return o.\u0275fac=function(n){return new(n||o)(e.Y36(C.WI),e.Y36(C.so),e.Y36(c.FLW),e.Y36(c._GB),e.Y36(M.e),e.Y36(A.i),e.Y36(e.sBO),e.Y36(h.sK))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-core-currency-edit"]],viewQuery:function(n,t){if(1&n&&e.Gf(O,5),2&n){let i;e.iGM(i=e.CRH())&&(t.formGroup=i.first)}},decls:75,vars:49,consts:[[3,"ngSubmit"],["vform","ngForm"],[1,"ntk-cms-html-card-header"],[1,"ntk-cms-html-card-body"],[3,"options"],[1,"ntk-full-width"],["name","dataModel.recordStatus","required","",3,"placeholder","ngModel","panelClass","ngModelChange"],["RecordStatus","ngModel"],[3,"value",4,"ngFor","ngForOf"],[2,"text-align","left"],[4,"ngIf"],["matInput","","name","dataModel.title","type","text","minlength","3","maxlength","20","required","",3,"ngModel","placeholder","ngModelChange"],["Title",""],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matSuffix",""],["matInput","","name","dataModel.symbol","type","text","minlength","1","maxlength","20","required","",3,"ngModel","placeholder","ngModelChange"],["Symbol",""],["matInput","","name","dataModel.exchangeBuyRatio","type","number","required","","step","0.001",3,"ngModel","placeholder","ngModelChange"],["ExchangeBuyRatio",""],["matInput","","name","dataModel.exchangeSaleRatio","type","number","required","","step","0.001",3,"ngModel","placeholder","ngModelChange"],["ExchangeSaleRatio",""],[1,"mb-3"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","50","width","50",3,"src",4,"ngIf"],[1,"mb-9"],[3,"click"],["matInput","","name","dataModel.linkMainImageId","type","text","placeholder","\u0634\u0646\u0627\u0633\u0647 \u0641\u0627\u06cc\u0644 \u0627\u0635\u0644\u06cc","autocomplete","off",3,"ngModel","ngModelChange","click"],["LinkMainImageId",""],["matSuffix","",3,"click"],[3,"language","isPopup","openForm","tree","openFilemanagerButtonLabelKey","openDirectUploadView","selectFileType","openFilemanagerButtonView","itemSelected","openFormChange"],[1,"ntk-cms-html-card-message"],[1,"form-actions"],[1,"form-text","text-muted"],[1,"form-text","text-muted","danger"],[1,"ntk-cms-html-card-footer"],["class","form-actions",4,"ngIf"],[3,"value"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["aria-hidden","","height","50","width","50",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],["type","button",1,"btn","btn-light",3,"click"],[1,"ft-x"],["type","submit",1,"btn","btn-success",3,"disabled","click"],[1,"fa","fa-check-square-o"]],template:function(n,t){if(1&n&&(e.TgZ(0,"form",0,1),e.NdJ("ngSubmit",function(){return t.onFormSubmit()}),e.TgZ(2,"div",2),e._uU(3),e.qZA(),e.TgZ(4,"div",3),e._UZ(5,"app-progress-spinner",4),e.TgZ(6,"mat-form-field",5)(7,"mat-select",6,7),e.NdJ("ngModelChange",function(a){return t.dataModel.recordStatus=a}),e.YNc(9,F,2,2,"mat-option",8),e.qZA(),e.TgZ(10,"mat-hint",9),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.YNc(13,D,5,3,"mat-error",10),e.qZA(),e.TgZ(14,"mat-form-field",5)(15,"mat-label"),e._uU(16),e.qZA(),e.TgZ(17,"input",11,12),e.NdJ("ngModelChange",function(a){return t.dataModel.title=a}),e.qZA(),e.YNc(19,Q,2,0,"mat-icon",13),e.TgZ(20,"mat-icon",14),e._uU(21,"mode_edit"),e.qZA(),e.TgZ(22,"mat-hint",9),e._uU(23),e.qZA(),e.YNc(24,Y,5,3,"mat-error",10),e.qZA(),e.TgZ(25,"mat-form-field",5)(26,"mat-label"),e._uU(27),e.qZA(),e.TgZ(28,"input",15,16),e.NdJ("ngModelChange",function(a){return t.dataModel.symbol=a}),e.qZA(),e.YNc(30,G,2,0,"mat-icon",13),e.TgZ(31,"mat-icon",14),e._uU(32,"mode_edit"),e.qZA(),e.TgZ(33,"mat-hint",9),e._uU(34),e.qZA(),e.YNc(35,B,5,3,"mat-error",10),e.qZA(),e.TgZ(36,"mat-form-field",5)(37,"mat-label"),e._uU(38),e.qZA(),e.TgZ(39,"input",17,18),e.NdJ("ngModelChange",function(a){return t.dataModel.exchangeBuyRatio=a}),e.qZA(),e.YNc(41,H,2,0,"mat-icon",13),e.TgZ(42,"mat-icon",14),e._uU(43,"mode_edit"),e.qZA(),e.YNc(44,j,5,3,"mat-error",10),e.qZA(),e.TgZ(45,"mat-form-field",5)(46,"mat-label"),e._uU(47),e.qZA(),e.TgZ(48,"input",19,20),e.NdJ("ngModelChange",function(a){return t.dataModel.exchangeSaleRatio=a}),e.qZA(),e.YNc(50,P,2,0,"mat-icon",13),e.TgZ(51,"mat-icon",14),e._uU(52,"mode_edit"),e.qZA(),e.YNc(53,$,5,3,"mat-error",10),e.qZA(),e.TgZ(54,"div",21),e.YNc(55,V,2,3,"img",22),e.qZA(),e.TgZ(56,"div",23)(57,"mat-form-field",5)(58,"mat-label",24),e.NdJ("click",function(){return t.fileManagerOpenForm=!0}),e._uU(59),e.ALo(60,"translate"),e.qZA(),e.TgZ(61,"input",25,26),e.NdJ("ngModelChange",function(a){return t.dataModel.linkMainImageId=a})("click",function(){return t.fileManagerOpenForm=!0}),e.qZA(),e.YNc(63,z,2,0,"mat-icon",13),e.TgZ(64,"mat-icon",27),e.NdJ("click",function(){return t.fileManagerOpenForm=!0}),e._uU(65,"mode_edit"),e.qZA()(),e.TgZ(66,"cms-file-manager",28),e.NdJ("itemSelected",function(a){return t.onActionFileSelected(a)})("openFormChange",function(a){return t.fileManagerOpenForm=a}),e.qZA()()(),e.TgZ(67,"div",29)(68,"div",30)(69,"small",31),e._uU(70),e.qZA(),e.TgZ(71,"small",32),e._uU(72),e.qZA()()(),e.TgZ(73,"div",33),e.YNc(74,K,9,7,"div",34),e.qZA()()),2&n){const i=e.MAs(8),a=e.MAs(18),s=e.MAs(29),u=e.MAs(40),p=e.MAs(49);e.xp6(3),e.hij(" ",t.formInfo.formTitle," "),e.xp6(2),e.Q6J("options",t.loading),e.xp6(2),e.s9C("placeholder",null==t.fieldsInfo.RecordStatus?null:t.fieldsInfo.RecordStatus.fieldTitle),e.MGl("panelClass","recordStatus-",t.dataModel.recordStatus,""),e.Q6J("ngModel",t.dataModel.recordStatus),e.xp6(2),e.Q6J("ngForOf",t.dataModelEnumRecordStatusResult.listItems),e.xp6(2),e.Oqu(e.lcZ(12,45,"TITLE.SELECT_STATUS")),e.xp6(2),e.Q6J("ngIf",null==i.errors?null:i.errors.required),e.xp6(3),e.Oqu(null==t.fieldsInfo.Title?null:t.fieldsInfo.Title.fieldTitle),e.xp6(1),e.s9C("placeholder",null==t.fieldsInfo.Title?null:t.fieldsInfo.Title.fieldTitle),e.Q6J("ngModel",t.dataModel.title),e.xp6(2),e.Q6J("ngIf",t.dataModel.title),e.xp6(4),e.hij("",a.value.length," / 20"),e.xp6(1),e.Q6J("ngIf",null==a.errors?null:a.errors.required),e.xp6(3),e.Oqu(null==t.fieldsInfo.Symbol?null:t.fieldsInfo.Symbol.fieldTitle),e.xp6(1),e.s9C("placeholder",null==t.fieldsInfo.Symbol?null:t.fieldsInfo.Symbol.fieldTitle),e.Q6J("ngModel",t.dataModel.symbol),e.xp6(2),e.Q6J("ngIf",t.dataModel.symbol),e.xp6(4),e.hij("",s.value.length," / 20"),e.xp6(1),e.Q6J("ngIf",null==s.errors?null:s.errors.required),e.xp6(3),e.Oqu(null==t.fieldsInfo.ExchangeBuyRatio?null:t.fieldsInfo.ExchangeBuyRatio.fieldTitle),e.xp6(1),e.s9C("placeholder",null==t.fieldsInfo.ExchangeBuyRatio?null:t.fieldsInfo.ExchangeBuyRatio.fieldTitle),e.Q6J("ngModel",t.dataModel.exchangeBuyRatio),e.xp6(2),e.Q6J("ngIf",t.dataModel.exchangeBuyRatio),e.xp6(3),e.Q6J("ngIf",null==u.errors?null:u.errors.required),e.xp6(3),e.Oqu(null==t.fieldsInfo.ExchangeSaleRatio?null:t.fieldsInfo.ExchangeSaleRatio.fieldTitle),e.xp6(1),e.s9C("placeholder",null==t.fieldsInfo.ExchangeSaleRatio?null:t.fieldsInfo.ExchangeSaleRatio.fieldTitle),e.Q6J("ngModel",t.dataModel.exchangeSaleRatio),e.xp6(2),e.Q6J("ngIf",t.dataModel.exchangeSaleRatio),e.xp6(3),e.Q6J("ngIf",null==p.errors?null:p.errors.required),e.xp6(2),e.Q6J("ngIf",(null==t.dataModel||null==t.dataModel.linkMainImageIdSrc?null:t.dataModel.linkMainImageIdSrc.length)>0),e.xp6(4),e.hij(" ",e.lcZ(60,47,"TITLE.Icon_File")," "),e.xp6(2),e.Q6J("ngModel",t.dataModel.linkMainImageId),e.xp6(2),e.Q6J("ngIf",t.dataModel.linkMainImageId),e.xp6(3),e.Q6J("language",t.appLanguage)("isPopup",!0)("openForm",t.fileManagerOpenForm)("tree",t.fileManagerTree)("openFilemanagerButtonLabelKey","select")("openDirectUploadView",!0)("selectFileType",t.selectFileTypeMainImage)("openFilemanagerButtonView",!1),e.xp6(4),e.hij("",t.formInfo.formAlert," "),e.xp6(2),e.hij("",t.formInfo.formError," "),e.xp6(2),e.Q6J("ngIf",t.formInfo.formSubmitAllow&&!t.loading.display)}},directives:[d._Y,d.JL,d.F,w.O,g.KE,q.gD,d.Q7,d.JJ,d.On,f.sg,L.ey,g.bx,f.O5,g.TO,g.hX,y.Nt,d.Fj,d.wO,d.nD,Z.Hw,g.R9,d.wV,I.HG],pipes:[h.X$,x.v],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:yellow}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:black}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}"]}),o})();const X=["vform"];function ee(o,r){if(1&o&&(e.TgZ(0,"mat-option",37),e._uU(1),e.qZA()),2&o){const n=r.$implicit;e.Q6J("value",n.value),e.xp6(1),e.Oqu(n.description)}}function te(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," RecordStatus is "),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&o&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"MESSAGE.required")))}function ne(o,r){if(1&o){const n=e.EpF();e.TgZ(0,"mat-icon",38),e.NdJ("click",function(){return e.CHM(n),e.oxw().dataModel.title=""}),e._uU(1,"close"),e.qZA()}}function oe(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Title is "),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&o&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"MESSAGE.required")))}function ie(o,r){if(1&o){const n=e.EpF();e.TgZ(0,"mat-icon",38),e.NdJ("click",function(){return e.CHM(n),e.oxw().dataModel.titleResourceLanguage=""}),e._uU(1,"close"),e.qZA()}}function re(o,r){if(1&o&&(e.TgZ(0,"mat-error"),e._uU(1),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&o){const n=e.oxw();e.xp6(1),e.hij(" ",null==n.fieldsInfo.TitleResourceLanguage?null:n.fieldsInfo.TitleResourceLanguage.fieldTitle," is "),e.xp6(2),e.Oqu(e.lcZ(4,2,"MESSAGE.required"))}}function ae(o,r){if(1&o){const n=e.EpF();e.TgZ(0,"mat-icon",38),e.NdJ("click",function(){return e.CHM(n),e.oxw().dataModel.symbol=""}),e._uU(1,"close"),e.qZA()}}function le(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Symbol is "),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&o&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"MESSAGE.required")))}function se(o,r){if(1&o){const n=e.EpF();e.TgZ(0,"mat-icon",38),e.NdJ("click",function(){return e.CHM(n),e.oxw().dataModel.exchangeBuyRatio=1}),e._uU(1,"close"),e.qZA()}}function ce(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," ExchangeBuyRatio is "),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&o&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"MESSAGE.required")))}function de(o,r){if(1&o){const n=e.EpF();e.TgZ(0,"mat-icon",38),e.NdJ("click",function(){return e.CHM(n),e.oxw().dataModel.exchangeSaleRatio=1}),e._uU(1,"close"),e.qZA()}}function ue(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," ExchangeSaleRatio is "),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&o&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"MESSAGE.required")))}function me(o,r){if(1&o&&(e._UZ(0,"img",39),e.ALo(1,"cmsthumbnail")),2&o){const n=e.oxw();e.s9C("src",e.lcZ(1,1,n.dataModel.linkMainImageIdSrc),e.LSH)}}function pe(o,r){if(1&o){const n=e.EpF();e.TgZ(0,"mat-icon",38),e.NdJ("click",function(){return e.CHM(n),e.oxw().dataModel.linkMainImageId=null}),e._uU(1,"close"),e.qZA()}}function ge(o,r){if(1&o){const n=e.EpF();e.TgZ(0,"div",32)(1,"button",40),e.NdJ("click",function(){return e.CHM(n),e.oxw().onFormCancel()}),e._UZ(2,"i",41),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"button",42),e.NdJ("click",function(){return e.CHM(n),e.oxw().onFormSubmit()}),e._UZ(6,"i",43),e._uU(7),e.ALo(8,"translate"),e.qZA()()}if(2&o){e.oxw();const n=e.MAs(1);e.xp6(3),e.hij(" ",e.lcZ(4,3,"ACTION.CANCEL")," "),e.xp6(2),e.Q6J("disabled",!n.form.valid),e.xp6(2),e.hij(" ",e.lcZ(8,5,"ACTION.SAVE")," ")}}let fe=(()=>{class o{constructor(n,t,i,a,s,u,p,_){this.data=n,this.dialogRef=t,this.coreEnumService=i,this.coreCurrencyService=a,this.cmsToastrService=s,this.publicHelper=u,this.cdr=p,this.translate=_,this.fieldsInfo=new Map,this.selectFileTypeMainImage=["jpg","jpeg","png"],this.appLanguage="fa",this.loading=new S.O,this.dataModelResult=new c.y$4,this.dataModel=new c.CWo,this.formInfo=new c.LEF,this.dataModelEnumRecordStatusResult=new c.y$4,this.fileManagerOpenForm=!1,this.loading.cdr=this.cdr,this.loading.message=this.translate.instant("MESSAGE.Receiving_information"),this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig()}ngOnInit(){this.formInfo.formTitle=this.translate.instant("TITLE.ADD"),this.getEnumRecordStatus(),this.DataGetAccess()}getEnumRecordStatus(){var n=this;return(0,v.Z)(function*(){n.dataModelEnumRecordStatusResult=yield n.publicHelper.getEnumRecordStatus()})()}DataGetAccess(){this.coreCurrencyService.ServiceViewModel().subscribe({next:n=>{n.isSuccess?this.fieldsInfo=this.publicHelper.fieldInfoConvertor(n.access):this.cmsToastrService.typeErrorGetAccess(n.errorMessage)},error:n=>{this.cmsToastrService.typeErrorGetAccess(n)}})}DataAddContent(){this.formInfo.formAlert=this.translate.instant("MESSAGE.sending_information_to_the_server"),this.formInfo.formError="";const n=this.constructor.name+"main";this.loading.Start(n),this.coreCurrencyService.ServiceAdd(this.dataModel).subscribe({next:t=>{this.formInfo.formSubmitAllow=!0,this.dataModelResult=t,t.isSuccess?(this.formInfo.formAlert=this.translate.instant("MESSAGE.registration_completed_successfully"),this.cmsToastrService.typeSuccessAdd(),this.dialogRef.close({dialogChangedDate:!0})):(this.formInfo.formAlert=this.translate.instant("ERRORMESSAGE.MESSAGE.typeError"),this.formInfo.formError=t.errorMessage,this.cmsToastrService.typeErrorMessage(t.errorMessage)),this.loading.Stop(n)},error:t=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(t),this.loading.Stop(n)}})}onActionFileSelected(n){this.dataModel.linkMainImageId=n.id,this.dataModel.linkMainImageIdSrc=n.downloadLinksrc}onFormSubmit(){!this.formGroup.valid||(this.formInfo.formSubmitAllow=!1,this.DataAddContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}}return o.\u0275fac=function(n){return new(n||o)(e.Y36(C.WI),e.Y36(C.so),e.Y36(c.FLW),e.Y36(c._GB),e.Y36(M.e),e.Y36(A.i),e.Y36(e.sBO),e.Y36(h.sK))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-core-currency-add"]],viewQuery:function(n,t){if(1&n&&e.Gf(X,5),2&n){let i;e.iGM(i=e.CRH())&&(t.formGroup=i.first)}},decls:86,vars:56,consts:[[3,"ngSubmit"],["vform","ngForm"],[1,"ntk-cms-html-card-header"],[1,"ntk-cms-html-card-body"],[3,"options"],[1,"ntk-full-width"],["name","dataModel.recordStatus","required","",3,"placeholder","ngModel","panelClass","ngModelChange"],["RecordStatus","ngModel"],[3,"value",4,"ngFor","ngForOf"],[2,"text-align","left"],[4,"ngIf"],["matInput","","name","dataModel.title","type","text","minlength","3","maxlength","20","required","",3,"ngModel","placeholder","ngModelChange"],["Title",""],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matSuffix",""],["matInput","","name","dataModel.titleResourceLanguage","type","text","minlength","3","maxlength","100","required","",3,"ngModel","placeholder","disabled","ngModelChange"],["TitleResourceLanguage",""],["matInput","","name","dataModel.symbol","type","text","minlength","1","maxlength","20","required","",3,"ngModel","placeholder","ngModelChange"],["Symbol",""],["matInput","","name","dataModel.exchangeBuyRatio","type","number","required","","step","0.001",3,"ngModel","placeholder","ngModelChange"],["ExchangeBuyRatio",""],["matInput","","name","dataModel.exchangeSaleRatio","type","number","required","","step","0.001",3,"ngModel","placeholder","ngModelChange"],["ExchangeSaleRatio",""],[1,"mb-3"],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","50","width","50",3,"src",4,"ngIf"],[1,"mb-9"],[3,"click"],["matInput","","name","dataModel.linkMainImageId","type","text","placeholder","\u0634\u0646\u0627\u0633\u0647 \u0641\u0627\u06cc\u0644 \u0627\u0635\u0644\u06cc","autocomplete","off",3,"ngModel","ngModelChange","click"],["LinkMainImageId",""],["matSuffix","",3,"click"],[3,"language","isPopup","openForm","tree","openFilemanagerButtonLabelKey","openDirectUploadView","selectFileType","openFilemanagerButtonView","itemSelected","openFormChange"],[1,"ntk-cms-html-card-message"],[1,"form-actions"],[1,"form-text","text-muted"],[1,"form-text","text-muted","danger"],[1,"ntk-cms-html-card-footer"],["class","form-actions",4,"ngIf"],[3,"value"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["aria-hidden","","height","50","width","50",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],["type","button",1,"btn","btn-light",3,"click"],[1,"ft-x"],["type","submit",1,"btn","btn-success",3,"disabled","click"],[1,"fa","fa-check-square-o"]],template:function(n,t){if(1&n&&(e.TgZ(0,"form",0,1),e.NdJ("ngSubmit",function(){return t.onFormSubmit()}),e.TgZ(2,"div",2),e._uU(3),e.qZA(),e.TgZ(4,"div",3),e._UZ(5,"app-progress-spinner",4),e.TgZ(6,"mat-form-field",5)(7,"mat-select",6,7),e.NdJ("ngModelChange",function(a){return t.dataModel.recordStatus=a}),e.YNc(9,ee,2,2,"mat-option",8),e.qZA(),e.TgZ(10,"mat-hint",9),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.YNc(13,te,5,3,"mat-error",10),e.qZA(),e.TgZ(14,"mat-form-field",5)(15,"mat-label"),e._uU(16),e.qZA(),e.TgZ(17,"input",11,12),e.NdJ("ngModelChange",function(a){return t.dataModel.title=a}),e.qZA(),e.YNc(19,ne,2,0,"mat-icon",13),e.TgZ(20,"mat-icon",14),e._uU(21,"mode_edit"),e.qZA(),e.TgZ(22,"mat-hint",9),e._uU(23),e.qZA(),e.YNc(24,oe,5,3,"mat-error",10),e.qZA(),e.TgZ(25,"mat-form-field",5)(26,"mat-label"),e._uU(27),e.qZA(),e.TgZ(28,"input",15,16),e.NdJ("ngModelChange",function(a){return t.dataModel.titleResourceLanguage=a}),e.qZA(),e.YNc(30,ie,2,0,"mat-icon",13),e.TgZ(31,"mat-icon",14),e._uU(32,"mode_edit"),e.qZA(),e.TgZ(33,"mat-hint",9),e._uU(34),e.qZA(),e.YNc(35,re,5,4,"mat-error",10),e.qZA(),e.TgZ(36,"mat-form-field",5)(37,"mat-label"),e._uU(38),e.qZA(),e.TgZ(39,"input",17,18),e.NdJ("ngModelChange",function(a){return t.dataModel.symbol=a}),e.qZA(),e.YNc(41,ae,2,0,"mat-icon",13),e.TgZ(42,"mat-icon",14),e._uU(43,"mode_edit"),e.qZA(),e.TgZ(44,"mat-hint",9),e._uU(45),e.qZA(),e.YNc(46,le,5,3,"mat-error",10),e.qZA(),e.TgZ(47,"mat-form-field",5)(48,"mat-label"),e._uU(49),e.qZA(),e.TgZ(50,"input",19,20),e.NdJ("ngModelChange",function(a){return t.dataModel.exchangeBuyRatio=a}),e.qZA(),e.YNc(52,se,2,0,"mat-icon",13),e.TgZ(53,"mat-icon",14),e._uU(54,"mode_edit"),e.qZA(),e.YNc(55,ce,5,3,"mat-error",10),e.qZA(),e.TgZ(56,"mat-form-field",5)(57,"mat-label"),e._uU(58),e.qZA(),e.TgZ(59,"input",21,22),e.NdJ("ngModelChange",function(a){return t.dataModel.exchangeSaleRatio=a}),e.qZA(),e.YNc(61,de,2,0,"mat-icon",13),e.TgZ(62,"mat-icon",14),e._uU(63,"mode_edit"),e.qZA(),e.YNc(64,ue,5,3,"mat-error",10),e.qZA(),e.TgZ(65,"div",23),e.YNc(66,me,2,3,"img",24),e.qZA(),e.TgZ(67,"div",25)(68,"mat-form-field",5)(69,"mat-label",26),e.NdJ("click",function(){return t.fileManagerOpenForm=!0}),e._uU(70),e.ALo(71,"translate"),e.qZA(),e.TgZ(72,"input",27,28),e.NdJ("ngModelChange",function(a){return t.dataModel.linkMainImageId=a})("click",function(){return t.fileManagerOpenForm=!0}),e.qZA(),e.YNc(74,pe,2,0,"mat-icon",13),e.TgZ(75,"mat-icon",29),e.NdJ("click",function(){return t.fileManagerOpenForm=!0}),e._uU(76,"mode_edit"),e.qZA()(),e.TgZ(77,"cms-file-manager",30),e.NdJ("itemSelected",function(a){return t.onActionFileSelected(a)})("openFormChange",function(a){return t.fileManagerOpenForm=a}),e.qZA()()(),e.TgZ(78,"div",31)(79,"div",32)(80,"small",33),e._uU(81),e.qZA(),e.TgZ(82,"small",34),e._uU(83),e.qZA()()(),e.TgZ(84,"div",35),e.YNc(85,ge,9,7,"div",36),e.qZA()()),2&n){const i=e.MAs(8),a=e.MAs(18),s=e.MAs(29),u=e.MAs(40),p=e.MAs(51),_=e.MAs(60);e.xp6(3),e.hij(" ",t.formInfo.formTitle," "),e.xp6(2),e.Q6J("options",t.loading),e.xp6(2),e.s9C("placeholder",null==t.fieldsInfo.RecordStatus?null:t.fieldsInfo.RecordStatus.fieldTitle),e.MGl("panelClass","recordStatus-",t.dataModel.recordStatus,""),e.Q6J("ngModel",t.dataModel.recordStatus),e.xp6(2),e.Q6J("ngForOf",t.dataModelEnumRecordStatusResult.listItems),e.xp6(2),e.Oqu(e.lcZ(12,52,"TITLE.SELECT_STATUS")),e.xp6(2),e.Q6J("ngIf",null==i.errors?null:i.errors.required),e.xp6(3),e.Oqu(null==t.fieldsInfo.Title?null:t.fieldsInfo.Title.fieldTitle),e.xp6(1),e.s9C("placeholder",null==t.fieldsInfo.Title?null:t.fieldsInfo.Title.fieldTitle),e.Q6J("ngModel",t.dataModel.title),e.xp6(2),e.Q6J("ngIf",t.dataModel.title),e.xp6(4),e.hij("",a.value.length," / 20"),e.xp6(1),e.Q6J("ngIf",null==a.errors?null:a.errors.required),e.xp6(3),e.Oqu(null==t.fieldsInfo.TitleResourceLanguage?null:t.fieldsInfo.TitleResourceLanguage.fieldTitle),e.xp6(1),e.s9C("placeholder",null==t.fieldsInfo.Title?null:t.fieldsInfo.Title.fieldTitle),e.Q6J("ngModel",t.dataModel.titleResourceLanguage)("disabled",!(null!=t.fieldsInfo.TitleResourceLanguage&&t.fieldsInfo.TitleResourceLanguage.accessAddField)),e.xp6(2),e.Q6J("ngIf",t.dataModel.titleResourceLanguage),e.xp6(4),e.hij("",s.value.length," / 100"),e.xp6(1),e.Q6J("ngIf",null==s.errors?null:s.errors.required),e.xp6(3),e.Oqu(null==t.fieldsInfo.Symbol?null:t.fieldsInfo.Symbol.fieldTitle),e.xp6(1),e.s9C("placeholder",null==t.fieldsInfo.Symbol?null:t.fieldsInfo.Symbol.fieldTitle),e.Q6J("ngModel",t.dataModel.symbol),e.xp6(2),e.Q6J("ngIf",t.dataModel.symbol),e.xp6(4),e.hij("",u.value.length," / 20"),e.xp6(1),e.Q6J("ngIf",null==u.errors?null:u.errors.required),e.xp6(3),e.Oqu(null==t.fieldsInfo.ExchangeBuyRatio?null:t.fieldsInfo.ExchangeBuyRatio.fieldTitle),e.xp6(1),e.s9C("placeholder",null==t.fieldsInfo.ExchangeBuyRatio?null:t.fieldsInfo.ExchangeBuyRatio.fieldTitle),e.Q6J("ngModel",t.dataModel.exchangeBuyRatio),e.xp6(2),e.Q6J("ngIf",t.dataModel.exchangeBuyRatio),e.xp6(3),e.Q6J("ngIf",null==p.errors?null:p.errors.required),e.xp6(3),e.Oqu(null==t.fieldsInfo.ExchangeSaleRatio?null:t.fieldsInfo.ExchangeSaleRatio.fieldTitle),e.xp6(1),e.s9C("placeholder",null==t.fieldsInfo.ExchangeSaleRatio?null:t.fieldsInfo.ExchangeSaleRatio.fieldTitle),e.Q6J("ngModel",t.dataModel.exchangeSaleRatio),e.xp6(2),e.Q6J("ngIf",t.dataModel.exchangeSaleRatio),e.xp6(3),e.Q6J("ngIf",null==_.errors?null:_.errors.required),e.xp6(2),e.Q6J("ngIf",(null==t.dataModel||null==t.dataModel.linkMainImageIdSrc?null:t.dataModel.linkMainImageIdSrc.length)>0),e.xp6(4),e.hij(" ",e.lcZ(71,54,"TITLE.Icon_File")," "),e.xp6(2),e.Q6J("ngModel",t.dataModel.linkMainImageId),e.xp6(2),e.Q6J("ngIf",t.dataModel.linkMainImageId),e.xp6(3),e.Q6J("language",t.appLanguage)("isPopup",!0)("openForm",t.fileManagerOpenForm)("tree",t.fileManagerTree)("openFilemanagerButtonLabelKey","select")("openDirectUploadView",!0)("selectFileType",t.selectFileTypeMainImage)("openFilemanagerButtonView",!1),e.xp6(4),e.hij("",t.formInfo.formAlert," "),e.xp6(2),e.hij("",t.formInfo.formError," "),e.xp6(2),e.Q6J("ngIf",t.formInfo.formSubmitAllow&&!t.loading.display)}},directives:[d._Y,d.JL,d.F,w.O,g.KE,q.gD,d.Q7,d.JJ,d.On,f.sg,L.ey,g.bx,f.O5,g.TO,g.hX,y.Nt,d.Fj,d.wO,d.nD,Z.Hw,g.R9,d.wV,I.HG],pipes:[h.X$,x.v],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:yellow}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:black}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}"]}),o})();var _e=l(3914),he=l(727),Ce=l(7980),Te=l(1582),Se=l(3014),Me=l(7154),Ae=l(626),N=l(9988),ye=l(3673),Ze=l(3472),E=l(4545),Ie=l(5903),xe=l(3953);function Ee(o,r){if(1&o){const n=e.EpF();e.TgZ(0,"button",35),e.NdJ("click",function(){return e.CHM(n),e.oxw().onActionbuttonNewRow()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&o&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"ACTION.ADD")))}function be(o,r){if(1&o){const n=e.EpF();e.TgZ(0,"button",36),e.NdJ("click",function(){return e.CHM(n),e.oxw().onActionbuttonEditRow()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&o&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"ACTION.EDIT")))}function Re(o,r){if(1&o){const n=e.EpF();e.TgZ(0,"button",37),e.NdJ("click",function(){return e.CHM(n),e.oxw().onActionbuttonDeleteRow()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&o&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"ACTION.DELETE")))}function ve(o,r){1&o&&(e.TgZ(0,"mat-header-cell",38),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"TITLE.PICTURE")," "))}function we(o,r){if(1&o&&(e._UZ(0,"img",40),e.ALo(1,"cmsthumbnail")),2&o){const n=e.oxw().$implicit;e.s9C("src",e.lcZ(1,1,n.linkMainImageIdSrc),e.LSH)}}function qe(o,r){if(1&o&&(e.TgZ(0,"mat-cell"),e.YNc(1,we,2,3,"img",39),e.qZA()),2&o){const n=r.$implicit;e.xp6(1),e.Q6J("ngIf",(null==n||null==n.linkMainImageIdSrc?null:n.linkMainImageIdSrc.length)>0)}}function Le(o,r){if(1&o&&(e.TgZ(0,"mat-header-cell",38),e._uU(1),e.qZA()),2&o){const n=e.oxw();e.xp6(1),e.hij(" ",null==n.fieldsInfo.Id?null:n.fieldsInfo.Id.fieldTitle," ")}}function Ne(o,r){if(1&o&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&o){const n=r.$implicit;e.xp6(1),e.hij(" ",n.id," ")}}function ke(o,r){if(1&o&&(e.TgZ(0,"mat-header-cell",38),e._uU(1),e.qZA()),2&o){const n=e.oxw();e.xp6(1),e.hij(" ",null==n.fieldsInfo.RecordStatus?null:n.fieldsInfo.RecordStatus.fieldTitle," ")}}const Je=function(o){return{display:o}};function Ue(o,r){if(1&o&&(e.TgZ(0,"mat-cell"),e._UZ(1,"i",41),e.ALo(2,"statusClass"),e._UZ(3,"select",42),e.qZA()),2&o){const n=r.$implicit,t=e.oxw();e.xp6(1),e.Q6J("ngClass",e.lcZ(2,4,n.recordStatus)),e.xp6(2),e.Q6J("contentService",t.contentService)("row",n)("ngStyle",e.VKq(6,Je,n.id===t.tableRowSelected.id?"":"none"))}}function Oe(o,r){if(1&o&&(e.TgZ(0,"mat-header-cell",38),e._uU(1),e.qZA()),2&o){const n=e.oxw();e.xp6(1),e.hij(" ",null==n.fieldsInfo.Title?null:n.fieldsInfo.Title.fieldTitle," ")}}function Fe(o,r){if(1&o&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&o){const n=r.$implicit;e.xp6(1),e.hij(" ",n.title," ")}}function De(o,r){if(1&o&&(e.TgZ(0,"mat-header-cell",38),e._uU(1),e.qZA()),2&o){const n=e.oxw();e.xp6(1),e.hij(" ",null==n.fieldsInfo.Symbol?null:n.fieldsInfo.Symbol.fieldTitle," ")}}function Qe(o,r){if(1&o&&(e.TgZ(0,"mat-cell")(1,"div",43),e._uU(2),e.qZA()()),2&o){const n=r.$implicit;e.xp6(2),e.AsE(" ",n.symbol," / ",n.masterCurrency," ")}}function Ye(o,r){if(1&o&&(e.TgZ(0,"mat-header-cell",38),e._uU(1),e.qZA()),2&o){const n=e.oxw();e.xp6(1),e.hij(" ",null==n.fieldsInfo.ExchangeBuyRatio?null:n.fieldsInfo.ExchangeBuyRatio.fieldTitle," ")}}function Ge(o,r){if(1&o&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"number"),e.qZA()),2&o){const n=r.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,n.exchangeBuyRatio)," ")}}function Be(o,r){if(1&o&&(e.TgZ(0,"mat-header-cell",38),e._uU(1),e.qZA()),2&o){const n=e.oxw();e.xp6(1),e.hij(" ",null==n.fieldsInfo.ExchangeSaleRatio?null:n.fieldsInfo.ExchangeSaleRatio.fieldTitle," ")}}function He(o,r){if(1&o&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"number"),e.qZA()),2&o){const n=r.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,n.exchangeSaleRatio)," ")}}function je(o,r){if(1&o&&(e.TgZ(0,"mat-header-cell",38),e._uU(1),e.qZA()),2&o){const n=e.oxw();e.xp6(1),e.hij(" ",null==n.fieldsInfo.UpdatedDate?null:n.fieldsInfo.UpdatedDate.fieldTitle," ")}}function Pe(o,r){if(1&o&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&o){const n=r.$implicit,t=e.oxw();e.xp6(1),e.hij(" ",t.publicHelper.LocaleDate(n.updatedDate)," ")}}function $e(o,r){1&o&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"TITLE.OPTION")," "))}function Ve(o,r){if(1&o){const n=e.EpF();e.TgZ(0,"button",48),e.NdJ("click",function(){e.CHM(n);const i=e.oxw().$implicit;return e.oxw().onActionbuttonEditRow(i)}),e.TgZ(1,"mat-icon"),e._uU(2,"mode_edit"),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA()()}2&o&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"ACTION.EDIT")))}function ze(o,r){if(1&o){const n=e.EpF();e.TgZ(0,"button",48),e.NdJ("click",function(){e.CHM(n);const i=e.oxw().$implicit;return e.oxw().onActionbuttonDeleteRow(i)}),e.TgZ(1,"mat-icon"),e._uU(2,"delete_forever"),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA()()}2&o&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"ACTION.DELETE")))}function Ke(o,r){if(1&o){const n=e.EpF();e.TgZ(0,"button",48),e.NdJ("click",function(){e.CHM(n);const i=e.oxw().$implicit;return e.oxw().onActionbuttonLog(i)}),e.TgZ(1,"mat-icon"),e._uU(2,"article"),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA()()}2&o&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"ACTION.LOG")))}function We(o,r){if(1&o&&(e.TgZ(0,"mat-cell",44)(1,"button",45)(2,"mat-icon"),e._uU(3,"more_vert"),e.qZA()(),e.TgZ(4,"mat-menu",null,46),e.YNc(6,Ve,6,3,"button",47),e.YNc(7,ze,6,3,"button",47),e.YNc(8,Ke,6,3,"button",47),e.qZA()()),2&o){const n=e.MAs(5),t=e.oxw();e.xp6(1),e.Q6J("matMenuTriggerFor",n),e.xp6(5),e.Q6J("ngIf",t.dataModelResult.access.accessEditRow),e.xp6(1),e.Q6J("ngIf",t.dataModelResult.access.accessDeleteRow),e.xp6(1),e.Q6J("ngIf",t.dataModelResult.access.accessDeleteRow)}}function Xe(o,r){1&o&&e._UZ(0,"mat-header-row")}const et=function(o){return{background:o}};function tt(o,r){if(1&o){const n=e.EpF();e.TgZ(0,"mat-row",49),e.NdJ("click",function(){const a=e.CHM(n).$implicit;return e.oxw().onActionTableRowSelect(a)}),e.qZA()}if(2&o){const n=r.$implicit,t=e.oxw();e.Q6J("ngStyle",e.VKq(1,et,n.id===t.tableRowSelected.id?"#d3d3da":""))}}const nt=function(){return[5,10,20,100]},ot=[{path:"",children:[{path:"",component:(()=>{class o{constructor(n,t,i,a,s,u,p,_,st){this.contentService=n,this.publicHelper=t,this.cmsToastrService=i,this.cmsConfirmationDialogService=a,this.router=s,this.tokenHelper=u,this.cdr=p,this.translate=_,this.dialog=st,this.flag=!1,this.tableContentSelected=[],this.filteModelContent=new c.Hay,this.dataModelResult=new c.y$4,this.optionsSearch=new k.dj,this.optionsStatist=new U.TV,this.optionsExport=new J.zR,this.tokenInfo=new c.OdC,this.loading=new S.O,this.tableRowsSelected=[],this.tableRowSelected=new c.CWo,this.tableSource=new m.by,this.fieldsInfo=new Map,this.tabledisplayedColumns=["LinkMainImageIdSrc","Id","RecordStatus","Title","Symbol","ExchangeBuyRatio","ExchangeSaleRatio","UpdatedDate","Action"],this.loading.cdr=this.cdr,this.loading.message=this.translate.instant("MESSAGE.Receiving_information"),this.optionsSearch.parentMethods={onSubmit:b=>this.onSubmitOptionsSearch(b)},this.optionsExport.parentMethods={onSubmit:b=>this.onSubmitOptionExport(b)},this.filteModelContent.sortColumn="Id",this.filteModelContent.sortType=c.oCf.Descending}ngOnInit(){this.filteModelContent.sortColumn="Title",this.tokenHelper.getCurrentToken().then(n=>{this.tokenInfo=n,this.DataGetAll()}),this.cmsApiStoreSubscribe=this.tokenHelper.getCurrentTokenOnChange().subscribe(n=>{this.tokenInfo=n,this.DataGetAll()})}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}DataGetAll(){this.tableRowsSelected=[],this.tableRowSelected=new c.CWo;const n=this.constructor.name+"main";this.loading.Start(n,this.translate.instant("MESSAGE.get_information_list")),this.filteModelContent.accessLoad=!0;const t=JSON.parse(JSON.stringify(this.filteModelContent));this.contentService.ServiceGetAllEditor(t).subscribe({next:i=>{i.isSuccess?(this.fieldsInfo=this.publicHelper.fieldInfoConvertor(i.access),this.dataModelResult=i,this.tableSource.data=i.listItems,this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(i.access)):this.cmsToastrService.typeErrorMessage(i.errorMessage),this.loading.Stop(n)},error:i=>{this.cmsToastrService.typeError(i),this.loading.Stop(n)}})}onTableSortData(n){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===n.active?"asc"===this.tableSource.sort.start?(n.start="desc",this.filteModelContent.sortColumn=n.active,this.filteModelContent.sortType=c.oCf.Descending):"desc"===this.tableSource.sort.start?(this.filteModelContent.sortColumn="",this.filteModelContent.sortType=c.oCf.Ascending):n.start="desc":(this.filteModelContent.sortColumn=n.active,this.filteModelContent.sortType=c.oCf.Ascending),this.tableSource.sort=n,this.filteModelContent.currentPageNumber=0,this.DataGetAll()}onTablePageingData(n){this.filteModelContent.currentPageNumber=n.pageIndex+1,this.filteModelContent.rowPerPage=n.pageSize,this.DataGetAll()}onActionbuttonNewRow(){null!=this.dataModelResult&&null!=this.dataModelResult.access&&this.dataModelResult.access.accessAddRow?this.dialog.open(fe,{height:"90%",data:{}}).afterClosed().subscribe(t=>{t&&t.dialogChangedDate&&this.DataGetAll()}):this.cmsToastrService.typeErrorAccessAdd()}onActionbuttonEditRow(n=this.tableRowSelected){n&&n.id&&0!==n.id?(this.tableRowSelected=n,null!=this.dataModelResult&&null!=this.dataModelResult.access&&this.dataModelResult.access.accessEditRow?this.dialog.open(W,{height:"90%",data:{id:this.tableRowSelected.id}}).afterClosed().subscribe(i=>{i&&i.dialogChangedDate&&this.DataGetAll()}):this.cmsToastrService.typeErrorAccessEdit()):this.cmsToastrService.typeErrorSelectedRow()}onActionbuttonLog(n=this.tableRowSelected){n&&n.id&&0!==n.id?(this.tableRowSelected=n,this.router.navigate(["/corelog/currency/",n.id])):this.cmsToastrService.typeErrorSelectedRow()}onActionbuttonDeleteRow(n=this.tableRowSelected){if(!n||!n.id||0===n.id){const a=this.translate.instant("MESSAGE.no_row_selected_to_delete");return void this.cmsToastrService.typeErrorSelected(a)}if(this.tableRowSelected=n,null==this.dataModelResult||null==this.dataModelResult.access||!this.dataModelResult.access.accessDeleteRow)return void this.cmsToastrService.typeErrorAccessDelete();const t=this.translate.instant("MESSAGE.Please_Confirm"),i=this.translate.instant("MESSAGE.Do_you_want_to_delete_this_content")+"?<br> ( "+this.tableRowSelected.title+" ) ";this.cmsConfirmationDialogService.confirm(t,i).then(a=>{if(a){const s=this.constructor.name+"main";this.loading.Start(s),this.contentService.ServiceDelete(this.tableRowSelected.id).subscribe({next:u=>{u.isSuccess?(this.cmsToastrService.typeSuccessRemove(),this.DataGetAll()):this.cmsToastrService.typeErrorRemove(),this.loading.Stop(s)},error:u=>{this.cmsToastrService.typeError(u),this.loading.Stop(s)}})}}).catch(()=>{})}onActionbuttonUserList(n=this.tableRowSelected){if(n&&n.id&&0!==n.id)this.tableRowSelected=n,this.router.navigate(["/core/site/userlist/LinkCurrencyId/",this.tableRowSelected.id]);else{const t=this.translate.instant("MESSAGE.no_row_selected_to_display");this.cmsToastrService.typeErrorSelected(t)}}onActionbuttonStatist(){if(this.optionsStatist.data.show=!this.optionsStatist.data.show,!this.optionsStatist.data.show)return;const n=new Map;n.set("Active",0),n.set("All",0),this.contentService.ServiceGetCount(this.filteModelContent).subscribe({next:a=>{a.isSuccess?(n.set("All",a.totalRowCount),this.optionsStatist.childMethods.setStatistValue(n)):this.cmsToastrService.typeErrorMessage(a.errorMessage)},error:a=>{this.cmsToastrService.typeError(a)}});const t=JSON.parse(JSON.stringify(this.filteModelContent)),i=new c.AO3;i.propertyName="RecordStatus",i.value=c.FVU.Available,t.filters.push(i),this.contentService.ServiceGetCount(t).subscribe({next:a=>{a.isSuccess?(n.set("Active",a.totalRowCount),this.optionsStatist.childMethods.setStatistValue(n)):this.cmsToastrService.typeErrorMessage(a.errorMessage)},error:a=>{this.cmsToastrService.typeError(a)}})}onActionbuttonExport(){this.optionsExport.data.show=!this.optionsExport.data.show,this.optionsExport.childMethods.setExportFilterModel(this.filteModelContent)}onSubmitOptionExport(n){const t=new Map;t.set("Download","loading ... "),this.contentService.ServiceExportFile(n).subscribe({next:i=>{i.isSuccess?(t.set("Download",i.linkFile),this.optionsExport.childMethods.setExportLinkFile(t)):this.cmsToastrService.typeErrorMessage(i.errorMessage)},error:i=>{this.cmsToastrService.typeError(i)}})}onActionbuttonReload(){this.DataGetAll()}onSubmitOptionsSearch(n){this.filteModelContent.filters=n,this.DataGetAll()}onActionTableRowSelect(n){this.tableRowSelected=n}}return o.\u0275fac=function(n){return new(n||o)(e.Y36(c._GB),e.Y36(A.i),e.Y36(M.e),e.Y36(_e.s),e.Y36(T.F0),e.Y36(he.v),e.Y36(e.sBO),e.Y36(h.sK),e.Y36(C.uw))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-core-currency-list"]],decls:63,vars:29,consts:[[3,"optionLoading","optionTreeDisplay"],["cms-tree",""],["cms-header",""],["cms-action",""],["type","button","class","btn btn-outline-primary","id","openModalButton","data-toggle","modal","data-target","#categoryModal",3,"click",4,"ngIf"],["type","button","class","btn btn-outline-warning","data-toggle","modal","data-target","#categoryModal",3,"click",4,"ngIf"],["type","button","class","btn btn-outline-danger",3,"click",4,"ngIf"],[1,"btn","btn-outline-info","btn-sm","BTN"],[3,"ngModel","ngModelChange"],[3,"click"],["type","button",1,"btn","btn-outline-secondary","BTN",3,"click"],[2,"font-size","20px","margin","-1px",3,"title"],["cms-action-area",""],[3,"options","optionsChange"],["cms-body",""],["matSort","",3,"dataSource","matSortChange"],["tableSort","matSort"],["matColumnDef","LinkMainImageIdSrc"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","Id"],["matColumnDef","RecordStatus"],["matColumnDef","Title"],["matColumnDef","Symbol"],["matColumnDef","ExchangeBuyRatio"],["matColumnDef","ExchangeSaleRatio"],["matColumnDef","UpdatedDate"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class"," Action",4,"matCellDef"],[4,"matHeaderRowDef"],[3,"ngStyle","click",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"length","pageIndex","pageSize","pageSizeOptions","page"],["paginator",""],["type","button","id","openModalButton","data-toggle","modal","data-target","#categoryModal",1,"btn","btn-outline-primary",3,"click"],["type","button","data-toggle","modal","data-target","#categoryModal",1,"btn","btn-outline-warning",3,"click"],["type","button",1,"btn","btn-outline-danger",3,"click"],["mat-sort-header",""],["style","vertical-align:middle;","class","ntk-hover-zoom","aria-hidden","","height","40","width","40",3,"src",4,"ngIf"],["aria-hidden","","height","40","width","40",1,"ntk-hover-zoom",2,"vertical-align","middle",3,"src"],[3,"ngClass"],["matNativeControl","","cmsRecordStatusSelfSave","",3,"contentService","row","ngStyle"],[2,"direction","ltr"],[1,"Action"],["mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],["actionMenu","matMenu"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","",3,"click"],[3,"ngStyle","click"]],template:function(n,t){if(1&n){const i=e.EpF();e.TgZ(0,"app-cms-html-list",0),e.ynx(1,1),e._uU(2," -------------------------------------- "),e.BQk(),e.GkF(3,2),e.ynx(4,3),e.YNc(5,Ee,3,3,"button",4),e.YNc(6,be,3,3,"button",5),e.YNc(7,Re,3,3,"button",6),e.TgZ(8,"a",7)(9,"mat-slide-toggle",8),e.NdJ("ngModelChange",function(s){return t.optionsSearch.data.show=s}),e._uU(10),e.ALo(11,"translate"),e.qZA()(),e.TgZ(12,"a",7)(13,"mat-slide-toggle",9),e.NdJ("click",function(){return t.onActionbuttonStatist()}),e._uU(14),e.ALo(15,"translate"),e.qZA()(),e.TgZ(16,"a",7)(17,"mat-slide-toggle",9),e.NdJ("click",function(){return t.onActionbuttonExport()}),e._uU(18),e.ALo(19,"translate"),e.qZA()(),e.TgZ(20,"button",10),e.NdJ("click",function(){return t.onActionbuttonReload()}),e.TgZ(21,"mat-icon",11),e.ALo(22,"translate"),e._uU(23,"refresh"),e.qZA()(),e.BQk(),e.ynx(24,12),e.TgZ(25,"app-cms-search-list",13),e.NdJ("optionsChange",function(s){return t.optionsSearch=s}),e.qZA(),e.TgZ(26,"app-cms-export-list",13),e.NdJ("optionsChange",function(s){return t.optionsExport=s}),e.qZA(),e.TgZ(27,"app-cms-statist-list",13),e.NdJ("optionsChange",function(s){return t.optionsStatist=s}),e.qZA(),e.BQk(),e.ynx(28,14),e.TgZ(29,"mat-table",15,16),e.NdJ("matSortChange",function(){e.CHM(i);const s=e.MAs(30);return t.onTableSortData(s)}),e.ynx(31,17),e.YNc(32,ve,3,3,"mat-header-cell",18),e.YNc(33,qe,2,1,"mat-cell",19),e.BQk(),e.ynx(34,20),e.YNc(35,Le,2,1,"mat-header-cell",18),e.YNc(36,Ne,2,1,"mat-cell",19),e.BQk(),e.ynx(37,21),e.YNc(38,ke,2,1,"mat-header-cell",18),e.YNc(39,Ue,4,8,"mat-cell",19),e.BQk(),e.ynx(40,22),e.YNc(41,Oe,2,1,"mat-header-cell",18),e.YNc(42,Fe,2,1,"mat-cell",19),e.BQk(),e.ynx(43,23),e.YNc(44,De,2,1,"mat-header-cell",18),e.YNc(45,Qe,3,2,"mat-cell",19),e.BQk(),e.ynx(46,24),e.YNc(47,Ye,2,1,"mat-header-cell",18),e.YNc(48,Ge,3,3,"mat-cell",19),e.BQk(),e.ynx(49,25),e.YNc(50,Be,2,1,"mat-header-cell",18),e.YNc(51,He,3,3,"mat-cell",19),e.BQk(),e.ynx(52,26),e.YNc(53,je,2,1,"mat-header-cell",18),e.YNc(54,Pe,2,1,"mat-cell",19),e.BQk(),e.ynx(55,27),e.YNc(56,$e,3,3,"mat-header-cell",28),e.YNc(57,We,9,4,"mat-cell",29),e.BQk(),e.YNc(58,Xe,1,0,"mat-header-row",30),e.YNc(59,tt,1,3,"mat-row",31),e.qZA(),e.BQk(),e.ynx(60,32),e.TgZ(61,"mat-paginator",33,34),e.NdJ("page",function(s){return t.onTablePageingData(s)}),e.qZA(),e.BQk(),e.qZA()}2&n&&(e.Q6J("optionLoading",t.loading)("optionTreeDisplay",!1),e.xp6(5),e.Q6J("ngIf",t.dataModelResult.access.accessAddRow),e.xp6(1),e.Q6J("ngIf",t.dataModelResult.access.accessEditRow&&t.tableRowSelected.id>0),e.xp6(1),e.Q6J("ngIf",t.dataModelResult.access.accessDeleteRow&&t.tableRowSelected.id>0),e.xp6(2),e.Q6J("ngModel",t.optionsSearch.data.show),e.xp6(1),e.Oqu(e.lcZ(11,20,"ACTION.SEARCH")),e.xp6(4),e.hij("",e.lcZ(15,22,"ACTION.STATIST")," "),e.xp6(4),e.hij("",e.lcZ(19,24,"ACTION.EXPORTFILE")," "),e.xp6(3),e.s9C("title",e.lcZ(22,26,"ACTION.RELOAD")),e.xp6(4),e.Q6J("options",t.optionsSearch),e.xp6(1),e.Q6J("options",t.optionsExport),e.xp6(1),e.Q6J("options",t.optionsStatist),e.xp6(2),e.Q6J("dataSource",t.tableSource),e.xp6(29),e.Q6J("matHeaderRowDef",t.tabledisplayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",t.tabledisplayedColumns),e.xp6(2),e.Q6J("length",t.dataModelResult.totalRowCount)("pageIndex",t.dataModelResult.currentPageNumber-1)("pageSize",t.dataModelResult.rowPerPage)("pageSizeOptions",e.DdM(28,nt)))},directives:[Ce.Z,f.O5,Te.Rr,d.JJ,d.On,Z.Hw,Se.y,Me.Z,Ae.q,m.BZ,N.YE,m.w1,m.fO,m.ge,N.nU,m.Dz,m.ev,f.mk,y.Nt,ye.G,f.PC,Ze.lW,E.p6,E.VK,E.OP,m.as,m.XQ,m.nj,m.Gk,Ie.NW],pipes:[h.X$,x.v,xe.b,f.JJ],encapsulation:2}),o})()}]}];let it=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[T.Bz.forChild(ot)],T.Bz]}),o})();var rt=l(2489),at=l(8601);let lt=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[c._GB,c.EAm],imports:[[f.ez,d.u5,it,d.UX.withConfig({warnOnNgModelWithFormControl:"never"}),rt.m.forRoot(),at.UM,I.wK]]}),o})()}}]);