"use strict";(self.webpackChunkntk_cms_web=self.webpackChunkntk_cms_web||[]).push([[1460],{1460:(G,u,i)=>{i.r(u),i.d(u,{SmsActionModule:()=>j});var p=i(1048),m=i(7076),l=i(7977),f=i(656),M=i(7969),t=i(9724),A=i(2607),S=i(3029),g=i(4817),r=i(1659),_=i(5738),C=i(8024),d=i(5691),v=i(8904),h=i(4848),Z=i(1582),x=i(8161),T=i(2370);const I=["vform"];function F(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"app-sms-api-number-selector",28),t.NdJ("optionChange",function(s){return t.CHM(e),t.oxw(2).onActionSelectApiNumber(s)}),t.qZA()}if(2&n){const e=t.oxw(2);t.Q6J("optionLinkApiPathId",e.dataModel.LinkApiPathId)("optionPlaceholder"," \u0634\u0645\u0627\u0631\u0647 \u0641\u0631\u0633\u062a\u0646\u062f\u0647")}}function b(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"mat-icon",29),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).dataModel.ToNumber=""}),t._uU(1,"close"),t.qZA()}}function P(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"mat-icon",29),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).dataModel.Message=""}),t._uU(1,"close"),t.qZA()}}function J(n,a){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," \u0645\u062a\u0646 \u067e\u06cc\u0627\u0645 "),t.TgZ(2,"strong"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.qZA()),2&n&&(t.xp6(3),t.Oqu(t.lcZ(4,1,"MESSAGE.required")))}function N(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"app-sms-apipath-selector",13),t.NdJ("optionChange",function(s){return t.CHM(e),t.oxw().onActionSelectPrivateSiteConfig(s)}),t.qZA(),t.YNc(2,F,1,2,"app-sms-api-number-selector",14),t.TgZ(3,"mat-form-field",15),t.TgZ(4,"mat-label"),t._uU(5,"\u0634\u0645\u0627\u0631\u0647 \u06af\u06cc\u0631\u0646\u062f\u0647"),t.qZA(),t.TgZ(6,"input",16,17),t.NdJ("ngModelChange",function(s){return t.CHM(e),t.oxw().dataModel.ToNumber=s}),t.qZA(),t.YNc(8,b,2,0,"mat-icon",18),t.TgZ(9,"mat-icon",19),t._uU(10,"mode_edit"),t.qZA(),t.TgZ(11,"mat-hint",20),t.TgZ(12,"mat-icon",21),t._uU(13,"info"),t.qZA(),t.TgZ(14,"strong",22),t._uU(15,"\u0634\u0645\u0627\u0631\u0647 \u06af\u06cc\u0631\u0646\u062f\u0647 \u067e\u06cc\u0627\u0645 \u0631\u0627 \u0645\u06cc \u062a\u0648\u0627\u0646\u06cc\u062f \u0628\u0627 \u06a9\u0627\u0645\u0627 \u0627\u0632 \u0647\u0645 \u062c\u062f\u0627 \u06a9\u0646\u06cc\u062f"),t.qZA(),t.qZA(),t.TgZ(16,"mat-hint",23),t._uU(17),t.qZA(),t.qZA(),t.TgZ(18,"mat-form-field",15),t.TgZ(19,"mat-label"),t._uU(20,"\u0645\u062a\u0646 \u067e\u06cc\u0627\u0645"),t.qZA(),t.TgZ(21,"textarea",24,25),t.NdJ("ngModelChange",function(s){return t.CHM(e),t.oxw().dataModel.Message=s}),t.qZA(),t.YNc(23,P,2,0,"mat-icon",18),t.TgZ(24,"mat-icon",19),t._uU(25,"mode_edit"),t.qZA(),t.TgZ(26,"mat-hint",23),t._uU(27),t.qZA(),t.YNc(28,J,5,3,"mat-error",5),t.qZA(),t.TgZ(29,"div",15),t.TgZ(30,"mat-slide-toggle",26),t.NdJ("ngModelChange",function(s){return t.CHM(e),t.oxw().dataModel.IsFlash=s}),t._uU(31," \u0627\u0631\u0633\u0627\u0644 \u0628\u0647 \u0635\u0648\u0631\u062a \u0641\u0644\u0634 "),t.qZA(),t.qZA(),t.TgZ(32,"div",15),t.TgZ(33,"mat-slide-toggle",27),t.NdJ("ngModelChange",function(s){return t.CHM(e),t.oxw().dataModel.SendByQeue=s}),t._uU(34," \u0627\u0631\u0633\u0627\u0644 \u062f\u0631 \u0635\u0641 "),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=t.MAs(7),o=t.MAs(22),s=t.oxw();t.xp6(1),t.Q6J("optionSelectForce",s.dataModel.LinkApiPathId)("optionPlaceholder"," \u0645\u0633\u06cc\u0631"),t.xp6(1),t.Q6J("ngIf",(null==s.dataModel.LinkApiPathId?null:s.dataModel.LinkApiPathId.length)>0),t.xp6(4),t.Q6J("ngModel",s.dataModel.ToNumber),t.xp6(2),t.Q6J("ngIf",s.dataModel.ToNumber),t.xp6(9),t.hij("",e.value.length," / 50"),t.xp6(4),t.Q6J("ngModel",s.dataModel.Message),t.xp6(2),t.Q6J("ngIf",s.dataModel.Message),t.xp6(4),t.hij("",o.value.length," / 500"),t.xp6(1),t.Q6J("ngIf",null==o.errors?null:o.errors.required),t.xp6(2),t.Q6J("ngModel",s.dataModel.IsFlash),t.xp6(3),t.Q6J("ngModel",s.dataModel.SendByQeue)}}function y(n,a){if(1&n&&t._UZ(0,"app-cms-json-list",30),2&n){const e=t.oxw();t.Q6J("dataModel",e.dataModelResult.Item)("optionMethod",1)}}function U(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",34),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).onFormSubmit()}),t._UZ(1,"i",35),t._uU(2," \u0627\u0631\u0633\u0627\u0644 \u067e\u06cc\u0627\u0645 "),t.qZA()}if(2&n){t.oxw(2);const e=t.MAs(1);t.Q6J("disabled",!e.valid)}}function E(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",8),t.TgZ(1,"button",31),t.NdJ("click",function(){return t.CHM(e),t.oxw().onFormCancel()}),t._UZ(2,"i",32),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.YNc(5,U,3,1,"button",33),t.qZA()}if(2&n){const e=t.oxw();t.xp6(3),t.hij(" ",t.lcZ(4,2,"ACTION.CANCEL")," "),t.xp6(2),t.Q6J("ngIf",!e.loading.display)}}const L=[{path:"",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-sms-action"]],decls:1,vars:0,template:function(e,o){1&e&&t._UZ(0,"router-outlet")},directives:[m.lC],encapsulation:2}),n})(),children:[{path:"send-message",component:(()=>{class n{constructor(e,o,s,c,R,B){this.coreEnumService=e,this.smsMainApiPathService=o,this.cmsToastrService=s,this.cdr=c,this.publicHelper=R,this.translate=B,this.requestLinkApiPathId="",this.loading=new f.O,this.dataModelParentSelected=new l.lWT,this.dataModel=new l.sh1,this.dataModelResult=new l.y$4,this.formInfo=new l.LEF,this.loading.cdr=this.cdr}ngOnInit(){var e;(null===(e=this.requestLinkApiPathId)||void 0===e?void 0:e.length)>0&&(this.dataModel.LinkApiPathId=this.requestLinkApiPathId)}onActionSelectPrivateSiteConfig(e){this.dataModel.LinkApiPathId=this.requestLinkApiPathId,this.dataModelParentSelected=e,e&&e.Id.length>0&&(this.dataModel.LinkApiPathId=e.Id)}onActionSelectApiNumber(e){e&&e.Id.length>0&&(this.dataModel.LinkFromNumber=e.Id)}onFormSubmit(){if(!this.formGroup.valid)return;(!this.dataModel.LinkApiPathId||this.dataModel.LinkApiPathId.length<=0)&&this.cmsToastrService.typeErrorFormInvalid(),this.formInfo.FormSubmitAllow=!1;const e=this.constructor.name+"main";this.loading.Start(e),this.smsMainApiPathService.ServiceSendMessage(this.dataModel).pipe((0,M.U)(o=>{this.formInfo.FormSubmitAllow=!0,this.dataModelResult=o,o.IsSuccess?(this.formInfo.FormAlert="\u062f\u0631\u062e\u0648\u0627\u0633\u062a \u0627\u0631\u0633\u0627\u0644 \u0628\u0627 \u0645\u0648\u0641\u0642\u06cc\u062a \u062b\u0628\u062a \u0634\u062f",this.cmsToastrService.typeSuccessMessage(this.translate.instant("MESSAGE.Send_request_was_successfully_registered"))):(this.formInfo.FormAlert="\u0628\u0631\u0631\u0648\u0632 \u062e\u0637\u0627",this.formInfo.FormError=o.ErrorMessage,this.cmsToastrService.typeErrorMessage(o.ErrorMessage)),this.loading.Stop(e)},o=>{this.formInfo.FormSubmitAllow=!0,this.cmsToastrService.typeError(o),this.loading.Stop(e)})).toPromise()}onFormCancel(){}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(l.FLW),t.Y36(l.sZP),t.Y36(A.e),t.Y36(t.sBO),t.Y36(S.i),t.Y36(g.sK))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-sms-action-send-message"]],viewQuery:function(e,o){if(1&e&&t.Gf(I,5),2&e){let s;t.iGM(s=t.CRH())&&(o.formGroup=s.first)}},decls:16,vars:7,consts:[[3,"ngSubmit"],["vform","ngForm"],[1,"ntk-cms-html-card-header"],[1,"ntk-cms-html-card-body"],[3,"options"],[4,"ngIf"],[3,"dataModel","optionMethod",4,"ngIf"],[1,"ntk-cms-html-card-message"],[1,"form-actions"],[1,"form-text","text-muted"],[1,"form-text","text-muted","danger"],[1,"ntk-cms-html-card-footer"],["class","form-actions",4,"ngIf"],[3,"optionSelectForce","optionPlaceholder","optionChange"],[3,"optionSelectForce","optionLinkApiPathId","optionPlaceholder","optionChange",4,"ngIf"],[1,"ntk-full-width"],["matInput","","name","dataModel.ToNumber","type","text","placeholder","0912","minlength","0","maxlength","50",3,"ngModel","ngModelChange"],["ToNumber",""],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matSuffix",""],["align","start"],["matSuffix","",1,"info-field-icon"],[1,"info-field-text"],["align","end"],["matInput","","name","dataModel.Message","type","text","placeholder","...","minlength","1","maxlength","500","rows","5",3,"ngModel","ngModelChange"],["Message",""],["name","dataModel.IsFlash",3,"ngModel","ngModelChange"],["name","dataModel.SendByQeue",3,"ngModel","ngModelChange"],[3,"optionSelectForce","optionLinkApiPathId","optionPlaceholder","optionChange"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[3,"dataModel","optionMethod"],["type","button",1,"btn","btn-light",3,"click"],[1,"ft-x"],["type","submit","class","btn btn-success",3,"disabled","click",4,"ngIf"],["type","submit",1,"btn","btn-success",3,"disabled","click"],[1,"fa","fa-check-square-o"]],template:function(e,o){1&e&&(t.TgZ(0,"form",0,1),t.NdJ("ngSubmit",function(){return o.onFormSubmit()}),t.TgZ(2,"div",2),t._uU(3),t.qZA(),t.TgZ(4,"div",3),t._UZ(5,"app-progress-spinner",4),t.YNc(6,N,35,12,"div",5),t.YNc(7,y,1,2,"app-cms-json-list",6),t.qZA(),t.TgZ(8,"div",7),t.TgZ(9,"div",8),t.TgZ(10,"small",9),t._uU(11),t.qZA(),t.TgZ(12,"small",10),t._uU(13),t.qZA(),t.qZA(),t.qZA(),t.TgZ(14,"div",11),t.YNc(15,E,6,4,"div",12),t.qZA(),t.qZA()),2&e&&(t.xp6(3),t.hij(" ",o.formInfo.FormTitle," "),t.xp6(2),t.Q6J("options",o.loading),t.xp6(1),t.Q6J("ngIf",!o.loading.display),t.xp6(1),t.Q6J("ngIf",null==o.dataModelResult?null:o.dataModelResult.Item),t.xp6(4),t.hij("",o.formInfo.FormAlert," "),t.xp6(2),t.hij("",o.formInfo.FormError," "),t.xp6(2),t.Q6J("ngIf",o.formInfo.FormSubmitAllow))},directives:[r._Y,r.JL,r.F,_.O,p.O5,C.s,d.KE,d.hX,v.Nt,r.Fj,r.wO,r.nD,r.JJ,r.On,h.Hw,d.R9,d.bx,Z.Rr,x.y,d.TO,T.v],pipes:[g.X$],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:yellow}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:black}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}"]}),n})()}]}];let k=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[m.Bz.forChild(L)],m.Bz]}),n})();var Q=i(7651),w=i(8601),q=i(9703),O=i(6720),Y=i(3914),H=i(5103);let j=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[l.EAm,l.FLW,l.Z8z,Y.s,l.dF2,l.sZP],imports:[[p.ez,k,r.u5,r.UX.withConfig({warnOnNgModelWithFormControl:"never"}),Q.m.forRoot(),w.UM,q.vO,h.Ps,d.lN,O.T5,H.r]]}),n})()}}]);