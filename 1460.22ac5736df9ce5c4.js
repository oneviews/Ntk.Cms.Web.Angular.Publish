"use strict";(self.webpackChunkntk_cms_web=self.webpackChunkntk_cms_web||[]).push([[1460],{1460:(q,u,s)=>{s.r(u),s.d(u,{SmsActionModule:()=>Y});var p=s(1048),m=s(7076),l=s(7977),g=s(656),t=s(9724),_=s(2607),M=s(3029),f=s(4817),c=s(1659),A=s(5738),S=s(8024),C=s(8161),d=s(5691),v=s(8904),h=s(4848),x=s(1582),Z=s(2370);const T=["vform"];function I(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"app-sms-api-number-selector",28),t.NdJ("optionChange",function(i){return t.CHM(e),t.oxw(2).onActionSelectApiNumber(i)}),t.qZA()}if(2&n){const e=t.oxw(2);t.Q6J("loading",e.loading)("optionLinkApiPathId",e.dataModel.linkApiPathId)("optionPlaceholder"," \u0634\u0645\u0627\u0631\u0647 \u0641\u0631\u0633\u062a\u0646\u062f\u0647")}}function b(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"mat-icon",29),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).dataModel.message=""}),t._uU(1,"close"),t.qZA()}}function F(n,a){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," \u0645\u062a\u0646 \u067e\u06cc\u0627\u0645 "),t.TgZ(2,"strong"),t._uU(3),t.ALo(4,"translate"),t.qZA()()),2&n&&(t.xp6(3),t.Oqu(t.lcZ(4,1,"MESSAGE.required")))}function P(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"mat-icon",29),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).dataModel.toNumber=""}),t._uU(1,"close"),t.qZA()}}function y(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"app-sms-apipath-selector",13),t.NdJ("optionChange",function(i){return t.CHM(e),t.oxw().onActionSelectPrivateSiteConfig(i)}),t.qZA(),t.YNc(2,I,1,3,"app-sms-api-number-selector",14),t.TgZ(3,"mat-form-field",15)(4,"mat-label"),t._uU(5,"\u0645\u062a\u0646 \u067e\u06cc\u0627\u0645"),t.qZA(),t.TgZ(6,"textarea",16,17),t.NdJ("ngModelChange",function(i){return t.CHM(e),t.oxw().dataModel.message=i}),t.qZA(),t.YNc(8,b,2,0,"mat-icon",18),t.TgZ(9,"mat-icon",19),t._uU(10,"mode_edit"),t.qZA(),t.TgZ(11,"mat-hint",20),t._uU(12),t.qZA(),t.YNc(13,F,5,3,"mat-error",5),t.qZA(),t.TgZ(14,"mat-form-field",15)(15,"mat-label"),t._uU(16,"\u0634\u0645\u0627\u0631\u0647 \u06af\u06cc\u0631\u0646\u062f\u0647"),t.qZA(),t.TgZ(17,"textarea",21,22),t.NdJ("ngModelChange",function(i){return t.CHM(e),t.oxw().dataModel.toNumber=i}),t.qZA(),t.YNc(19,P,2,0,"mat-icon",18),t.TgZ(20,"mat-icon",19),t._uU(21,"mode_edit"),t.qZA(),t.TgZ(22,"mat-hint",23)(23,"mat-icon",24),t._uU(24,"info"),t.qZA(),t.TgZ(25,"strong",25),t._uU(26,"\u0634\u0645\u0627\u0631\u0647 \u06af\u06cc\u0631\u0646\u062f\u0647 \u067e\u06cc\u0627\u0645 \u0631\u0627 \u0645\u06cc \u062a\u0648\u0627\u0646\u06cc\u062f \u0628\u0627 \u06a9\u0627\u0645\u0627 \u0627\u0632 \u0647\u0645 \u062c\u062f\u0627 \u06a9\u0646\u06cc\u062f"),t.qZA()(),t.TgZ(27,"mat-hint",20),t._uU(28),t.qZA()(),t.TgZ(29,"div",15)(30,"mat-slide-toggle",26),t.NdJ("ngModelChange",function(i){return t.CHM(e),t.oxw().dataModel.isFlash=i}),t._uU(31," \u0627\u0631\u0633\u0627\u0644 \u0628\u0647 \u0635\u0648\u0631\u062a \u0641\u0644\u0634 "),t.qZA()(),t.TgZ(32,"div",15)(33,"mat-slide-toggle",27),t.NdJ("ngModelChange",function(i){return t.CHM(e),t.oxw().dataModel.sendByQeue=i}),t._uU(34," \u0627\u0631\u0633\u0627\u0644 \u062f\u0631 \u0635\u0641 "),t.qZA()()()}if(2&n){const e=t.MAs(7),o=t.MAs(18),i=t.oxw();t.xp6(1),t.Q6J("loading",i.loading)("optionSelectForce",i.dataModel.linkApiPathId)("optionPlaceholder"," \u0645\u0633\u06cc\u0631"),t.xp6(1),t.Q6J("ngIf",(null==i.dataModel.linkApiPathId?null:i.dataModel.linkApiPathId.length)>0),t.xp6(4),t.Q6J("ngModel",i.dataModel.message),t.xp6(2),t.Q6J("ngIf",i.dataModel.message),t.xp6(4),t.hij("",e.value.length," / 500"),t.xp6(1),t.Q6J("ngIf",null==e.errors?null:e.errors.required),t.xp6(4),t.Q6J("ngModel",i.dataModel.toNumber),t.xp6(2),t.Q6J("ngIf",i.dataModel.toNumber),t.xp6(9),t.hij("",o.value.length," / 50"),t.xp6(2),t.Q6J("ngModel",i.dataModel.isFlash),t.xp6(3),t.Q6J("ngModel",i.dataModel.sendByQeue)}}function J(n,a){if(1&n&&t._UZ(0,"app-cms-json-list",30),2&n){const e=t.oxw();t.Q6J("dataModel",e.dataModelResult.item)("optionMethod",1)}}function N(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",34),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).onFormSubmit()}),t._UZ(1,"i",35),t._uU(2," \u0627\u0631\u0633\u0627\u0644 \u067e\u06cc\u0627\u0645 "),t.qZA()}if(2&n){t.oxw(2);const e=t.MAs(1);t.Q6J("disabled",!e.valid)}}function E(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",8)(1,"button",31),t.NdJ("click",function(){return t.CHM(e),t.oxw().onFormCancel()}),t._UZ(2,"i",32),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.YNc(5,N,3,1,"button",33),t.qZA()}if(2&n){const e=t.oxw();t.xp6(3),t.hij(" ",t.lcZ(4,2,"ACTION.CANCEL")," "),t.xp6(2),t.Q6J("ngIf",!e.loading.display)}}const U=[{path:"",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-sms-action"]],decls:1,vars:0,template:function(e,o){1&e&&t._UZ(0,"router-outlet")},directives:[m.lC],encapsulation:2}),n})(),children:[{path:"send-message",component:(()=>{class n{constructor(e,o,i,r,H,j){this.coreEnumService=e,this.smsMainApiPathService=o,this.cmsToastrService=i,this.cdr=r,this.publicHelper=H,this.translate=j,this.requestLinkApiPathId="",this.loading=new g.O,this.loadingAction=new g.O,this.dataModelParentSelected=new l.lWT,this.dataModel=new l.sh1,this.dataModelResult=new l.y$4,this.formInfo=new l.LEF,this.loading.cdr=this.cdr,this.loading.message=this.translate.instant("MESSAGE.Receiving_information"),this.loadingAction.cdr=this.cdr}ngOnInit(){var e;(null===(e=this.requestLinkApiPathId)||void 0===e?void 0:e.length)>0&&(this.dataModel.linkApiPathId=this.requestLinkApiPathId)}onActionSelectPrivateSiteConfig(e){this.dataModel.linkApiPathId=this.requestLinkApiPathId,this.dataModelParentSelected=e,e&&e.id.length>0&&(this.dataModel.linkApiPathId=e.id)}onActionSelectApiNumber(e){e&&e.id.length>0&&(this.dataModel.linkFromNumber=e.id)}onFormSubmit(){if(!this.formGroup.valid)return;(!this.dataModel.linkApiPathId||this.dataModel.linkApiPathId.length<=0)&&this.cmsToastrService.typeErrorFormInvalid(),this.formInfo.formSubmitAllow=!1;const e=this.constructor.name+"main";this.loadingAction.Start(e),this.smsMainApiPathService.ServiceSendMessage(this.dataModel).subscribe({next:o=>{this.formInfo.formSubmitAllow=!0,this.dataModelResult=o,o.isSuccess?(this.formInfo.formAlert="\u062f\u0631\u062e\u0648\u0627\u0633\u062a \u0627\u0631\u0633\u0627\u0644 \u0628\u0627 \u0645\u0648\u0641\u0642\u06cc\u062a \u062b\u0628\u062a \u0634\u062f",this.cmsToastrService.typeSuccessMessage(this.translate.instant("MESSAGE.Send_request_was_successfully_registered"))):(this.formInfo.formAlert=this.translate.instant("ERRORMESSAGE.MESSAGE.typeError"),this.formInfo.formError=o.errorMessage,this.cmsToastrService.typeErrorMessage(o.errorMessage)),this.loadingAction.Stop(e)},error:o=>{this.formInfo.formSubmitAllow=!0,this.cmsToastrService.typeError(o),this.loadingAction.Stop(e)},complete:()=>{}})}onFormCancel(){}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(l.FLW),t.Y36(l.sZP),t.Y36(_.e),t.Y36(t.sBO),t.Y36(M.i),t.Y36(f.sK))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-sms-action-send-message"]],viewQuery:function(e,o){if(1&e&&t.Gf(T,5),2&e){let i;t.iGM(i=t.CRH())&&(o.formGroup=i.first)}},decls:17,vars:8,consts:[[3,"ngSubmit"],["vform","ngForm"],[1,"ntk-cms-html-card-header"],[1,"ntk-cms-html-card-body"],[3,"options"],[4,"ngIf"],[3,"dataModel","optionMethod",4,"ngIf"],[1,"ntk-cms-html-card-message"],[1,"form-actions"],[1,"form-text","text-muted"],[1,"form-text","text-muted","danger"],[1,"ntk-cms-html-card-footer"],["class","form-actions",4,"ngIf"],[3,"loading","optionSelectForce","optionPlaceholder","optionChange"],[3,"loading","optionSelectForce","optionLinkApiPathId","optionPlaceholder","optionChange",4,"ngIf"],[1,"ntk-full-width"],["matInput","","name","dataModel.message","type","text","placeholder","...","minlength","1","maxlength","500","rows","5",3,"ngModel","ngModelChange"],["Message",""],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matSuffix",""],[2,"text-align","left"],["matInput","","name","dataModel.toNumber","type","text","placeholder","0912","rows","5",3,"ngModel","ngModelChange"],["ToNumber",""],[2,"text-align","right"],["matSuffix","",1,"info-field-icon"],[1,"info-field-text"],["name","dataModel.isFlash",3,"ngModel","ngModelChange"],["name","dataModel.sendByQeue",3,"ngModel","ngModelChange"],[3,"loading","optionSelectForce","optionLinkApiPathId","optionPlaceholder","optionChange"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[3,"dataModel","optionMethod"],["type","button",1,"btn","btn-light",3,"click"],[1,"ft-x"],["type","submit","class","btn btn-success",3,"disabled","click",4,"ngIf"],["type","submit",1,"btn","btn-success",3,"disabled","click"],[1,"fa","fa-check-square-o"]],template:function(e,o){1&e&&(t.TgZ(0,"form",0,1),t.NdJ("ngSubmit",function(){return o.onFormSubmit()}),t.TgZ(2,"div",2),t._uU(3),t.qZA(),t.TgZ(4,"div",3),t._UZ(5,"app-progress-spinner",4),t.YNc(6,y,35,13,"div",5),t.YNc(7,J,1,2,"app-cms-json-list",6),t.qZA(),t.TgZ(8,"div",7)(9,"div",8)(10,"small",9),t._uU(11),t.qZA(),t.TgZ(12,"small",10),t._uU(13),t.qZA()()(),t.TgZ(14,"div",11),t._UZ(15,"app-progress-spinner",4),t.YNc(16,E,6,4,"div",12),t.qZA()()),2&e&&(t.xp6(3),t.hij(" ",o.formInfo.formTitle," "),t.xp6(2),t.Q6J("options",o.loading),t.xp6(1),t.Q6J("ngIf",!o.loading.display),t.xp6(1),t.Q6J("ngIf",null==o.dataModelResult?null:o.dataModelResult.item),t.xp6(4),t.hij("",o.formInfo.formAlert," "),t.xp6(2),t.hij("",o.formInfo.formError," "),t.xp6(2),t.Q6J("options",o.loadingAction),t.xp6(1),t.Q6J("ngIf",o.formInfo.formSubmitAllow&&!o.loading.display))},directives:[c._Y,c.JL,c.F,A.O,p.O5,S.s,C.y,d.KE,d.hX,v.Nt,c.Fj,c.wO,c.nD,c.JJ,c.On,h.Hw,d.R9,d.bx,d.TO,x.Rr,Z.v],pipes:[f.X$],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:yellow}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:black}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}"]}),n})()}]}];let k=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[m.Bz.forChild(U)],m.Bz]}),n})();var w=s(9677),Q=s(8601),O=s(6720),R=s(3914),L=s(5103);let Y=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[l.EAm,l.FLW,l.Z8z,R.s,l.dF2,l.sZP],imports:[[p.ez,k,c.u5,c.UX.withConfig({warnOnNgModelWithFormControl:"never"}),w.m.forRoot(),Q.UM,h.Ps,d.lN,O.T5,L.r]]}),n})()}}]);