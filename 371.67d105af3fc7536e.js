"use strict";(self.webpackChunkntk_cms_web=self.webpackChunkntk_cms_web||[]).push([[371],{371:(Rn,$,p)=>{p.r($),p.d($,{CoreModuleLogModule:()=>kn});var g=p(1048),L=p(7076),e=p(9724);let W=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-coremodulelog"]],decls:1,vars:0,template:function(t,o){1&t&&e._UZ(0,"router-outlet")},directives:[L.lC],encapsulation:2}),i})();var d=p(8774),r=p(7977),v=p(6964),S=p(656),y=p(9723),N=p(9312),f=p(8485),b=p(2607),M=p(727),T=p(3029),m=p(1659),I=p(5738),q=p(6599),j=p(3181),G=p(1797),w=p(5691),V=p(8904),E=p(4848),C=p(4817);const z=["vform"];function X(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"mat-icon",20),e.NdJ("click",function(){return e.CHM(t),e.oxw().dataModel.ModuleName=""}),e._uU(1,"close"),e.qZA()}}function K(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"mat-icon",20),e.NdJ("click",function(){return e.CHM(t),e.oxw().dataModel.ModuleEntityName=null}),e._uU(1,"close"),e.qZA()}}function ee(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"mat-icon",20),e.NdJ("click",function(){return e.CHM(t),e.oxw().dataModel.ModuleEntityId=null}),e._uU(1,"close"),e.qZA()}}function te(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",15),e.TgZ(1,"button",21),e.NdJ("click",function(){return e.CHM(t),e.oxw().onFormCancel()}),e._UZ(2,"i",22),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.qZA()}2&i&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"ACTION.CANCEL")," "))}let oe=(()=>{class i{constructor(t,o,n,s,a,u,_,h){this.data=t,this.dialogRef=o,this.coreEnumService=n,this.coreModuleLogFavoriteService=s,this.cmsToastrService=a,this.tokenHelper=u,this.cdr=_,this.publicHelper=h,this.requestId="",this.tokenInfo=new r.OdC,this.loading=new S.O,this.dataModelResult=new r.y$4,this.dataModel=new r.Tht,this.formInfo=new r.LEF,this.fieldsInfo=new Map,this.fileManagerOpenForm=!1,this.loading.cdr=this.cdr,t&&(this.requestId=t.id)}ngOnInit(){if(!(this.requestId&&this.requestId.length>0))return this.cmsToastrService.typeErrorComponentAction(),void this.dialogRef.close({dialogChangedDate:!1});this.formInfo.FormTitle="\u0648\u06cc\u0631\u0627\u06cc\u0634  ",this.DataGetOneContent(),this.tokenHelper.getCurrentToken().then(t=>{this.tokenInfo=t}),this.cmsApiStoreSubscribe=this.tokenHelper.getCurrentTokenOnChange().subscribe(t=>{this.tokenInfo=t})}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}DataGetOneContent(){if(!this.requestId||0===this.requestId.length)return void this.cmsToastrService.typeErrorEditRowIsNull();this.formInfo.FormAlert="\u062f\u0631 \u062f\u0631\u06cc\u0627\u0641\u062a \u0627\u0631\u0633\u0627\u0644 \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0627\u0632 \u0633\u0631\u0648\u0631",this.formInfo.FormError="";const t=this.constructor.name+"main";this.loading.Start(t),this.coreModuleLogFavoriteService.setAccessLoad(),this.coreModuleLogFavoriteService.ServiceGetOneById(this.requestId).subscribe(o=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(o.Access),this.dataModel=o.Item,o.IsSuccess?(this.formInfo.FormTitle=this.formInfo.FormTitle+" "+o.Item.Id,this.formInfo.FormAlert=""):(this.formInfo.FormAlert="\u0628\u0631\u0631\u0648\u0632 \u062e\u0637\u0627",this.formInfo.FormError=o.ErrorMessage,this.cmsToastrService.typeErrorMessage(o.ErrorMessage)),this.loading.Stop(t)},o=>{this.cmsToastrService.typeError(o),this.loading.Stop(t)})}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.WI),e.Y36(f.so),e.Y36(r.FLW),e.Y36(r.cg1),e.Y36(b.e),e.Y36(M.v),e.Y36(e.sBO),e.Y36(T.i))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-coremodulelog-favorite-edit"]],viewQuery:function(t,o){if(1&t&&e.Gf(z,5),2&t){let n;e.iGM(n=e.CRH())&&(o.formGroup=n.first)}},decls:41,vars:20,consts:[["vform","ngForm"],[1,"ntk-cms-html-card-header"],[1,"ntk-cms-html-card-body"],[3,"options"],[3,"optionDisabled","optionSelectForce","optionPlaceholder"],[1,"ntk-full-width"],["matInput","","name","dataModel.ModuleName","type","text","placeholder","ModuleName",3,"ngModel","ngModelChange"],["ModuleName",""],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matSuffix",""],["matInput","","name","dataModel.ModuleEntityName","type","text","placeholder","ModuleEntityName",3,"ngModel","ngModelChange"],["ModuleEntityName",""],["matInput","","name","dataModel.ModuleEntityId","type","text","placeholder","ModuleEntityId",3,"ngModel","ngModelChange"],["ModuleEntityId",""],[1,"ntk-cms-html-card-message"],[1,"form-actions"],[1,"form-text","text-muted"],[1,"form-text","text-muted","danger"],[1,"ntk-cms-html-card-footer"],["class","form-actions",4,"ngIf"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["type","button",1,"btn","btn-light",3,"click"],[1,"ft-x"]],template:function(t,o){1&t&&(e.TgZ(0,"form",null,0),e.TgZ(2,"div",1),e._uU(3),e.qZA(),e.TgZ(4,"div",2),e._UZ(5,"app-progress-spinner",3),e._UZ(6,"app-cms-site-selector",4),e._UZ(7,"app-cms-user-selector",4),e._UZ(8,"app-cms-member-selector",4),e.TgZ(9,"mat-form-field",5),e.TgZ(10,"mat-label"),e._uU(11,"ModuleName"),e.qZA(),e.TgZ(12,"input",6,7),e.NdJ("ngModelChange",function(s){return o.dataModel.ModuleName=s}),e.qZA(),e.YNc(14,X,2,0,"mat-icon",8),e.TgZ(15,"mat-icon",9),e._uU(16,"mode_edit"),e.qZA(),e.qZA(),e.TgZ(17,"mat-form-field",5),e.TgZ(18,"mat-label"),e._uU(19,"ModuleEntityName"),e.qZA(),e.TgZ(20,"input",10,11),e.NdJ("ngModelChange",function(s){return o.dataModel.ModuleEntityName=s}),e.qZA(),e.YNc(22,K,2,0,"mat-icon",8),e.TgZ(23,"mat-icon",9),e._uU(24,"mode_edit"),e.qZA(),e.qZA(),e.TgZ(25,"mat-form-field",5),e.TgZ(26,"mat-label"),e._uU(27,"ModuleEntityId"),e.qZA(),e.TgZ(28,"input",12,13),e.NdJ("ngModelChange",function(s){return o.dataModel.ModuleEntityId=s}),e.qZA(),e.YNc(30,ee,2,0,"mat-icon",8),e.TgZ(31,"mat-icon",9),e._uU(32,"mode_edit"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(33,"div",14),e.TgZ(34,"div",15),e.TgZ(35,"small",16),e._uU(36),e.qZA(),e.TgZ(37,"small",17),e._uU(38),e.qZA(),e.qZA(),e.qZA(),e.TgZ(39,"div",18),e.YNc(40,te,5,3,"div",19),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.hij(" ",o.formInfo.FormTitle," "),e.xp6(2),e.Q6J("options",o.loading),e.xp6(1),e.Q6J("optionDisabled",!0)("optionSelectForce",o.dataModel.LinkSiteId)("optionPlaceholder","\u0633\u0627\u06cc\u062a"),e.xp6(1),e.Q6J("optionDisabled",!0)("optionSelectForce",o.dataModel.LinkUserId)("optionPlaceholder","\u06a9\u0627\u0631\u0628\u0631"),e.xp6(1),e.Q6J("optionDisabled",!0)("optionSelectForce",o.dataModel.LinkMemberUserId)("optionPlaceholder","\u0639\u0636\u0648"),e.xp6(4),e.Q6J("ngModel",o.dataModel.ModuleName),e.xp6(2),e.Q6J("ngIf",o.dataModel.ModuleName),e.xp6(6),e.Q6J("ngModel",o.dataModel.ModuleEntityName),e.xp6(2),e.Q6J("ngIf",o.dataModel.ModuleEntityName),e.xp6(6),e.Q6J("ngModel",o.dataModel.ModuleEntityId),e.xp6(2),e.Q6J("ngIf",o.dataModel.ModuleEntityId),e.xp6(6),e.hij("",o.formInfo.FormAlert," "),e.xp6(2),e.hij("",o.formInfo.FormError," "),e.xp6(2),e.Q6J("ngIf",o.formInfo.FormSubmitAllow))},directives:[m._Y,m.JL,m.F,I.O,q.P,j.g,G.a,w.KE,w.hX,V.Nt,m.Fj,m.JJ,m.On,g.O5,E.Hw,w.R9],pipes:[C.X$],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:yellow}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:black}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}"]}),i})();var U=p(2370);const ie=["vform"];function ne(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",5),e.TgZ(1,"button",10),e.NdJ("click",function(){return e.CHM(t),e.oxw().onFormCancel()}),e._UZ(2,"i",11),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.qZA()}2&i&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"ACTION.CANCEL")," "))}let le=(()=>{class i{constructor(t,o,n,s,a,u,_,h){this.data=t,this.dialogRef=o,this.coreEnumService=n,this.coreModuleLogFavoriteService=s,this.cmsToastrService=a,this.tokenHelper=u,this.cdr=_,this.publicHelper=h,this.requestId="",this.tokenInfo=new r.OdC,this.loading=new S.O,this.dataModelResult=new r.y$4,this.dataModel=new r.Tht,this.formInfo=new r.LEF,this.dataModelEnumSendSmsStatusTypeResult=new r.y$4,this.fieldsInfo=new Map,this.fileManagerOpenForm=!1,this.loading.cdr=this.cdr,t&&(this.requestId=t.id+"")}ngOnInit(){if(this.formInfo.FormTitle="\u0645\u0634\u0627\u0647\u062f\u0647  ",0===this.requestId.length)return this.cmsToastrService.typeErrorComponentAction(),void this.dialogRef.close({dialogChangedDate:!1});this.DataGetOneContent(),this.tokenHelper.getCurrentToken().then(t=>{this.tokenInfo=t}),this.cmsApiStoreSubscribe=this.tokenHelper.getCurrentTokenOnChange().subscribe(t=>{this.tokenInfo=t}),this.getEnumSendSmsStatusType()}getEnumSendSmsStatusType(){this.coreEnumService.ServiceEnumSendSmsStatusType().subscribe(t=>{this.dataModelEnumSendSmsStatusTypeResult=t})}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}DataGetOneContent(){this.formInfo.FormAlert="\u062f\u0631 \u062f\u0631\u06cc\u0627\u0641\u062a \u0627\u0631\u0633\u0627\u0644 \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0627\u0632 \u0633\u0631\u0648\u0631",this.formInfo.FormError="";const t=this.constructor.name+"main";this.loading.Start(t),this.coreModuleLogFavoriteService.setAccessLoad(),this.coreModuleLogFavoriteService.ServiceGetOneById(this.requestId).subscribe(o=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(o.Access),this.dataModel=o.Item,o.IsSuccess?(this.formInfo.FormTitle=this.formInfo.FormTitle+" "+o.Item.Id,this.formInfo.FormAlert=""):(this.formInfo.FormAlert="\u0628\u0631\u0631\u0648\u0632 \u062e\u0637\u0627",this.formInfo.FormError=o.ErrorMessage,this.cmsToastrService.typeErrorMessage(o.ErrorMessage)),this.loading.Stop(t)},o=>{this.cmsToastrService.typeError(o),this.loading.Stop(t)})}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.WI),e.Y36(f.so),e.Y36(r.FLW),e.Y36(r.cg1),e.Y36(b.e),e.Y36(M.v),e.Y36(e.sBO),e.Y36(T.i))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-coremodulelog-report-abuse-view"]],viewQuery:function(t,o){if(1&t&&e.Gf(ie,5),2&t){let n;e.iGM(n=e.CRH())&&(o.formGroup=n.first)}},decls:13,vars:7,consts:[[1,"ntk-cms-html-card-header"],[1,"ntk-cms-html-card-body"],[3,"options"],[3,"dataModel","optionMethod"],[1,"ntk-cms-html-card-message"],[1,"form-actions"],[1,"form-text","text-muted"],[1,"form-text","text-muted","danger"],[1,"ntk-cms-html-card-footer"],["class","form-actions",4,"ngIf"],["type","button",1,"btn","btn-light",3,"click"],[1,"ft-x"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e._uU(1),e.qZA(),e.TgZ(2,"div",1),e._UZ(3,"app-progress-spinner",2),e._UZ(4,"app-cms-json-list",3),e.qZA(),e.TgZ(5,"div",4),e.TgZ(6,"div",5),e.TgZ(7,"small",6),e._uU(8),e.qZA(),e.TgZ(9,"small",7),e._uU(10),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"div",8),e.YNc(12,ne,5,3,"div",9),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",o.formInfo.FormTitle," "),e.xp6(2),e.Q6J("options",o.loading),e.xp6(1),e.Q6J("dataModel",o.dataModel)("optionMethod",1),e.xp6(4),e.hij("",o.formInfo.FormAlert," "),e.xp6(2),e.hij("",o.formInfo.FormError," "),e.xp6(2),e.Q6J("ngIf",o.formInfo.FormSubmitAllow))},directives:[I.O,U.v,g.O5],pipes:[C.X$],encapsulation:2}),i})();var F=p(3914),O=p(7980),D=p(1582),J=p(3014),Y=p(7154),B=p(626),Z=p(9988),Q=p(3472),A=p(4545),H=p(5903),P=p(3953);function se(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",37),e.NdJ("click",function(){return e.CHM(t),e.oxw().onActionbuttonViewRow()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"ACTION.VIEW")))}function re(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",38),e.NdJ("click",function(){return e.CHM(t),e.oxw().onActionbuttonEditRow()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"ACTION.EDIT")))}function ae(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",39),e.NdJ("click",function(){return e.CHM(t),e.oxw().onActionbuttonDeleteRow()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"ACTION.DELETE")))}function ce(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",40),e.NdJ("click",function(){return e.CHM(t),e.oxw().onActionBackToParent()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"ACTION.BACK")))}function de(i,l){if(1&i&&(e.TgZ(0,"mat-header-cell",41),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.fieldsInfo.Id?null:t.fieldsInfo.Id.FieldTitle," ")}}function ue(i,l){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.hij(" ",t.Id," ")}}function me(i,l){if(1&i&&(e.TgZ(0,"mat-header-cell",41),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.fieldsInfo.RecordStatus?null:t.fieldsInfo.RecordStatus.FieldTitle," ")}}function pe(i,l){if(1&i&&(e.TgZ(0,"mat-cell"),e._UZ(1,"i",42),e.ALo(2,"statusClass"),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.Q6J("ngClass",e.lcZ(2,1,t.RecordStatus))}}function _e(i,l){if(1&i&&(e.TgZ(0,"mat-header-cell",41),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.fieldsInfo.LinkSiteId?null:t.fieldsInfo.LinkSiteId.FieldTitle," ")}}function he(i,l){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.hij(" ",t.LinkSiteId," ")}}function ge(i,l){if(1&i&&(e.TgZ(0,"mat-header-cell",41),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.fieldsInfo.LinkUserId?null:t.fieldsInfo.LinkUserId.FieldTitle," ")}}function fe(i,l){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.hij(" ",t.LinkUserId," ")}}function Ce(i,l){if(1&i&&(e.TgZ(0,"mat-header-cell",41),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.fieldsInfo.LinkMemberUserId?null:t.fieldsInfo.LinkMemberUserId.FieldTitle," ")}}function Se(i,l){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.hij(" ",t.LinkMemberUserId," ")}}function be(i,l){if(1&i&&(e.TgZ(0,"mat-header-cell",41),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.fieldsInfo.ModuleName?null:t.fieldsInfo.ModuleName.FieldTitle," ")}}function Me(i,l){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.hij(" ",t.ModuleName," ")}}function Te(i,l){if(1&i&&(e.TgZ(0,"mat-header-cell",41),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.fieldsInfo.ModuleEntityName?null:t.fieldsInfo.ModuleEntityName.FieldTitle," ")}}function Ae(i,l){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.hij(" ",t.ModuleEntityName," ")}}function Le(i,l){if(1&i&&(e.TgZ(0,"mat-header-cell",41),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.fieldsInfo.ModuleEntityId?null:t.fieldsInfo.ModuleEntityId.FieldTitle," ")}}function Ie(i,l){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.hij(" ",t.ModuleEntityId," ")}}function we(i,l){if(1&i&&(e.TgZ(0,"mat-header-cell",41),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.fieldsInfo.CreatedDate?null:t.fieldsInfo.CreatedDate.FieldTitle," ")}}function Ze(i,l){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=l.$implicit,o=e.oxw();e.xp6(1),e.hij(" ",o.publicHelper.LocaleDate(t.CreatedDate)," ")}}function ke(i,l){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"TITLE.OPTION")," "))}function Re(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",47),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit;return e.oxw().onActionbuttonViewRow(n)}),e.TgZ(1,"mat-icon"),e._uU(2,"visibility"),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.qZA()}2&i&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"ACTION.VIEW")))}function xe(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",47),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit;return e.oxw().onActionbuttonEditRow(n)}),e.TgZ(1,"mat-icon"),e._uU(2,"mode_edit"),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.qZA()}2&i&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"ACTION.EDIT")))}function Ee(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",47),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit;return e.oxw().onActionbuttonDeleteRow(n)}),e.TgZ(1,"mat-icon"),e._uU(2,"delete_forever"),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.qZA()}2&i&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"ACTION.DELETE")))}function ve(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",47),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit;return e.oxw().onActionbuttonViewContent(n)}),e.TgZ(1,"mat-icon"),e._uU(2,"arrow_right_alt"),e.qZA(),e.TgZ(3,"span"),e._uU(4,"\u0645\u062d\u062a\u0648\u0627"),e.qZA(),e.qZA()}}function ye(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",47),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit;return e.oxw().onActionbuttonViewUserRow(n)}),e.TgZ(1,"mat-icon"),e._uU(2,"supervisor_account"),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.qZA()}2&i&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"ACTION.USER")))}function Ne(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",47),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit;return e.oxw().onActionbuttonViewMemberRow(n)}),e.TgZ(1,"mat-icon"),e._uU(2,"assignment_ind"),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.qZA()}2&i&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"ACTION.MEMBER")))}function qe(i,l){if(1&i&&(e.TgZ(0,"mat-cell",43),e.TgZ(1,"button",44),e.TgZ(2,"mat-icon"),e._uU(3,"more_vert"),e.qZA(),e.qZA(),e.TgZ(4,"mat-menu",null,45),e.YNc(6,Re,6,3,"button",46),e.YNc(7,xe,6,3,"button",46),e.YNc(8,Ee,6,3,"button",46),e.YNc(9,ve,5,0,"button",46),e.YNc(10,ye,6,3,"button",46),e.YNc(11,Ne,6,3,"button",46),e.qZA(),e.qZA()),2&i){const t=l.$implicit,o=e.MAs(5),n=e.oxw();e.xp6(1),e.Q6J("matMenuTriggerFor",o),e.xp6(5),e.Q6J("ngIf",n.dataModelResult.Access.AccessWatchRow),e.xp6(1),e.Q6J("ngIf",n.dataModelResult.Access.AccessEditRow),e.xp6(1),e.Q6J("ngIf",n.dataModelResult.Access.AccessDeleteRow),e.xp6(1),e.Q6J("ngIf",n.dataModelResult.Access.AccessDeleteRow),e.xp6(1),e.Q6J("ngIf",t.LinkUserId>0),e.xp6(1),e.Q6J("ngIf",t.LinkMemberUserId>0)}}function Ue(i,l){1&i&&e._UZ(0,"mat-header-row")}const Fe=function(i){return{background:i}};function Oe(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",48),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw().onActionTableRowSelect(s)}),e.qZA()}if(2&i){const t=l.$implicit,o=e.oxw();e.Q6J("ngStyle",e.VKq(1,Fe,t.Id===o.tableRowSelected.Id?"#d3d3da":""))}}const De=function(){return[5,10,20,100]};let Je=(()=>{class i{constructor(t,o,n,s,a,u,_,h,k,R,x){if(this.coreEnumService=t,this.coreModuleLogFavoriteService=o,this.publicHelper=n,this.cmsToastrService=s,this.cmsConfirmationDialogService=a,this.activatedRoute=u,this.tokenHelper=_,this.dialog=h,this.cdr=k,this.translate=R,this.router=x,this.requestLinkSiteId=0,this.requestLinkUserId=0,this.requestlinkMemberUserId=0,this.flag=!1,this.tableContentSelected=[],this.filteModelContent=new r.Hay,this.dataModelResult=new r.y$4,this.optionsSearch=new v.dj,this.optionsStatist=new N.TV,this.optionsExport=new y.zR,this.tokenInfo=new r.OdC,this.loading=new S.O,this.tableRowsSelected=[],this.tableRowSelected=new r.Tht,this.tableSource=new d.by,this.tabledisplayedColumns=["Id","LinkUserId","LinkSiteId","LinkMemberUserId","ModuleName","ModuleEntityName","ModuleEntityId","CreatedDate","Action"],this.fieldsInfo=new Map,this.loading.cdr=this.cdr,this.requestLinkSiteId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkSiteId")),this.requestLinkUserId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkUserId")),this.requestlinkMemberUserId=+Number(this.activatedRoute.snapshot.paramMap.get("linkMemberUserId")),this.requestLinkSiteId>0){const c=new r.AO3;c.PropertyName="LinkCmsSiteId",c.Value=this.requestLinkSiteId,this.filteModelContent.Filters.push(c)}if(this.requestLinkUserId>0){const c=new r.AO3;c.PropertyName="LinkUserId",c.Value=this.requestLinkUserId,this.filteModelContent.Filters.push(c)}if(this.requestlinkMemberUserId>0){const c=new r.AO3;c.PropertyName="linkMemberUserId",c.Value=this.requestlinkMemberUserId,this.filteModelContent.Filters.push(c)}this.optionsSearch.parentMethods={onSubmit:c=>this.onSubmitOptionsSearch(c)},this.optionsExport.parentMethods={onSubmit:c=>this.onSubmitOptionExport(c)},this.filteModelContent.SortColumn="CreatedDate",this.filteModelContent.SortType=r.oCf.Descending}ngOnInit(){this.filteModelContent.SortColumn="Id",this.filteModelContent.SortType=r.oCf.Descending,this.DataGetAll(),this.tokenHelper.getCurrentToken().then(t=>{this.tokenInfo=t}),this.cmsApiStoreSubscribe=this.tokenHelper.getCurrentTokenOnChange().subscribe(t=>{this.DataGetAll(),this.tokenInfo=t})}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}DataGetAll(){this.tableRowsSelected=[],this.tableRowSelected=new r.Tht;const t=this.constructor.name+"main";this.loading.Start(t),this.filteModelContent.AccessLoad=!0;const o=JSON.parse(JSON.stringify(this.filteModelContent));this.coreModuleLogFavoriteService.ServiceGetAllEditor(o).subscribe(n=>{n.IsSuccess&&(this.fieldsInfo=this.publicHelper.fieldInfoConvertor(n.Access),this.dataModelResult=n,this.tableSource.data=n.ListItems,this.tabledisplayedColumns=this.tokenInfo.UserAccessAdminAllowToAllData||this.tokenInfo.UserAccessAdminAllowToProfessionalData?this.publicHelper.listAddIfNotExist(this.tabledisplayedColumns,"LinkSiteId",0):this.publicHelper.listRemoveIfExist(this.tabledisplayedColumns,"LinkSiteId"),this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(n.Access)),this.loading.Stop(t)},n=>{this.cmsToastrService.typeError(n),this.loading.Stop(t)})}onTableSortData(t){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===t.active?"asc"===this.tableSource.sort.start?(t.start="desc",this.filteModelContent.SortColumn=t.active,this.filteModelContent.SortType=r.oCf.Descending):"desc"===this.tableSource.sort.start?(this.filteModelContent.SortColumn="",this.filteModelContent.SortType=r.oCf.Ascending):t.start="desc":(this.filteModelContent.SortColumn=t.active,this.filteModelContent.SortType=r.oCf.Ascending),this.tableSource.sort=t,this.filteModelContent.CurrentPageNumber=0,this.DataGetAll()}onTablePageingData(t){this.filteModelContent.CurrentPageNumber=t.pageIndex+1,this.filteModelContent.RowPerPage=t.pageSize,this.DataGetAll()}onActionbuttonViewRow(t=this.tableRowSelected){t&&t.Id&&0!==t.Id.length?(this.tableRowSelected=t,null!=this.dataModelResult&&null!=this.dataModelResult.Access&&this.dataModelResult.Access.AccessWatchRow?this.dialog.open(le,{height:"90%",data:{id:this.tableRowSelected.Id}}).afterClosed().subscribe(n=>{}):this.cmsToastrService.typeErrorAccessWatch()):this.cmsToastrService.typeErrorSelectedRow()}onActionbuttonEditRow(t=this.tableRowSelected){t&&t.Id&&0!==t.Id.length?(this.tableRowSelected=t,null!=this.dataModelResult&&null!=this.dataModelResult.Access&&this.dataModelResult.Access.AccessEditRow?this.dialog.open(oe,{height:"90%",data:{id:this.tableRowSelected.Id}}).afterClosed().subscribe(n=>{n&&n.dialogChangedDate&&this.DataGetAll()}):this.cmsToastrService.typeErrorAccessEdit()):this.cmsToastrService.typeErrorSelectedRow()}onActionbuttonDeleteRow(t=this.tableRowSelected){if(!t||!t.Id||0===t.Id.length)return void this.cmsToastrService.typeErrorSelected("\u0631\u062f\u06cc\u0641\u06cc \u0628\u0631\u0627\u06cc \u062d\u0630\u0641 \u0627\u0646\u062a\u062e\u0627\u0628 \u0646\u0634\u062f\u0647 \u0627\u0633\u062a");if(this.tableRowSelected=t,null==this.dataModelResult||null==this.dataModelResult.Access||!this.dataModelResult.Access.AccessDeleteRow)return void this.cmsToastrService.typeErrorAccessDelete();const o=this.translate.instant("MESSAGE.Please_Confirm");this.cmsConfirmationDialogService.confirm(o,"\u0622\u06cc\u0627 \u0645\u0627\u06cc\u0644 \u0628\u0647 \u062d\u062f\u0641 \u0627\u06cc\u0646 \u0645\u062d\u062a\u0648\u0627 \u0645\u06cc \u0628\u0627\u0634\u06cc\u062f ?<br> ( "+this.tableRowSelected.Id+" ) ").then(s=>{if(s){const a=this.constructor.name+"main";this.loading.Start(a),this.coreModuleLogFavoriteService.ServiceDelete(this.tableRowSelected.Id).subscribe(u=>{u.IsSuccess?(this.cmsToastrService.typeSuccessRemove(),this.DataGetAll()):this.cmsToastrService.typeErrorRemove(),this.loading.Stop(a)},u=>{this.cmsToastrService.typeError(u),this.loading.Stop(a)})}}).catch(()=>{})}onActionbuttonViewContent(t=this.tableRowSelected){if(!t||!t.Id||0===t.Id.length)return void this.cmsToastrService.typeErrorSelected("\u0631\u062f\u06cc\u0641\u06cc \u0627\u0646\u062a\u062e\u0627\u0628 \u0646\u0634\u062f\u0647 \u0627\u0633\u062a");this.tableRowSelected=t;const o="/"+t.ModuleName+"/"+t.ModuleEntityName.substring(t.ModuleName.length)+"/edit/"+t.ModuleEntityId;t.ModuleEntityName.indexOf(t.ModuleName),this.router.navigate([o.toLowerCase()])}onActionbuttonStatist(){if(this.optionsStatist.data.show=!this.optionsStatist.data.show,!this.optionsStatist.data.show)return;const t=new Map;t.set("Active",0),t.set("All",0),this.coreModuleLogFavoriteService.ServiceGetCount(this.filteModelContent).subscribe(s=>{s.IsSuccess&&(t.set("All",s.TotalRowCount),this.optionsStatist.childMethods.setStatistValue(t))},s=>{this.cmsToastrService.typeError(s)});const o=JSON.parse(JSON.stringify(this.filteModelContent)),n=new r.AO3;n.PropertyName="RecordStatus",n.Value=r.FVU.Available,o.Filters.push(n),this.coreModuleLogFavoriteService.ServiceGetCount(o).subscribe(s=>{s.IsSuccess&&(t.set("Active",s.TotalRowCount),this.optionsStatist.childMethods.setStatistValue(t))},s=>{this.cmsToastrService.typeError(s)})}onActionbuttonViewUserRow(t=this.tableRowSelected){t&&t.Id&&0!==t.Id.length?(this.tableRowSelected=t,this.tableRowSelected.LinkUserId&&0!==this.tableRowSelected.LinkUserId?this.router.navigate(["/core/user/edit",this.tableRowSelected.LinkUserId]):this.cmsToastrService.typeErrorSelected("\u0645\u062d\u062a\u0648\u0627 \u0634\u0627\u0645\u0644 \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u06a9\u0627\u0631\u0628\u0631 \u0646\u0645\u06cc \u0628\u0627\u0634\u062f")):this.cmsToastrService.typeErrorSelectedRow()}onActionbuttonViewMemberRow(t=this.tableRowSelected){t&&t.Id&&0!==t.Id.length?(this.tableRowSelected=t,this.tableRowSelected.LinkMemberUserId&&0!==this.tableRowSelected.LinkMemberUserId?this.router.navigate(["/member/user/edit",this.tableRowSelected.LinkMemberUserId]):this.cmsToastrService.typeErrorSelected("\u0645\u062d\u062a\u0648\u0627 \u0634\u0627\u0645\u0644 \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0639\u0636\u0648 \u0646\u0645\u06cc \u0628\u0627\u0634\u062f")):this.cmsToastrService.typeErrorSelectedRow()}onActionbuttonViewSiteRow(t=this.tableRowSelected){t&&t.Id&&0!==t.Id.length?(this.tableRowSelected=t,this.tableRowSelected.LinkSiteId&&0!==this.tableRowSelected.LinkSiteId?this.router.navigate(["/core/site/edit",this.tableRowSelected.LinkSiteId]):this.cmsToastrService.typeErrorSelected("\u0645\u062d\u062a\u0648\u0627 \u0634\u0627\u0645\u0644 \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0633\u0627\u06cc\u062a \u0646\u0645\u06cc \u0628\u0627\u0634\u062f")):this.cmsToastrService.typeErrorSelectedRow()}onActionbuttonExport(){this.optionsExport.data.show=!this.optionsExport.data.show,this.optionsExport.childMethods.setExportFilterModel(this.filteModelContent)}onSubmitOptionExport(t){const o=new Map;o.set("Download","loading ... "),this.coreModuleLogFavoriteService.ServiceExportFile(t).subscribe(n=>{n.IsSuccess&&(o.set("Download",n.LinkFile),this.optionsExport.childMethods.setExportLinkFile(o))},n=>{this.cmsToastrService.typeError(n)})}onActionbuttonReload(){this.DataGetAll()}onSubmitOptionsSearch(t){this.filteModelContent.Filters=t,this.DataGetAll()}onActionTableRowSelect(t){this.tableRowSelected=t}onActionBackToParent(){this.router.navigate(["/core/site/"])}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(r.FLW),e.Y36(r.cg1),e.Y36(T.i),e.Y36(b.e),e.Y36(F.s),e.Y36(L.gz),e.Y36(M.v),e.Y36(f.uw),e.Y36(e.sBO),e.Y36(C.sK),e.Y36(L.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-coremodulelog-favorite-list"]],decls:67,vars:30,consts:[[3,"optionLoading","optionTreeDisplay"],["cms-tree",""],["cms-header",""],["cms-action",""],["type","button","class","btn btn-outline-secondary BTN","data-toggle","modal","data-target","#categoryModal",3,"click",4,"ngIf"],["type","button","class","btn btn-outline-warning","data-toggle","modal","data-target","#categoryModal",3,"click",4,"ngIf"],["type","button","class","btn btn-outline-danger",3,"click",4,"ngIf"],[1,"btn","btn-outline-info","btn-sm","BTN"],[3,"ngModel","ngModelChange"],[3,"click"],["type","button",1,"btn","btn-outline-secondary","BTN",3,"click"],[2,"font-size","20px","margin","-1px",3,"title"],["type","button","class","btn btn-outline-success BTN",3,"click",4,"ngIf"],["cms-action-area",""],[3,"options","optionsChange"],["cms-body",""],["matSort","",3,"dataSource","matSortChange"],["tableSort","matSort"],["matColumnDef","Id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","RecordStatus"],["matColumnDef","LinkSiteId"],["matColumnDef","LinkUserId"],["matColumnDef","LinkMemberUserId"],["matColumnDef","ModuleName"],["matColumnDef","ModuleEntityName"],["matColumnDef","ModuleEntityId"],["matColumnDef","CreatedDate"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class"," Action",4,"matCellDef"],[4,"matHeaderRowDef"],[3,"ngStyle","click",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"length","pageIndex","pageSize","pageSizeOptions","page"],["paginator",""],["type","button","data-toggle","modal","data-target","#categoryModal",1,"btn","btn-outline-secondary","BTN",3,"click"],["type","button","data-toggle","modal","data-target","#categoryModal",1,"btn","btn-outline-warning",3,"click"],["type","button",1,"btn","btn-outline-danger",3,"click"],["type","button",1,"btn","btn-outline-success","BTN",3,"click"],["mat-sort-header",""],[3,"ngClass"],[1,"Action"],["mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],["actionMenu","matMenu"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","",3,"click"],[3,"ngStyle","click"]],template:function(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"app-cms-html-list",0),e.ynx(1,1),e._uU(2," -------------------------------------- "),e.BQk(),e.GkF(3,2),e.ynx(4,3),e.YNc(5,se,3,3,"button",4),e.YNc(6,re,3,3,"button",5),e.YNc(7,ae,3,3,"button",6),e.TgZ(8,"a",7),e.TgZ(9,"mat-slide-toggle",8),e.NdJ("ngModelChange",function(a){return o.optionsSearch.data.show=a}),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.qZA(),e.TgZ(12,"a",7),e.TgZ(13,"mat-slide-toggle",9),e.NdJ("click",function(){return o.onActionbuttonStatist()}),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.qZA(),e.TgZ(16,"a",7),e.TgZ(17,"mat-slide-toggle",9),e.NdJ("click",function(){return o.onActionbuttonExport()}),e._uU(18),e.ALo(19,"translate"),e.qZA(),e.qZA(),e.TgZ(20,"button",10),e.NdJ("click",function(){return o.onActionbuttonReload()}),e.TgZ(21,"mat-icon",11),e.ALo(22,"translate"),e._uU(23,"refresh"),e.qZA(),e.qZA(),e.YNc(24,ce,3,3,"button",12),e.BQk(),e.ynx(25,13),e.TgZ(26,"app-cms-search-list",14),e.NdJ("optionsChange",function(a){return o.optionsSearch=a}),e.qZA(),e.TgZ(27,"app-cms-export-list",14),e.NdJ("optionsChange",function(a){return o.optionsExport=a}),e.qZA(),e.TgZ(28,"app-cms-statist-list",14),e.NdJ("optionsChange",function(a){return o.optionsStatist=a}),e.qZA(),e.BQk(),e.ynx(29,15),e.TgZ(30,"mat-table",16,17),e.NdJ("matSortChange",function(){e.CHM(n);const a=e.MAs(31);return o.onTableSortData(a)}),e.ynx(32,18),e.YNc(33,de,2,1,"mat-header-cell",19),e.YNc(34,ue,2,1,"mat-cell",20),e.BQk(),e.ynx(35,21),e.YNc(36,me,2,1,"mat-header-cell",19),e.YNc(37,pe,3,3,"mat-cell",20),e.BQk(),e.ynx(38,22),e.YNc(39,_e,2,1,"mat-header-cell",19),e.YNc(40,he,2,1,"mat-cell",20),e.BQk(),e.ynx(41,23),e.YNc(42,ge,2,1,"mat-header-cell",19),e.YNc(43,fe,2,1,"mat-cell",20),e.BQk(),e.ynx(44,24),e.YNc(45,Ce,2,1,"mat-header-cell",19),e.YNc(46,Se,2,1,"mat-cell",20),e.BQk(),e.ynx(47,25),e.YNc(48,be,2,1,"mat-header-cell",19),e.YNc(49,Me,2,1,"mat-cell",20),e.BQk(),e.ynx(50,26),e.YNc(51,Te,2,1,"mat-header-cell",19),e.YNc(52,Ae,2,1,"mat-cell",20),e.BQk(),e.ynx(53,27),e.YNc(54,Le,2,1,"mat-header-cell",19),e.YNc(55,Ie,2,1,"mat-cell",20),e.BQk(),e.ynx(56,28),e.YNc(57,we,2,1,"mat-header-cell",19),e.YNc(58,Ze,2,1,"mat-cell",20),e.BQk(),e.ynx(59,29),e.YNc(60,ke,3,3,"mat-header-cell",30),e.YNc(61,qe,12,7,"mat-cell",31),e.BQk(),e.YNc(62,Ue,1,0,"mat-header-row",32),e.YNc(63,Oe,1,3,"mat-row",33),e.qZA(),e.BQk(),e.ynx(64,34),e.TgZ(65,"mat-paginator",35,36),e.NdJ("page",function(a){return o.onTablePageingData(a)}),e.qZA(),e.BQk(),e.qZA()}2&t&&(e.Q6J("optionLoading",o.loading)("optionTreeDisplay",!1),e.xp6(5),e.Q6J("ngIf",o.dataModelResult.Access.AccessWatchRow&&(null==o.tableRowSelected||null==o.tableRowSelected.Id?null:o.tableRowSelected.Id.length)>0),e.xp6(1),e.Q6J("ngIf",o.dataModelResult.Access.AccessEditRow&&(null==o.tableRowSelected||null==o.tableRowSelected.Id?null:o.tableRowSelected.Id.length)>0),e.xp6(1),e.Q6J("ngIf",o.dataModelResult.Access.AccessDeleteRow&&(null==o.tableRowSelected||null==o.tableRowSelected.Id?null:o.tableRowSelected.Id.length)>0),e.xp6(2),e.Q6J("ngModel",o.optionsSearch.data.show),e.xp6(1),e.Oqu(e.lcZ(11,21,"ACTION.SEARCH")),e.xp6(4),e.hij("",e.lcZ(15,23,"ACTION.STATIST")," "),e.xp6(4),e.hij("",e.lcZ(19,25,"ACTION.EXPORTFILE")," "),e.xp6(3),e.s9C("title",e.lcZ(22,27,"ACTION.RELOAD")),e.xp6(3),e.Q6J("ngIf",o.requestLinkSiteId>0),e.xp6(2),e.Q6J("options",o.optionsSearch),e.xp6(1),e.Q6J("options",o.optionsExport),e.xp6(1),e.Q6J("options",o.optionsStatist),e.xp6(2),e.Q6J("dataSource",o.tableSource),e.xp6(32),e.Q6J("matHeaderRowDef",o.tabledisplayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",o.tabledisplayedColumns),e.xp6(2),e.Q6J("length",o.dataModelResult.TotalRowCount)("pageIndex",o.dataModelResult.CurrentPageNumber-1)("pageSize",o.dataModelResult.RowPerPage)("pageSizeOptions",e.DdM(29,De)))},directives:[O.Z,g.O5,D.Rr,m.JJ,m.On,E.Hw,J.y,Y.Z,B.q,d.BZ,Z.YE,d.w1,d.fO,d.ge,Z.nU,d.Dz,d.ev,g.mk,Q.lW,A.p6,A.VK,A.OP,d.as,d.XQ,d.nj,d.Gk,g.PC,H.NW],pipes:[C.X$,P.b],encapsulation:2}),i})();const Ye=["vform"];function Be(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"mat-icon",20),e.NdJ("click",function(){return e.CHM(t),e.oxw().dataModel.ModuleName=""}),e._uU(1,"close"),e.qZA()}}function Qe(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"mat-icon",20),e.NdJ("click",function(){return e.CHM(t),e.oxw().dataModel.ModuleEntityName=null}),e._uU(1,"close"),e.qZA()}}function He(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"mat-icon",20),e.NdJ("click",function(){return e.CHM(t),e.oxw().dataModel.ModuleEntityId=null}),e._uU(1,"close"),e.qZA()}}function Pe(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",15),e.TgZ(1,"button",21),e.NdJ("click",function(){return e.CHM(t),e.oxw().onFormCancel()}),e._UZ(2,"i",22),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.qZA()}2&i&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"ACTION.CANCEL")," "))}let je=(()=>{class i{constructor(t,o,n,s,a,u,_,h){this.data=t,this.dialogRef=o,this.coreEnumService=n,this.coreModuleLogLikeService=s,this.cmsToastrService=a,this.tokenHelper=u,this.cdr=_,this.publicHelper=h,this.requestId="",this.tokenInfo=new r.OdC,this.loading=new S.O,this.dataModelResult=new r.y$4,this.dataModel=new r.ze2,this.formInfo=new r.LEF,this.fieldsInfo=new Map,this.fileManagerOpenForm=!1,this.loading.cdr=this.cdr,t&&(this.requestId=t.id)}ngOnInit(){if(!(this.requestId&&this.requestId.length>0))return this.cmsToastrService.typeErrorComponentAction(),void this.dialogRef.close({dialogChangedDate:!1});this.formInfo.FormTitle="\u0648\u06cc\u0631\u0627\u06cc\u0634  ",this.DataGetOneContent(),this.tokenHelper.getCurrentToken().then(t=>{this.tokenInfo=t}),this.cmsApiStoreSubscribe=this.tokenHelper.getCurrentTokenOnChange().subscribe(t=>{this.tokenInfo=t})}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}DataGetOneContent(){if(!this.requestId||0===this.requestId.length)return void this.cmsToastrService.typeErrorEditRowIsNull();this.formInfo.FormAlert="\u062f\u0631 \u062f\u0631\u06cc\u0627\u0641\u062a \u0627\u0631\u0633\u0627\u0644 \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0627\u0632 \u0633\u0631\u0648\u0631",this.formInfo.FormError="";const t=this.constructor.name+"main";this.loading.Start(t),this.coreModuleLogLikeService.setAccessLoad(),this.coreModuleLogLikeService.ServiceGetOneById(this.requestId).subscribe(o=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(o.Access),this.dataModel=o.Item,o.IsSuccess?(this.formInfo.FormTitle=this.formInfo.FormTitle+" "+o.Item.Id,this.formInfo.FormAlert=""):(this.formInfo.FormAlert="\u0628\u0631\u0631\u0648\u0632 \u062e\u0637\u0627",this.formInfo.FormError=o.ErrorMessage,this.cmsToastrService.typeErrorMessage(o.ErrorMessage)),this.loading.Stop(t)},o=>{this.cmsToastrService.typeError(o),this.loading.Stop(t)})}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.WI),e.Y36(f.so),e.Y36(r.FLW),e.Y36(r.d7G),e.Y36(b.e),e.Y36(M.v),e.Y36(e.sBO),e.Y36(T.i))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-coremodulelog-like-edit"]],viewQuery:function(t,o){if(1&t&&e.Gf(Ye,5),2&t){let n;e.iGM(n=e.CRH())&&(o.formGroup=n.first)}},decls:41,vars:20,consts:[["vform","ngForm"],[1,"ntk-cms-html-card-header"],[1,"ntk-cms-html-card-body"],[3,"options"],[3,"optionDisabled","optionSelectForce","optionPlaceholder"],[1,"ntk-full-width"],["matInput","","name","dataModel.ModuleName","type","text","placeholder","ModuleName",3,"ngModel","ngModelChange"],["ModuleName",""],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matSuffix",""],["matInput","","name","dataModel.ModuleEntityName","type","text","placeholder","ModuleEntityName",3,"ngModel","ngModelChange"],["ModuleEntityName",""],["matInput","","name","dataModel.ModuleEntityId","type","text","placeholder","ModuleEntityId",3,"ngModel","ngModelChange"],["ModuleEntityId",""],[1,"ntk-cms-html-card-message"],[1,"form-actions"],[1,"form-text","text-muted"],[1,"form-text","text-muted","danger"],[1,"ntk-cms-html-card-footer"],["class","form-actions",4,"ngIf"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["type","button",1,"btn","btn-light",3,"click"],[1,"ft-x"]],template:function(t,o){1&t&&(e.TgZ(0,"form",null,0),e.TgZ(2,"div",1),e._uU(3),e.qZA(),e.TgZ(4,"div",2),e._UZ(5,"app-progress-spinner",3),e._UZ(6,"app-cms-site-selector",4),e._UZ(7,"app-cms-user-selector",4),e._UZ(8,"app-cms-member-selector",4),e.TgZ(9,"mat-form-field",5),e.TgZ(10,"mat-label"),e._uU(11,"ModuleName"),e.qZA(),e.TgZ(12,"input",6,7),e.NdJ("ngModelChange",function(s){return o.dataModel.ModuleName=s}),e.qZA(),e.YNc(14,Be,2,0,"mat-icon",8),e.TgZ(15,"mat-icon",9),e._uU(16,"mode_edit"),e.qZA(),e.qZA(),e.TgZ(17,"mat-form-field",5),e.TgZ(18,"mat-label"),e._uU(19,"ModuleEntityName"),e.qZA(),e.TgZ(20,"input",10,11),e.NdJ("ngModelChange",function(s){return o.dataModel.ModuleEntityName=s}),e.qZA(),e.YNc(22,Qe,2,0,"mat-icon",8),e.TgZ(23,"mat-icon",9),e._uU(24,"mode_edit"),e.qZA(),e.qZA(),e.TgZ(25,"mat-form-field",5),e.TgZ(26,"mat-label"),e._uU(27,"ModuleEntityId"),e.qZA(),e.TgZ(28,"input",12,13),e.NdJ("ngModelChange",function(s){return o.dataModel.ModuleEntityId=s}),e.qZA(),e.YNc(30,He,2,0,"mat-icon",8),e.TgZ(31,"mat-icon",9),e._uU(32,"mode_edit"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(33,"div",14),e.TgZ(34,"div",15),e.TgZ(35,"small",16),e._uU(36),e.qZA(),e.TgZ(37,"small",17),e._uU(38),e.qZA(),e.qZA(),e.qZA(),e.TgZ(39,"div",18),e.YNc(40,Pe,5,3,"div",19),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.hij(" ",o.formInfo.FormTitle," "),e.xp6(2),e.Q6J("options",o.loading),e.xp6(1),e.Q6J("optionDisabled",!0)("optionSelectForce",o.dataModel.LinkSiteId)("optionPlaceholder","\u0633\u0627\u06cc\u062a"),e.xp6(1),e.Q6J("optionDisabled",!0)("optionSelectForce",o.dataModel.LinkUserId)("optionPlaceholder","\u06a9\u0627\u0631\u0628\u0631"),e.xp6(1),e.Q6J("optionDisabled",!0)("optionSelectForce",o.dataModel.LinkMemberUserId)("optionPlaceholder","\u0639\u0636\u0648"),e.xp6(4),e.Q6J("ngModel",o.dataModel.ModuleName),e.xp6(2),e.Q6J("ngIf",o.dataModel.ModuleName),e.xp6(6),e.Q6J("ngModel",o.dataModel.ModuleEntityName),e.xp6(2),e.Q6J("ngIf",o.dataModel.ModuleEntityName),e.xp6(6),e.Q6J("ngModel",o.dataModel.ModuleEntityId),e.xp6(2),e.Q6J("ngIf",o.dataModel.ModuleEntityId),e.xp6(6),e.hij("",o.formInfo.FormAlert," "),e.xp6(2),e.hij("",o.formInfo.FormError," "),e.xp6(2),e.Q6J("ngIf",o.formInfo.FormSubmitAllow))},directives:[m._Y,m.JL,m.F,I.O,q.P,j.g,G.a,w.KE,w.hX,V.Nt,m.Fj,m.JJ,m.On,g.O5,E.Hw,w.R9],pipes:[C.X$],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:yellow}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:black}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}"]}),i})();const Ge=["vform"];function Ve(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",5),e.TgZ(1,"button",10),e.NdJ("click",function(){return e.CHM(t),e.oxw().onFormCancel()}),e._UZ(2,"i",11),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.qZA()}2&i&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"ACTION.CANCEL")," "))}let $e=(()=>{class i{constructor(t,o,n,s,a,u,_,h){this.data=t,this.dialogRef=o,this.coreEnumService=n,this.coreModuleLogLikeService=s,this.cmsToastrService=a,this.tokenHelper=u,this.cdr=_,this.publicHelper=h,this.requestId="",this.tokenInfo=new r.OdC,this.loading=new S.O,this.dataModelResult=new r.y$4,this.dataModel=new r.ze2,this.formInfo=new r.LEF,this.dataModelEnumSendSmsStatusTypeResult=new r.y$4,this.fieldsInfo=new Map,this.fileManagerOpenForm=!1,this.loading.cdr=this.cdr,t&&(this.requestId=t.id+"")}ngOnInit(){if(this.formInfo.FormTitle="\u0645\u0634\u0627\u0647\u062f\u0647  ",0===this.requestId.length)return this.cmsToastrService.typeErrorComponentAction(),void this.dialogRef.close({dialogChangedDate:!1});this.DataGetOneContent(),this.tokenHelper.getCurrentToken().then(t=>{this.tokenInfo=t}),this.cmsApiStoreSubscribe=this.tokenHelper.getCurrentTokenOnChange().subscribe(t=>{this.tokenInfo=t}),this.getEnumSendSmsStatusType()}getEnumSendSmsStatusType(){this.coreEnumService.ServiceEnumSendSmsStatusType().subscribe(t=>{this.dataModelEnumSendSmsStatusTypeResult=t})}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}DataGetOneContent(){this.formInfo.FormAlert="\u062f\u0631 \u062f\u0631\u06cc\u0627\u0641\u062a \u0627\u0631\u0633\u0627\u0644 \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0627\u0632 \u0633\u0631\u0648\u0631",this.formInfo.FormError="";const t=this.constructor.name+"main";this.loading.Start(t),this.coreModuleLogLikeService.setAccessLoad(),this.coreModuleLogLikeService.ServiceGetOneById(this.requestId).subscribe(o=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(o.Access),this.dataModel=o.Item,o.IsSuccess?(this.formInfo.FormTitle=this.formInfo.FormTitle+" "+o.Item.Id,this.formInfo.FormAlert=""):(this.formInfo.FormAlert="\u0628\u0631\u0631\u0648\u0632 \u062e\u0637\u0627",this.formInfo.FormError=o.ErrorMessage,this.cmsToastrService.typeErrorMessage(o.ErrorMessage)),this.loading.Stop(t)},o=>{this.cmsToastrService.typeError(o),this.loading.Stop(t)})}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.WI),e.Y36(f.so),e.Y36(r.FLW),e.Y36(r.d7G),e.Y36(b.e),e.Y36(M.v),e.Y36(e.sBO),e.Y36(T.i))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-coremodulelog-report-abuse-view"]],viewQuery:function(t,o){if(1&t&&e.Gf(Ge,5),2&t){let n;e.iGM(n=e.CRH())&&(o.formGroup=n.first)}},decls:13,vars:7,consts:[[1,"ntk-cms-html-card-header"],[1,"ntk-cms-html-card-body"],[3,"options"],[3,"dataModel","optionMethod"],[1,"ntk-cms-html-card-message"],[1,"form-actions"],[1,"form-text","text-muted"],[1,"form-text","text-muted","danger"],[1,"ntk-cms-html-card-footer"],["class","form-actions",4,"ngIf"],["type","button",1,"btn","btn-light",3,"click"],[1,"ft-x"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e._uU(1),e.qZA(),e.TgZ(2,"div",1),e._UZ(3,"app-progress-spinner",2),e._UZ(4,"app-cms-json-list",3),e.qZA(),e.TgZ(5,"div",4),e.TgZ(6,"div",5),e.TgZ(7,"small",6),e._uU(8),e.qZA(),e.TgZ(9,"small",7),e._uU(10),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"div",8),e.YNc(12,Ve,5,3,"div",9),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",o.formInfo.FormTitle," "),e.xp6(2),e.Q6J("options",o.loading),e.xp6(1),e.Q6J("dataModel",o.dataModel)("optionMethod",1),e.xp6(4),e.hij("",o.formInfo.FormAlert," "),e.xp6(2),e.hij("",o.formInfo.FormError," "),e.xp6(2),e.Q6J("ngIf",o.formInfo.FormSubmitAllow))},directives:[I.O,U.v,g.O5],pipes:[C.X$],encapsulation:2}),i})();function We(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",37),e.NdJ("click",function(){return e.CHM(t),e.oxw().onActionbuttonViewRow()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"ACTION.VIEW")))}function ze(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",38),e.NdJ("click",function(){return e.CHM(t),e.oxw().onActionbuttonEditRow()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"ACTION.EDIT")))}function Xe(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",39),e.NdJ("click",function(){return e.CHM(t),e.oxw().onActionbuttonDeleteRow()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"ACTION.DELETE")))}function Ke(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",40),e.NdJ("click",function(){return e.CHM(t),e.oxw().onActionBackToParent()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"ACTION.BACK")))}function et(i,l){if(1&i&&(e.TgZ(0,"mat-header-cell",41),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.fieldsInfo.Id?null:t.fieldsInfo.Id.FieldTitle," ")}}function tt(i,l){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.hij(" ",t.Id," ")}}function ot(i,l){if(1&i&&(e.TgZ(0,"mat-header-cell",41),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.fieldsInfo.RecordStatus?null:t.fieldsInfo.RecordStatus.FieldTitle," ")}}function it(i,l){if(1&i&&(e.TgZ(0,"mat-cell"),e._UZ(1,"i",42),e.ALo(2,"statusClass"),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.Q6J("ngClass",e.lcZ(2,1,t.RecordStatus))}}function nt(i,l){if(1&i&&(e.TgZ(0,"mat-header-cell",41),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.fieldsInfo.LinkSiteId?null:t.fieldsInfo.LinkSiteId.FieldTitle," ")}}function lt(i,l){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.hij(" ",t.LinkSiteId," ")}}function st(i,l){if(1&i&&(e.TgZ(0,"mat-header-cell",41),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.fieldsInfo.LinkUserId?null:t.fieldsInfo.LinkUserId.FieldTitle," ")}}function rt(i,l){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.hij(" ",t.LinkUserId," ")}}function at(i,l){if(1&i&&(e.TgZ(0,"mat-header-cell",41),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.fieldsInfo.LinkMemberUserId?null:t.fieldsInfo.LinkMemberUserId.FieldTitle," ")}}function ct(i,l){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.hij(" ",t.LinkMemberUserId," ")}}function dt(i,l){if(1&i&&(e.TgZ(0,"mat-header-cell",41),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.fieldsInfo.ModuleName?null:t.fieldsInfo.ModuleName.FieldTitle," ")}}function ut(i,l){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.hij(" ",t.ModuleName," ")}}function mt(i,l){if(1&i&&(e.TgZ(0,"mat-header-cell",41),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.fieldsInfo.ModuleEntityName?null:t.fieldsInfo.ModuleEntityName.FieldTitle," ")}}function pt(i,l){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.hij(" ",t.ModuleEntityName," ")}}function _t(i,l){if(1&i&&(e.TgZ(0,"mat-header-cell",41),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.fieldsInfo.ModuleEntityId?null:t.fieldsInfo.ModuleEntityId.FieldTitle," ")}}function ht(i,l){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.hij(" ",t.ModuleEntityId," ")}}function gt(i,l){if(1&i&&(e.TgZ(0,"mat-header-cell",41),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.fieldsInfo.CreatedDate?null:t.fieldsInfo.CreatedDate.FieldTitle," ")}}function ft(i,l){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=l.$implicit,o=e.oxw();e.xp6(1),e.hij(" ",o.publicHelper.LocaleDate(t.CreatedDate)," ")}}function Ct(i,l){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"TITLE.OPTION")," "))}function St(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",47),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit;return e.oxw().onActionbuttonViewRow(n)}),e.TgZ(1,"mat-icon"),e._uU(2,"view"),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.qZA()}2&i&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"ACTION.VIEW")))}function bt(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",47),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit;return e.oxw().onActionbuttonEditRow(n)}),e.TgZ(1,"mat-icon"),e._uU(2,"mode_edit"),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.qZA()}2&i&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"ACTION.EDIT")))}function Mt(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",47),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit;return e.oxw().onActionbuttonDeleteRow(n)}),e.TgZ(1,"mat-icon"),e._uU(2,"delete_forever"),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.qZA()}2&i&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"ACTION.DELETE")))}function Tt(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",47),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit;return e.oxw().onActionbuttonViewUserRow(n)}),e.TgZ(1,"mat-icon"),e._uU(2,"supervisor_account"),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.qZA()}2&i&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"ACTION.USER")))}function At(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",47),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit;return e.oxw().onActionbuttonViewMemberRow(n)}),e.TgZ(1,"mat-icon"),e._uU(2,"assignment_ind"),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.qZA()}2&i&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"ACTION.MEMBER")))}function Lt(i,l){if(1&i&&(e.TgZ(0,"mat-cell",43),e.TgZ(1,"button",44),e.TgZ(2,"mat-icon"),e._uU(3,"more_vert"),e.qZA(),e.qZA(),e.TgZ(4,"mat-menu",null,45),e.YNc(6,St,6,3,"button",46),e.YNc(7,bt,6,3,"button",46),e.YNc(8,Mt,6,3,"button",46),e.YNc(9,Tt,6,3,"button",46),e.YNc(10,At,6,3,"button",46),e.qZA(),e.qZA()),2&i){const t=l.$implicit,o=e.MAs(5),n=e.oxw();e.xp6(1),e.Q6J("matMenuTriggerFor",o),e.xp6(5),e.Q6J("ngIf",n.dataModelResult.Access.AccessWatchRow),e.xp6(1),e.Q6J("ngIf",n.dataModelResult.Access.AccessEditRow),e.xp6(1),e.Q6J("ngIf",n.dataModelResult.Access.AccessDeleteRow),e.xp6(1),e.Q6J("ngIf",t.LinkUserId>0),e.xp6(1),e.Q6J("ngIf",t.LinkMemberUserId>0)}}function It(i,l){1&i&&e._UZ(0,"mat-header-row")}const wt=function(i){return{background:i}};function Zt(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",48),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw().onActionTableRowSelect(s)}),e.qZA()}if(2&i){const t=l.$implicit,o=e.oxw();e.Q6J("ngStyle",e.VKq(1,wt,t.Id===o.tableRowSelected.Id?"#d3d3da":""))}}const kt=function(){return[5,10,20,100]};let Rt=(()=>{class i{constructor(t,o,n,s,a,u,_,h,k,R,x){if(this.coreEnumService=t,this.coreModuleLogLikeService=o,this.publicHelper=n,this.cmsToastrService=s,this.cmsConfirmationDialogService=a,this.activatedRoute=u,this.tokenHelper=_,this.dialog=h,this.cdr=k,this.translate=R,this.router=x,this.requestLinkSiteId=0,this.requestLinkUserId=0,this.requestlinkMemberUserId=0,this.flag=!1,this.tableContentSelected=[],this.filteModelContent=new r.Hay,this.dataModelResult=new r.y$4,this.optionsSearch=new v.dj,this.optionsStatist=new N.TV,this.optionsExport=new y.zR,this.tokenInfo=new r.OdC,this.loading=new S.O,this.tableRowsSelected=[],this.tableRowSelected=new r.ze2,this.tableSource=new d.by,this.tabledisplayedColumns=["Id","LinkUserId","LinkSiteId","LinkMemberUserId","ModuleName","ModuleEntityName","ModuleEntityId","CreatedDate","Action"],this.fieldsInfo=new Map,this.loading.cdr=this.cdr,this.requestLinkSiteId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkSiteId")),this.requestLinkUserId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkUserId")),this.requestlinkMemberUserId=+Number(this.activatedRoute.snapshot.paramMap.get("linkMemberUserId")),this.requestLinkSiteId>0){const c=new r.AO3;c.PropertyName="LinkCmsSiteId",c.Value=this.requestLinkSiteId,this.filteModelContent.Filters.push(c)}if(this.requestLinkUserId>0){const c=new r.AO3;c.PropertyName="LinkUserId",c.Value=this.requestLinkUserId,this.filteModelContent.Filters.push(c)}if(this.requestlinkMemberUserId>0){const c=new r.AO3;c.PropertyName="linkMemberUserId",c.Value=this.requestlinkMemberUserId,this.filteModelContent.Filters.push(c)}this.optionsSearch.parentMethods={onSubmit:c=>this.onSubmitOptionsSearch(c)},this.optionsExport.parentMethods={onSubmit:c=>this.onSubmitOptionExport(c)},this.filteModelContent.SortColumn="CreatedDate",this.filteModelContent.SortType=r.oCf.Descending}ngOnInit(){this.filteModelContent.SortColumn="Id",this.filteModelContent.SortType=r.oCf.Descending,this.DataGetAll(),this.tokenHelper.getCurrentToken().then(t=>{this.tokenInfo=t}),this.cmsApiStoreSubscribe=this.tokenHelper.getCurrentTokenOnChange().subscribe(t=>{this.DataGetAll(),this.tokenInfo=t})}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}DataGetAll(){this.tableRowsSelected=[],this.tableRowSelected=new r.ze2;const t=this.constructor.name+"main";this.loading.Start(t),this.filteModelContent.AccessLoad=!0;const o=JSON.parse(JSON.stringify(this.filteModelContent));this.coreModuleLogLikeService.ServiceGetAllEditor(o).subscribe(n=>{n.IsSuccess&&(this.fieldsInfo=this.publicHelper.fieldInfoConvertor(n.Access),this.dataModelResult=n,this.tableSource.data=n.ListItems,this.tabledisplayedColumns=this.tokenInfo.UserAccessAdminAllowToAllData||this.tokenInfo.UserAccessAdminAllowToProfessionalData?this.publicHelper.listAddIfNotExist(this.tabledisplayedColumns,"LinkSiteId",0):this.publicHelper.listRemoveIfExist(this.tabledisplayedColumns,"LinkSiteId"),this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(n.Access)),this.loading.Stop(t)},n=>{this.cmsToastrService.typeError(n),this.loading.Stop(t)})}onTableSortData(t){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===t.active?"asc"===this.tableSource.sort.start?(t.start="desc",this.filteModelContent.SortColumn=t.active,this.filteModelContent.SortType=r.oCf.Descending):"desc"===this.tableSource.sort.start?(this.filteModelContent.SortColumn="",this.filteModelContent.SortType=r.oCf.Ascending):t.start="desc":(this.filteModelContent.SortColumn=t.active,this.filteModelContent.SortType=r.oCf.Ascending),this.tableSource.sort=t,this.filteModelContent.CurrentPageNumber=0,this.DataGetAll()}onTablePageingData(t){this.filteModelContent.CurrentPageNumber=t.pageIndex+1,this.filteModelContent.RowPerPage=t.pageSize,this.DataGetAll()}onActionbuttonViewRow(t=this.tableRowSelected){t&&t.Id&&0!==t.Id.length?(this.tableRowSelected=t,null!=this.dataModelResult&&null!=this.dataModelResult.Access&&this.dataModelResult.Access.AccessWatchRow?this.dialog.open($e,{height:"90%",data:{id:this.tableRowSelected.Id}}).afterClosed().subscribe(n=>{}):this.cmsToastrService.typeErrorAccessWatch()):this.cmsToastrService.typeErrorSelectedRow()}onActionbuttonEditRow(t=this.tableRowSelected){t&&t.Id&&0!==t.Id.length?(this.tableRowSelected=t,null!=this.dataModelResult&&null!=this.dataModelResult.Access&&this.dataModelResult.Access.AccessEditRow?this.dialog.open(je,{height:"90%",data:{id:this.tableRowSelected.Id}}).afterClosed().subscribe(n=>{n&&n.dialogChangedDate&&this.DataGetAll()}):this.cmsToastrService.typeErrorAccessEdit()):this.cmsToastrService.typeErrorSelectedRow()}onActionbuttonDeleteRow(t=this.tableRowSelected){if(!t||!t.Id||0===t.Id.length)return void this.cmsToastrService.typeErrorSelected("\u0631\u062f\u06cc\u0641\u06cc \u0628\u0631\u0627\u06cc \u062d\u0630\u0641 \u0627\u0646\u062a\u062e\u0627\u0628 \u0646\u0634\u062f\u0647 \u0627\u0633\u062a");if(this.tableRowSelected=t,null==this.dataModelResult||null==this.dataModelResult.Access||!this.dataModelResult.Access.AccessDeleteRow)return void this.cmsToastrService.typeErrorAccessDelete();const o=this.translate.instant("MESSAGE.Please_Confirm");this.cmsConfirmationDialogService.confirm(o,"\u0622\u06cc\u0627 \u0645\u0627\u06cc\u0644 \u0628\u0647 \u062d\u062f\u0641 \u0627\u06cc\u0646 \u0645\u062d\u062a\u0648\u0627 \u0645\u06cc \u0628\u0627\u0634\u06cc\u062f ?<br> ( "+this.tableRowSelected.Id+" ) ").then(s=>{if(s){const a=this.constructor.name+"main";this.loading.Start(a),this.coreModuleLogLikeService.ServiceDelete(this.tableRowSelected.Id).subscribe(u=>{u.IsSuccess?(this.cmsToastrService.typeSuccessRemove(),this.DataGetAll()):this.cmsToastrService.typeErrorRemove(),this.loading.Stop(a)},u=>{this.cmsToastrService.typeError(u),this.loading.Stop(a)})}}).catch(()=>{})}onActionbuttonStatist(){if(this.optionsStatist.data.show=!this.optionsStatist.data.show,!this.optionsStatist.data.show)return;const t=new Map;t.set("Active",0),t.set("All",0),this.coreModuleLogLikeService.ServiceGetCount(this.filteModelContent).subscribe(s=>{s.IsSuccess&&(t.set("All",s.TotalRowCount),this.optionsStatist.childMethods.setStatistValue(t))},s=>{this.cmsToastrService.typeError(s)});const o=JSON.parse(JSON.stringify(this.filteModelContent)),n=new r.AO3;n.PropertyName="RecordStatus",n.Value=r.FVU.Available,o.Filters.push(n),this.coreModuleLogLikeService.ServiceGetCount(o).subscribe(s=>{s.IsSuccess&&(t.set("Active",s.TotalRowCount),this.optionsStatist.childMethods.setStatistValue(t))},s=>{this.cmsToastrService.typeError(s)})}onActionbuttonViewUserRow(t=this.tableRowSelected){t&&t.Id&&0!==t.Id.length?(this.tableRowSelected=t,this.tableRowSelected.LinkUserId&&0!==this.tableRowSelected.LinkUserId?this.router.navigate(["/core/user/edit",this.tableRowSelected.LinkUserId]):this.cmsToastrService.typeErrorSelected("\u0645\u062d\u062a\u0648\u0627 \u0634\u0627\u0645\u0644 \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u06a9\u0627\u0631\u0628\u0631 \u0646\u0645\u06cc \u0628\u0627\u0634\u062f")):this.cmsToastrService.typeErrorSelectedRow()}onActionbuttonViewMemberRow(t=this.tableRowSelected){t&&t.Id&&0!==t.Id.length?(this.tableRowSelected=t,this.tableRowSelected.LinkMemberUserId&&0!==this.tableRowSelected.LinkMemberUserId?this.router.navigate(["/member/user/edit",this.tableRowSelected.LinkMemberUserId]):this.cmsToastrService.typeErrorSelected("\u0645\u062d\u062a\u0648\u0627 \u0634\u0627\u0645\u0644 \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0639\u0636\u0648 \u0646\u0645\u06cc \u0628\u0627\u0634\u062f")):this.cmsToastrService.typeErrorSelectedRow()}onActionbuttonViewSiteRow(t=this.tableRowSelected){t&&t.Id&&0!==t.Id.length?(this.tableRowSelected=t,this.tableRowSelected.LinkSiteId&&0!==this.tableRowSelected.LinkSiteId?this.router.navigate(["/core/site/edit",this.tableRowSelected.LinkSiteId]):this.cmsToastrService.typeErrorSelected("\u0645\u062d\u062a\u0648\u0627 \u0634\u0627\u0645\u0644 \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0633\u0627\u06cc\u062a \u0646\u0645\u06cc \u0628\u0627\u0634\u062f")):this.cmsToastrService.typeErrorSelectedRow()}onActionbuttonExport(){this.optionsExport.data.show=!this.optionsExport.data.show,this.optionsExport.childMethods.setExportFilterModel(this.filteModelContent)}onSubmitOptionExport(t){const o=new Map;o.set("Download","loading ... "),this.coreModuleLogLikeService.ServiceExportFile(t).subscribe(n=>{n.IsSuccess&&(o.set("Download",n.LinkFile),this.optionsExport.childMethods.setExportLinkFile(o))},n=>{this.cmsToastrService.typeError(n)})}onActionbuttonReload(){this.DataGetAll()}onSubmitOptionsSearch(t){this.filteModelContent.Filters=t,this.DataGetAll()}onActionTableRowSelect(t){this.tableRowSelected=t}onActionBackToParent(){this.router.navigate(["/core/site/"])}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(r.FLW),e.Y36(r.d7G),e.Y36(T.i),e.Y36(b.e),e.Y36(F.s),e.Y36(L.gz),e.Y36(M.v),e.Y36(f.uw),e.Y36(e.sBO),e.Y36(C.sK),e.Y36(L.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-coremodulelog-like-list"]],decls:67,vars:30,consts:[[3,"optionLoading","optionTreeDisplay"],["cms-tree",""],["cms-header",""],["cms-action",""],["type","button","class","btn btn-outline-secondary BTN","data-toggle","modal","data-target","#categoryModal",3,"click",4,"ngIf"],["type","button","class","btn btn-outline-warning","data-toggle","modal","data-target","#categoryModal",3,"click",4,"ngIf"],["type","button","class","btn btn-outline-danger",3,"click",4,"ngIf"],[1,"btn","btn-outline-info","btn-sm","BTN"],[3,"ngModel","ngModelChange"],[3,"click"],["type","button",1,"btn","btn-outline-secondary","BTN",3,"click"],[2,"font-size","20px","margin","-1px",3,"title"],["type","button","class","btn btn-outline-success BTN",3,"click",4,"ngIf"],["cms-action-area",""],[3,"options","optionsChange"],["cms-body",""],["matSort","",3,"dataSource","matSortChange"],["tableSort","matSort"],["matColumnDef","Id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","RecordStatus"],["matColumnDef","LinkSiteId"],["matColumnDef","LinkUserId"],["matColumnDef","LinkMemberUserId"],["matColumnDef","ModuleName"],["matColumnDef","ModuleEntityName"],["matColumnDef","ModuleEntityId"],["matColumnDef","CreatedDate"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class"," Action",4,"matCellDef"],[4,"matHeaderRowDef"],[3,"ngStyle","click",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"length","pageIndex","pageSize","pageSizeOptions","page"],["paginator",""],["type","button","data-toggle","modal","data-target","#categoryModal",1,"btn","btn-outline-secondary","BTN",3,"click"],["type","button","data-toggle","modal","data-target","#categoryModal",1,"btn","btn-outline-warning",3,"click"],["type","button",1,"btn","btn-outline-danger",3,"click"],["type","button",1,"btn","btn-outline-success","BTN",3,"click"],["mat-sort-header",""],[3,"ngClass"],[1,"Action"],["mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],["actionMenu","matMenu"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","",3,"click"],[3,"ngStyle","click"]],template:function(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"app-cms-html-list",0),e.ynx(1,1),e._uU(2," -------------------------------------- "),e.BQk(),e.GkF(3,2),e.ynx(4,3),e.YNc(5,We,3,3,"button",4),e.YNc(6,ze,3,3,"button",5),e.YNc(7,Xe,3,3,"button",6),e.TgZ(8,"a",7),e.TgZ(9,"mat-slide-toggle",8),e.NdJ("ngModelChange",function(a){return o.optionsSearch.data.show=a}),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.qZA(),e.TgZ(12,"a",7),e.TgZ(13,"mat-slide-toggle",9),e.NdJ("click",function(){return o.onActionbuttonStatist()}),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.qZA(),e.TgZ(16,"a",7),e.TgZ(17,"mat-slide-toggle",9),e.NdJ("click",function(){return o.onActionbuttonExport()}),e._uU(18),e.ALo(19,"translate"),e.qZA(),e.qZA(),e.TgZ(20,"button",10),e.NdJ("click",function(){return o.onActionbuttonReload()}),e.TgZ(21,"mat-icon",11),e.ALo(22,"translate"),e._uU(23,"refresh"),e.qZA(),e.qZA(),e.YNc(24,Ke,3,3,"button",12),e.BQk(),e.ynx(25,13),e.TgZ(26,"app-cms-search-list",14),e.NdJ("optionsChange",function(a){return o.optionsSearch=a}),e.qZA(),e.TgZ(27,"app-cms-export-list",14),e.NdJ("optionsChange",function(a){return o.optionsExport=a}),e.qZA(),e.TgZ(28,"app-cms-statist-list",14),e.NdJ("optionsChange",function(a){return o.optionsStatist=a}),e.qZA(),e.BQk(),e.ynx(29,15),e.TgZ(30,"mat-table",16,17),e.NdJ("matSortChange",function(){e.CHM(n);const a=e.MAs(31);return o.onTableSortData(a)}),e.ynx(32,18),e.YNc(33,et,2,1,"mat-header-cell",19),e.YNc(34,tt,2,1,"mat-cell",20),e.BQk(),e.ynx(35,21),e.YNc(36,ot,2,1,"mat-header-cell",19),e.YNc(37,it,3,3,"mat-cell",20),e.BQk(),e.ynx(38,22),e.YNc(39,nt,2,1,"mat-header-cell",19),e.YNc(40,lt,2,1,"mat-cell",20),e.BQk(),e.ynx(41,23),e.YNc(42,st,2,1,"mat-header-cell",19),e.YNc(43,rt,2,1,"mat-cell",20),e.BQk(),e.ynx(44,24),e.YNc(45,at,2,1,"mat-header-cell",19),e.YNc(46,ct,2,1,"mat-cell",20),e.BQk(),e.ynx(47,25),e.YNc(48,dt,2,1,"mat-header-cell",19),e.YNc(49,ut,2,1,"mat-cell",20),e.BQk(),e.ynx(50,26),e.YNc(51,mt,2,1,"mat-header-cell",19),e.YNc(52,pt,2,1,"mat-cell",20),e.BQk(),e.ynx(53,27),e.YNc(54,_t,2,1,"mat-header-cell",19),e.YNc(55,ht,2,1,"mat-cell",20),e.BQk(),e.ynx(56,28),e.YNc(57,gt,2,1,"mat-header-cell",19),e.YNc(58,ft,2,1,"mat-cell",20),e.BQk(),e.ynx(59,29),e.YNc(60,Ct,3,3,"mat-header-cell",30),e.YNc(61,Lt,11,6,"mat-cell",31),e.BQk(),e.YNc(62,It,1,0,"mat-header-row",32),e.YNc(63,Zt,1,3,"mat-row",33),e.qZA(),e.BQk(),e.ynx(64,34),e.TgZ(65,"mat-paginator",35,36),e.NdJ("page",function(a){return o.onTablePageingData(a)}),e.qZA(),e.BQk(),e.qZA()}2&t&&(e.Q6J("optionLoading",o.loading)("optionTreeDisplay",!1),e.xp6(5),e.Q6J("ngIf",o.dataModelResult.Access.AccessWatchRow&&(null==o.tableRowSelected||null==o.tableRowSelected.Id?null:o.tableRowSelected.Id.length)>0),e.xp6(1),e.Q6J("ngIf",o.dataModelResult.Access.AccessEditRow&&(null==o.tableRowSelected||null==o.tableRowSelected.Id?null:o.tableRowSelected.Id.length)>0),e.xp6(1),e.Q6J("ngIf",o.dataModelResult.Access.AccessDeleteRow&&(null==o.tableRowSelected||null==o.tableRowSelected.Id?null:o.tableRowSelected.Id.length)>0),e.xp6(2),e.Q6J("ngModel",o.optionsSearch.data.show),e.xp6(1),e.Oqu(e.lcZ(11,21,"ACTION.SEARCH")),e.xp6(4),e.hij("",e.lcZ(15,23,"ACTION.STATIST")," "),e.xp6(4),e.hij("",e.lcZ(19,25,"ACTION.EXPORTFILE")," "),e.xp6(3),e.s9C("title",e.lcZ(22,27,"ACTION.RELOAD")),e.xp6(3),e.Q6J("ngIf",o.requestLinkSiteId>0),e.xp6(2),e.Q6J("options",o.optionsSearch),e.xp6(1),e.Q6J("options",o.optionsExport),e.xp6(1),e.Q6J("options",o.optionsStatist),e.xp6(2),e.Q6J("dataSource",o.tableSource),e.xp6(32),e.Q6J("matHeaderRowDef",o.tabledisplayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",o.tabledisplayedColumns),e.xp6(2),e.Q6J("length",o.dataModelResult.TotalRowCount)("pageIndex",o.dataModelResult.CurrentPageNumber-1)("pageSize",o.dataModelResult.RowPerPage)("pageSizeOptions",e.DdM(29,kt)))},directives:[O.Z,g.O5,D.Rr,m.JJ,m.On,E.Hw,J.y,Y.Z,B.q,d.BZ,Z.YE,d.w1,d.fO,d.ge,Z.nU,d.Dz,d.ev,g.mk,Q.lW,A.p6,A.VK,A.OP,d.as,d.XQ,d.nj,d.Gk,g.PC,H.NW],pipes:[C.X$,P.b],encapsulation:2}),i})();const xt=["vform"];function Et(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"mat-icon",26),e.NdJ("click",function(){return e.CHM(t),e.oxw().dataModel.ModuleName=""}),e._uU(1,"close"),e.qZA()}}function vt(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"mat-icon",26),e.NdJ("click",function(){return e.CHM(t),e.oxw().dataModel.ModuleEntityName=null}),e._uU(1,"close"),e.qZA()}}function yt(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"mat-icon",26),e.NdJ("click",function(){return e.CHM(t),e.oxw().dataModel.ModuleEntityId=null}),e._uU(1,"close"),e.qZA()}}function Nt(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"mat-icon",26),e.NdJ("click",function(){return e.CHM(t),e.oxw().dataModel.SubjectBody=null}),e._uU(1,"close"),e.qZA()}}function qt(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"mat-icon",26),e.NdJ("click",function(){return e.CHM(t),e.oxw().dataModel.AdminResultProcess=null}),e._uU(1,"close"),e.qZA()}}function Ut(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"mat-icon",26),e.NdJ("click",function(){return e.CHM(t),e.oxw().dataModel.SubjectUrl=null}),e._uU(1,"close"),e.qZA()}}function Ft(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",21),e.TgZ(1,"button",27),e.NdJ("click",function(){return e.CHM(t),e.oxw().onFormCancel()}),e._UZ(2,"i",28),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.qZA()}2&i&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"ACTION.CANCEL")," "))}let Ot=(()=>{class i{constructor(t,o,n,s,a,u,_,h){this.data=t,this.dialogRef=o,this.coreEnumService=n,this.coreModuleLogReportAbuseService=s,this.cmsToastrService=a,this.tokenHelper=u,this.cdr=_,this.publicHelper=h,this.requestId="",this.tokenInfo=new r.OdC,this.loading=new S.O,this.dataModelResult=new r.y$4,this.dataModel=new r.dB3,this.formInfo=new r.LEF,this.fieldsInfo=new Map,this.fileManagerOpenForm=!1,this.loading.cdr=this.cdr,t&&(this.requestId=t.id)}ngOnInit(){if(!(this.requestId&&this.requestId.length>0))return this.cmsToastrService.typeErrorComponentAction(),void this.dialogRef.close({dialogChangedDate:!1});this.formInfo.FormTitle="\u0648\u06cc\u0631\u0627\u06cc\u0634  ",this.DataGetOneContent(),this.tokenHelper.getCurrentToken().then(t=>{this.tokenInfo=t}),this.cmsApiStoreSubscribe=this.tokenHelper.getCurrentTokenOnChange().subscribe(t=>{this.tokenInfo=t})}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}DataGetOneContent(){if(!this.requestId||0===this.requestId.length)return void this.cmsToastrService.typeErrorEditRowIsNull();this.formInfo.FormAlert="\u062f\u0631 \u062f\u0631\u06cc\u0627\u0641\u062a \u0627\u0631\u0633\u0627\u0644 \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0627\u0632 \u0633\u0631\u0648\u0631",this.formInfo.FormError="";const t=this.constructor.name+"main";this.loading.Start(t),this.coreModuleLogReportAbuseService.setAccessLoad(),this.coreModuleLogReportAbuseService.ServiceGetOneById(this.requestId).subscribe(o=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(o.Access),this.dataModel=o.Item,o.IsSuccess?(this.formInfo.FormTitle=this.formInfo.FormTitle+" "+o.Item.Id,this.formInfo.FormAlert=""):(this.formInfo.FormAlert="\u0628\u0631\u0631\u0648\u0632 \u062e\u0637\u0627",this.formInfo.FormError=o.ErrorMessage,this.cmsToastrService.typeErrorMessage(o.ErrorMessage)),this.loading.Stop(t)},o=>{this.cmsToastrService.typeError(o),this.loading.Stop(t)})}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.WI),e.Y36(f.so),e.Y36(r.FLW),e.Y36(r._Zd),e.Y36(b.e),e.Y36(M.v),e.Y36(e.sBO),e.Y36(T.i))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-coremodulelog-report-abuse-edit"]],viewQuery:function(t,o){if(1&t&&e.Gf(xt,5),2&t){let n;e.iGM(n=e.CRH())&&(o.formGroup=n.first)}},decls:65,vars:26,consts:[["vform","ngForm"],[1,"ntk-cms-html-card-header"],[1,"ntk-cms-html-card-body"],[3,"options"],[3,"optionDisabled","optionSelectForce","optionPlaceholder"],[1,"ntk-full-width"],["matInput","","name","dataModel.ModuleName","type","text","placeholder","ModuleName",3,"ngModel","ngModelChange"],["ModuleName",""],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matSuffix",""],["matInput","","name","dataModel.ModuleEntityName","type","text","placeholder","ModuleEntityName",3,"ngModel","ngModelChange"],["ModuleEntityName",""],["matInput","","name","dataModel.ModuleEntityId","type","text","placeholder","ModuleEntityId",3,"ngModel","ngModelChange"],["ModuleEntityId",""],["matInput","","name","dataModel.SubjectBody","type","text","placeholder","SubjectBody",3,"ngModel","ngModelChange"],["SubjectBody",""],["matInput","","name","dataModel.AdminResultProcess","type","text","placeholder","AdminResultProcess",3,"ngModel","ngModelChange"],["AdminResultProcess",""],["matInput","","name","dataModel.SubjectUrl","type","text","placeholder","SubjectUrl",3,"ngModel","ngModelChange"],["SubjectUrl",""],[1,"ntk-cms-html-card-message"],[1,"form-actions"],[1,"form-text","text-muted"],[1,"form-text","text-muted","danger"],[1,"ntk-cms-html-card-footer"],["class","form-actions",4,"ngIf"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["type","button",1,"btn","btn-light",3,"click"],[1,"ft-x"]],template:function(t,o){1&t&&(e.TgZ(0,"form",null,0),e.TgZ(2,"div",1),e._uU(3),e.qZA(),e.TgZ(4,"div",2),e._UZ(5,"app-progress-spinner",3),e._UZ(6,"app-cms-site-selector",4),e._UZ(7,"app-cms-user-selector",4),e._UZ(8,"app-cms-member-selector",4),e.TgZ(9,"mat-form-field",5),e.TgZ(10,"mat-label"),e._uU(11,"ModuleName"),e.qZA(),e.TgZ(12,"input",6,7),e.NdJ("ngModelChange",function(s){return o.dataModel.ModuleName=s}),e.qZA(),e.YNc(14,Et,2,0,"mat-icon",8),e.TgZ(15,"mat-icon",9),e._uU(16,"mode_edit"),e.qZA(),e.qZA(),e.TgZ(17,"mat-form-field",5),e.TgZ(18,"mat-label"),e._uU(19,"ModuleEntityName"),e.qZA(),e.TgZ(20,"input",10,11),e.NdJ("ngModelChange",function(s){return o.dataModel.ModuleEntityName=s}),e.qZA(),e.YNc(22,vt,2,0,"mat-icon",8),e.TgZ(23,"mat-icon",9),e._uU(24,"mode_edit"),e.qZA(),e.qZA(),e.TgZ(25,"mat-form-field",5),e.TgZ(26,"mat-label"),e._uU(27,"ModuleEntityId"),e.qZA(),e.TgZ(28,"input",12,13),e.NdJ("ngModelChange",function(s){return o.dataModel.ModuleEntityId=s}),e.qZA(),e.YNc(30,yt,2,0,"mat-icon",8),e.TgZ(31,"mat-icon",9),e._uU(32,"mode_edit"),e.qZA(),e.qZA(),e.TgZ(33,"mat-form-field",5),e.TgZ(34,"mat-label"),e._uU(35,"SubjectBody"),e.qZA(),e.TgZ(36,"textarea",14,15),e.NdJ("ngModelChange",function(s){return o.dataModel.SubjectBody=s}),e.qZA(),e.YNc(38,Nt,2,0,"mat-icon",8),e.TgZ(39,"mat-icon",9),e._uU(40,"mode_edit"),e.qZA(),e.qZA(),e.TgZ(41,"mat-form-field",5),e.TgZ(42,"mat-label"),e._uU(43,"AdminResultProcess"),e.qZA(),e.TgZ(44,"textarea",16,17),e.NdJ("ngModelChange",function(s){return o.dataModel.AdminResultProcess=s}),e.qZA(),e.YNc(46,qt,2,0,"mat-icon",8),e.TgZ(47,"mat-icon",9),e._uU(48,"mode_edit"),e.qZA(),e.qZA(),e.TgZ(49,"mat-form-field",5),e.TgZ(50,"mat-label"),e._uU(51,"SubjectUrl"),e.qZA(),e.TgZ(52,"textarea",18,19),e.NdJ("ngModelChange",function(s){return o.dataModel.SubjectUrl=s}),e.qZA(),e.YNc(54,Ut,2,0,"mat-icon",8),e.TgZ(55,"mat-icon",9),e._uU(56,"mode_edit"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(57,"div",20),e.TgZ(58,"div",21),e.TgZ(59,"small",22),e._uU(60),e.qZA(),e.TgZ(61,"small",23),e._uU(62),e.qZA(),e.qZA(),e.qZA(),e.TgZ(63,"div",24),e.YNc(64,Ft,5,3,"div",25),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.hij(" ",o.formInfo.FormTitle," "),e.xp6(2),e.Q6J("options",o.loading),e.xp6(1),e.Q6J("optionDisabled",!0)("optionSelectForce",o.dataModel.LinkSiteId)("optionPlaceholder","\u0633\u0627\u06cc\u062a"),e.xp6(1),e.Q6J("optionDisabled",!0)("optionSelectForce",o.dataModel.LinkUserId)("optionPlaceholder","\u06a9\u0627\u0631\u0628\u0631"),e.xp6(1),e.Q6J("optionDisabled",!0)("optionSelectForce",o.dataModel.LinkMemberUserId)("optionPlaceholder","\u0639\u0636\u0648"),e.xp6(4),e.Q6J("ngModel",o.dataModel.ModuleName),e.xp6(2),e.Q6J("ngIf",o.dataModel.ModuleName),e.xp6(6),e.Q6J("ngModel",o.dataModel.ModuleEntityName),e.xp6(2),e.Q6J("ngIf",o.dataModel.ModuleEntityName),e.xp6(6),e.Q6J("ngModel",o.dataModel.ModuleEntityId),e.xp6(2),e.Q6J("ngIf",o.dataModel.ModuleEntityId),e.xp6(6),e.Q6J("ngModel",o.dataModel.SubjectBody),e.xp6(2),e.Q6J("ngIf",o.dataModel.SubjectBody),e.xp6(6),e.Q6J("ngModel",o.dataModel.AdminResultProcess),e.xp6(2),e.Q6J("ngIf",o.dataModel.AdminResultProcess),e.xp6(6),e.Q6J("ngModel",o.dataModel.SubjectUrl),e.xp6(2),e.Q6J("ngIf",o.dataModel.SubjectUrl),e.xp6(6),e.hij("",o.formInfo.FormAlert," "),e.xp6(2),e.hij("",o.formInfo.FormError," "),e.xp6(2),e.Q6J("ngIf",o.formInfo.FormSubmitAllow))},directives:[m._Y,m.JL,m.F,I.O,q.P,j.g,G.a,w.KE,w.hX,V.Nt,m.Fj,m.JJ,m.On,g.O5,E.Hw,w.R9],pipes:[C.X$],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:yellow}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:black}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}"]}),i})();const Dt=["vform"];function Jt(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",5),e.TgZ(1,"button",10),e.NdJ("click",function(){return e.CHM(t),e.oxw().onFormCancel()}),e._UZ(2,"i",11),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.qZA()}2&i&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"ACTION.CANCEL")," "))}let Yt=(()=>{class i{constructor(t,o,n,s,a,u,_,h){this.data=t,this.dialogRef=o,this.coreEnumService=n,this.coreModuleLogReportAbuseService=s,this.cmsToastrService=a,this.tokenHelper=u,this.cdr=_,this.publicHelper=h,this.requestId="",this.tokenInfo=new r.OdC,this.loading=new S.O,this.dataModelResult=new r.y$4,this.dataModel=new r.dB3,this.formInfo=new r.LEF,this.dataModelEnumSendSmsStatusTypeResult=new r.y$4,this.fieldsInfo=new Map,this.fileManagerOpenForm=!1,this.loading.cdr=this.cdr,t&&(this.requestId=t.id+"")}ngOnInit(){if(this.formInfo.FormTitle="\u0645\u0634\u0627\u0647\u062f\u0647  ",0===this.requestId.length)return this.cmsToastrService.typeErrorComponentAction(),void this.dialogRef.close({dialogChangedDate:!1});this.DataGetOneContent(),this.tokenHelper.getCurrentToken().then(t=>{this.tokenInfo=t}),this.cmsApiStoreSubscribe=this.tokenHelper.getCurrentTokenOnChange().subscribe(t=>{this.tokenInfo=t}),this.getEnumSendSmsStatusType()}getEnumSendSmsStatusType(){this.coreEnumService.ServiceEnumSendSmsStatusType().subscribe(t=>{this.dataModelEnumSendSmsStatusTypeResult=t})}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}DataGetOneContent(){this.formInfo.FormAlert="\u062f\u0631 \u062f\u0631\u06cc\u0627\u0641\u062a \u0627\u0631\u0633\u0627\u0644 \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0627\u0632 \u0633\u0631\u0648\u0631",this.formInfo.FormError="";const t=this.constructor.name+"main";this.loading.Start(t),this.coreModuleLogReportAbuseService.setAccessLoad(),this.coreModuleLogReportAbuseService.ServiceGetOneById(this.requestId).subscribe(o=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(o.Access),this.dataModel=o.Item,o.IsSuccess?(this.formInfo.FormTitle=this.formInfo.FormTitle+" "+o.Item.Id,this.formInfo.FormAlert=""):(this.formInfo.FormAlert="\u0628\u0631\u0631\u0648\u0632 \u062e\u0637\u0627",this.formInfo.FormError=o.ErrorMessage,this.cmsToastrService.typeErrorMessage(o.ErrorMessage)),this.loading.Stop(t)},o=>{this.cmsToastrService.typeError(o),this.loading.Stop(t)})}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.WI),e.Y36(f.so),e.Y36(r.FLW),e.Y36(r._Zd),e.Y36(b.e),e.Y36(M.v),e.Y36(e.sBO),e.Y36(T.i))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-coremodulelog-report-abuse-view"]],viewQuery:function(t,o){if(1&t&&e.Gf(Dt,5),2&t){let n;e.iGM(n=e.CRH())&&(o.formGroup=n.first)}},decls:13,vars:7,consts:[[1,"ntk-cms-html-card-header"],[1,"ntk-cms-html-card-body"],[3,"options"],[3,"dataModel","optionMethod"],[1,"ntk-cms-html-card-message"],[1,"form-actions"],[1,"form-text","text-muted"],[1,"form-text","text-muted","danger"],[1,"ntk-cms-html-card-footer"],["class","form-actions",4,"ngIf"],["type","button",1,"btn","btn-light",3,"click"],[1,"ft-x"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e._uU(1),e.qZA(),e.TgZ(2,"div",1),e._UZ(3,"app-progress-spinner",2),e._UZ(4,"app-cms-json-list",3),e.qZA(),e.TgZ(5,"div",4),e.TgZ(6,"div",5),e.TgZ(7,"small",6),e._uU(8),e.qZA(),e.TgZ(9,"small",7),e._uU(10),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"div",8),e.YNc(12,Jt,5,3,"div",9),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",o.formInfo.FormTitle," "),e.xp6(2),e.Q6J("options",o.loading),e.xp6(1),e.Q6J("dataModel",o.dataModel)("optionMethod",1),e.xp6(4),e.hij("",o.formInfo.FormAlert," "),e.xp6(2),e.hij("",o.formInfo.FormError," "),e.xp6(2),e.Q6J("ngIf",o.formInfo.FormSubmitAllow))},directives:[I.O,U.v,g.O5],pipes:[C.X$],encapsulation:2}),i})();function Bt(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",39),e.NdJ("click",function(){return e.CHM(t),e.oxw().onActionbuttonViewRow()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"ACTION.VIEW")))}function Qt(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",40),e.NdJ("click",function(){return e.CHM(t),e.oxw().onActionbuttonEditRow()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"ACTION.EDIT")))}function Ht(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",41),e.NdJ("click",function(){return e.CHM(t),e.oxw().onActionbuttonDeleteRow()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"ACTION.DELETE")))}function Pt(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",42),e.NdJ("click",function(){return e.CHM(t),e.oxw().onActionBackToParent()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"ACTION.BACK")))}function jt(i,l){if(1&i&&(e.TgZ(0,"mat-header-cell",43),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.fieldsInfo.Id?null:t.fieldsInfo.Id.FieldTitle," ")}}function Gt(i,l){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.hij(" ",t.Id," ")}}function Vt(i,l){if(1&i&&(e.TgZ(0,"mat-header-cell",43),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.fieldsInfo.RecordStatus?null:t.fieldsInfo.RecordStatus.FieldTitle," ")}}function $t(i,l){if(1&i&&(e.TgZ(0,"mat-cell"),e._UZ(1,"i",44),e.ALo(2,"statusClass"),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.Q6J("ngClass",e.lcZ(2,1,t.RecordStatus))}}function Wt(i,l){if(1&i&&(e.TgZ(0,"mat-header-cell",43),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.fieldsInfo.LinkSiteId?null:t.fieldsInfo.LinkSiteId.FieldTitle," ")}}function zt(i,l){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.hij(" ",t.LinkSiteId," ")}}function Xt(i,l){if(1&i&&(e.TgZ(0,"mat-header-cell",43),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.fieldsInfo.LinkUserId?null:t.fieldsInfo.LinkUserId.FieldTitle," ")}}function Kt(i,l){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.hij(" ",t.LinkUserId," ")}}function eo(i,l){if(1&i&&(e.TgZ(0,"mat-header-cell",43),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.fieldsInfo.LinkMemberUserId?null:t.fieldsInfo.LinkMemberUserId.FieldTitle," ")}}function to(i,l){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.hij(" ",t.LinkMemberUserId," ")}}function oo(i,l){if(1&i&&(e.TgZ(0,"mat-header-cell",43),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.fieldsInfo.ModuleName?null:t.fieldsInfo.ModuleName.FieldTitle," ")}}function io(i,l){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.hij(" ",t.ModuleName," ")}}function no(i,l){if(1&i&&(e.TgZ(0,"mat-header-cell",43),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.fieldsInfo.ModuleEntityName?null:t.fieldsInfo.ModuleEntityName.FieldTitle," ")}}function lo(i,l){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.hij(" ",t.ModuleEntityName," ")}}function so(i,l){if(1&i&&(e.TgZ(0,"mat-header-cell",43),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.fieldsInfo.ModuleEntityId?null:t.fieldsInfo.ModuleEntityId.FieldTitle," ")}}function ro(i,l){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.hij(" ",t.ModuleEntityId," ")}}function ao(i,l){if(1&i&&(e.TgZ(0,"mat-header-cell",43),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.fieldsInfo.SubjectBody?null:t.fieldsInfo.SubjectBody.FieldTitle," ")}}function co(i,l){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.hij(" ",t.SubjectBody," ")}}function uo(i,l){if(1&i&&(e.TgZ(0,"mat-header-cell",43),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.fieldsInfo.AdminResultProcess?null:t.fieldsInfo.AdminResultProcess.FieldTitle," ")}}function mo(i,l){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.hij(" ",t.AdminResultProcess," ")}}function po(i,l){if(1&i&&(e.TgZ(0,"mat-header-cell",43),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.fieldsInfo.CreatedDate?null:t.fieldsInfo.CreatedDate.FieldTitle," ")}}function _o(i,l){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=l.$implicit,o=e.oxw();e.xp6(1),e.hij(" ",o.publicHelper.LocaleDate(t.CreatedDate)," ")}}function ho(i,l){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"TITLE.OPTION")," "))}function go(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",49),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit;return e.oxw().onActionbuttonViewRow(n)}),e.TgZ(1,"mat-icon"),e._uU(2,"view"),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.qZA()}2&i&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"ACTION.VIEW")))}function fo(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",49),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit;return e.oxw().onActionbuttonEditRow(n)}),e.TgZ(1,"mat-icon"),e._uU(2,"mode_edit"),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.qZA()}2&i&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"ACTION.EDIT")))}function Co(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",49),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit;return e.oxw().onActionbuttonDeleteRow(n)}),e.TgZ(1,"mat-icon"),e._uU(2,"delete_forever"),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.qZA()}2&i&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"ACTION.DELETE")))}function So(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",49),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit;return e.oxw().onActionbuttonViewUserRow(n)}),e.TgZ(1,"mat-icon"),e._uU(2,"supervisor_account"),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.qZA()}2&i&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"ACTION.USER")))}function bo(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",49),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit;return e.oxw().onActionbuttonViewMemberRow(n)}),e.TgZ(1,"mat-icon"),e._uU(2,"assignment_ind"),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.qZA()}2&i&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"ACTION.MEMBER")))}function Mo(i,l){if(1&i&&(e.TgZ(0,"mat-cell",45),e.TgZ(1,"button",46),e.TgZ(2,"mat-icon"),e._uU(3,"more_vert"),e.qZA(),e.qZA(),e.TgZ(4,"mat-menu",null,47),e.YNc(6,go,6,3,"button",48),e.YNc(7,fo,6,3,"button",48),e.YNc(8,Co,6,3,"button",48),e.YNc(9,So,6,3,"button",48),e.YNc(10,bo,6,3,"button",48),e.qZA(),e.qZA()),2&i){const t=l.$implicit,o=e.MAs(5),n=e.oxw();e.xp6(1),e.Q6J("matMenuTriggerFor",o),e.xp6(5),e.Q6J("ngIf",n.dataModelResult.Access.AccessWatchRow),e.xp6(1),e.Q6J("ngIf",n.dataModelResult.Access.AccessEditRow),e.xp6(1),e.Q6J("ngIf",n.dataModelResult.Access.AccessDeleteRow),e.xp6(1),e.Q6J("ngIf",t.LinkUserId>0),e.xp6(1),e.Q6J("ngIf",t.LinkMemberUserId>0)}}function To(i,l){1&i&&e._UZ(0,"mat-header-row")}const Ao=function(i){return{background:i}};function Lo(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",50),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw().onActionTableRowSelect(s)}),e.qZA()}if(2&i){const t=l.$implicit,o=e.oxw();e.Q6J("ngStyle",e.VKq(1,Ao,t.Id===o.tableRowSelected.Id?"#d3d3da":""))}}const Io=function(){return[5,10,20,100]};let wo=(()=>{class i{constructor(t,o,n,s,a,u,_,h,k,R,x){if(this.coreEnumService=t,this.coreModuleLogReportAbuseService=o,this.publicHelper=n,this.cmsToastrService=s,this.cmsConfirmationDialogService=a,this.activatedRoute=u,this.tokenHelper=_,this.dialog=h,this.cdr=k,this.translate=R,this.router=x,this.requestLinkSiteId=0,this.requestLinkUserId=0,this.requestlinkMemberUserId=0,this.flag=!1,this.tableContentSelected=[],this.filteModelContent=new r.Hay,this.dataModelResult=new r.y$4,this.optionsSearch=new v.dj,this.optionsStatist=new N.TV,this.optionsExport=new y.zR,this.tokenInfo=new r.OdC,this.loading=new S.O,this.tableRowsSelected=[],this.tableRowSelected=new r.dB3,this.tableSource=new d.by,this.tabledisplayedColumns=["Id","LinkUserId","LinkSiteId","LinkMemberUserId","ModuleName","ModuleEntityName","ModuleEntityId","SubjectBody","AdminResultProcess","CreatedDate","Action"],this.fieldsInfo=new Map,this.loading.cdr=this.cdr,this.requestLinkSiteId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkSiteId")),this.requestLinkUserId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkUserId")),this.requestlinkMemberUserId=+Number(this.activatedRoute.snapshot.paramMap.get("linkMemberUserId")),this.requestLinkSiteId>0){const c=new r.AO3;c.PropertyName="LinkCmsSiteId",c.Value=this.requestLinkSiteId,this.filteModelContent.Filters.push(c)}if(this.requestLinkUserId>0){const c=new r.AO3;c.PropertyName="LinkUserId",c.Value=this.requestLinkUserId,this.filteModelContent.Filters.push(c)}if(this.requestlinkMemberUserId>0){const c=new r.AO3;c.PropertyName="linkMemberUserId",c.Value=this.requestlinkMemberUserId,this.filteModelContent.Filters.push(c)}this.optionsSearch.parentMethods={onSubmit:c=>this.onSubmitOptionsSearch(c)},this.optionsExport.parentMethods={onSubmit:c=>this.onSubmitOptionExport(c)},this.filteModelContent.SortColumn="CreatedDate",this.filteModelContent.SortType=r.oCf.Descending}ngOnInit(){this.filteModelContent.SortColumn="Id",this.filteModelContent.SortType=r.oCf.Descending,this.DataGetAll(),this.tokenHelper.getCurrentToken().then(t=>{this.tokenInfo=t}),this.cmsApiStoreSubscribe=this.tokenHelper.getCurrentTokenOnChange().subscribe(t=>{this.DataGetAll(),this.tokenInfo=t})}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}DataGetAll(){this.tableRowsSelected=[],this.tableRowSelected=new r.dB3;const t=this.constructor.name+"main";this.loading.Start(t),this.filteModelContent.AccessLoad=!0;const o=JSON.parse(JSON.stringify(this.filteModelContent));this.coreModuleLogReportAbuseService.ServiceGetAllEditor(o).subscribe(n=>{n.IsSuccess&&(this.fieldsInfo=this.publicHelper.fieldInfoConvertor(n.Access),this.dataModelResult=n,this.tableSource.data=n.ListItems,this.tabledisplayedColumns=this.tokenInfo.UserAccessAdminAllowToAllData||this.tokenInfo.UserAccessAdminAllowToProfessionalData?this.publicHelper.listAddIfNotExist(this.tabledisplayedColumns,"LinkSiteId",0):this.publicHelper.listRemoveIfExist(this.tabledisplayedColumns,"LinkSiteId"),this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(n.Access)),this.loading.Stop(t)},n=>{this.cmsToastrService.typeError(n),this.loading.Stop(t)})}onTableSortData(t){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===t.active?"asc"===this.tableSource.sort.start?(t.start="desc",this.filteModelContent.SortColumn=t.active,this.filteModelContent.SortType=r.oCf.Descending):"desc"===this.tableSource.sort.start?(this.filteModelContent.SortColumn="",this.filteModelContent.SortType=r.oCf.Ascending):t.start="desc":(this.filteModelContent.SortColumn=t.active,this.filteModelContent.SortType=r.oCf.Ascending),this.tableSource.sort=t,this.filteModelContent.CurrentPageNumber=0,this.DataGetAll()}onTablePageingData(t){this.filteModelContent.CurrentPageNumber=t.pageIndex+1,this.filteModelContent.RowPerPage=t.pageSize,this.DataGetAll()}onActionbuttonViewRow(t=this.tableRowSelected){t&&t.Id&&0!==t.Id.length?(this.tableRowSelected=t,null!=this.dataModelResult&&null!=this.dataModelResult.Access&&this.dataModelResult.Access.AccessWatchRow?this.dialog.open(Yt,{height:"90%",data:{id:this.tableRowSelected.Id}}).afterClosed().subscribe(n=>{}):this.cmsToastrService.typeErrorAccessWatch()):this.cmsToastrService.typeErrorSelectedRow()}onActionbuttonEditRow(t=this.tableRowSelected){t&&t.Id&&0!==t.Id.length?(this.tableRowSelected=t,null!=this.dataModelResult&&null!=this.dataModelResult.Access&&this.dataModelResult.Access.AccessEditRow?this.dialog.open(Ot,{height:"90%",data:{id:this.tableRowSelected.Id}}).afterClosed().subscribe(n=>{n&&n.dialogChangedDate&&this.DataGetAll()}):this.cmsToastrService.typeErrorAccessEdit()):this.cmsToastrService.typeErrorSelectedRow()}onActionbuttonDeleteRow(t=this.tableRowSelected){if(!t||!t.Id||0===t.Id.length)return void this.cmsToastrService.typeErrorSelected("\u0631\u062f\u06cc\u0641\u06cc \u0628\u0631\u0627\u06cc \u062d\u0630\u0641 \u0627\u0646\u062a\u062e\u0627\u0628 \u0646\u0634\u062f\u0647 \u0627\u0633\u062a");if(this.tableRowSelected=t,null==this.dataModelResult||null==this.dataModelResult.Access||!this.dataModelResult.Access.AccessDeleteRow)return void this.cmsToastrService.typeErrorAccessDelete();const o=this.translate.instant("MESSAGE.Please_Confirm");this.cmsConfirmationDialogService.confirm(o,"\u0622\u06cc\u0627 \u0645\u0627\u06cc\u0644 \u0628\u0647 \u062d\u062f\u0641 \u0627\u06cc\u0646 \u0645\u062d\u062a\u0648\u0627 \u0645\u06cc \u0628\u0627\u0634\u06cc\u062f ?<br> ( "+this.tableRowSelected.Id+" ) ").then(s=>{if(s){const a=this.constructor.name+"main";this.loading.Start(a),this.coreModuleLogReportAbuseService.ServiceDelete(this.tableRowSelected.Id).subscribe(u=>{u.IsSuccess?(this.cmsToastrService.typeSuccessRemove(),this.DataGetAll()):this.cmsToastrService.typeErrorRemove(),this.loading.Stop(a)},u=>{this.cmsToastrService.typeError(u),this.loading.Stop(a)})}}).catch(()=>{})}onActionbuttonStatist(){if(this.optionsStatist.data.show=!this.optionsStatist.data.show,!this.optionsStatist.data.show)return;const t=new Map;t.set("Active",0),t.set("All",0),this.coreModuleLogReportAbuseService.ServiceGetCount(this.filteModelContent).subscribe(s=>{s.IsSuccess&&(t.set("All",s.TotalRowCount),this.optionsStatist.childMethods.setStatistValue(t))},s=>{this.cmsToastrService.typeError(s)});const o=JSON.parse(JSON.stringify(this.filteModelContent)),n=new r.AO3;n.PropertyName="RecordStatus",n.Value=r.FVU.Available,o.Filters.push(n),this.coreModuleLogReportAbuseService.ServiceGetCount(o).subscribe(s=>{s.IsSuccess&&(t.set("Active",s.TotalRowCount),this.optionsStatist.childMethods.setStatistValue(t))},s=>{this.cmsToastrService.typeError(s)})}onActionbuttonViewUserRow(t=this.tableRowSelected){t&&t.Id&&0!==t.Id.length?(this.tableRowSelected=t,this.tableRowSelected.LinkUserId&&0!==this.tableRowSelected.LinkUserId?this.router.navigate(["/core/user/edit",this.tableRowSelected.LinkUserId]):this.cmsToastrService.typeErrorSelected("\u0645\u062d\u062a\u0648\u0627 \u0634\u0627\u0645\u0644 \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u06a9\u0627\u0631\u0628\u0631 \u0646\u0645\u06cc \u0628\u0627\u0634\u062f")):this.cmsToastrService.typeErrorSelectedRow()}onActionbuttonViewMemberRow(t=this.tableRowSelected){t&&t.Id&&0!==t.Id.length?(this.tableRowSelected=t,this.tableRowSelected.LinkMemberUserId&&0!==this.tableRowSelected.LinkMemberUserId?this.router.navigate(["/member/user/edit",this.tableRowSelected.LinkMemberUserId]):this.cmsToastrService.typeErrorSelected("\u0645\u062d\u062a\u0648\u0627 \u0634\u0627\u0645\u0644 \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0639\u0636\u0648 \u0646\u0645\u06cc \u0628\u0627\u0634\u062f")):this.cmsToastrService.typeErrorSelectedRow()}onActionbuttonViewSiteRow(t=this.tableRowSelected){t&&t.Id&&0!==t.Id.length?(this.tableRowSelected=t,this.tableRowSelected.LinkSiteId&&0!==this.tableRowSelected.LinkSiteId?this.router.navigate(["/core/site/edit",this.tableRowSelected.LinkSiteId]):this.cmsToastrService.typeErrorSelected("\u0645\u062d\u062a\u0648\u0627 \u0634\u0627\u0645\u0644 \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0633\u0627\u06cc\u062a \u0646\u0645\u06cc \u0628\u0627\u0634\u062f")):this.cmsToastrService.typeErrorSelectedRow()}onActionbuttonExport(){this.optionsExport.data.show=!this.optionsExport.data.show,this.optionsExport.childMethods.setExportFilterModel(this.filteModelContent)}onSubmitOptionExport(t){const o=new Map;o.set("Download","loading ... "),this.coreModuleLogReportAbuseService.ServiceExportFile(t).subscribe(n=>{n.IsSuccess&&(o.set("Download",n.LinkFile),this.optionsExport.childMethods.setExportLinkFile(o))},n=>{this.cmsToastrService.typeError(n)})}onActionbuttonReload(){this.DataGetAll()}onSubmitOptionsSearch(t){this.filteModelContent.Filters=t,this.DataGetAll()}onActionTableRowSelect(t){this.tableRowSelected=t}onActionBackToParent(){this.router.navigate(["/core/site/"])}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(r.FLW),e.Y36(r._Zd),e.Y36(T.i),e.Y36(b.e),e.Y36(F.s),e.Y36(L.gz),e.Y36(M.v),e.Y36(f.uw),e.Y36(e.sBO),e.Y36(C.sK),e.Y36(L.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-coremodulelog-report-abuse-list"]],decls:73,vars:30,consts:[[3,"optionLoading","optionTreeDisplay"],["cms-tree",""],["cms-header",""],["cms-action",""],["type","button","class","btn btn-outline-secondary BTN","data-toggle","modal","data-target","#categoryModal",3,"click",4,"ngIf"],["type","button","class","btn btn-outline-warning","data-toggle","modal","data-target","#categoryModal",3,"click",4,"ngIf"],["type","button","class","btn btn-outline-danger",3,"click",4,"ngIf"],[1,"btn","btn-outline-info","btn-sm","BTN"],[3,"ngModel","ngModelChange"],[3,"click"],["type","button",1,"btn","btn-outline-secondary","BTN",3,"click"],[2,"font-size","20px","margin","-1px",3,"title"],["type","button","class","btn btn-outline-success BTN",3,"click",4,"ngIf"],["cms-action-area",""],[3,"options","optionsChange"],["cms-body",""],["matSort","",3,"dataSource","matSortChange"],["tableSort","matSort"],["matColumnDef","Id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","RecordStatus"],["matColumnDef","LinkSiteId"],["matColumnDef","LinkUserId"],["matColumnDef","LinkMemberUserId"],["matColumnDef","ModuleName"],["matColumnDef","ModuleEntityName"],["matColumnDef","ModuleEntityId"],["matColumnDef","SubjectBody"],["matColumnDef","AdminResultProcess"],["matColumnDef","CreatedDate"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class"," Action",4,"matCellDef"],[4,"matHeaderRowDef"],[3,"ngStyle","click",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"length","pageIndex","pageSize","pageSizeOptions","page"],["paginator",""],["type","button","data-toggle","modal","data-target","#categoryModal",1,"btn","btn-outline-secondary","BTN",3,"click"],["type","button","data-toggle","modal","data-target","#categoryModal",1,"btn","btn-outline-warning",3,"click"],["type","button",1,"btn","btn-outline-danger",3,"click"],["type","button",1,"btn","btn-outline-success","BTN",3,"click"],["mat-sort-header",""],[3,"ngClass"],[1,"Action"],["mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],["actionMenu","matMenu"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","",3,"click"],[3,"ngStyle","click"]],template:function(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"app-cms-html-list",0),e.ynx(1,1),e._uU(2," -------------------------------------- "),e.BQk(),e.GkF(3,2),e.ynx(4,3),e.YNc(5,Bt,3,3,"button",4),e.YNc(6,Qt,3,3,"button",5),e.YNc(7,Ht,3,3,"button",6),e.TgZ(8,"a",7),e.TgZ(9,"mat-slide-toggle",8),e.NdJ("ngModelChange",function(a){return o.optionsSearch.data.show=a}),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.qZA(),e.TgZ(12,"a",7),e.TgZ(13,"mat-slide-toggle",9),e.NdJ("click",function(){return o.onActionbuttonStatist()}),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.qZA(),e.TgZ(16,"a",7),e.TgZ(17,"mat-slide-toggle",9),e.NdJ("click",function(){return o.onActionbuttonExport()}),e._uU(18),e.ALo(19,"translate"),e.qZA(),e.qZA(),e.TgZ(20,"button",10),e.NdJ("click",function(){return o.onActionbuttonReload()}),e.TgZ(21,"mat-icon",11),e.ALo(22,"translate"),e._uU(23,"refresh"),e.qZA(),e.qZA(),e.YNc(24,Pt,3,3,"button",12),e.BQk(),e.ynx(25,13),e.TgZ(26,"app-cms-search-list",14),e.NdJ("optionsChange",function(a){return o.optionsSearch=a}),e.qZA(),e.TgZ(27,"app-cms-export-list",14),e.NdJ("optionsChange",function(a){return o.optionsExport=a}),e.qZA(),e.TgZ(28,"app-cms-statist-list",14),e.NdJ("optionsChange",function(a){return o.optionsStatist=a}),e.qZA(),e.BQk(),e.ynx(29,15),e.TgZ(30,"mat-table",16,17),e.NdJ("matSortChange",function(){e.CHM(n);const a=e.MAs(31);return o.onTableSortData(a)}),e.ynx(32,18),e.YNc(33,jt,2,1,"mat-header-cell",19),e.YNc(34,Gt,2,1,"mat-cell",20),e.BQk(),e.ynx(35,21),e.YNc(36,Vt,2,1,"mat-header-cell",19),e.YNc(37,$t,3,3,"mat-cell",20),e.BQk(),e.ynx(38,22),e.YNc(39,Wt,2,1,"mat-header-cell",19),e.YNc(40,zt,2,1,"mat-cell",20),e.BQk(),e.ynx(41,23),e.YNc(42,Xt,2,1,"mat-header-cell",19),e.YNc(43,Kt,2,1,"mat-cell",20),e.BQk(),e.ynx(44,24),e.YNc(45,eo,2,1,"mat-header-cell",19),e.YNc(46,to,2,1,"mat-cell",20),e.BQk(),e.ynx(47,25),e.YNc(48,oo,2,1,"mat-header-cell",19),e.YNc(49,io,2,1,"mat-cell",20),e.BQk(),e.ynx(50,26),e.YNc(51,no,2,1,"mat-header-cell",19),e.YNc(52,lo,2,1,"mat-cell",20),e.BQk(),e.ynx(53,27),e.YNc(54,so,2,1,"mat-header-cell",19),e.YNc(55,ro,2,1,"mat-cell",20),e.BQk(),e.ynx(56,28),e.YNc(57,ao,2,1,"mat-header-cell",19),e.YNc(58,co,2,1,"mat-cell",20),e.BQk(),e.ynx(59,29),e.YNc(60,uo,2,1,"mat-header-cell",19),e.YNc(61,mo,2,1,"mat-cell",20),e.BQk(),e.ynx(62,30),e.YNc(63,po,2,1,"mat-header-cell",19),e.YNc(64,_o,2,1,"mat-cell",20),e.BQk(),e.ynx(65,31),e.YNc(66,ho,3,3,"mat-header-cell",32),e.YNc(67,Mo,11,6,"mat-cell",33),e.BQk(),e.YNc(68,To,1,0,"mat-header-row",34),e.YNc(69,Lo,1,3,"mat-row",35),e.qZA(),e.BQk(),e.ynx(70,36),e.TgZ(71,"mat-paginator",37,38),e.NdJ("page",function(a){return o.onTablePageingData(a)}),e.qZA(),e.BQk(),e.qZA()}2&t&&(e.Q6J("optionLoading",o.loading)("optionTreeDisplay",!1),e.xp6(5),e.Q6J("ngIf",o.dataModelResult.Access.AccessWatchRow&&(null==o.tableRowSelected||null==o.tableRowSelected.Id?null:o.tableRowSelected.Id.length)>0),e.xp6(1),e.Q6J("ngIf",o.dataModelResult.Access.AccessEditRow&&(null==o.tableRowSelected||null==o.tableRowSelected.Id?null:o.tableRowSelected.Id.length)>0),e.xp6(1),e.Q6J("ngIf",o.dataModelResult.Access.AccessDeleteRow&&(null==o.tableRowSelected||null==o.tableRowSelected.Id?null:o.tableRowSelected.Id.length)>0),e.xp6(2),e.Q6J("ngModel",o.optionsSearch.data.show),e.xp6(1),e.Oqu(e.lcZ(11,21,"ACTION.SEARCH")),e.xp6(4),e.hij("",e.lcZ(15,23,"ACTION.STATIST")," "),e.xp6(4),e.hij("",e.lcZ(19,25,"ACTION.EXPORTFILE")," "),e.xp6(3),e.s9C("title",e.lcZ(22,27,"ACTION.RELOAD")),e.xp6(3),e.Q6J("ngIf",o.requestLinkSiteId>0),e.xp6(2),e.Q6J("options",o.optionsSearch),e.xp6(1),e.Q6J("options",o.optionsExport),e.xp6(1),e.Q6J("options",o.optionsStatist),e.xp6(2),e.Q6J("dataSource",o.tableSource),e.xp6(38),e.Q6J("matHeaderRowDef",o.tabledisplayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",o.tabledisplayedColumns),e.xp6(2),e.Q6J("length",o.dataModelResult.TotalRowCount)("pageIndex",o.dataModelResult.CurrentPageNumber-1)("pageSize",o.dataModelResult.RowPerPage)("pageSizeOptions",e.DdM(29,Io)))},directives:[O.Z,g.O5,D.Rr,m.JJ,m.On,E.Hw,J.y,Y.Z,B.q,d.BZ,Z.YE,d.w1,d.fO,d.ge,Z.nU,d.Dz,d.ev,g.mk,Q.lW,A.p6,A.VK,A.OP,d.as,d.XQ,d.nj,d.Gk,g.PC,H.NW],pipes:[C.X$,P.b],encapsulation:2}),i})();const Zo=["vform"];function ko(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"mat-icon",20),e.NdJ("click",function(){return e.CHM(t),e.oxw().dataModel.ModuleName=""}),e._uU(1,"close"),e.qZA()}}function Ro(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"mat-icon",20),e.NdJ("click",function(){return e.CHM(t),e.oxw().dataModel.ModuleEntityName=null}),e._uU(1,"close"),e.qZA()}}function xo(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"mat-icon",20),e.NdJ("click",function(){return e.CHM(t),e.oxw().dataModel.ModuleEntityId=null}),e._uU(1,"close"),e.qZA()}}function Eo(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",15),e.TgZ(1,"button",21),e.NdJ("click",function(){return e.CHM(t),e.oxw().onFormCancel()}),e._UZ(2,"i",22),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.qZA()}2&i&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"ACTION.CANCEL")," "))}let vo=(()=>{class i{constructor(t,o,n,s,a,u,_,h){this.data=t,this.dialogRef=o,this.coreEnumService=n,this.coreModuleLogScoreService=s,this.cmsToastrService=a,this.tokenHelper=u,this.cdr=_,this.publicHelper=h,this.requestId="",this.tokenInfo=new r.OdC,this.loading=new S.O,this.dataModelResult=new r.y$4,this.dataModel=new r.kV8,this.formInfo=new r.LEF,this.fieldsInfo=new Map,this.fileManagerOpenForm=!1,this.loading.cdr=this.cdr,t&&(this.requestId=t.id)}ngOnInit(){if(!(this.requestId&&this.requestId.length>0))return this.cmsToastrService.typeErrorComponentAction(),void this.dialogRef.close({dialogChangedDate:!1});this.formInfo.FormTitle="\u0648\u06cc\u0631\u0627\u06cc\u0634  ",this.DataGetOneContent(),this.tokenHelper.getCurrentToken().then(t=>{this.tokenInfo=t}),this.cmsApiStoreSubscribe=this.tokenHelper.getCurrentTokenOnChange().subscribe(t=>{this.tokenInfo=t})}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}DataGetOneContent(){if(!this.requestId||0===this.requestId.length)return void this.cmsToastrService.typeErrorEditRowIsNull();this.formInfo.FormAlert="\u062f\u0631 \u062f\u0631\u06cc\u0627\u0641\u062a \u0627\u0631\u0633\u0627\u0644 \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0627\u0632 \u0633\u0631\u0648\u0631",this.formInfo.FormError="";const t=this.constructor.name+"main";this.loading.Start(t),this.coreModuleLogScoreService.setAccessLoad(),this.coreModuleLogScoreService.ServiceGetOneById(this.requestId).subscribe(o=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(o.Access),this.dataModel=o.Item,o.IsSuccess?(this.formInfo.FormTitle=this.formInfo.FormTitle+" "+o.Item.Id,this.formInfo.FormAlert=""):(this.formInfo.FormAlert="\u0628\u0631\u0631\u0648\u0632 \u062e\u0637\u0627",this.formInfo.FormError=o.ErrorMessage,this.cmsToastrService.typeErrorMessage(o.ErrorMessage)),this.loading.Stop(t)},o=>{this.cmsToastrService.typeError(o),this.loading.Stop(t)})}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.WI),e.Y36(f.so),e.Y36(r.FLW),e.Y36(r.mbu),e.Y36(b.e),e.Y36(M.v),e.Y36(e.sBO),e.Y36(T.i))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-coremodulelog-score-edit"]],viewQuery:function(t,o){if(1&t&&e.Gf(Zo,5),2&t){let n;e.iGM(n=e.CRH())&&(o.formGroup=n.first)}},decls:41,vars:20,consts:[["vform","ngForm"],[1,"ntk-cms-html-card-header"],[1,"ntk-cms-html-card-body"],[3,"options"],[3,"optionDisabled","optionSelectForce","optionPlaceholder"],[1,"ntk-full-width"],["matInput","","name","dataModel.ModuleName","type","text","placeholder","ModuleName",3,"ngModel","ngModelChange"],["ModuleName",""],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matSuffix",""],["matInput","","name","dataModel.ModuleEntityName","type","text","placeholder","ModuleEntityName",3,"ngModel","ngModelChange"],["ModuleEntityName",""],["matInput","","name","dataModel.ModuleEntityId","type","text","placeholder","ModuleEntityId",3,"ngModel","ngModelChange"],["ModuleEntityId",""],[1,"ntk-cms-html-card-message"],[1,"form-actions"],[1,"form-text","text-muted"],[1,"form-text","text-muted","danger"],[1,"ntk-cms-html-card-footer"],["class","form-actions",4,"ngIf"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["type","button",1,"btn","btn-light",3,"click"],[1,"ft-x"]],template:function(t,o){1&t&&(e.TgZ(0,"form",null,0),e.TgZ(2,"div",1),e._uU(3),e.qZA(),e.TgZ(4,"div",2),e._UZ(5,"app-progress-spinner",3),e._UZ(6,"app-cms-site-selector",4),e._UZ(7,"app-cms-user-selector",4),e._UZ(8,"app-cms-member-selector",4),e.TgZ(9,"mat-form-field",5),e.TgZ(10,"mat-label"),e._uU(11,"ModuleName"),e.qZA(),e.TgZ(12,"input",6,7),e.NdJ("ngModelChange",function(s){return o.dataModel.ModuleName=s}),e.qZA(),e.YNc(14,ko,2,0,"mat-icon",8),e.TgZ(15,"mat-icon",9),e._uU(16,"mode_edit"),e.qZA(),e.qZA(),e.TgZ(17,"mat-form-field",5),e.TgZ(18,"mat-label"),e._uU(19,"ModuleEntityName"),e.qZA(),e.TgZ(20,"input",10,11),e.NdJ("ngModelChange",function(s){return o.dataModel.ModuleEntityName=s}),e.qZA(),e.YNc(22,Ro,2,0,"mat-icon",8),e.TgZ(23,"mat-icon",9),e._uU(24,"mode_edit"),e.qZA(),e.qZA(),e.TgZ(25,"mat-form-field",5),e.TgZ(26,"mat-label"),e._uU(27,"ModuleEntityId"),e.qZA(),e.TgZ(28,"input",12,13),e.NdJ("ngModelChange",function(s){return o.dataModel.ModuleEntityId=s}),e.qZA(),e.YNc(30,xo,2,0,"mat-icon",8),e.TgZ(31,"mat-icon",9),e._uU(32,"mode_edit"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(33,"div",14),e.TgZ(34,"div",15),e.TgZ(35,"small",16),e._uU(36),e.qZA(),e.TgZ(37,"small",17),e._uU(38),e.qZA(),e.qZA(),e.qZA(),e.TgZ(39,"div",18),e.YNc(40,Eo,5,3,"div",19),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.hij(" ",o.formInfo.FormTitle," "),e.xp6(2),e.Q6J("options",o.loading),e.xp6(1),e.Q6J("optionDisabled",!0)("optionSelectForce",o.dataModel.LinkSiteId)("optionPlaceholder","\u0633\u0627\u06cc\u062a"),e.xp6(1),e.Q6J("optionDisabled",!0)("optionSelectForce",o.dataModel.LinkUserId)("optionPlaceholder","\u06a9\u0627\u0631\u0628\u0631"),e.xp6(1),e.Q6J("optionDisabled",!0)("optionSelectForce",o.dataModel.LinkMemberUserId)("optionPlaceholder","\u0639\u0636\u0648"),e.xp6(4),e.Q6J("ngModel",o.dataModel.ModuleName),e.xp6(2),e.Q6J("ngIf",o.dataModel.ModuleName),e.xp6(6),e.Q6J("ngModel",o.dataModel.ModuleEntityName),e.xp6(2),e.Q6J("ngIf",o.dataModel.ModuleEntityName),e.xp6(6),e.Q6J("ngModel",o.dataModel.ModuleEntityId),e.xp6(2),e.Q6J("ngIf",o.dataModel.ModuleEntityId),e.xp6(6),e.hij("",o.formInfo.FormAlert," "),e.xp6(2),e.hij("",o.formInfo.FormError," "),e.xp6(2),e.Q6J("ngIf",o.formInfo.FormSubmitAllow))},directives:[m._Y,m.JL,m.F,I.O,q.P,j.g,G.a,w.KE,w.hX,V.Nt,m.Fj,m.JJ,m.On,g.O5,E.Hw,w.R9],pipes:[C.X$],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:yellow}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:black}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}"]}),i})();const yo=["vform"];function No(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",5),e.TgZ(1,"button",10),e.NdJ("click",function(){return e.CHM(t),e.oxw().onFormCancel()}),e._UZ(2,"i",11),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.qZA()}2&i&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"ACTION.CANCEL")," "))}let qo=(()=>{class i{constructor(t,o,n,s,a,u,_,h){this.data=t,this.dialogRef=o,this.coreEnumService=n,this.coreModuleLogScoreService=s,this.cmsToastrService=a,this.tokenHelper=u,this.cdr=_,this.publicHelper=h,this.requestId="",this.tokenInfo=new r.OdC,this.loading=new S.O,this.dataModelResult=new r.y$4,this.dataModel=new r.kV8,this.formInfo=new r.LEF,this.dataModelEnumSendSmsStatusTypeResult=new r.y$4,this.fieldsInfo=new Map,this.fileManagerOpenForm=!1,this.loading.cdr=this.cdr,t&&(this.requestId=t.id+"")}ngOnInit(){if(this.formInfo.FormTitle="\u0645\u0634\u0627\u0647\u062f\u0647  ",0===this.requestId.length)return this.cmsToastrService.typeErrorComponentAction(),void this.dialogRef.close({dialogChangedDate:!1});this.DataGetOneContent(),this.tokenHelper.getCurrentToken().then(t=>{this.tokenInfo=t}),this.cmsApiStoreSubscribe=this.tokenHelper.getCurrentTokenOnChange().subscribe(t=>{this.tokenInfo=t}),this.getEnumSendSmsStatusType()}getEnumSendSmsStatusType(){this.coreEnumService.ServiceEnumSendSmsStatusType().subscribe(t=>{this.dataModelEnumSendSmsStatusTypeResult=t})}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}DataGetOneContent(){this.formInfo.FormAlert="\u062f\u0631 \u062f\u0631\u06cc\u0627\u0641\u062a \u0627\u0631\u0633\u0627\u0644 \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0627\u0632 \u0633\u0631\u0648\u0631",this.formInfo.FormError="";const t=this.constructor.name+"main";this.loading.Start(t),this.coreModuleLogScoreService.setAccessLoad(),this.coreModuleLogScoreService.ServiceGetOneById(this.requestId).subscribe(o=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(o.Access),this.dataModel=o.Item,o.IsSuccess?(this.formInfo.FormTitle=this.formInfo.FormTitle+" "+o.Item.Id,this.formInfo.FormAlert=""):(this.formInfo.FormAlert="\u0628\u0631\u0631\u0648\u0632 \u062e\u0637\u0627",this.formInfo.FormError=o.ErrorMessage,this.cmsToastrService.typeErrorMessage(o.ErrorMessage)),this.loading.Stop(t)},o=>{this.cmsToastrService.typeError(o),this.loading.Stop(t)})}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.WI),e.Y36(f.so),e.Y36(r.FLW),e.Y36(r.mbu),e.Y36(b.e),e.Y36(M.v),e.Y36(e.sBO),e.Y36(T.i))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-coremodulelog-report-abuse-view"]],viewQuery:function(t,o){if(1&t&&e.Gf(yo,5),2&t){let n;e.iGM(n=e.CRH())&&(o.formGroup=n.first)}},decls:13,vars:7,consts:[[1,"ntk-cms-html-card-header"],[1,"ntk-cms-html-card-body"],[3,"options"],[3,"dataModel","optionMethod"],[1,"ntk-cms-html-card-message"],[1,"form-actions"],[1,"form-text","text-muted"],[1,"form-text","text-muted","danger"],[1,"ntk-cms-html-card-footer"],["class","form-actions",4,"ngIf"],["type","button",1,"btn","btn-light",3,"click"],[1,"ft-x"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e._uU(1),e.qZA(),e.TgZ(2,"div",1),e._UZ(3,"app-progress-spinner",2),e._UZ(4,"app-cms-json-list",3),e.qZA(),e.TgZ(5,"div",4),e.TgZ(6,"div",5),e.TgZ(7,"small",6),e._uU(8),e.qZA(),e.TgZ(9,"small",7),e._uU(10),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"div",8),e.YNc(12,No,5,3,"div",9),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",o.formInfo.FormTitle," "),e.xp6(2),e.Q6J("options",o.loading),e.xp6(1),e.Q6J("dataModel",o.dataModel)("optionMethod",1),e.xp6(4),e.hij("",o.formInfo.FormAlert," "),e.xp6(2),e.hij("",o.formInfo.FormError," "),e.xp6(2),e.Q6J("ngIf",o.formInfo.FormSubmitAllow))},directives:[I.O,U.v,g.O5],pipes:[C.X$],encapsulation:2}),i})();function Uo(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",37),e.NdJ("click",function(){return e.CHM(t),e.oxw().onActionbuttonViewRow()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"ACTION.VIEW")))}function Fo(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",38),e.NdJ("click",function(){return e.CHM(t),e.oxw().onActionbuttonEditRow()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"ACTION.EDIT")))}function Oo(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",39),e.NdJ("click",function(){return e.CHM(t),e.oxw().onActionbuttonDeleteRow()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"ACTION.DELETE")))}function Do(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",40),e.NdJ("click",function(){return e.CHM(t),e.oxw().onActionBackToParent()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"ACTION.BACK")))}function Jo(i,l){if(1&i&&(e.TgZ(0,"mat-header-cell",41),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.fieldsInfo.Id?null:t.fieldsInfo.Id.FieldTitle," ")}}function Yo(i,l){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.hij(" ",t.Id," ")}}function Bo(i,l){if(1&i&&(e.TgZ(0,"mat-header-cell",41),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.fieldsInfo.RecordStatus?null:t.fieldsInfo.RecordStatus.FieldTitle," ")}}function Qo(i,l){if(1&i&&(e.TgZ(0,"mat-cell"),e._UZ(1,"i",42),e.ALo(2,"statusClass"),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.Q6J("ngClass",e.lcZ(2,1,t.RecordStatus))}}function Ho(i,l){if(1&i&&(e.TgZ(0,"mat-header-cell",41),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.fieldsInfo.LinkSiteId?null:t.fieldsInfo.LinkSiteId.FieldTitle," ")}}function Po(i,l){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.hij(" ",t.LinkSiteId," ")}}function jo(i,l){if(1&i&&(e.TgZ(0,"mat-header-cell",41),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.fieldsInfo.LinkUserId?null:t.fieldsInfo.LinkUserId.FieldTitle," ")}}function Go(i,l){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.hij(" ",t.LinkUserId," ")}}function Vo(i,l){if(1&i&&(e.TgZ(0,"mat-header-cell",41),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.fieldsInfo.LinkMemberUserId?null:t.fieldsInfo.LinkMemberUserId.FieldTitle," ")}}function $o(i,l){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.hij(" ",t.LinkMemberUserId," ")}}function Wo(i,l){if(1&i&&(e.TgZ(0,"mat-header-cell",41),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.fieldsInfo.ModuleName?null:t.fieldsInfo.ModuleName.FieldTitle," ")}}function zo(i,l){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.hij(" ",t.ModuleName," ")}}function Xo(i,l){if(1&i&&(e.TgZ(0,"mat-header-cell",41),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.fieldsInfo.ModuleEntityName?null:t.fieldsInfo.ModuleEntityName.FieldTitle," ")}}function Ko(i,l){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.hij(" ",t.ModuleEntityName," ")}}function ei(i,l){if(1&i&&(e.TgZ(0,"mat-header-cell",41),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.fieldsInfo.ModuleEntityId?null:t.fieldsInfo.ModuleEntityId.FieldTitle," ")}}function ti(i,l){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.hij(" ",t.ModuleEntityId," ")}}function oi(i,l){if(1&i&&(e.TgZ(0,"mat-header-cell",41),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.fieldsInfo.CreatedDate?null:t.fieldsInfo.CreatedDate.FieldTitle," ")}}function ii(i,l){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=l.$implicit,o=e.oxw();e.xp6(1),e.hij(" ",o.publicHelper.LocaleDate(t.CreatedDate)," ")}}function ni(i,l){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"TITLE.OPTION")," "))}function li(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",47),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit;return e.oxw().onActionbuttonViewRow(n)}),e.TgZ(1,"mat-icon"),e._uU(2,"visibility"),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.qZA()}2&i&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"ACTION.VIEW")))}function si(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",47),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit;return e.oxw().onActionbuttonEditRow(n)}),e.TgZ(1,"mat-icon"),e._uU(2,"mode_edit"),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.qZA()}2&i&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"ACTION.EDIT")))}function ri(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",47),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit;return e.oxw().onActionbuttonDeleteRow(n)}),e.TgZ(1,"mat-icon"),e._uU(2,"delete_forever"),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.qZA()}2&i&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"ACTION.DELETE")))}function ai(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",47),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit;return e.oxw().onActionbuttonViewUserRow(n)}),e.TgZ(1,"mat-icon"),e._uU(2,"supervisor_account"),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.qZA()}2&i&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"ACTION.USER")))}function ci(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",47),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit;return e.oxw().onActionbuttonViewMemberRow(n)}),e.TgZ(1,"mat-icon"),e._uU(2,"assignment_ind"),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.qZA()}2&i&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"ACTION.MEMBER")))}function di(i,l){if(1&i&&(e.TgZ(0,"mat-cell",43),e.TgZ(1,"button",44),e.TgZ(2,"mat-icon"),e._uU(3,"more_vert"),e.qZA(),e.qZA(),e.TgZ(4,"mat-menu",null,45),e.YNc(6,li,6,3,"button",46),e.YNc(7,si,6,3,"button",46),e.YNc(8,ri,6,3,"button",46),e.YNc(9,ai,6,3,"button",46),e.YNc(10,ci,6,3,"button",46),e.qZA(),e.qZA()),2&i){const t=l.$implicit,o=e.MAs(5),n=e.oxw();e.xp6(1),e.Q6J("matMenuTriggerFor",o),e.xp6(5),e.Q6J("ngIf",n.dataModelResult.Access.AccessWatchRow),e.xp6(1),e.Q6J("ngIf",n.dataModelResult.Access.AccessEditRow),e.xp6(1),e.Q6J("ngIf",n.dataModelResult.Access.AccessDeleteRow),e.xp6(1),e.Q6J("ngIf",t.LinkUserId>0),e.xp6(1),e.Q6J("ngIf",t.LinkMemberUserId>0)}}function ui(i,l){1&i&&e._UZ(0,"mat-header-row")}const mi=function(i){return{background:i}};function pi(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",48),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw().onActionTableRowSelect(s)}),e.qZA()}if(2&i){const t=l.$implicit,o=e.oxw();e.Q6J("ngStyle",e.VKq(1,mi,t.Id===o.tableRowSelected.Id?"#d3d3da":""))}}const _i=function(){return[5,10,20,100]};let hi=(()=>{class i{constructor(t,o,n,s,a,u,_,h,k,R,x){if(this.coreEnumService=t,this.coreModuleLogScoreService=o,this.publicHelper=n,this.cmsToastrService=s,this.cmsConfirmationDialogService=a,this.activatedRoute=u,this.tokenHelper=_,this.dialog=h,this.cdr=k,this.translate=R,this.router=x,this.requestLinkSiteId=0,this.requestLinkUserId=0,this.requestlinkMemberUserId=0,this.flag=!1,this.tableContentSelected=[],this.filteModelContent=new r.Hay,this.dataModelResult=new r.y$4,this.optionsSearch=new v.dj,this.optionsStatist=new N.TV,this.optionsExport=new y.zR,this.tokenInfo=new r.OdC,this.loading=new S.O,this.tableRowsSelected=[],this.tableRowSelected=new r.kV8,this.tableSource=new d.by,this.tabledisplayedColumns=["Id","LinkUserId","LinkSiteId","LinkMemberUserId","ModuleName","ModuleEntityName","ModuleEntityId","CreatedDate","Action"],this.fieldsInfo=new Map,this.loading.cdr=this.cdr,this.requestLinkSiteId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkSiteId")),this.requestLinkUserId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkUserId")),this.requestlinkMemberUserId=+Number(this.activatedRoute.snapshot.paramMap.get("linkMemberUserId")),this.requestLinkSiteId>0){const c=new r.AO3;c.PropertyName="LinkCmsSiteId",c.Value=this.requestLinkSiteId,this.filteModelContent.Filters.push(c)}if(this.requestLinkUserId>0){const c=new r.AO3;c.PropertyName="LinkUserId",c.Value=this.requestLinkUserId,this.filteModelContent.Filters.push(c)}if(this.requestlinkMemberUserId>0){const c=new r.AO3;c.PropertyName="linkMemberUserId",c.Value=this.requestlinkMemberUserId,this.filteModelContent.Filters.push(c)}this.optionsSearch.parentMethods={onSubmit:c=>this.onSubmitOptionsSearch(c)},this.optionsExport.parentMethods={onSubmit:c=>this.onSubmitOptionExport(c)},this.filteModelContent.SortColumn="CreatedDate",this.filteModelContent.SortType=r.oCf.Descending}ngOnInit(){this.filteModelContent.SortColumn="Id",this.filteModelContent.SortType=r.oCf.Descending,this.DataGetAll(),this.tokenHelper.getCurrentToken().then(t=>{this.tokenInfo=t}),this.cmsApiStoreSubscribe=this.tokenHelper.getCurrentTokenOnChange().subscribe(t=>{this.DataGetAll(),this.tokenInfo=t})}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}DataGetAll(){this.tableRowsSelected=[],this.tableRowSelected=new r.kV8;const t=this.constructor.name+"main";this.loading.Start(t),this.filteModelContent.AccessLoad=!0;const o=JSON.parse(JSON.stringify(this.filteModelContent));this.coreModuleLogScoreService.ServiceGetAllEditor(o).subscribe(n=>{n.IsSuccess&&(this.fieldsInfo=this.publicHelper.fieldInfoConvertor(n.Access),this.dataModelResult=n,this.tableSource.data=n.ListItems,this.tabledisplayedColumns=this.tokenInfo.UserAccessAdminAllowToAllData||this.tokenInfo.UserAccessAdminAllowToProfessionalData?this.publicHelper.listAddIfNotExist(this.tabledisplayedColumns,"LinkSiteId",0):this.publicHelper.listRemoveIfExist(this.tabledisplayedColumns,"LinkSiteId"),this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(n.Access)),this.loading.Stop(t)},n=>{this.cmsToastrService.typeError(n),this.loading.Stop(t)})}onTableSortData(t){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===t.active?"asc"===this.tableSource.sort.start?(t.start="desc",this.filteModelContent.SortColumn=t.active,this.filteModelContent.SortType=r.oCf.Descending):"desc"===this.tableSource.sort.start?(this.filteModelContent.SortColumn="",this.filteModelContent.SortType=r.oCf.Ascending):t.start="desc":(this.filteModelContent.SortColumn=t.active,this.filteModelContent.SortType=r.oCf.Ascending),this.tableSource.sort=t,this.filteModelContent.CurrentPageNumber=0,this.DataGetAll()}onTablePageingData(t){this.filteModelContent.CurrentPageNumber=t.pageIndex+1,this.filteModelContent.RowPerPage=t.pageSize,this.DataGetAll()}onActionbuttonViewRow(t=this.tableRowSelected){t&&t.Id&&0!==t.Id.length?(this.tableRowSelected=t,null!=this.dataModelResult&&null!=this.dataModelResult.Access&&this.dataModelResult.Access.AccessWatchRow?this.dialog.open(qo,{height:"90%",data:{id:this.tableRowSelected.Id}}).afterClosed().subscribe(n=>{}):this.cmsToastrService.typeErrorAccessWatch()):this.cmsToastrService.typeErrorSelectedRow()}onActionbuttonEditRow(t=this.tableRowSelected){t&&t.Id&&0!==t.Id.length?(this.tableRowSelected=t,null!=this.dataModelResult&&null!=this.dataModelResult.Access&&this.dataModelResult.Access.AccessEditRow?this.dialog.open(vo,{height:"90%",data:{id:this.tableRowSelected.Id}}).afterClosed().subscribe(n=>{n&&n.dialogChangedDate&&this.DataGetAll()}):this.cmsToastrService.typeErrorAccessEdit()):this.cmsToastrService.typeErrorSelectedRow()}onActionbuttonDeleteRow(t=this.tableRowSelected){if(!t||!t.Id||0===t.Id.length)return void this.cmsToastrService.typeErrorSelected("\u0631\u062f\u06cc\u0641\u06cc \u0628\u0631\u0627\u06cc \u062d\u0630\u0641 \u0627\u0646\u062a\u062e\u0627\u0628 \u0646\u0634\u062f\u0647 \u0627\u0633\u062a");if(this.tableRowSelected=t,null==this.dataModelResult||null==this.dataModelResult.Access||!this.dataModelResult.Access.AccessDeleteRow)return void this.cmsToastrService.typeErrorAccessDelete();const o=this.translate.instant("MESSAGE.Please_Confirm");this.cmsConfirmationDialogService.confirm(o,"\u0622\u06cc\u0627 \u0645\u0627\u06cc\u0644 \u0628\u0647 \u062d\u062f\u0641 \u0627\u06cc\u0646 \u0645\u062d\u062a\u0648\u0627 \u0645\u06cc \u0628\u0627\u0634\u06cc\u062f ?<br> ( "+this.tableRowSelected.Id+" ) ").then(s=>{if(s){const a=this.constructor.name+"main";this.loading.Start(a),this.coreModuleLogScoreService.ServiceDelete(this.tableRowSelected.Id).subscribe(u=>{u.IsSuccess?(this.cmsToastrService.typeSuccessRemove(),this.DataGetAll()):this.cmsToastrService.typeErrorRemove(),this.loading.Stop(a)},u=>{this.cmsToastrService.typeError(u),this.loading.Stop(a)})}}).catch(()=>{})}onActionbuttonStatist(){if(this.optionsStatist.data.show=!this.optionsStatist.data.show,!this.optionsStatist.data.show)return;const t=new Map;t.set("Active",0),t.set("All",0),this.coreModuleLogScoreService.ServiceGetCount(this.filteModelContent).subscribe(s=>{s.IsSuccess&&(t.set("All",s.TotalRowCount),this.optionsStatist.childMethods.setStatistValue(t))},s=>{this.cmsToastrService.typeError(s)});const o=JSON.parse(JSON.stringify(this.filteModelContent)),n=new r.AO3;n.PropertyName="RecordStatus",n.Value=r.FVU.Available,o.Filters.push(n),this.coreModuleLogScoreService.ServiceGetCount(o).subscribe(s=>{s.IsSuccess&&(t.set("Active",s.TotalRowCount),this.optionsStatist.childMethods.setStatistValue(t))},s=>{this.cmsToastrService.typeError(s)})}onActionbuttonViewUserRow(t=this.tableRowSelected){t&&t.Id&&0!==t.Id.length?(this.tableRowSelected=t,this.tableRowSelected.LinkUserId&&0!==this.tableRowSelected.LinkUserId?this.router.navigate(["/core/user/edit",this.tableRowSelected.LinkUserId]):this.cmsToastrService.typeErrorSelected("\u0645\u062d\u062a\u0648\u0627 \u0634\u0627\u0645\u0644 \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u06a9\u0627\u0631\u0628\u0631 \u0646\u0645\u06cc \u0628\u0627\u0634\u062f")):this.cmsToastrService.typeErrorSelectedRow()}onActionbuttonViewMemberRow(t=this.tableRowSelected){t&&t.Id&&0!==t.Id.length?(this.tableRowSelected=t,this.tableRowSelected.LinkMemberUserId&&0!==this.tableRowSelected.LinkMemberUserId?this.router.navigate(["/member/user/edit",this.tableRowSelected.LinkMemberUserId]):this.cmsToastrService.typeErrorSelected("\u0645\u062d\u062a\u0648\u0627 \u0634\u0627\u0645\u0644 \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0639\u0636\u0648 \u0646\u0645\u06cc \u0628\u0627\u0634\u062f")):this.cmsToastrService.typeErrorSelectedRow()}onActionbuttonViewSiteRow(t=this.tableRowSelected){t&&t.Id&&0!==t.Id.length?(this.tableRowSelected=t,this.tableRowSelected.LinkSiteId&&0!==this.tableRowSelected.LinkSiteId?this.router.navigate(["/core/site/edit",this.tableRowSelected.LinkSiteId]):this.cmsToastrService.typeErrorSelected("\u0645\u062d\u062a\u0648\u0627 \u0634\u0627\u0645\u0644 \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0633\u0627\u06cc\u062a \u0646\u0645\u06cc \u0628\u0627\u0634\u062f")):this.cmsToastrService.typeErrorSelectedRow()}onActionbuttonExport(){this.optionsExport.data.show=!this.optionsExport.data.show,this.optionsExport.childMethods.setExportFilterModel(this.filteModelContent)}onSubmitOptionExport(t){const o=new Map;o.set("Download","loading ... "),this.coreModuleLogScoreService.ServiceExportFile(t).subscribe(n=>{n.IsSuccess&&(o.set("Download",n.LinkFile),this.optionsExport.childMethods.setExportLinkFile(o))},n=>{this.cmsToastrService.typeError(n)})}onActionbuttonReload(){this.DataGetAll()}onSubmitOptionsSearch(t){this.filteModelContent.Filters=t,this.DataGetAll()}onActionTableRowSelect(t){this.tableRowSelected=t}onActionBackToParent(){this.router.navigate(["/core/site/"])}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(r.FLW),e.Y36(r.mbu),e.Y36(T.i),e.Y36(b.e),e.Y36(F.s),e.Y36(L.gz),e.Y36(M.v),e.Y36(f.uw),e.Y36(e.sBO),e.Y36(C.sK),e.Y36(L.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-coremodulelog-score-list"]],decls:67,vars:30,consts:[[3,"optionLoading","optionTreeDisplay"],["cms-tree",""],["cms-header",""],["cms-action",""],["type","button","class","btn btn-outline-secondary BTN","data-toggle","modal","data-target","#categoryModal",3,"click",4,"ngIf"],["type","button","class","btn btn-outline-warning","data-toggle","modal","data-target","#categoryModal",3,"click",4,"ngIf"],["type","button","class","btn btn-outline-danger",3,"click",4,"ngIf"],[1,"btn","btn-outline-info","btn-sm","BTN"],[3,"ngModel","ngModelChange"],[3,"click"],["type","button",1,"btn","btn-outline-secondary","BTN",3,"click"],[2,"font-size","20px","margin","-1px",3,"title"],["type","button","class","btn btn-outline-success BTN",3,"click",4,"ngIf"],["cms-action-area",""],[3,"options","optionsChange"],["cms-body",""],["matSort","",3,"dataSource","matSortChange"],["tableSort","matSort"],["matColumnDef","Id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","RecordStatus"],["matColumnDef","LinkSiteId"],["matColumnDef","LinkUserId"],["matColumnDef","LinkMemberUserId"],["matColumnDef","ModuleName"],["matColumnDef","ModuleEntityName"],["matColumnDef","ModuleEntityId"],["matColumnDef","CreatedDate"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class"," Action",4,"matCellDef"],[4,"matHeaderRowDef"],[3,"ngStyle","click",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"length","pageIndex","pageSize","pageSizeOptions","page"],["paginator",""],["type","button","data-toggle","modal","data-target","#categoryModal",1,"btn","btn-outline-secondary","BTN",3,"click"],["type","button","data-toggle","modal","data-target","#categoryModal",1,"btn","btn-outline-warning",3,"click"],["type","button",1,"btn","btn-outline-danger",3,"click"],["type","button",1,"btn","btn-outline-success","BTN",3,"click"],["mat-sort-header",""],[3,"ngClass"],[1,"Action"],["mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],["actionMenu","matMenu"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","",3,"click"],[3,"ngStyle","click"]],template:function(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"app-cms-html-list",0),e.ynx(1,1),e._uU(2," -------------------------------------- "),e.BQk(),e.GkF(3,2),e.ynx(4,3),e.YNc(5,Uo,3,3,"button",4),e.YNc(6,Fo,3,3,"button",5),e.YNc(7,Oo,3,3,"button",6),e.TgZ(8,"a",7),e.TgZ(9,"mat-slide-toggle",8),e.NdJ("ngModelChange",function(a){return o.optionsSearch.data.show=a}),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.qZA(),e.TgZ(12,"a",7),e.TgZ(13,"mat-slide-toggle",9),e.NdJ("click",function(){return o.onActionbuttonStatist()}),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.qZA(),e.TgZ(16,"a",7),e.TgZ(17,"mat-slide-toggle",9),e.NdJ("click",function(){return o.onActionbuttonExport()}),e._uU(18),e.ALo(19,"translate"),e.qZA(),e.qZA(),e.TgZ(20,"button",10),e.NdJ("click",function(){return o.onActionbuttonReload()}),e.TgZ(21,"mat-icon",11),e.ALo(22,"translate"),e._uU(23,"refresh"),e.qZA(),e.qZA(),e.YNc(24,Do,3,3,"button",12),e.BQk(),e.ynx(25,13),e.TgZ(26,"app-cms-search-list",14),e.NdJ("optionsChange",function(a){return o.optionsSearch=a}),e.qZA(),e.TgZ(27,"app-cms-export-list",14),e.NdJ("optionsChange",function(a){return o.optionsExport=a}),e.qZA(),e.TgZ(28,"app-cms-statist-list",14),e.NdJ("optionsChange",function(a){return o.optionsStatist=a}),e.qZA(),e.BQk(),e.ynx(29,15),e.TgZ(30,"mat-table",16,17),e.NdJ("matSortChange",function(){e.CHM(n);const a=e.MAs(31);return o.onTableSortData(a)}),e.ynx(32,18),e.YNc(33,Jo,2,1,"mat-header-cell",19),e.YNc(34,Yo,2,1,"mat-cell",20),e.BQk(),e.ynx(35,21),e.YNc(36,Bo,2,1,"mat-header-cell",19),e.YNc(37,Qo,3,3,"mat-cell",20),e.BQk(),e.ynx(38,22),e.YNc(39,Ho,2,1,"mat-header-cell",19),e.YNc(40,Po,2,1,"mat-cell",20),e.BQk(),e.ynx(41,23),e.YNc(42,jo,2,1,"mat-header-cell",19),e.YNc(43,Go,2,1,"mat-cell",20),e.BQk(),e.ynx(44,24),e.YNc(45,Vo,2,1,"mat-header-cell",19),e.YNc(46,$o,2,1,"mat-cell",20),e.BQk(),e.ynx(47,25),e.YNc(48,Wo,2,1,"mat-header-cell",19),e.YNc(49,zo,2,1,"mat-cell",20),e.BQk(),e.ynx(50,26),e.YNc(51,Xo,2,1,"mat-header-cell",19),e.YNc(52,Ko,2,1,"mat-cell",20),e.BQk(),e.ynx(53,27),e.YNc(54,ei,2,1,"mat-header-cell",19),e.YNc(55,ti,2,1,"mat-cell",20),e.BQk(),e.ynx(56,28),e.YNc(57,oi,2,1,"mat-header-cell",19),e.YNc(58,ii,2,1,"mat-cell",20),e.BQk(),e.ynx(59,29),e.YNc(60,ni,3,3,"mat-header-cell",30),e.YNc(61,di,11,6,"mat-cell",31),e.BQk(),e.YNc(62,ui,1,0,"mat-header-row",32),e.YNc(63,pi,1,3,"mat-row",33),e.qZA(),e.BQk(),e.ynx(64,34),e.TgZ(65,"mat-paginator",35,36),e.NdJ("page",function(a){return o.onTablePageingData(a)}),e.qZA(),e.BQk(),e.qZA()}2&t&&(e.Q6J("optionLoading",o.loading)("optionTreeDisplay",!1),e.xp6(5),e.Q6J("ngIf",o.dataModelResult.Access.AccessWatchRow&&(null==o.tableRowSelected||null==o.tableRowSelected.Id?null:o.tableRowSelected.Id.length)>0),e.xp6(1),e.Q6J("ngIf",o.dataModelResult.Access.AccessEditRow&&(null==o.tableRowSelected||null==o.tableRowSelected.Id?null:o.tableRowSelected.Id.length)>0),e.xp6(1),e.Q6J("ngIf",o.dataModelResult.Access.AccessDeleteRow&&(null==o.tableRowSelected||null==o.tableRowSelected.Id?null:o.tableRowSelected.Id.length)>0),e.xp6(2),e.Q6J("ngModel",o.optionsSearch.data.show),e.xp6(1),e.Oqu(e.lcZ(11,21,"ACTION.SEARCH")),e.xp6(4),e.hij("",e.lcZ(15,23,"ACTION.STATIST")," "),e.xp6(4),e.hij("",e.lcZ(19,25,"ACTION.EXPORTFILE")," "),e.xp6(3),e.s9C("title",e.lcZ(22,27,"ACTION.RELOAD")),e.xp6(3),e.Q6J("ngIf",o.requestLinkSiteId>0),e.xp6(2),e.Q6J("options",o.optionsSearch),e.xp6(1),e.Q6J("options",o.optionsExport),e.xp6(1),e.Q6J("options",o.optionsStatist),e.xp6(2),e.Q6J("dataSource",o.tableSource),e.xp6(32),e.Q6J("matHeaderRowDef",o.tabledisplayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",o.tabledisplayedColumns),e.xp6(2),e.Q6J("length",o.dataModelResult.TotalRowCount)("pageIndex",o.dataModelResult.CurrentPageNumber-1)("pageSize",o.dataModelResult.RowPerPage)("pageSizeOptions",e.DdM(29,_i)))},directives:[O.Z,g.O5,D.Rr,m.JJ,m.On,E.Hw,J.y,Y.Z,B.q,d.BZ,Z.YE,d.w1,d.fO,d.ge,Z.nU,d.Dz,d.ev,g.mk,Q.lW,A.p6,A.VK,A.OP,d.as,d.XQ,d.nj,d.Gk,g.PC,H.NW],pipes:[C.X$,P.b],encapsulation:2}),i})();const gi=["vform"];function fi(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",6),e.TgZ(1,"button",11),e.NdJ("click",function(){return e.CHM(t),e.oxw().onFormCancel()}),e._UZ(2,"i",12),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.qZA()}2&i&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"ACTION.CANCEL")," "))}let Ci=(()=>{class i{constructor(t,o,n,s,a,u,_,h){this.data=t,this.dialogRef=o,this.coreEnumService=n,this.coreModuleLogSiteCreditBlockedService=s,this.cmsToastrService=a,this.tokenHelper=u,this.cdr=_,this.publicHelper=h,this.requestId="",this.tokenInfo=new r.OdC,this.loading=new S.O,this.dataModelResult=new r.y$4,this.dataModel=new r.dMk,this.formInfo=new r.LEF,this.fieldsInfo=new Map,this.fileManagerOpenForm=!1,this.loading.cdr=this.cdr,t&&(this.requestId=t.id)}ngOnInit(){if(!(this.requestId&&this.requestId.length>0))return this.cmsToastrService.typeErrorComponentAction(),void this.dialogRef.close({dialogChangedDate:!1});this.formInfo.FormTitle="\u0648\u06cc\u0631\u0627\u06cc\u0634  ",this.DataGetOneContent(),this.tokenHelper.getCurrentToken().then(t=>{this.tokenInfo=t}),this.cmsApiStoreSubscribe=this.tokenHelper.getCurrentTokenOnChange().subscribe(t=>{this.tokenInfo=t})}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}DataGetOneContent(){if(!this.requestId||0===this.requestId.length)return void this.cmsToastrService.typeErrorEditRowIsNull();this.formInfo.FormAlert="\u062f\u0631 \u062f\u0631\u06cc\u0627\u0641\u062a \u0627\u0631\u0633\u0627\u0644 \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0627\u0632 \u0633\u0631\u0648\u0631",this.formInfo.FormError="";const t=this.constructor.name+"main";this.loading.Start(t),this.coreModuleLogSiteCreditBlockedService.setAccessLoad(),this.coreModuleLogSiteCreditBlockedService.ServiceGetOneById(this.requestId).subscribe(o=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(o.Access),this.dataModel=o.Item,o.IsSuccess?(this.formInfo.FormTitle=this.formInfo.FormTitle+" "+o.Item.Id,this.formInfo.FormAlert=""):(this.formInfo.FormAlert="\u0628\u0631\u0631\u0648\u0632 \u062e\u0637\u0627",this.formInfo.FormError=o.ErrorMessage,this.cmsToastrService.typeErrorMessage(o.ErrorMessage)),this.loading.Stop(t)},o=>{this.cmsToastrService.typeError(o),this.loading.Stop(t)})}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.WI),e.Y36(f.so),e.Y36(r.FLW),e.Y36(r.ucJ),e.Y36(b.e),e.Y36(M.v),e.Y36(e.sBO),e.Y36(T.i))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-coremodulelog-site-credit-blocked-edit"]],viewQuery:function(t,o){if(1&t&&e.Gf(gi,5),2&t){let n;e.iGM(n=e.CRH())&&(o.formGroup=n.first)}},decls:15,vars:8,consts:[["vform","ngForm"],[1,"ntk-cms-html-card-header"],[1,"ntk-cms-html-card-body"],[3,"options"],[3,"optionDisabled","optionSelectForce","optionPlaceholder"],[1,"ntk-cms-html-card-message"],[1,"form-actions"],[1,"form-text","text-muted"],[1,"form-text","text-muted","danger"],[1,"ntk-cms-html-card-footer"],["class","form-actions",4,"ngIf"],["type","button",1,"btn","btn-light",3,"click"],[1,"ft-x"]],template:function(t,o){1&t&&(e.TgZ(0,"form",null,0),e.TgZ(2,"div",1),e._uU(3),e.qZA(),e.TgZ(4,"div",2),e._UZ(5,"app-progress-spinner",3),e._UZ(6,"app-cms-site-selector",4),e.qZA(),e.TgZ(7,"div",5),e.TgZ(8,"div",6),e.TgZ(9,"small",7),e._uU(10),e.qZA(),e.TgZ(11,"small",8),e._uU(12),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"div",9),e.YNc(14,fi,5,3,"div",10),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.hij(" ",o.formInfo.FormTitle," "),e.xp6(2),e.Q6J("options",o.loading),e.xp6(1),e.Q6J("optionDisabled",!0)("optionSelectForce",o.dataModel.LinkSiteId)("optionPlaceholder","\u0633\u0627\u06cc\u062a"),e.xp6(4),e.hij("",o.formInfo.FormAlert," "),e.xp6(2),e.hij("",o.formInfo.FormError," "),e.xp6(2),e.Q6J("ngIf",o.formInfo.FormSubmitAllow))},directives:[m._Y,m.JL,m.F,I.O,q.P,g.O5],pipes:[C.X$],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:yellow}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:black}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}"]}),i})();const Si=["vform"];function bi(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",5),e.TgZ(1,"button",10),e.NdJ("click",function(){return e.CHM(t),e.oxw().onFormCancel()}),e._UZ(2,"i",11),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.qZA()}2&i&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"ACTION.CANCEL")," "))}let Mi=(()=>{class i{constructor(t,o,n,s,a,u,_,h){this.data=t,this.dialogRef=o,this.coreEnumService=n,this.coreModuleLogSiteCreditBlockedService=s,this.cmsToastrService=a,this.tokenHelper=u,this.cdr=_,this.publicHelper=h,this.requestId="",this.tokenInfo=new r.OdC,this.loading=new S.O,this.dataModelResult=new r.y$4,this.dataModel=new r.dMk,this.formInfo=new r.LEF,this.dataModelEnumSendSmsStatusTypeResult=new r.y$4,this.fieldsInfo=new Map,this.fileManagerOpenForm=!1,this.loading.cdr=this.cdr,t&&(this.requestId=t.id+"")}ngOnInit(){if(this.formInfo.FormTitle="\u0645\u0634\u0627\u0647\u062f\u0647  ",0===this.requestId.length)return this.cmsToastrService.typeErrorComponentAction(),void this.dialogRef.close({dialogChangedDate:!1});this.DataGetOneContent(),this.tokenHelper.getCurrentToken().then(t=>{this.tokenInfo=t}),this.cmsApiStoreSubscribe=this.tokenHelper.getCurrentTokenOnChange().subscribe(t=>{this.tokenInfo=t}),this.getEnumSendSmsStatusType()}getEnumSendSmsStatusType(){this.coreEnumService.ServiceEnumSendSmsStatusType().subscribe(t=>{this.dataModelEnumSendSmsStatusTypeResult=t})}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}DataGetOneContent(){this.formInfo.FormAlert="\u062f\u0631 \u062f\u0631\u06cc\u0627\u0641\u062a \u0627\u0631\u0633\u0627\u0644 \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0627\u0632 \u0633\u0631\u0648\u0631",this.formInfo.FormError="";const t=this.constructor.name+"main";this.loading.Start(t),this.coreModuleLogSiteCreditBlockedService.setAccessLoad(),this.coreModuleLogSiteCreditBlockedService.ServiceGetOneById(this.requestId).subscribe(o=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(o.Access),this.dataModel=o.Item,o.IsSuccess?(this.formInfo.FormTitle=this.formInfo.FormTitle+" "+o.Item.Id,this.formInfo.FormAlert=""):(this.formInfo.FormAlert="\u0628\u0631\u0631\u0648\u0632 \u062e\u0637\u0627",this.formInfo.FormError=o.ErrorMessage,this.cmsToastrService.typeErrorMessage(o.ErrorMessage)),this.loading.Stop(t)},o=>{this.cmsToastrService.typeError(o),this.loading.Stop(t)})}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.WI),e.Y36(f.so),e.Y36(r.FLW),e.Y36(r.ucJ),e.Y36(b.e),e.Y36(M.v),e.Y36(e.sBO),e.Y36(T.i))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-coremodulelog-report-abuse-view"]],viewQuery:function(t,o){if(1&t&&e.Gf(Si,5),2&t){let n;e.iGM(n=e.CRH())&&(o.formGroup=n.first)}},decls:13,vars:7,consts:[[1,"ntk-cms-html-card-header"],[1,"ntk-cms-html-card-body"],[3,"options"],[3,"dataModel","optionMethod"],[1,"ntk-cms-html-card-message"],[1,"form-actions"],[1,"form-text","text-muted"],[1,"form-text","text-muted","danger"],[1,"ntk-cms-html-card-footer"],["class","form-actions",4,"ngIf"],["type","button",1,"btn","btn-light",3,"click"],[1,"ft-x"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e._uU(1),e.qZA(),e.TgZ(2,"div",1),e._UZ(3,"app-progress-spinner",2),e._UZ(4,"app-cms-json-list",3),e.qZA(),e.TgZ(5,"div",4),e.TgZ(6,"div",5),e.TgZ(7,"small",6),e._uU(8),e.qZA(),e.TgZ(9,"small",7),e._uU(10),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"div",8),e.YNc(12,bi,5,3,"div",9),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",o.formInfo.FormTitle," "),e.xp6(2),e.Q6J("options",o.loading),e.xp6(1),e.Q6J("dataModel",o.dataModel)("optionMethod",1),e.xp6(4),e.hij("",o.formInfo.FormAlert," "),e.xp6(2),e.hij("",o.formInfo.FormError," "),e.xp6(2),e.Q6J("ngIf",o.formInfo.FormSubmitAllow))},directives:[I.O,U.v,g.O5],pipes:[C.X$],encapsulation:2}),i})();function Ti(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",32),e.NdJ("click",function(){return e.CHM(t),e.oxw().onActionbuttonViewRow()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"ACTION.VIEW")))}function Ai(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",33),e.NdJ("click",function(){return e.CHM(t),e.oxw().onActionbuttonEditRow()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"ACTION.EDIT")))}function Li(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",34),e.NdJ("click",function(){return e.CHM(t),e.oxw().onActionbuttonDeleteRow()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"ACTION.DELETE")))}function Ii(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",35),e.NdJ("click",function(){return e.CHM(t),e.oxw().onActionBackToParent()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"ACTION.BACK")))}function wi(i,l){if(1&i&&(e.TgZ(0,"mat-header-cell",36),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.fieldsInfo.Id?null:t.fieldsInfo.Id.FieldTitle," ")}}function Zi(i,l){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.hij(" ",t.Id," ")}}function ki(i,l){if(1&i&&(e.TgZ(0,"mat-header-cell",36),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.fieldsInfo.RecordStatus?null:t.fieldsInfo.RecordStatus.FieldTitle," ")}}function Ri(i,l){if(1&i&&(e.TgZ(0,"mat-cell"),e._UZ(1,"i",37),e.ALo(2,"statusClass"),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.Q6J("ngClass",e.lcZ(2,1,t.RecordStatus))}}function xi(i,l){if(1&i&&(e.TgZ(0,"mat-header-cell",36),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.fieldsInfo.LinkSiteId?null:t.fieldsInfo.LinkSiteId.FieldTitle," ")}}function Ei(i,l){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.hij(" ",t.LinkSiteId," ")}}function vi(i,l){if(1&i&&(e.TgZ(0,"mat-header-cell",36),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.fieldsInfo.CreatedDate?null:t.fieldsInfo.CreatedDate.FieldTitle," ")}}function yi(i,l){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=l.$implicit,o=e.oxw();e.xp6(1),e.hij(" ",o.publicHelper.LocaleDate(t.CreatedDate)," ")}}function Ni(i,l){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"TITLE.OPTION")," "))}function qi(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",42),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit;return e.oxw().onActionbuttonViewRow(n)}),e.TgZ(1,"mat-icon"),e._uU(2,"view"),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.qZA()}2&i&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"ACTION.VIEW")))}function Ui(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",42),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit;return e.oxw().onActionbuttonEditRow(n)}),e.TgZ(1,"mat-icon"),e._uU(2,"mode_edit"),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.qZA()}2&i&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"ACTION.EDIT")))}function Fi(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",42),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit;return e.oxw().onActionbuttonDeleteRow(n)}),e.TgZ(1,"mat-icon"),e._uU(2,"delete_forever"),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.qZA()}2&i&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"ACTION.DELETE")))}function Oi(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",42),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit;return e.oxw().onActionbuttonViewSiteRow(n)}),e.TgZ(1,"mat-icon"),e._uU(2,"supervisor_account"),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.qZA()}2&i&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"ACTION.SITE")))}function Di(i,l){if(1&i&&(e.TgZ(0,"mat-cell",38),e.TgZ(1,"button",39),e.TgZ(2,"mat-icon"),e._uU(3,"more_vert"),e.qZA(),e.qZA(),e.TgZ(4,"mat-menu",null,40),e.YNc(6,qi,6,3,"button",41),e.YNc(7,Ui,6,3,"button",41),e.YNc(8,Fi,6,3,"button",41),e.YNc(9,Oi,6,3,"button",41),e.qZA(),e.qZA()),2&i){const t=l.$implicit,o=e.MAs(5),n=e.oxw();e.xp6(1),e.Q6J("matMenuTriggerFor",o),e.xp6(5),e.Q6J("ngIf",n.dataModelResult.Access.AccessWatchRow),e.xp6(1),e.Q6J("ngIf",n.dataModelResult.Access.AccessEditRow),e.xp6(1),e.Q6J("ngIf",n.dataModelResult.Access.AccessDeleteRow),e.xp6(1),e.Q6J("ngIf",t.LinkSiteId>0)}}function Ji(i,l){1&i&&e._UZ(0,"mat-header-row")}const Yi=function(i){return{background:i}};function Bi(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",43),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw().onActionTableRowSelect(s)}),e.qZA()}if(2&i){const t=l.$implicit,o=e.oxw();e.Q6J("ngStyle",e.VKq(1,Yi,t.Id===o.tableRowSelected.Id?"#d3d3da":""))}}const Qi=function(){return[5,10,20,100]};let Hi=(()=>{class i{constructor(t,o,n,s,a,u,_,h,k,R,x){if(this.coreEnumService=t,this.coreModuleLogSiteCreditBlockedService=o,this.publicHelper=n,this.cmsToastrService=s,this.cmsConfirmationDialogService=a,this.activatedRoute=u,this.tokenHelper=_,this.dialog=h,this.cdr=k,this.translate=R,this.router=x,this.requestLinkSiteId=0,this.requestLinkUserId=0,this.requestlinkMemberUserId=0,this.flag=!1,this.tableContentSelected=[],this.filteModelContent=new r.Hay,this.dataModelResult=new r.y$4,this.optionsSearch=new v.dj,this.optionsStatist=new N.TV,this.optionsExport=new y.zR,this.tokenInfo=new r.OdC,this.loading=new S.O,this.tableRowsSelected=[],this.tableRowSelected=new r.dMk,this.tableSource=new d.by,this.tabledisplayedColumns=["Id","LinkSiteId","CreatedDate","Action"],this.fieldsInfo=new Map,this.loading.cdr=this.cdr,this.requestLinkSiteId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkSiteId")),this.requestLinkUserId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkUserId")),this.requestlinkMemberUserId=+Number(this.activatedRoute.snapshot.paramMap.get("linkMemberUserId")),this.requestLinkSiteId>0){const c=new r.AO3;c.PropertyName="LinkCmsSiteId",c.Value=this.requestLinkSiteId,this.filteModelContent.Filters.push(c)}if(this.requestLinkUserId>0){const c=new r.AO3;c.PropertyName="LinkUserId",c.Value=this.requestLinkUserId,this.filteModelContent.Filters.push(c)}if(this.requestlinkMemberUserId>0){const c=new r.AO3;c.PropertyName="linkMemberUserId",c.Value=this.requestlinkMemberUserId,this.filteModelContent.Filters.push(c)}this.optionsSearch.parentMethods={onSubmit:c=>this.onSubmitOptionsSearch(c)},this.optionsExport.parentMethods={onSubmit:c=>this.onSubmitOptionExport(c)},this.filteModelContent.SortColumn="CreatedDate",this.filteModelContent.SortType=r.oCf.Descending}ngOnInit(){this.filteModelContent.SortColumn="Id",this.filteModelContent.SortType=r.oCf.Descending,this.DataGetAll(),this.tokenHelper.getCurrentToken().then(t=>{this.tokenInfo=t}),this.cmsApiStoreSubscribe=this.tokenHelper.getCurrentTokenOnChange().subscribe(t=>{this.DataGetAll(),this.tokenInfo=t})}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}DataGetAll(){this.tableRowsSelected=[],this.tableRowSelected=new r.dMk;const t=this.constructor.name+"main";this.loading.Start(t),this.filteModelContent.AccessLoad=!0;const o=JSON.parse(JSON.stringify(this.filteModelContent));this.coreModuleLogSiteCreditBlockedService.ServiceGetAllEditor(o).subscribe(n=>{n.IsSuccess&&(this.fieldsInfo=this.publicHelper.fieldInfoConvertor(n.Access),this.dataModelResult=n,this.tableSource.data=n.ListItems,this.tabledisplayedColumns=this.tokenInfo.UserAccessAdminAllowToAllData||this.tokenInfo.UserAccessAdminAllowToProfessionalData?this.publicHelper.listAddIfNotExist(this.tabledisplayedColumns,"LinkSiteId",0):this.publicHelper.listRemoveIfExist(this.tabledisplayedColumns,"LinkSiteId"),this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(n.Access)),this.loading.Stop(t)},n=>{this.cmsToastrService.typeError(n),this.loading.Stop(t)})}onTableSortData(t){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===t.active?"asc"===this.tableSource.sort.start?(t.start="desc",this.filteModelContent.SortColumn=t.active,this.filteModelContent.SortType=r.oCf.Descending):"desc"===this.tableSource.sort.start?(this.filteModelContent.SortColumn="",this.filteModelContent.SortType=r.oCf.Ascending):t.start="desc":(this.filteModelContent.SortColumn=t.active,this.filteModelContent.SortType=r.oCf.Ascending),this.tableSource.sort=t,this.filteModelContent.CurrentPageNumber=0,this.DataGetAll()}onTablePageingData(t){this.filteModelContent.CurrentPageNumber=t.pageIndex+1,this.filteModelContent.RowPerPage=t.pageSize,this.DataGetAll()}onActionbuttonViewRow(t=this.tableRowSelected){t&&t.Id&&0!==t.Id.length?(this.tableRowSelected=t,null!=this.dataModelResult&&null!=this.dataModelResult.Access&&this.dataModelResult.Access.AccessWatchRow?this.dialog.open(Mi,{height:"90%",data:{id:this.tableRowSelected.Id}}).afterClosed().subscribe(n=>{}):this.cmsToastrService.typeErrorAccessWatch()):this.cmsToastrService.typeErrorSelectedRow()}onActionbuttonEditRow(t=this.tableRowSelected){t&&t.Id&&0!==t.Id.length?(this.tableRowSelected=t,null!=this.dataModelResult&&null!=this.dataModelResult.Access&&this.dataModelResult.Access.AccessEditRow?this.dialog.open(Ci,{height:"90%",data:{id:this.tableRowSelected.Id}}).afterClosed().subscribe(n=>{n&&n.dialogChangedDate&&this.DataGetAll()}):this.cmsToastrService.typeErrorAccessEdit()):this.cmsToastrService.typeErrorSelectedRow()}onActionbuttonDeleteRow(t=this.tableRowSelected){if(!t||!t.Id||0===t.Id.length)return void this.cmsToastrService.typeErrorSelected("\u0631\u062f\u06cc\u0641\u06cc \u0628\u0631\u0627\u06cc \u062d\u0630\u0641 \u0627\u0646\u062a\u062e\u0627\u0628 \u0646\u0634\u062f\u0647 \u0627\u0633\u062a");if(this.tableRowSelected=t,null==this.dataModelResult||null==this.dataModelResult.Access||!this.dataModelResult.Access.AccessDeleteRow)return void this.cmsToastrService.typeErrorAccessDelete();const o=this.translate.instant("MESSAGE.Please_Confirm");this.cmsConfirmationDialogService.confirm(o,"\u0622\u06cc\u0627 \u0645\u0627\u06cc\u0644 \u0628\u0647 \u062d\u062f\u0641 \u0627\u06cc\u0646 \u0645\u062d\u062a\u0648\u0627 \u0645\u06cc \u0628\u0627\u0634\u06cc\u062f ?<br> ( "+this.tableRowSelected.Id+" ) ").then(s=>{if(s){const a=this.constructor.name+"main";this.loading.Start(a),this.coreModuleLogSiteCreditBlockedService.ServiceDelete(this.tableRowSelected.Id).subscribe(u=>{u.IsSuccess?(this.cmsToastrService.typeSuccessRemove(),this.DataGetAll()):this.cmsToastrService.typeErrorRemove(),this.loading.Stop(a)},u=>{this.cmsToastrService.typeError(u),this.loading.Stop(a)})}}).catch(()=>{})}onActionbuttonStatist(){if(this.optionsStatist.data.show=!this.optionsStatist.data.show,!this.optionsStatist.data.show)return;const t=new Map;t.set("Active",0),t.set("All",0),this.coreModuleLogSiteCreditBlockedService.ServiceGetCount(this.filteModelContent).subscribe(s=>{s.IsSuccess&&(t.set("All",s.TotalRowCount),this.optionsStatist.childMethods.setStatistValue(t))},s=>{this.cmsToastrService.typeError(s)});const o=JSON.parse(JSON.stringify(this.filteModelContent)),n=new r.AO3;n.PropertyName="RecordStatus",n.Value=r.FVU.Available,o.Filters.push(n),this.coreModuleLogSiteCreditBlockedService.ServiceGetCount(o).subscribe(s=>{s.IsSuccess&&(t.set("Active",s.TotalRowCount),this.optionsStatist.childMethods.setStatistValue(t))},s=>{this.cmsToastrService.typeError(s)})}onActionbuttonViewSiteRow(t=this.tableRowSelected){t&&t.Id&&0!==t.Id.length?(this.tableRowSelected=t,this.tableRowSelected.LinkSiteId&&0!==this.tableRowSelected.LinkSiteId?this.router.navigate(["/core/site/edit",this.tableRowSelected.LinkSiteId]):this.cmsToastrService.typeErrorSelected("\u0645\u062d\u062a\u0648\u0627 \u0634\u0627\u0645\u0644 \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0633\u0627\u06cc\u062a \u0646\u0645\u06cc \u0628\u0627\u0634\u062f")):this.cmsToastrService.typeErrorSelectedRow()}onActionbuttonExport(){this.optionsExport.data.show=!this.optionsExport.data.show,this.optionsExport.childMethods.setExportFilterModel(this.filteModelContent)}onSubmitOptionExport(t){const o=new Map;o.set("Download","loading ... "),this.coreModuleLogSiteCreditBlockedService.ServiceExportFile(t).subscribe(n=>{n.IsSuccess&&(o.set("Download",n.LinkFile),this.optionsExport.childMethods.setExportLinkFile(o))},n=>{this.cmsToastrService.typeError(n)})}onActionbuttonReload(){this.DataGetAll()}onSubmitOptionsSearch(t){this.filteModelContent.Filters=t,this.DataGetAll()}onActionTableRowSelect(t){this.tableRowSelected=t}onActionBackToParent(){this.router.navigate(["/core/site/"])}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(r.FLW),e.Y36(r.ucJ),e.Y36(T.i),e.Y36(b.e),e.Y36(F.s),e.Y36(L.gz),e.Y36(M.v),e.Y36(f.uw),e.Y36(e.sBO),e.Y36(C.sK),e.Y36(L.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-coremodulelog-site-credit-blocked-list"]],decls:52,vars:30,consts:[[3,"optionLoading","optionTreeDisplay"],["cms-tree",""],["cms-header",""],["cms-action",""],["type","button","class","btn btn-outline-secondary BTN","data-toggle","modal","data-target","#categoryModal",3,"click",4,"ngIf"],["type","button","class","btn btn-outline-warning","data-toggle","modal","data-target","#categoryModal",3,"click",4,"ngIf"],["type","button","class","btn btn-outline-danger",3,"click",4,"ngIf"],[1,"btn","btn-outline-info","btn-sm","BTN"],[3,"ngModel","ngModelChange"],[3,"click"],["type","button",1,"btn","btn-outline-secondary","BTN",3,"click"],[2,"font-size","20px","margin","-1px",3,"title"],["type","button","class","btn btn-outline-success BTN",3,"click",4,"ngIf"],["cms-action-area",""],[3,"options","optionsChange"],["cms-body",""],["matSort","",3,"dataSource","matSortChange"],["tableSort","matSort"],["matColumnDef","Id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","RecordStatus"],["matColumnDef","LinkSiteId"],["matColumnDef","CreatedDate"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class"," Action",4,"matCellDef"],[4,"matHeaderRowDef"],[3,"ngStyle","click",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"length","pageIndex","pageSize","pageSizeOptions","page"],["paginator",""],["type","button","data-toggle","modal","data-target","#categoryModal",1,"btn","btn-outline-secondary","BTN",3,"click"],["type","button","data-toggle","modal","data-target","#categoryModal",1,"btn","btn-outline-warning",3,"click"],["type","button",1,"btn","btn-outline-danger",3,"click"],["type","button",1,"btn","btn-outline-success","BTN",3,"click"],["mat-sort-header",""],[3,"ngClass"],[1,"Action"],["mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],["actionMenu","matMenu"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","",3,"click"],[3,"ngStyle","click"]],template:function(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"app-cms-html-list",0),e.ynx(1,1),e._uU(2," -------------------------------------- "),e.BQk(),e.GkF(3,2),e.ynx(4,3),e.YNc(5,Ti,3,3,"button",4),e.YNc(6,Ai,3,3,"button",5),e.YNc(7,Li,3,3,"button",6),e.TgZ(8,"a",7),e.TgZ(9,"mat-slide-toggle",8),e.NdJ("ngModelChange",function(a){return o.optionsSearch.data.show=a}),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.qZA(),e.TgZ(12,"a",7),e.TgZ(13,"mat-slide-toggle",9),e.NdJ("click",function(){return o.onActionbuttonStatist()}),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.qZA(),e.TgZ(16,"a",7),e.TgZ(17,"mat-slide-toggle",9),e.NdJ("click",function(){return o.onActionbuttonExport()}),e._uU(18),e.ALo(19,"translate"),e.qZA(),e.qZA(),e.TgZ(20,"button",10),e.NdJ("click",function(){return o.onActionbuttonReload()}),e.TgZ(21,"mat-icon",11),e.ALo(22,"translate"),e._uU(23,"refresh"),e.qZA(),e.qZA(),e.YNc(24,Ii,3,3,"button",12),e.BQk(),e.ynx(25,13),e.TgZ(26,"app-cms-search-list",14),e.NdJ("optionsChange",function(a){return o.optionsSearch=a}),e.qZA(),e.TgZ(27,"app-cms-export-list",14),e.NdJ("optionsChange",function(a){return o.optionsExport=a}),e.qZA(),e.TgZ(28,"app-cms-statist-list",14),e.NdJ("optionsChange",function(a){return o.optionsStatist=a}),e.qZA(),e.BQk(),e.ynx(29,15),e.TgZ(30,"mat-table",16,17),e.NdJ("matSortChange",function(){e.CHM(n);const a=e.MAs(31);return o.onTableSortData(a)}),e.ynx(32,18),e.YNc(33,wi,2,1,"mat-header-cell",19),e.YNc(34,Zi,2,1,"mat-cell",20),e.BQk(),e.ynx(35,21),e.YNc(36,ki,2,1,"mat-header-cell",19),e.YNc(37,Ri,3,3,"mat-cell",20),e.BQk(),e.ynx(38,22),e.YNc(39,xi,2,1,"mat-header-cell",19),e.YNc(40,Ei,2,1,"mat-cell",20),e.BQk(),e.ynx(41,23),e.YNc(42,vi,2,1,"mat-header-cell",19),e.YNc(43,yi,2,1,"mat-cell",20),e.BQk(),e.ynx(44,24),e.YNc(45,Ni,3,3,"mat-header-cell",25),e.YNc(46,Di,10,5,"mat-cell",26),e.BQk(),e.YNc(47,Ji,1,0,"mat-header-row",27),e.YNc(48,Bi,1,3,"mat-row",28),e.qZA(),e.BQk(),e.ynx(49,29),e.TgZ(50,"mat-paginator",30,31),e.NdJ("page",function(a){return o.onTablePageingData(a)}),e.qZA(),e.BQk(),e.qZA()}2&t&&(e.Q6J("optionLoading",o.loading)("optionTreeDisplay",!1),e.xp6(5),e.Q6J("ngIf",o.dataModelResult.Access.AccessWatchRow&&(null==o.tableRowSelected||null==o.tableRowSelected.Id?null:o.tableRowSelected.Id.length)>0),e.xp6(1),e.Q6J("ngIf",o.dataModelResult.Access.AccessEditRow&&(null==o.tableRowSelected||null==o.tableRowSelected.Id?null:o.tableRowSelected.Id.length)>0),e.xp6(1),e.Q6J("ngIf",o.dataModelResult.Access.AccessDeleteRow&&(null==o.tableRowSelected||null==o.tableRowSelected.Id?null:o.tableRowSelected.Id.length)>0),e.xp6(2),e.Q6J("ngModel",o.optionsSearch.data.show),e.xp6(1),e.Oqu(e.lcZ(11,21,"ACTION.SEARCH")),e.xp6(4),e.hij("",e.lcZ(15,23,"ACTION.STATIST")," "),e.xp6(4),e.hij("",e.lcZ(19,25,"ACTION.EXPORTFILE")," "),e.xp6(3),e.s9C("title",e.lcZ(22,27,"ACTION.RELOAD")),e.xp6(3),e.Q6J("ngIf",o.requestLinkSiteId>0),e.xp6(2),e.Q6J("options",o.optionsSearch),e.xp6(1),e.Q6J("options",o.optionsExport),e.xp6(1),e.Q6J("options",o.optionsStatist),e.xp6(2),e.Q6J("dataSource",o.tableSource),e.xp6(17),e.Q6J("matHeaderRowDef",o.tabledisplayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",o.tabledisplayedColumns),e.xp6(2),e.Q6J("length",o.dataModelResult.TotalRowCount)("pageIndex",o.dataModelResult.CurrentPageNumber-1)("pageSize",o.dataModelResult.RowPerPage)("pageSizeOptions",e.DdM(29,Qi)))},directives:[O.Z,g.O5,D.Rr,m.JJ,m.On,E.Hw,J.y,Y.Z,B.q,d.BZ,Z.YE,d.w1,d.fO,d.ge,Z.nU,d.Dz,d.ev,g.mk,Q.lW,A.p6,A.VK,A.OP,d.as,d.XQ,d.nj,d.Gk,g.PC,H.NW],pipes:[C.X$,P.b],encapsulation:2}),i})();const Pi=["vform"];function ji(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",6),e.TgZ(1,"button",11),e.NdJ("click",function(){return e.CHM(t),e.oxw().onFormCancel()}),e._UZ(2,"i",12),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.qZA()}2&i&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"ACTION.CANCEL")," "))}let Gi=(()=>{class i{constructor(t,o,n,s,a,u,_,h){this.data=t,this.dialogRef=o,this.coreEnumService=n,this.coreModuleLogSiteUserCreditBlockedService=s,this.cmsToastrService=a,this.tokenHelper=u,this.cdr=_,this.publicHelper=h,this.requestId="",this.tokenInfo=new r.OdC,this.loading=new S.O,this.dataModelResult=new r.y$4,this.dataModel=new r.oTi,this.formInfo=new r.LEF,this.fieldsInfo=new Map,this.fileManagerOpenForm=!1,this.loading.cdr=this.cdr,t&&(this.requestId=t.id)}ngOnInit(){if(!(this.requestId&&this.requestId.length>0))return this.cmsToastrService.typeErrorComponentAction(),void this.dialogRef.close({dialogChangedDate:!1});this.formInfo.FormTitle="\u0648\u06cc\u0631\u0627\u06cc\u0634  ",this.DataGetOneContent(),this.tokenHelper.getCurrentToken().then(t=>{this.tokenInfo=t}),this.cmsApiStoreSubscribe=this.tokenHelper.getCurrentTokenOnChange().subscribe(t=>{this.tokenInfo=t})}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}DataGetOneContent(){if(!this.requestId||0===this.requestId.length)return void this.cmsToastrService.typeErrorEditRowIsNull();this.formInfo.FormAlert="\u062f\u0631 \u062f\u0631\u06cc\u0627\u0641\u062a \u0627\u0631\u0633\u0627\u0644 \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0627\u0632 \u0633\u0631\u0648\u0631",this.formInfo.FormError="";const t=this.constructor.name+"main";this.loading.Start(t),this.coreModuleLogSiteUserCreditBlockedService.setAccessLoad(),this.coreModuleLogSiteUserCreditBlockedService.ServiceGetOneById(this.requestId).subscribe(o=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(o.Access),this.dataModel=o.Item,o.IsSuccess?(this.formInfo.FormTitle=this.formInfo.FormTitle+" "+o.Item.Id,this.formInfo.FormAlert=""):(this.formInfo.FormAlert="\u0628\u0631\u0631\u0648\u0632 \u062e\u0637\u0627",this.formInfo.FormError=o.ErrorMessage,this.cmsToastrService.typeErrorMessage(o.ErrorMessage)),this.loading.Stop(t)},o=>{this.cmsToastrService.typeError(o),this.loading.Stop(t)})}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.WI),e.Y36(f.so),e.Y36(r.FLW),e.Y36(r.rgR),e.Y36(b.e),e.Y36(M.v),e.Y36(e.sBO),e.Y36(T.i))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-coremodulelog-site-user-credit-blocked-edit"]],viewQuery:function(t,o){if(1&t&&e.Gf(Pi,5),2&t){let n;e.iGM(n=e.CRH())&&(o.formGroup=n.first)}},decls:16,vars:11,consts:[["vform","ngForm"],[1,"ntk-cms-html-card-header"],[1,"ntk-cms-html-card-body"],[3,"options"],[3,"optionDisabled","optionSelectForce","optionPlaceholder"],[1,"ntk-cms-html-card-message"],[1,"form-actions"],[1,"form-text","text-muted"],[1,"form-text","text-muted","danger"],[1,"ntk-cms-html-card-footer"],["class","form-actions",4,"ngIf"],["type","button",1,"btn","btn-light",3,"click"],[1,"ft-x"]],template:function(t,o){1&t&&(e.TgZ(0,"form",null,0),e.TgZ(2,"div",1),e._uU(3),e.qZA(),e.TgZ(4,"div",2),e._UZ(5,"app-progress-spinner",3),e._UZ(6,"app-cms-site-selector",4),e._UZ(7,"app-cms-user-selector",4),e.qZA(),e.TgZ(8,"div",5),e.TgZ(9,"div",6),e.TgZ(10,"small",7),e._uU(11),e.qZA(),e.TgZ(12,"small",8),e._uU(13),e.qZA(),e.qZA(),e.qZA(),e.TgZ(14,"div",9),e.YNc(15,ji,5,3,"div",10),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.hij(" ",o.formInfo.FormTitle," "),e.xp6(2),e.Q6J("options",o.loading),e.xp6(1),e.Q6J("optionDisabled",!0)("optionSelectForce",o.dataModel.LinkSiteId)("optionPlaceholder","\u0633\u0627\u06cc\u062a"),e.xp6(1),e.Q6J("optionDisabled",!0)("optionSelectForce",o.dataModel.LinkUserId)("optionPlaceholder","\u06a9\u0627\u0631\u0628\u0631"),e.xp6(4),e.hij("",o.formInfo.FormAlert," "),e.xp6(2),e.hij("",o.formInfo.FormError," "),e.xp6(2),e.Q6J("ngIf",o.formInfo.FormSubmitAllow))},directives:[m._Y,m.JL,m.F,I.O,q.P,j.g,g.O5],pipes:[C.X$],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:yellow}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:black}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}"]}),i})();const Vi=["vform"];function $i(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"div",5),e.TgZ(1,"button",10),e.NdJ("click",function(){return e.CHM(t),e.oxw().onFormCancel()}),e._UZ(2,"i",11),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.qZA()}2&i&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"ACTION.CANCEL")," "))}let Wi=(()=>{class i{constructor(t,o,n,s,a,u,_,h){this.data=t,this.dialogRef=o,this.coreEnumService=n,this.coreModuleLogSiteUserCreditBlockedService=s,this.cmsToastrService=a,this.tokenHelper=u,this.cdr=_,this.publicHelper=h,this.requestId="",this.tokenInfo=new r.OdC,this.loading=new S.O,this.dataModelResult=new r.y$4,this.dataModel=new r.oTi,this.formInfo=new r.LEF,this.dataModelEnumSendSmsStatusTypeResult=new r.y$4,this.fieldsInfo=new Map,this.fileManagerOpenForm=!1,this.loading.cdr=this.cdr,t&&(this.requestId=t.id+"")}ngOnInit(){if(this.formInfo.FormTitle="\u0645\u0634\u0627\u0647\u062f\u0647  ",0===this.requestId.length)return this.cmsToastrService.typeErrorComponentAction(),void this.dialogRef.close({dialogChangedDate:!1});this.DataGetOneContent(),this.tokenHelper.getCurrentToken().then(t=>{this.tokenInfo=t}),this.cmsApiStoreSubscribe=this.tokenHelper.getCurrentTokenOnChange().subscribe(t=>{this.tokenInfo=t}),this.getEnumSendSmsStatusType()}getEnumSendSmsStatusType(){this.coreEnumService.ServiceEnumSendSmsStatusType().subscribe(t=>{this.dataModelEnumSendSmsStatusTypeResult=t})}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}DataGetOneContent(){this.formInfo.FormAlert="\u062f\u0631 \u062f\u0631\u06cc\u0627\u0641\u062a \u0627\u0631\u0633\u0627\u0644 \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0627\u0632 \u0633\u0631\u0648\u0631",this.formInfo.FormError="";const t=this.constructor.name+"main";this.loading.Start(t),this.coreModuleLogSiteUserCreditBlockedService.setAccessLoad(),this.coreModuleLogSiteUserCreditBlockedService.ServiceGetOneById(this.requestId).subscribe(o=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(o.Access),this.dataModel=o.Item,o.IsSuccess?(this.formInfo.FormTitle=this.formInfo.FormTitle+" "+o.Item.Id,this.formInfo.FormAlert=""):(this.formInfo.FormAlert="\u0628\u0631\u0631\u0648\u0632 \u062e\u0637\u0627",this.formInfo.FormError=o.ErrorMessage,this.cmsToastrService.typeErrorMessage(o.ErrorMessage)),this.loading.Stop(t)},o=>{this.cmsToastrService.typeError(o),this.loading.Stop(t)})}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f.WI),e.Y36(f.so),e.Y36(r.FLW),e.Y36(r.rgR),e.Y36(b.e),e.Y36(M.v),e.Y36(e.sBO),e.Y36(T.i))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-coremodulelog-report-abuse-view"]],viewQuery:function(t,o){if(1&t&&e.Gf(Vi,5),2&t){let n;e.iGM(n=e.CRH())&&(o.formGroup=n.first)}},decls:13,vars:7,consts:[[1,"ntk-cms-html-card-header"],[1,"ntk-cms-html-card-body"],[3,"options"],[3,"dataModel","optionMethod"],[1,"ntk-cms-html-card-message"],[1,"form-actions"],[1,"form-text","text-muted"],[1,"form-text","text-muted","danger"],[1,"ntk-cms-html-card-footer"],["class","form-actions",4,"ngIf"],["type","button",1,"btn","btn-light",3,"click"],[1,"ft-x"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e._uU(1),e.qZA(),e.TgZ(2,"div",1),e._UZ(3,"app-progress-spinner",2),e._UZ(4,"app-cms-json-list",3),e.qZA(),e.TgZ(5,"div",4),e.TgZ(6,"div",5),e.TgZ(7,"small",6),e._uU(8),e.qZA(),e.TgZ(9,"small",7),e._uU(10),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"div",8),e.YNc(12,$i,5,3,"div",9),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",o.formInfo.FormTitle," "),e.xp6(2),e.Q6J("options",o.loading),e.xp6(1),e.Q6J("dataModel",o.dataModel)("optionMethod",1),e.xp6(4),e.hij("",o.formInfo.FormAlert," "),e.xp6(2),e.hij("",o.formInfo.FormError," "),e.xp6(2),e.Q6J("ngIf",o.formInfo.FormSubmitAllow))},directives:[I.O,U.v,g.O5],pipes:[C.X$],encapsulation:2}),i})();function zi(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",33),e.NdJ("click",function(){return e.CHM(t),e.oxw().onActionbuttonViewRow()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"ACTION.VIEW")))}function Xi(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",34),e.NdJ("click",function(){return e.CHM(t),e.oxw().onActionbuttonEditRow()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"ACTION.EDIT")))}function Ki(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",35),e.NdJ("click",function(){return e.CHM(t),e.oxw().onActionbuttonDeleteRow()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"ACTION.DELETE")))}function en(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",36),e.NdJ("click",function(){return e.CHM(t),e.oxw().onActionBackToParent()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"ACTION.BACK")))}function tn(i,l){if(1&i&&(e.TgZ(0,"mat-header-cell",37),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.fieldsInfo.Id?null:t.fieldsInfo.Id.FieldTitle," ")}}function on(i,l){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.hij(" ",t.Id," ")}}function nn(i,l){if(1&i&&(e.TgZ(0,"mat-header-cell",37),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.fieldsInfo.RecordStatus?null:t.fieldsInfo.RecordStatus.FieldTitle," ")}}function ln(i,l){if(1&i&&(e.TgZ(0,"mat-cell"),e._UZ(1,"i",38),e.ALo(2,"statusClass"),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.Q6J("ngClass",e.lcZ(2,1,t.RecordStatus))}}function sn(i,l){if(1&i&&(e.TgZ(0,"mat-header-cell",37),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.fieldsInfo.LinkSiteId?null:t.fieldsInfo.LinkSiteId.FieldTitle," ")}}function rn(i,l){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.hij(" ",t.LinkSiteId," ")}}function an(i,l){if(1&i&&(e.TgZ(0,"mat-header-cell",37),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.fieldsInfo.LinkUserId?null:t.fieldsInfo.LinkUserId.FieldTitle," ")}}function cn(i,l){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=l.$implicit;e.xp6(1),e.hij(" ",t.LinkUserId," ")}}function dn(i,l){if(1&i&&(e.TgZ(0,"mat-header-cell",37),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.fieldsInfo.CreatedDate?null:t.fieldsInfo.CreatedDate.FieldTitle," ")}}function un(i,l){if(1&i&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&i){const t=l.$implicit,o=e.oxw();e.xp6(1),e.hij(" ",o.publicHelper.LocaleDate(t.CreatedDate)," ")}}function mn(i,l){1&i&&(e.TgZ(0,"mat-header-cell"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"TITLE.OPTION")," "))}function pn(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",43),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit;return e.oxw().onActionbuttonViewRow(n)}),e.TgZ(1,"mat-icon"),e._uU(2,"view"),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.qZA()}2&i&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"ACTION.VIEW")))}function _n(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",43),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit;return e.oxw().onActionbuttonEditRow(n)}),e.TgZ(1,"mat-icon"),e._uU(2,"mode_edit"),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.qZA()}2&i&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"ACTION.EDIT")))}function hn(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",43),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit;return e.oxw().onActionbuttonDeleteRow(n)}),e.TgZ(1,"mat-icon"),e._uU(2,"delete_forever"),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.qZA()}2&i&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"ACTION.DELETE")))}function gn(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"button",43),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit;return e.oxw().onActionbuttonViewUserRow(n)}),e.TgZ(1,"mat-icon"),e._uU(2,"supervisor_account"),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.qZA()}2&i&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"ACTION.USER")))}function fn(i,l){if(1&i&&(e.TgZ(0,"mat-cell",39),e.TgZ(1,"button",40),e.TgZ(2,"mat-icon"),e._uU(3,"more_vert"),e.qZA(),e.qZA(),e.TgZ(4,"mat-menu",null,41),e.YNc(6,pn,6,3,"button",42),e.YNc(7,_n,6,3,"button",42),e.YNc(8,hn,6,3,"button",42),e.YNc(9,gn,6,3,"button",42),e.qZA(),e.qZA()),2&i){const t=l.$implicit,o=e.MAs(5),n=e.oxw();e.xp6(1),e.Q6J("matMenuTriggerFor",o),e.xp6(5),e.Q6J("ngIf",n.dataModelResult.Access.AccessWatchRow),e.xp6(1),e.Q6J("ngIf",n.dataModelResult.Access.AccessEditRow),e.xp6(1),e.Q6J("ngIf",n.dataModelResult.Access.AccessDeleteRow),e.xp6(1),e.Q6J("ngIf",t.LinkUserId>0)}}function Cn(i,l){1&i&&e._UZ(0,"mat-header-row")}const Sn=function(i){return{background:i}};function bn(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"mat-row",44),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw().onActionTableRowSelect(s)}),e.qZA()}if(2&i){const t=l.$implicit,o=e.oxw();e.Q6J("ngStyle",e.VKq(1,Sn,t.Id===o.tableRowSelected.Id?"#d3d3da":""))}}const Mn=function(){return[5,10,20,100]},Tn=[{path:"",component:W,children:[{path:"report-abuse",component:wo},{path:"favorite",component:Je},{path:"like",component:Rt},{path:"score",component:hi},{path:"site-credit-blocked",component:Hi},{path:"site-user-credit-blocked",component:(()=>{class i{constructor(t,o,n,s,a,u,_,h,k,R,x){if(this.coreEnumService=t,this.coreModuleLogSiteUserCreditBlockedService=o,this.publicHelper=n,this.cmsToastrService=s,this.cmsConfirmationDialogService=a,this.activatedRoute=u,this.tokenHelper=_,this.dialog=h,this.cdr=k,this.translate=R,this.router=x,this.requestLinkSiteId=0,this.requestLinkUserId=0,this.requestlinkMemberUserId=0,this.flag=!1,this.tableContentSelected=[],this.filteModelContent=new r.Hay,this.dataModelResult=new r.y$4,this.optionsSearch=new v.dj,this.optionsStatist=new N.TV,this.optionsExport=new y.zR,this.tokenInfo=new r.OdC,this.loading=new S.O,this.tableRowsSelected=[],this.tableRowSelected=new r.oTi,this.tableSource=new d.by,this.tabledisplayedColumns=["Id","LinkUserId","LinkSiteId","CreatedDate","Action"],this.fieldsInfo=new Map,this.loading.cdr=this.cdr,this.requestLinkSiteId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkSiteId")),this.requestLinkUserId=+Number(this.activatedRoute.snapshot.paramMap.get("LinkUserId")),this.requestlinkMemberUserId=+Number(this.activatedRoute.snapshot.paramMap.get("linkMemberUserId")),this.requestLinkSiteId>0){const c=new r.AO3;c.PropertyName="LinkCmsSiteId",c.Value=this.requestLinkSiteId,this.filteModelContent.Filters.push(c)}if(this.requestLinkUserId>0){const c=new r.AO3;c.PropertyName="LinkUserId",c.Value=this.requestLinkUserId,this.filteModelContent.Filters.push(c)}if(this.requestlinkMemberUserId>0){const c=new r.AO3;c.PropertyName="linkMemberUserId",c.Value=this.requestlinkMemberUserId,this.filteModelContent.Filters.push(c)}this.optionsSearch.parentMethods={onSubmit:c=>this.onSubmitOptionsSearch(c)},this.optionsExport.parentMethods={onSubmit:c=>this.onSubmitOptionExport(c)},this.filteModelContent.SortColumn="CreatedDate",this.filteModelContent.SortType=r.oCf.Descending}ngOnInit(){this.filteModelContent.SortColumn="Id",this.filteModelContent.SortType=r.oCf.Descending,this.DataGetAll(),this.tokenHelper.getCurrentToken().then(t=>{this.tokenInfo=t}),this.cmsApiStoreSubscribe=this.tokenHelper.getCurrentTokenOnChange().subscribe(t=>{this.DataGetAll(),this.tokenInfo=t})}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}DataGetAll(){this.tableRowsSelected=[],this.tableRowSelected=new r.oTi;const t=this.constructor.name+"main";this.loading.Start(t),this.filteModelContent.AccessLoad=!0;const o=JSON.parse(JSON.stringify(this.filteModelContent));this.coreModuleLogSiteUserCreditBlockedService.ServiceGetAllEditor(o).subscribe(n=>{n.IsSuccess&&(this.fieldsInfo=this.publicHelper.fieldInfoConvertor(n.Access),this.dataModelResult=n,this.tableSource.data=n.ListItems,this.tabledisplayedColumns=this.tokenInfo.UserAccessAdminAllowToAllData||this.tokenInfo.UserAccessAdminAllowToProfessionalData?this.publicHelper.listAddIfNotExist(this.tabledisplayedColumns,"LinkSiteId",0):this.publicHelper.listRemoveIfExist(this.tabledisplayedColumns,"LinkSiteId"),this.optionsSearch.childMethods&&this.optionsSearch.childMethods.setAccess(n.Access)),this.loading.Stop(t)},n=>{this.cmsToastrService.typeError(n),this.loading.Stop(t)})}onTableSortData(t){this.tableSource&&this.tableSource.sort&&this.tableSource.sort.active===t.active?"asc"===this.tableSource.sort.start?(t.start="desc",this.filteModelContent.SortColumn=t.active,this.filteModelContent.SortType=r.oCf.Descending):"desc"===this.tableSource.sort.start?(this.filteModelContent.SortColumn="",this.filteModelContent.SortType=r.oCf.Ascending):t.start="desc":(this.filteModelContent.SortColumn=t.active,this.filteModelContent.SortType=r.oCf.Ascending),this.tableSource.sort=t,this.filteModelContent.CurrentPageNumber=0,this.DataGetAll()}onTablePageingData(t){this.filteModelContent.CurrentPageNumber=t.pageIndex+1,this.filteModelContent.RowPerPage=t.pageSize,this.DataGetAll()}onActionbuttonViewRow(t=this.tableRowSelected){t&&t.Id&&0!==t.Id.length?(this.tableRowSelected=t,null!=this.dataModelResult&&null!=this.dataModelResult.Access&&this.dataModelResult.Access.AccessWatchRow?this.dialog.open(Wi,{height:"90%",data:{id:this.tableRowSelected.Id}}).afterClosed().subscribe(n=>{}):this.cmsToastrService.typeErrorAccessWatch()):this.cmsToastrService.typeErrorSelectedRow()}onActionbuttonEditRow(t=this.tableRowSelected){t&&t.Id&&0!==t.Id.length?(this.tableRowSelected=t,null!=this.dataModelResult&&null!=this.dataModelResult.Access&&this.dataModelResult.Access.AccessEditRow?this.dialog.open(Gi,{height:"90%",data:{id:this.tableRowSelected.Id}}).afterClosed().subscribe(n=>{n&&n.dialogChangedDate&&this.DataGetAll()}):this.cmsToastrService.typeErrorAccessEdit()):this.cmsToastrService.typeErrorSelectedRow()}onActionbuttonDeleteRow(t=this.tableRowSelected){if(!t||!t.Id||0===t.Id.length)return void this.cmsToastrService.typeErrorSelected("\u0631\u062f\u06cc\u0641\u06cc \u0628\u0631\u0627\u06cc \u062d\u0630\u0641 \u0627\u0646\u062a\u062e\u0627\u0628 \u0646\u0634\u062f\u0647 \u0627\u0633\u062a");if(this.tableRowSelected=t,null==this.dataModelResult||null==this.dataModelResult.Access||!this.dataModelResult.Access.AccessDeleteRow)return void this.cmsToastrService.typeErrorAccessDelete();const o=this.translate.instant("MESSAGE.Please_Confirm");this.cmsConfirmationDialogService.confirm(o,"\u0622\u06cc\u0627 \u0645\u0627\u06cc\u0644 \u0628\u0647 \u062d\u062f\u0641 \u0627\u06cc\u0646 \u0645\u062d\u062a\u0648\u0627 \u0645\u06cc \u0628\u0627\u0634\u06cc\u062f ?<br> ( "+this.tableRowSelected.Id+" ) ").then(s=>{if(s){const a=this.constructor.name+"main";this.loading.Start(a),this.coreModuleLogSiteUserCreditBlockedService.ServiceDelete(this.tableRowSelected.Id).subscribe(u=>{u.IsSuccess?(this.cmsToastrService.typeSuccessRemove(),this.DataGetAll()):this.cmsToastrService.typeErrorRemove(),this.loading.Stop(a)},u=>{this.cmsToastrService.typeError(u),this.loading.Stop(a)})}}).catch(()=>{})}onActionbuttonStatist(){if(this.optionsStatist.data.show=!this.optionsStatist.data.show,!this.optionsStatist.data.show)return;const t=new Map;t.set("Active",0),t.set("All",0),this.coreModuleLogSiteUserCreditBlockedService.ServiceGetCount(this.filteModelContent).subscribe(s=>{s.IsSuccess&&(t.set("All",s.TotalRowCount),this.optionsStatist.childMethods.setStatistValue(t))},s=>{this.cmsToastrService.typeError(s)});const o=JSON.parse(JSON.stringify(this.filteModelContent)),n=new r.AO3;n.PropertyName="RecordStatus",n.Value=r.FVU.Available,o.Filters.push(n),this.coreModuleLogSiteUserCreditBlockedService.ServiceGetCount(o).subscribe(s=>{s.IsSuccess&&(t.set("Active",s.TotalRowCount),this.optionsStatist.childMethods.setStatistValue(t))},s=>{this.cmsToastrService.typeError(s)})}onActionbuttonViewUserRow(t=this.tableRowSelected){t&&t.Id&&0!==t.Id.length?(this.tableRowSelected=t,this.tableRowSelected.LinkUserId&&0!==this.tableRowSelected.LinkUserId?this.router.navigate(["/core/user/edit",this.tableRowSelected.LinkUserId]):this.cmsToastrService.typeErrorSelected("\u0645\u062d\u062a\u0648\u0627 \u0634\u0627\u0645\u0644 \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u06a9\u0627\u0631\u0628\u0631 \u0646\u0645\u06cc \u0628\u0627\u0634\u062f")):this.cmsToastrService.typeErrorSelectedRow()}onActionbuttonViewSiteRow(t=this.tableRowSelected){t&&t.Id&&0!==t.Id.length?(this.tableRowSelected=t,this.tableRowSelected.LinkSiteId&&0!==this.tableRowSelected.LinkSiteId?this.router.navigate(["/core/site/edit",this.tableRowSelected.LinkSiteId]):this.cmsToastrService.typeErrorSelected("\u0645\u062d\u062a\u0648\u0627 \u0634\u0627\u0645\u0644 \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0633\u0627\u06cc\u062a \u0646\u0645\u06cc \u0628\u0627\u0634\u062f")):this.cmsToastrService.typeErrorSelectedRow()}onActionbuttonExport(){this.optionsExport.data.show=!this.optionsExport.data.show,this.optionsExport.childMethods.setExportFilterModel(this.filteModelContent)}onSubmitOptionExport(t){const o=new Map;o.set("Download","loading ... "),this.coreModuleLogSiteUserCreditBlockedService.ServiceExportFile(t).subscribe(n=>{n.IsSuccess&&(o.set("Download",n.LinkFile),this.optionsExport.childMethods.setExportLinkFile(o))},n=>{this.cmsToastrService.typeError(n)})}onActionbuttonReload(){this.DataGetAll()}onSubmitOptionsSearch(t){this.filteModelContent.Filters=t,this.DataGetAll()}onActionTableRowSelect(t){this.tableRowSelected=t}onActionBackToParent(){this.router.navigate(["/core/site/"])}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(r.FLW),e.Y36(r.rgR),e.Y36(T.i),e.Y36(b.e),e.Y36(F.s),e.Y36(L.gz),e.Y36(M.v),e.Y36(f.uw),e.Y36(e.sBO),e.Y36(C.sK),e.Y36(L.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-coremodulelog-site-user-credit-blocked-list"]],decls:55,vars:30,consts:[[3,"optionLoading","optionTreeDisplay"],["cms-tree",""],["cms-header",""],["cms-action",""],["type","button","class","btn btn-outline-secondary BTN","data-toggle","modal","data-target","#categoryModal",3,"click",4,"ngIf"],["type","button","class","btn btn-outline-warning","data-toggle","modal","data-target","#categoryModal",3,"click",4,"ngIf"],["type","button","class","btn btn-outline-danger",3,"click",4,"ngIf"],[1,"btn","btn-outline-info","btn-sm","BTN"],[3,"ngModel","ngModelChange"],[3,"click"],["type","button",1,"btn","btn-outline-secondary","BTN",3,"click"],[2,"font-size","20px","margin","-1px",3,"title"],["type","button","class","btn btn-outline-success BTN",3,"click",4,"ngIf"],["cms-action-area",""],[3,"options","optionsChange"],["cms-body",""],["matSort","",3,"dataSource","matSortChange"],["tableSort","matSort"],["matColumnDef","Id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","RecordStatus"],["matColumnDef","LinkSiteId"],["matColumnDef","LinkUserId"],["matColumnDef","CreatedDate"],["matColumnDef","Action"],[4,"matHeaderCellDef"],["class"," Action",4,"matCellDef"],[4,"matHeaderRowDef"],[3,"ngStyle","click",4,"matRowDef","matRowDefColumns"],["cms-footer",""],[3,"length","pageIndex","pageSize","pageSizeOptions","page"],["paginator",""],["type","button","data-toggle","modal","data-target","#categoryModal",1,"btn","btn-outline-secondary","BTN",3,"click"],["type","button","data-toggle","modal","data-target","#categoryModal",1,"btn","btn-outline-warning",3,"click"],["type","button",1,"btn","btn-outline-danger",3,"click"],["type","button",1,"btn","btn-outline-success","BTN",3,"click"],["mat-sort-header",""],[3,"ngClass"],[1,"Action"],["mat-icon-button","","aria-label","Action Menu",3,"matMenuTriggerFor"],["actionMenu","matMenu"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","",3,"click"],[3,"ngStyle","click"]],template:function(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"app-cms-html-list",0),e.ynx(1,1),e._uU(2," -------------------------------------- "),e.BQk(),e.GkF(3,2),e.ynx(4,3),e.YNc(5,zi,3,3,"button",4),e.YNc(6,Xi,3,3,"button",5),e.YNc(7,Ki,3,3,"button",6),e.TgZ(8,"a",7),e.TgZ(9,"mat-slide-toggle",8),e.NdJ("ngModelChange",function(a){return o.optionsSearch.data.show=a}),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.qZA(),e.TgZ(12,"a",7),e.TgZ(13,"mat-slide-toggle",9),e.NdJ("click",function(){return o.onActionbuttonStatist()}),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.qZA(),e.TgZ(16,"a",7),e.TgZ(17,"mat-slide-toggle",9),e.NdJ("click",function(){return o.onActionbuttonExport()}),e._uU(18),e.ALo(19,"translate"),e.qZA(),e.qZA(),e.TgZ(20,"button",10),e.NdJ("click",function(){return o.onActionbuttonReload()}),e.TgZ(21,"mat-icon",11),e.ALo(22,"translate"),e._uU(23,"refresh"),e.qZA(),e.qZA(),e.YNc(24,en,3,3,"button",12),e.BQk(),e.ynx(25,13),e.TgZ(26,"app-cms-search-list",14),e.NdJ("optionsChange",function(a){return o.optionsSearch=a}),e.qZA(),e.TgZ(27,"app-cms-export-list",14),e.NdJ("optionsChange",function(a){return o.optionsExport=a}),e.qZA(),e.TgZ(28,"app-cms-statist-list",14),e.NdJ("optionsChange",function(a){return o.optionsStatist=a}),e.qZA(),e.BQk(),e.ynx(29,15),e.TgZ(30,"mat-table",16,17),e.NdJ("matSortChange",function(){e.CHM(n);const a=e.MAs(31);return o.onTableSortData(a)}),e.ynx(32,18),e.YNc(33,tn,2,1,"mat-header-cell",19),e.YNc(34,on,2,1,"mat-cell",20),e.BQk(),e.ynx(35,21),e.YNc(36,nn,2,1,"mat-header-cell",19),e.YNc(37,ln,3,3,"mat-cell",20),e.BQk(),e.ynx(38,22),e.YNc(39,sn,2,1,"mat-header-cell",19),e.YNc(40,rn,2,1,"mat-cell",20),e.BQk(),e.ynx(41,23),e.YNc(42,an,2,1,"mat-header-cell",19),e.YNc(43,cn,2,1,"mat-cell",20),e.BQk(),e.ynx(44,24),e.YNc(45,dn,2,1,"mat-header-cell",19),e.YNc(46,un,2,1,"mat-cell",20),e.BQk(),e.ynx(47,25),e.YNc(48,mn,3,3,"mat-header-cell",26),e.YNc(49,fn,10,5,"mat-cell",27),e.BQk(),e.YNc(50,Cn,1,0,"mat-header-row",28),e.YNc(51,bn,1,3,"mat-row",29),e.qZA(),e.BQk(),e.ynx(52,30),e.TgZ(53,"mat-paginator",31,32),e.NdJ("page",function(a){return o.onTablePageingData(a)}),e.qZA(),e.BQk(),e.qZA()}2&t&&(e.Q6J("optionLoading",o.loading)("optionTreeDisplay",!1),e.xp6(5),e.Q6J("ngIf",o.dataModelResult.Access.AccessWatchRow&&(null==o.tableRowSelected||null==o.tableRowSelected.Id?null:o.tableRowSelected.Id.length)>0),e.xp6(1),e.Q6J("ngIf",o.dataModelResult.Access.AccessEditRow&&(null==o.tableRowSelected||null==o.tableRowSelected.Id?null:o.tableRowSelected.Id.length)>0),e.xp6(1),e.Q6J("ngIf",o.dataModelResult.Access.AccessDeleteRow&&(null==o.tableRowSelected||null==o.tableRowSelected.Id?null:o.tableRowSelected.Id.length)>0),e.xp6(2),e.Q6J("ngModel",o.optionsSearch.data.show),e.xp6(1),e.Oqu(e.lcZ(11,21,"ACTION.SEARCH")),e.xp6(4),e.hij("",e.lcZ(15,23,"ACTION.STATIST")," "),e.xp6(4),e.hij("",e.lcZ(19,25,"ACTION.EXPORTFILE")," "),e.xp6(3),e.s9C("title",e.lcZ(22,27,"ACTION.RELOAD")),e.xp6(3),e.Q6J("ngIf",o.requestLinkSiteId>0),e.xp6(2),e.Q6J("options",o.optionsSearch),e.xp6(1),e.Q6J("options",o.optionsExport),e.xp6(1),e.Q6J("options",o.optionsStatist),e.xp6(2),e.Q6J("dataSource",o.tableSource),e.xp6(20),e.Q6J("matHeaderRowDef",o.tabledisplayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",o.tabledisplayedColumns),e.xp6(2),e.Q6J("length",o.dataModelResult.TotalRowCount)("pageIndex",o.dataModelResult.CurrentPageNumber-1)("pageSize",o.dataModelResult.RowPerPage)("pageSizeOptions",e.DdM(29,Mn)))},directives:[O.Z,g.O5,D.Rr,m.JJ,m.On,E.Hw,J.y,Y.Z,B.q,d.BZ,Z.YE,d.w1,d.fO,d.ge,Z.nU,d.Dz,d.ev,g.mk,Q.lW,A.p6,A.VK,A.OP,d.as,d.XQ,d.nj,d.Gk,g.PC,H.NW],pipes:[C.X$,P.b],encapsulation:2}),i})()}]}];let An=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[L.Bz.forChild(Tn)],L.Bz]}),i})();var Ln=p(7651),In=p(8601),wn=p(8572),Zn=p(9703);let kn=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[r.EAm,r.dF2,r.ges,r.rf6,r.OpW,r.cg1,r.d7G,r._Zd,r.mbu,r.ucJ,r.rgR],imports:[[An,g.ez,m.u5,m.UX.withConfig({warnOnNgModelWithFormControl:"never"}),Ln.m.forRoot(),In.UM,Zn.vO,wn.wK]]}),i})()}}]);