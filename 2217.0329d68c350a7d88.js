"use strict";(self.webpackChunkntk_cms_web=self.webpackChunkntk_cms_web||[]).push([[2217],{643:(se,v,r)=>{r.d(v,{K:()=>oe});var Z=r(8239),l=r(7977),m=r(8485),T=r(656),e=r(9724),F=r(3029),O=r(2607),I=r(4817),D=r(727),p=r(1659),E=r(5738),h=r(1048),A=r(6014),g=r(5691),k=r(8904),P=r(4848),L=r(8572),y=r(1450),R=r(1531),J=r(3181),b=r(6599),q=r(1582),M=r(38),c=r(1418);const C=["vform"];function a(n,_){if(1&n&&(e.TgZ(0,"mat-option",33),e._uU(1),e.qZA()),2&n){const t=_.$implicit;e.Q6J("value",t.Value),e.xp6(1),e.Oqu(t.Description)}}function d(n,_){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," RecordStatus is "),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.qZA()),2&n&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"MESSAGE.required")))}function u(n,_){if(1&n){const t=e.EpF();e.TgZ(0,"mat-form-field",11),e.TgZ(1,"mat-select",30,31),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().dataModel.RecordStatus=i}),e.YNc(3,a,2,2,"mat-option",32),e.qZA(),e.TgZ(4,"mat-hint",21),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.YNc(7,d,5,3,"mat-error",22),e.qZA()}if(2&n){const t=e.MAs(2),o=e.oxw();e.xp6(1),e.s9C("placeholder",null==o.fieldsInfo.RecordStatus?null:o.fieldsInfo.RecordStatus.FieldTitle),e.MGl("panelClass","recordStatus-",o.dataModel.RecordStatus,""),e.Q6J("ngModel",o.dataModel.RecordStatus),e.xp6(2),e.Q6J("ngForOf",o.dataModelEnumRecordStatusResult.ListItems),e.xp6(2),e.Oqu(e.lcZ(6,6,"TITLE.SELECT_STATUS")),e.xp6(2),e.Q6J("ngIf",null==t.errors?null:t.errors.required)}}function f(n,_){if(1&n){const t=e.EpF();e.TgZ(0,"mat-icon",36),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).dataModel.Title=""}),e._uU(1,"close"),e.qZA()}}function S(n,_){if(1&n&&(e.TgZ(0,"mat-error"),e._uU(1),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.hij(" ",null==t.fieldsInfo.Title?null:t.fieldsInfo.Title.FieldTitle," is "),e.xp6(2),e.Oqu(e.lcZ(4,2,"MESSAGE.required"))}}function x(n,_){if(1&n){const t=e.EpF();e.TgZ(0,"mat-form-field",11),e.TgZ(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"input",34,35),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().dataModel.Title=i}),e.qZA(),e.YNc(5,f,2,0,"mat-icon",15),e.TgZ(6,"mat-icon",20),e._uU(7,"mode_edit"),e.qZA(),e.TgZ(8,"mat-hint",21),e._uU(9),e.qZA(),e.YNc(10,S,5,4,"mat-error",22),e.qZA()}if(2&n){const t=e.MAs(4),o=e.oxw();e.xp6(2),e.Oqu(null==o.fieldsInfo.Title?null:o.fieldsInfo.Title.FieldTitle),e.xp6(1),e.s9C("placeholder",null==o.fieldsInfo.Title?null:o.fieldsInfo.Title.FieldTitle),e.Q6J("ngModel",o.dataModel.Title),e.xp6(2),e.Q6J("ngIf",o.dataModel.Title),e.xp6(4),e.hij("",t.value.length," / 100"),e.xp6(1),e.Q6J("ngIf",null==t.errors?null:t.errors.required)}}function N(n,_){if(1&n){const t=e.EpF();e.TgZ(0,"app-cms-user-selector",7),e.NdJ("optionChange",function(i){return e.CHM(t),e.oxw().onActionSelectUser(i)}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("optionSelectForce",t.dataModel.LinkUserId)("optionPlaceholder","\u06a9\u0627\u0631\u0628\u0631")("optionDisabled",!(null!=t.fieldsInfo.LinkUserId&&t.fieldsInfo.LinkUserId.AccessAddField))}}function w(n,_){if(1&n){const t=e.EpF();e.TgZ(0,"app-cms-site-selector",7),e.NdJ("optionChange",function(i){return e.CHM(t),e.oxw().onActionSelectSite(i)}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("optionSelectForce",t.dataModel.LinkSiteId)("optionPlaceholder","\u0633\u0627\u06cc\u062a")("optionDisabled",!(null!=t.fieldsInfo.LinkSiteId&&t.fieldsInfo.LinkSiteId.AccessAddField))}}function Q(n,_){if(1&n&&(e._UZ(0,"img",37),e.ALo(1,"cmsthumbnail")),2&n){const t=e.oxw();e.s9C("src",e.lcZ(1,1,t.dataModel.LinkFileContentIdSrc),e.LSH)}}function W(n,_){if(1&n){const t=e.EpF();e.TgZ(0,"mat-icon",36),e.NdJ("click",function(){return e.CHM(t),e.oxw().dataModel.LinkFileContentId=null}),e._uU(1,"close"),e.qZA()}}function K(n,_){if(1&n){const t=e.EpF();e.TgZ(0,"mat-icon",36),e.NdJ("click",function(){return e.CHM(t),e.oxw().dataModel.Description=""}),e._uU(1,"close"),e.qZA()}}function B(n,_){if(1&n&&(e.TgZ(0,"mat-error"),e._uU(1),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.fieldsInfo.Description?null:t.fieldsInfo.Description.FieldTitle," is "),e.xp6(2),e.Oqu(e.lcZ(4,2,"MESSAGE.required"))}}function Y(n,_){if(1&n){const t=e.EpF();e.TgZ(0,"mat-slide-toggle",38),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().dataModel.IsApproved=i}),e._uU(1),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("ngModel",t.dataModel.IsApproved)("disabled",!(null!=t.fieldsInfo.IsApproved&&t.fieldsInfo.IsApproved.AccessAddField)),e.xp6(1),e.hij(" ",null==t.fieldsInfo.IsApproved?null:t.fieldsInfo.IsApproved.FieldTitle," ")}}function H(n,_){if(1&n){const t=e.EpF();e.TgZ(0,"mat-icon",36),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).dataModel.ApprovedResult=""}),e._uU(1,"close"),e.qZA()}}function G(n,_){if(1&n&&(e.TgZ(0,"mat-error"),e._uU(1),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.hij(" ",null==t.fieldsInfo.ApprovedResult?null:t.fieldsInfo.ApprovedResult.FieldTitle," is "),e.xp6(2),e.Oqu(e.lcZ(4,2,"MESSAGE.required"))}}function j(n,_){if(1&n){const t=e.EpF();e.TgZ(0,"mat-form-field",11),e.TgZ(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"textarea",39,40),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().dataModel.ApprovedResult=i}),e.qZA(),e.YNc(5,H,2,0,"mat-icon",15),e.TgZ(6,"mat-icon",20),e._uU(7,"mode_edit"),e.qZA(),e.TgZ(8,"mat-hint",21),e._uU(9),e.qZA(),e.YNc(10,G,5,4,"mat-error",22),e.qZA()}if(2&n){const t=e.MAs(4),o=e.oxw();e.xp6(2),e.Oqu(null==o.fieldsInfo.ApprovedResult?null:o.fieldsInfo.ApprovedResult.FieldTitle),e.xp6(1),e.s9C("placeholder",null==o.fieldsInfo.Description?null:o.fieldsInfo.Description.FieldTitle),e.Q6J("ngModel",o.dataModel.ApprovedResult),e.xp6(2),e.Q6J("ngIf",o.dataModel.ApprovedResult),e.xp6(4),e.hij("",t.value.length," / 500"),e.xp6(1),e.Q6J("ngIf",null==t.errors?null:t.errors.required)}}function V(n,_){if(1&n){const t=e.EpF();e.TgZ(0,"mat-icon",36),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).dataModel.ApproveCheckDate=null}),e._uU(1,"close"),e.qZA()}}function $(n,_){if(1&n){const t=e.EpF();e.TgZ(0,"mat-icon",36),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).dataModel.ApproveCheckDate=null}),e._uU(1,"close"),e.qZA()}}function X(n,_){if(1&n){const t=e.EpF();e.TgZ(0,"mat-form-field",11),e.TgZ(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"input",41),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().dataModel.ApproveCheckDate=i}),e.qZA(),e.YNc(4,V,2,0,"mat-icon",15),e.YNc(5,$,2,0,"mat-icon",15),e._UZ(6,"mat-datepicker-toggle",42),e._UZ(7,"mat-datepicker",43,44),e.qZA()}if(2&n){const t=e.MAs(8),o=e.oxw();e.xp6(2),e.Oqu(null==o.fieldsInfo.ApproveCheckDate?null:o.fieldsInfo.ApproveCheckDate.FieldTitle),e.xp6(1),e.Q6J("matDatepicker",t)("ngModel",o.dataModel.ApproveCheckDate),e.xp6(1),e.Q6J("ngIf",o.dataModel.ApproveCheckDate&&(null==o.fieldsInfo.ApproveCheckDate?null:o.fieldsInfo.ApproveCheckDate.AccessAddField)),e.xp6(1),e.Q6J("ngIf",o.dataModel.ApproveCheckDate&&(null==o.fieldsInfo.ApproveCheckDate?null:o.fieldsInfo.ApproveCheckDate.AccessAddField)),e.xp6(1),e.Q6J("for",t)}}function z(n,_){if(1&n){const t=e.EpF();e.TgZ(0,"mat-icon",36),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).dataModel.ExpireDate=null}),e._uU(1,"close"),e.qZA()}}function ee(n,_){if(1&n){const t=e.EpF();e.TgZ(0,"mat-form-field",11),e.TgZ(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"input",45),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().dataModel.ExpireDate=i}),e.qZA(),e.YNc(4,z,2,0,"mat-icon",15),e._UZ(5,"mat-datepicker-toggle",42),e._UZ(6,"mat-datepicker",43,46),e.qZA()}if(2&n){const t=e.MAs(7),o=e.oxw();e.xp6(2),e.Oqu(null==o.fieldsInfo.ExpireDate?null:o.fieldsInfo.ExpireDate.FieldTitle),e.xp6(1),e.Q6J("matDatepicker",t)("ngModel",o.dataModel.ExpireDate),e.xp6(1),e.Q6J("ngIf",o.dataModel.ExpireDate&&(null==o.fieldsInfo.ExpireDate?null:o.fieldsInfo.ExpireDate.AccessAddField)),e.xp6(1),e.Q6J("for",t)}}function te(n,_){if(1&n){const t=e.EpF();e.TgZ(0,"div",25),e.TgZ(1,"button",47),e.NdJ("click",function(){return e.CHM(t),e.oxw().onFormCancel()}),e._UZ(2,"i",48),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"button",49),e.NdJ("click",function(){return e.CHM(t),e.oxw().onFormSubmit()}),e._UZ(6,"i",50),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.qZA()}if(2&n){e.oxw();const t=e.MAs(1);e.xp6(3),e.hij(" ",e.lcZ(4,3,"ACTION.CANCEL")," "),e.xp6(2),e.Q6J("disabled",!t.form.valid),e.xp6(2),e.hij(" ",e.lcZ(8,5,"ACTION.SAVE")," ")}}let oe=(()=>{class n{constructor(t,o,i,s,ne,ie,le,re,ae){this.data=t,this.dialogRef=o,this.coreEnumService=i,this.coreUserClaimContentService=s,this.publicHelper=ne,this.cmsToastrService=ie,this.cdr=le,this.translate=re,this.tokenHelper=ae,this.requestLinkUserClaimTypeId=0,this.fieldsInfo=new Map,this.selectFileTypeMainImage=["jpg","jpeg","png"],this.appLanguage="fa",this.loading=new T.O,this.dataModelResult=new l.y$4,this.dataModel=new l.NQc,this.tokenInfo=new l.OdC,this.ProfessionalData=!1,this.formInfo=new l.LEF,this.dataModelEnumRecordStatusResult=new l.y$4,this.fileManagerOpenForm=!1,this.loading.cdr=this.cdr,t&&(this.requestLinkUserClaimTypeId=+t.LinkUserClaimTypeId||0),this.requestLinkUserClaimTypeId>0&&(this.dataModel.LinkUserClaimTypeId=this.requestLinkUserClaimTypeId),this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig(),this.tokenHelper.getCurrentToken().then(U=>{this.tokenInfo=U,!this.tokenInfo.UserAccessAdminAllowToProfessionalData&&this.tokenInfo.UserAccessAdminAllowToAllData?(this.dataModel.LinkUserId=this.tokenInfo.UserId,this.dataModel.LinkSiteId=this.tokenInfo.SiteId,this.ProfessionalData=!0):this.ProfessionalData=!1}),this.cmsApiStoreSubscribe=this.tokenHelper.getCurrentTokenOnChange().subscribe(U=>{this.tokenInfo=U,!this.tokenInfo.UserAccessAdminAllowToProfessionalData&&this.tokenInfo.UserAccessAdminAllowToAllData?(this.dataModel.LinkUserId=this.tokenInfo.UserId,this.dataModel.LinkSiteId=this.tokenInfo.SiteId,this.ProfessionalData=!0):this.ProfessionalData=!1})}ngOnInit(){this.formInfo.FormTitle="\u0627\u0636\u0627\u0641\u0647 \u06a9\u0631\u062f\u0646  ",this.getEnumRecordStatus(),this.DataGetAccess()}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}DataGetAccess(){var t=this;this.coreUserClaimContentService.ServiceViewModel().subscribe(function(){var o=(0,Z.Z)(function*(i){i.IsSuccess?t.fieldsInfo=t.publicHelper.fieldInfoConvertor(i.Access):t.cmsToastrService.typeErrorGetAccess(i.ErrorMessage)});return function(i){return o.apply(this,arguments)}}(),o=>{this.cmsToastrService.typeErrorGetAccess(o)})}getEnumRecordStatus(){var t=this;return(0,Z.Z)(function*(){t.dataModelEnumRecordStatusResult=yield t.publicHelper.getEnumRecordStatus()})()}DataAddContent(){this.formInfo.FormAlert=this.translate.instant("MESSAGE.sending_information_to_the_server"),this.formInfo.FormError="";const t=this.constructor.name+"main";this.loading.Start(t),this.coreUserClaimContentService.ServiceAdd(this.dataModel).subscribe(o=>{this.formInfo.FormSubmitAllow=!0,this.dataModelResult=o,o.IsSuccess?(this.formInfo.FormAlert=this.translate.instant("MESSAGE.registration_completed_successfully"),this.cmsToastrService.typeSuccessAdd(),this.dialogRef.close({dialogChangedDate:!0})):(this.formInfo.FormAlert="\u0628\u0631\u0631\u0648\u0632 \u062e\u0637\u0627",this.formInfo.FormError=o.ErrorMessage,this.cmsToastrService.typeErrorMessage(o.ErrorMessage)),this.loading.Stop(t)},o=>{this.formInfo.FormSubmitAllow=!0,this.cmsToastrService.typeError(o),this.loading.Stop(t)})}onActionFileSelected(t){this.dataModel.LinkFileContentId=t.id,this.dataModel.LinkFileContentIdSrc=t.downloadLinksrc}onActionSelectUser(t){!t||t.Id<=0?this.cmsToastrService.typeErrorMessage("\u06a9\u0627\u0631\u0628\u0631 \u0631\u0627 \u0645\u0634\u062e\u0635 \u06a9\u0646\u06cc\u062f","\u06a9\u0627\u0631\u0628\u0631  \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0645\u0634\u062e\u0635 \u0646\u06cc\u0633\u062a"):this.dataModel.LinkUserId=t.Id}onActionSelectSite(t){!t||t.Id<=0?this.cmsToastrService.typeErrorMessage("\u0633\u0627\u06cc\u062a \u0631\u0627 \u0645\u0634\u062e\u0635 \u06a9\u0646\u06cc\u062f","\u0633\u0627\u06cc\u062a  \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0645\u0634\u062e\u0635 \u0646\u06cc\u0633\u062a"):this.dataModel.LinkSiteId=t.Id}onActionSelectClaimType(t){!t||t.Id<=0?this.cmsToastrService.typeErrorMessage("\u062f\u0633\u062a\u0647 \u0631\u0627 \u0645\u0634\u062e\u0635 \u06a9\u0646\u06cc\u062f","\u0646\u0648\u0639 \u0645\u062f\u0627\u0631\u06a9 \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0645\u0634\u062e\u0635 \u0646\u06cc\u0633\u062a"):this.dataModel.LinkUserClaimTypeId=t.Id}onFormSubmit(){!this.formGroup.valid||(this.formInfo.FormSubmitAllow=!1,this.DataAddContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(m.WI),e.Y36(m.so),e.Y36(l.FLW),e.Y36(l.qlG),e.Y36(F.i),e.Y36(O.e),e.Y36(e.sBO),e.Y36(I.sK),e.Y36(D.v))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-core-userclaimcontent-add"]],viewQuery:function(t,o){if(1&t&&e.Gf(C,5),2&t){let i;e.iGM(i=e.CRH())&&(o.formGroup=i.first)}},decls:48,vars:33,consts:[[3,"ngSubmit"],["vform","ngForm"],[1,"ntk-cms-html-card-header"],[1,"ntk-cms-html-card-body"],[3,"options"],["class","ntk-full-width",4,"ngIf"],[3,"optionSelectForce","optionPlaceholder","optionDisabled","optionChange",4,"ngIf"],[3,"optionSelectForce","optionPlaceholder","optionDisabled","optionChange"],[1,"mb-3"],["style","vertical-align:middle;","aria-hidden","","height","50","width","50",3,"src",4,"ngIf"],[1,"mb-9"],[1,"ntk-full-width"],[3,"click"],["matInput","","name","dataModel.LinkFileContentId","type","text","placeholder","\u0634\u0646\u0627\u0633\u0647 \u0641\u0627\u06cc\u0644 \u0627\u0635\u0644\u06cc","autocomplete","off",3,"ngModel","ngModelChange","click"],["LinkFileContentId",""],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matSuffix","",3,"click"],[3,"language","isPopup","openForm","tree","openFilemanagerButtonLabelKey","openDirectUploadView","selectFileType","openFilemanagerButtonView","itemSelected","openFormChange"],["matInput","","name","dataModel.Description","type","text","minlength","1","maxlength","500","rows","0",3,"ngModel","placeholder","ngModelChange"],["Description",""],["matSuffix",""],["align","end"],[4,"ngIf"],["name","dataModel.IsApproved",3,"ngModel","disabled","ngModelChange",4,"ngIf"],[1,"ntk-cms-html-card-message"],[1,"form-actions"],[1,"form-text","text-muted"],[1,"form-text","text-muted","danger"],[1,"ntk-cms-html-card-footer"],["class","form-actions",4,"ngIf"],["name","dataModel.RecordStatus",3,"placeholder","ngModel","panelClass","ngModelChange"],["RecordStatus","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["matInput","","name","dataModel.Title","type","text","minlength","0","maxlength","100",3,"ngModel","placeholder","ngModelChange"],["Title",""],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["aria-hidden","","height","50","width","50",2,"vertical-align","middle",3,"src"],["name","dataModel.IsApproved",3,"ngModel","disabled","ngModelChange"],["matInput","","name","dataModel.ApprovedResult","type","text","minlength","0","maxlength","500","rows","5",3,"ngModel","placeholder","ngModelChange"],["ApprovedResult",""],["matInput","","name","dataModel.ApproveCheckDate",3,"matDatepicker","ngModel","ngModelChange"],["matSuffix","",3,"for"],["touchUi",""],["ApproveCheckDate",""],["matInput","","name","dataModel.ExpireDate",3,"matDatepicker","ngModel","ngModelChange"],["ExpireDate",""],["type","button",1,"btn","btn-light",3,"click"],[1,"ft-x"],["type","submit",1,"btn","btn-success",3,"disabled","click"],[1,"fa","fa-check-square-o"]],template:function(t,o){if(1&t&&(e.TgZ(0,"form",0,1),e.NdJ("ngSubmit",function(){return o.onFormSubmit()}),e.TgZ(2,"div",2),e._uU(3),e.qZA(),e.TgZ(4,"div",3),e._UZ(5,"app-progress-spinner",4),e.YNc(6,u,8,8,"mat-form-field",5),e.YNc(7,x,11,6,"mat-form-field",5),e.YNc(8,N,1,3,"app-cms-user-selector",6),e.YNc(9,w,1,3,"app-cms-site-selector",6),e.TgZ(10,"app-core-userclaimtype-selector",7),e.NdJ("optionChange",function(s){return o.onActionSelectClaimType(s)}),e.qZA(),e.TgZ(11,"div",8),e.YNc(12,Q,2,3,"img",9),e.qZA(),e.TgZ(13,"div",10),e.TgZ(14,"mat-form-field",11),e.TgZ(15,"mat-label",12),e.NdJ("click",function(){return o.fileManagerOpenForm=!0}),e._uU(16,"\u0641\u0627\u06cc\u0644 \u0645\u062f\u0627\u0631\u06a9 "),e.qZA(),e.TgZ(17,"input",13,14),e.NdJ("ngModelChange",function(s){return o.dataModel.LinkFileContentId=s})("click",function(){return o.fileManagerOpenForm=!0}),e.qZA(),e.YNc(19,W,2,0,"mat-icon",15),e.TgZ(20,"mat-icon",16),e.NdJ("click",function(){return o.fileManagerOpenForm=!0}),e._uU(21,"mode_edit"),e.qZA(),e.qZA(),e.TgZ(22,"cms-file-manager",17),e.NdJ("itemSelected",function(s){return o.onActionFileSelected(s)})("openFormChange",function(s){return o.fileManagerOpenForm=s}),e.qZA(),e.qZA(),e.TgZ(23,"mat-form-field",11),e.TgZ(24,"mat-label"),e._uU(25),e.qZA(),e.TgZ(26,"textarea",18,19),e.NdJ("ngModelChange",function(s){return o.dataModel.Description=s}),e.qZA(),e.YNc(28,K,2,0,"mat-icon",15),e.TgZ(29,"mat-icon",20),e._uU(30,"mode_edit"),e.qZA(),e.TgZ(31,"mat-hint",21),e._uU(32),e.qZA(),e.YNc(33,B,5,4,"mat-error",22),e.qZA(),e._UZ(34,"hr"),e.TgZ(35,"div",11),e.YNc(36,Y,2,3,"mat-slide-toggle",23),e.qZA(),e.YNc(37,j,11,6,"mat-form-field",5),e.YNc(38,X,9,6,"mat-form-field",5),e.YNc(39,ee,8,5,"mat-form-field",5),e.qZA(),e.TgZ(40,"div",24),e.TgZ(41,"div",25),e.TgZ(42,"small",26),e._uU(43),e.qZA(),e.TgZ(44,"small",27),e._uU(45),e.qZA(),e.qZA(),e.qZA(),e.TgZ(46,"div",28),e.YNc(47,te,9,7,"div",29),e.qZA(),e.qZA()),2&t){const i=e.MAs(27);e.xp6(3),e.hij(" ",o.formInfo.FormTitle," "),e.xp6(2),e.Q6J("options",o.loading),e.xp6(1),e.Q6J("ngIf",o.ProfessionalData),e.xp6(1),e.Q6J("ngIf",o.ProfessionalData),e.xp6(1),e.Q6J("ngIf",o.ProfessionalData),e.xp6(1),e.Q6J("ngIf",o.ProfessionalData),e.xp6(1),e.Q6J("optionSelectForce",o.dataModel.LinkUserClaimTypeId)("optionPlaceholder","\u062f\u0633\u062a\u0647 \u0645\u062f\u0627\u0631\u06a9")("optionDisabled",!(null!=o.fieldsInfo.LinkUserClaimTypeId&&o.fieldsInfo.LinkUserClaimTypeId.AccessAddField)||o.requestLinkUserClaimTypeId&&o.requestLinkUserClaimTypeId>0),e.xp6(2),e.Q6J("ngIf",(null==o.dataModel||null==o.dataModel.LinkFileContentIdSrc?null:o.dataModel.LinkFileContentIdSrc.length)>0),e.xp6(5),e.Q6J("ngModel",o.dataModel.LinkFileContentId),e.xp6(2),e.Q6J("ngIf",o.dataModel.LinkFileContentId),e.xp6(3),e.Q6J("language",o.appLanguage)("isPopup",!0)("openForm",o.fileManagerOpenForm)("tree",o.fileManagerTree)("openFilemanagerButtonLabelKey","select")("openDirectUploadView",!0)("selectFileType",o.selectFileTypeMainImage)("openFilemanagerButtonView",!1),e.xp6(3),e.Oqu(null==o.fieldsInfo.Description?null:o.fieldsInfo.Description.FieldTitle),e.xp6(1),e.s9C("placeholder",null==o.fieldsInfo.Description?null:o.fieldsInfo.Description.FieldTitle),e.Q6J("ngModel",o.dataModel.Description),e.xp6(2),e.Q6J("ngIf",o.dataModel.Description),e.xp6(4),e.hij("",i.value.length," / 500"),e.xp6(1),e.Q6J("ngIf",null==i.errors?null:i.errors.required),e.xp6(3),e.Q6J("ngIf",null==o.fieldsInfo.IsApproved?null:o.fieldsInfo.IsApproved.AccessWatchField),e.xp6(1),e.Q6J("ngIf",o.ProfessionalData),e.xp6(1),e.Q6J("ngIf",(null==o.fieldsInfo.ApproveCheckDate?null:o.fieldsInfo.ApproveCheckDate.AccessWatchField)&&o.ProfessionalData),e.xp6(1),e.Q6J("ngIf",(null==o.fieldsInfo.ExpireDate?null:o.fieldsInfo.ExpireDate.AccessWatchField)&&o.ProfessionalData),e.xp6(4),e.hij("",o.formInfo.FormAlert," "),e.xp6(2),e.hij("",o.formInfo.FormError," "),e.xp6(2),e.Q6J("ngIf",o.formInfo.FormSubmitAllow)}},directives:[p._Y,p.JL,p.F,E.O,h.O5,A.b,g.KE,g.hX,k.Nt,p.Fj,p.JJ,p.On,P.Hw,g.R9,L.HG,p.wO,p.nD,g.bx,y.gD,h.sg,R.ey,g.TO,J.g,b.P,q.Rr,M.hl,M.nW,M.Mq],pipes:[I.X$,c.v],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:yellow}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:black}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}"]}),n})()},3193:(se,v,r)=>{r.d(v,{D:()=>oe});var Z=r(8239),l=r(7977),m=r(8485),T=r(656),e=r(9724),F=r(3029),O=r(2607),I=r(4817),D=r(727),p=r(1659),E=r(5738),h=r(1048),A=r(5691),g=r(8904),k=r(4848),P=r(8572),L=r(1450),y=r(1531),R=r(3181),J=r(6599),b=r(6014),q=r(1582),M=r(38),c=r(1418);const C=["vform"];function a(n,_){if(1&n&&(e.TgZ(0,"mat-option",34),e._uU(1),e.qZA()),2&n){const t=_.$implicit;e.Q6J("value",t.Value),e.xp6(1),e.Oqu(t.Description)}}function d(n,_){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," RecordStatus is "),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.qZA()),2&n&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"MESSAGE.required")))}function u(n,_){if(1&n){const t=e.EpF();e.TgZ(0,"mat-form-field",10),e.TgZ(1,"mat-select",31,32),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().dataModel.RecordStatus=i}),e.YNc(3,a,2,2,"mat-option",33),e.qZA(),e.TgZ(4,"mat-hint",20),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.YNc(7,d,5,3,"mat-error",21),e.qZA()}if(2&n){const t=e.MAs(2),o=e.oxw();e.xp6(1),e.s9C("placeholder",null==o.fieldsInfo.RecordStatus?null:o.fieldsInfo.RecordStatus.FieldTitle),e.MGl("panelClass","recordStatus-",o.dataModel.RecordStatus,""),e.Q6J("ngModel",o.dataModel.RecordStatus),e.xp6(2),e.Q6J("ngForOf",o.dataModelEnumRecordStatusResult.ListItems),e.xp6(2),e.Oqu(e.lcZ(6,6,"TITLE.SELECT_STATUS")),e.xp6(2),e.Q6J("ngIf",null==t.errors?null:t.errors.required)}}function f(n,_){if(1&n){const t=e.EpF();e.TgZ(0,"mat-icon",37),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).dataModel.Title=""}),e._uU(1,"close"),e.qZA()}}function S(n,_){if(1&n&&(e.TgZ(0,"mat-error"),e._uU(1),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.hij(" ",null==t.fieldsInfo.Title?null:t.fieldsInfo.Title.FieldTitle," is "),e.xp6(2),e.Oqu(e.lcZ(4,2,"MESSAGE.required"))}}function x(n,_){if(1&n){const t=e.EpF();e.TgZ(0,"mat-form-field",10),e.TgZ(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"input",35,36),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().dataModel.Title=i}),e.qZA(),e.YNc(5,f,2,0,"mat-icon",14),e.TgZ(6,"mat-icon",19),e._uU(7,"mode_edit"),e.qZA(),e.TgZ(8,"mat-hint",20),e._uU(9),e.qZA(),e.YNc(10,S,5,4,"mat-error",21),e.qZA()}if(2&n){const t=e.MAs(4),o=e.oxw();e.xp6(2),e.Oqu(null==o.fieldsInfo.Title?null:o.fieldsInfo.Title.FieldTitle),e.xp6(1),e.s9C("placeholder",null==o.fieldsInfo.Title?null:o.fieldsInfo.Title.FieldTitle),e.Q6J("ngModel",o.dataModel.Title),e.xp6(2),e.Q6J("ngIf",o.dataModel.Title),e.xp6(4),e.hij("",t.value.length," / 100"),e.xp6(1),e.Q6J("ngIf",null==t.errors?null:t.errors.required)}}function N(n,_){if(1&n){const t=e.EpF();e.TgZ(0,"app-cms-user-selector",38),e.NdJ("optionChange",function(i){return e.CHM(t),e.oxw().onActionSelectUser(i)}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("optionSelectForce",t.dataModel.LinkUserId)("optionPlaceholder","\u06a9\u0627\u0631\u0628\u0631")("optionDisabled",!(null!=t.fieldsInfo.LinkUserId&&t.fieldsInfo.LinkUserId.AccessEditField))}}function w(n,_){if(1&n){const t=e.EpF();e.TgZ(0,"app-cms-site-selector",38),e.NdJ("optionChange",function(i){return e.CHM(t),e.oxw().onActionSelectSite(i)}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("optionSelectForce",t.dataModel.LinkSiteId)("optionPlaceholder","\u0633\u0627\u06cc\u062a")("optionDisabled",!(null!=t.fieldsInfo.LinkSiteId&&t.fieldsInfo.LinkSiteId.AccessEditField))}}function Q(n,_){if(1&n){const t=e.EpF();e.TgZ(0,"app-core-userclaimtype-selector",38),e.NdJ("optionChange",function(i){return e.CHM(t),e.oxw().onActionSelectClaimType(i)}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("optionSelectForce",t.dataModel.LinkUserClaimTypeId)("optionPlaceholder","\u062f\u0633\u062a\u0647 \u0645\u062f\u0627\u0631\u06a9")("optionDisabled",!(null!=t.fieldsInfo.LinkUserClaimTypeId&&t.fieldsInfo.LinkUserClaimTypeId.AccessEditField))}}function W(n,_){if(1&n&&(e._UZ(0,"img",39),e.ALo(1,"cmsthumbnail")),2&n){const t=e.oxw();e.s9C("src",e.lcZ(1,1,t.dataModel.LinkFileContentIdSrc),e.LSH)}}function K(n,_){if(1&n){const t=e.EpF();e.TgZ(0,"mat-icon",37),e.NdJ("click",function(){return e.CHM(t),e.oxw().dataModel.LinkFileContentId=null}),e._uU(1,"close"),e.qZA()}}function B(n,_){if(1&n){const t=e.EpF();e.TgZ(0,"mat-icon",37),e.NdJ("click",function(){return e.CHM(t),e.oxw().dataModel.Description=""}),e._uU(1,"close"),e.qZA()}}function Y(n,_){if(1&n&&(e.TgZ(0,"mat-error"),e._uU(1),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.fieldsInfo.Description?null:t.fieldsInfo.Description.FieldTitle," is "),e.xp6(2),e.Oqu(e.lcZ(4,2,"MESSAGE.required"))}}function H(n,_){if(1&n){const t=e.EpF();e.TgZ(0,"mat-slide-toggle",40),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().dataModel.IsApproved=i}),e._uU(1),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("ngModel",t.dataModel.IsApproved)("disabled",!(null!=t.fieldsInfo.IsApproved&&t.fieldsInfo.IsApproved.AccessEditField)),e.xp6(1),e.hij(" ",null==t.fieldsInfo.IsApproved?null:t.fieldsInfo.IsApproved.FieldTitle," ")}}function G(n,_){if(1&n){const t=e.EpF();e.TgZ(0,"mat-icon",37),e.NdJ("click",function(){return e.CHM(t),e.oxw().dataModel.ApprovedResult=""}),e._uU(1,"close"),e.qZA()}}function j(n,_){if(1&n&&(e.TgZ(0,"mat-error"),e._uU(1),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij(" ",null==t.fieldsInfo.ApprovedResult?null:t.fieldsInfo.ApprovedResult.FieldTitle," is "),e.xp6(2),e.Oqu(e.lcZ(4,2,"MESSAGE.required"))}}function V(n,_){if(1&n){const t=e.EpF();e.TgZ(0,"mat-icon",37),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).dataModel.ApproveCheckDate=null}),e._uU(1,"close"),e.qZA()}}function $(n,_){if(1&n){const t=e.EpF();e.TgZ(0,"mat-icon",37),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).dataModel.ApproveCheckDate=null}),e._uU(1,"close"),e.qZA()}}function X(n,_){if(1&n){const t=e.EpF();e.TgZ(0,"mat-form-field",10),e.TgZ(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"input",41),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().dataModel.ApproveCheckDate=i}),e.qZA(),e.YNc(4,V,2,0,"mat-icon",14),e.YNc(5,$,2,0,"mat-icon",14),e._UZ(6,"mat-datepicker-toggle",42),e._UZ(7,"mat-datepicker",43,44),e.qZA()}if(2&n){const t=e.MAs(8),o=e.oxw();e.xp6(2),e.Oqu(null==o.fieldsInfo.ApproveCheckDate?null:o.fieldsInfo.ApproveCheckDate.FieldTitle),e.xp6(1),e.Q6J("matDatepicker",t)("ngModel",o.dataModel.ApproveCheckDate),e.xp6(1),e.Q6J("ngIf",o.dataModel.ApproveCheckDate&&(null==o.fieldsInfo.ApproveCheckDate?null:o.fieldsInfo.ApproveCheckDate.AccessEditField)),e.xp6(1),e.Q6J("ngIf",o.dataModel.ApproveCheckDate&&(null==o.fieldsInfo.ApproveCheckDate?null:o.fieldsInfo.ApproveCheckDate.AccessEditField)),e.xp6(1),e.Q6J("for",t)}}function z(n,_){if(1&n){const t=e.EpF();e.TgZ(0,"mat-icon",37),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).dataModel.ExpireDate=null}),e._uU(1,"close"),e.qZA()}}function ee(n,_){if(1&n){const t=e.EpF();e.TgZ(0,"mat-form-field",10),e.TgZ(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"input",45),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().dataModel.ExpireDate=i}),e.qZA(),e.YNc(4,z,2,0,"mat-icon",14),e._UZ(5,"mat-datepicker-toggle",42),e._UZ(6,"mat-datepicker",43,46),e.qZA()}if(2&n){const t=e.MAs(7),o=e.oxw();e.xp6(2),e.Oqu(null==o.fieldsInfo.ExpireDate?null:o.fieldsInfo.ExpireDate.FieldTitle),e.xp6(1),e.Q6J("matDatepicker",t)("ngModel",o.dataModel.ExpireDate),e.xp6(1),e.Q6J("ngIf",o.dataModel.ExpireDate&&(null==o.fieldsInfo.ExpireDate?null:o.fieldsInfo.ExpireDate.AccessEditField)),e.xp6(1),e.Q6J("for",t)}}function te(n,_){if(1&n){const t=e.EpF();e.TgZ(0,"div",26),e.TgZ(1,"button",47),e.NdJ("click",function(){return e.CHM(t),e.oxw().onFormCancel()}),e._UZ(2,"i",48),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"button",49),e.NdJ("click",function(){return e.CHM(t),e.oxw().onFormSubmit()}),e._UZ(6,"i",50),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.qZA()}if(2&n){e.oxw();const t=e.MAs(1);e.xp6(3),e.hij(" ",e.lcZ(4,3,"ACTION.CANCEL")," "),e.xp6(2),e.Q6J("disabled",!t.form.valid),e.xp6(2),e.hij(" ",e.lcZ(8,5,"ACTION.SAVE")," ")}}let oe=(()=>{class n{constructor(t,o,i,s,ne,ie,le,re,ae){this.data=t,this.dialogRef=o,this.coreEnumService=i,this.coreUserClaimContentService=s,this.publicHelper=ne,this.cmsToastrService=ie,this.cdr=le,this.translate=re,this.tokenHelper=ae,this.requestId=0,this.fieldsInfo=new Map,this.selectFileTypeMainImage=["jpg","jpeg","png"],this.tokenInfo=new l.OdC,this.ProfessionalData=!1,this.appLanguage="fa",this.loading=new T.O,this.dataModelResult=new l.y$4,this.dataModel=new l.NQc,this.formInfo=new l.LEF,this.dataModelEnumRecordStatusResult=new l.y$4,this.fileManagerOpenForm=!1,this.loading.cdr=this.cdr,t&&(this.requestId=+t.id||0),this.fileManagerTree=this.publicHelper.GetfileManagerTreeConfig(),this.tokenHelper.getCurrentToken().then(U=>{this.tokenInfo=U,!this.tokenInfo.UserAccessAdminAllowToProfessionalData&&this.tokenInfo.UserAccessAdminAllowToAllData?(this.dataModel.LinkUserId=this.tokenInfo.UserId,this.dataModel.LinkSiteId=this.tokenInfo.SiteId,this.ProfessionalData=!0):this.ProfessionalData=!1}),this.cmsApiStoreSubscribe=this.tokenHelper.getCurrentTokenOnChange().subscribe(U=>{this.tokenInfo=U,!this.tokenInfo.UserAccessAdminAllowToProfessionalData&&this.tokenInfo.UserAccessAdminAllowToAllData?(this.dataModel.LinkUserId=this.tokenInfo.UserId,this.dataModel.LinkSiteId=this.tokenInfo.SiteId,this.ProfessionalData=!0):this.ProfessionalData=!1})}ngOnInit(){if(!(this.requestId>0))return this.cmsToastrService.typeErrorComponentAction(),void this.dialogRef.close({dialogChangedDate:!1});this.formInfo.FormTitle="\u0648\u06cc\u0631\u0627\u06cc\u0634  ",this.DataGetOneContent(),this.getEnumRecordStatus()}ngOnDestroy(){this.cmsApiStoreSubscribe.unsubscribe()}getEnumRecordStatus(){var t=this;return(0,Z.Z)(function*(){t.dataModelEnumRecordStatusResult=yield t.publicHelper.getEnumRecordStatus()})()}DataGetOneContent(){if(this.requestId<=0)return void this.cmsToastrService.typeErrorEditRowIsNull();this.formInfo.FormAlert="\u062f\u0631 \u062f\u0631\u06cc\u0627\u0641\u062a \u0627\u0631\u0633\u0627\u0644 \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0627\u0632 \u0633\u0631\u0648\u0631",this.formInfo.FormError="";const t=this.constructor.name+"main";this.loading.Start(t),this.coreUserClaimContentService.setAccessLoad(),this.coreUserClaimContentService.ServiceGetOneById(this.requestId).subscribe(o=>{this.fieldsInfo=this.publicHelper.fieldInfoConvertor(o.Access),this.dataModel=o.Item,o.IsSuccess?(this.formInfo.FormTitle=this.formInfo.FormTitle+" "+o.Item.Id,this.formInfo.FormAlert=""):(this.formInfo.FormAlert="\u0628\u0631\u0631\u0648\u0632 \u062e\u0637\u0627",this.formInfo.FormError=o.ErrorMessage,this.cmsToastrService.typeErrorMessage(o.ErrorMessage)),this.loading.Stop(t)},o=>{this.cmsToastrService.typeError(o),this.loading.Stop(t)})}DataEditContent(){this.formInfo.FormAlert=this.translate.instant("MESSAGE.sending_information_to_the_server"),this.formInfo.FormError="";const t=this.constructor.name+"main";this.loading.Start(t),this.coreUserClaimContentService.ServiceEdit(this.dataModel).subscribe(o=>{this.formInfo.FormSubmitAllow=!0,this.dataModelResult=o,o.IsSuccess?(this.formInfo.FormAlert=this.translate.instant("MESSAGE.registration_completed_successfully"),this.cmsToastrService.typeSuccessEdit(),this.dialogRef.close({dialogChangedDate:!0})):(this.formInfo.FormAlert="\u0628\u0631\u0631\u0648\u0632 \u062e\u0637\u0627",this.formInfo.FormError=o.ErrorMessage,this.cmsToastrService.typeErrorMessage(o.ErrorMessage)),this.loading.Stop(t)},o=>{this.formInfo.FormSubmitAllow=!0,this.cmsToastrService.typeError(o),this.loading.Stop(t)})}onActionFileSelected(t){this.dataModel.LinkFileContentId=t.id,this.dataModel.LinkFileContentIdSrc=t.downloadLinksrc}onActionSelectUser(t){!t||t.Id<=0?this.cmsToastrService.typeErrorMessage("\u06a9\u0627\u0631\u0628\u0631 \u0631\u0627 \u0645\u0634\u062e\u0635 \u06a9\u0646\u06cc\u062f","\u06a9\u0627\u0631\u0628\u0631  \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0645\u0634\u062e\u0635 \u0646\u06cc\u0633\u062a"):this.dataModel.LinkUserId=t.Id}onActionSelectSite(t){!t||t.Id<=0?this.cmsToastrService.typeErrorMessage("\u0633\u0627\u06cc\u062a \u0631\u0627 \u0645\u0634\u062e\u0635 \u06a9\u0646\u06cc\u062f","\u0633\u0627\u06cc\u062a  \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0645\u0634\u062e\u0635 \u0646\u06cc\u0633\u062a"):this.dataModel.LinkSiteId=t.Id}onActionSelectClaimType(t){!t||t.Id<=0?this.cmsToastrService.typeErrorMessage("\u062f\u0633\u062a\u0647 \u0631\u0627 \u0645\u0634\u062e\u0635 \u06a9\u0646\u06cc\u062f","\u0646\u0648\u0639 \u0645\u062f\u0627\u0631\u06a9 \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0645\u0634\u062e\u0635 \u0646\u06cc\u0633\u062a"):this.dataModel.LinkUserClaimTypeId=t.Id}onFormSubmit(){!this.formGroup.valid||(this.formInfo.FormSubmitAllow=!1,this.DataEditContent())}onFormCancel(){this.dialogRef.close({dialogChangedDate:!1})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(m.WI),e.Y36(m.so),e.Y36(l.FLW),e.Y36(l.qlG),e.Y36(F.i),e.Y36(O.e),e.Y36(e.sBO),e.Y36(I.sK),e.Y36(D.v))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-core-userclaim-edit"]],viewQuery:function(t,o){if(1&t&&e.Gf(C,5),2&t){let i;e.iGM(i=e.CRH())&&(o.formGroup=i.first)}},decls:58,vars:36,consts:[[3,"ngSubmit"],["vform","ngForm"],[1,"ntk-cms-html-card-header"],[1,"ntk-cms-html-card-body"],[3,"options"],["class","ntk-full-width",4,"ngIf"],[3,"optionSelectForce","optionPlaceholder","optionDisabled","optionChange",4,"ngIf"],[1,"mb-3"],["style","vertical-align:middle;","aria-hidden","","height","50","width","50",3,"src",4,"ngIf"],[1,"mb-9"],[1,"ntk-full-width"],[3,"click"],["matInput","","name"," dataModel.LinkFileContentId","type","text","placeholder","\u0634\u0646\u0627\u0633\u0647 \u0641\u0627\u06cc\u0644 \u0627\u0635\u0644\u06cc","autocomplete","off",3,"ngModel","ngModelChange","click"],["LinkFileContentId",""],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matSuffix","",3,"click"],[3,"language","isPopup","openForm","tree","openFilemanagerButtonLabelKey","openDirectUploadView","selectFileType","openFilemanagerButtonView","itemSelected","openFormChange"],["matInput","","name","dataModel.Description","type","text","minlength","0","maxlength","500","rows","5",3,"ngModel","placeholder","ngModelChange"],["Description",""],["matSuffix",""],["align","end"],[4,"ngIf"],["name","dataModel.IsApproved",3,"ngModel","disabled","ngModelChange",4,"ngIf"],["matInput","","name","dataModel.ApprovedResult","type","text","minlength","0","maxlength","500","rows","5",3,"ngModel","placeholder","ngModelChange"],["ApprovedResult",""],[1,"ntk-cms-html-card-message"],[1,"form-actions"],[1,"form-text","text-muted"],[1,"form-text","text-muted","danger"],[1,"ntk-cms-html-card-footer"],["class","form-actions",4,"ngIf"],["name","dataModel.RecordStatus",3,"placeholder","ngModel","panelClass","ngModelChange"],["RecordStatus","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["matInput","","name","dataModel.Title","type","text","minlength","0","maxlength","100",3,"ngModel","placeholder","ngModelChange"],["Title",""],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[3,"optionSelectForce","optionPlaceholder","optionDisabled","optionChange"],["aria-hidden","","height","50","width","50",2,"vertical-align","middle",3,"src"],["name","dataModel.IsApproved",3,"ngModel","disabled","ngModelChange"],["matInput","","name","dataModel.ApproveCheckDate",3,"matDatepicker","ngModel","ngModelChange"],["matSuffix","",3,"for"],["touchUi",""],["ApproveCheckDate",""],["matInput","","name","dataModel.ExpireDate",3,"matDatepicker","ngModel","ngModelChange"],["ExpireDate",""],["type","button",1,"btn","btn-light",3,"click"],[1,"ft-x"],["type","submit",1,"btn","btn-success",3,"disabled","click"],[1,"fa","fa-check-square-o"]],template:function(t,o){if(1&t&&(e.TgZ(0,"form",0,1),e.NdJ("ngSubmit",function(){return o.onFormSubmit()}),e.TgZ(2,"div",2),e._uU(3),e.qZA(),e.TgZ(4,"div",3),e._UZ(5,"app-progress-spinner",4),e.YNc(6,u,8,8,"mat-form-field",5),e.YNc(7,x,11,6,"mat-form-field",5),e.YNc(8,N,1,3,"app-cms-user-selector",6),e.YNc(9,w,1,3,"app-cms-site-selector",6),e.YNc(10,Q,1,3,"app-core-userclaimtype-selector",6),e.TgZ(11,"div",7),e.YNc(12,W,2,3,"img",8),e.qZA(),e.TgZ(13,"div",9),e.TgZ(14,"mat-form-field",10),e.TgZ(15,"mat-label",11),e.NdJ("click",function(){return o.fileManagerOpenForm=!0}),e._uU(16,"\u0641\u0627\u06cc\u0644 \u0645\u062f\u0627\u0631\u06a9 "),e.qZA(),e.TgZ(17,"input",12,13),e.NdJ("ngModelChange",function(s){return o.dataModel.LinkFileContentId=s})("click",function(){return o.fileManagerOpenForm=!0}),e.qZA(),e.YNc(19,K,2,0,"mat-icon",14),e.TgZ(20,"mat-icon",15),e.NdJ("click",function(){return o.fileManagerOpenForm=!0}),e._uU(21,"mode_edit"),e.qZA(),e.qZA(),e.TgZ(22,"cms-file-manager",16),e.NdJ("itemSelected",function(s){return o.onActionFileSelected(s)})("openFormChange",function(s){return o.fileManagerOpenForm=s}),e.qZA(),e.qZA(),e.TgZ(23,"mat-form-field",10),e.TgZ(24,"mat-label"),e._uU(25),e.qZA(),e.TgZ(26,"textarea",17,18),e.NdJ("ngModelChange",function(s){return o.dataModel.Description=s}),e.qZA(),e.YNc(28,B,2,0,"mat-icon",14),e.TgZ(29,"mat-icon",19),e._uU(30,"mode_edit"),e.qZA(),e.TgZ(31,"mat-hint",20),e._uU(32),e.qZA(),e.YNc(33,Y,5,4,"mat-error",21),e.qZA(),e._UZ(34,"hr"),e.TgZ(35,"div",10),e.YNc(36,H,2,3,"mat-slide-toggle",22),e.qZA(),e.TgZ(37,"mat-form-field",10),e.TgZ(38,"mat-label"),e._uU(39),e.qZA(),e.TgZ(40,"textarea",23,24),e.NdJ("ngModelChange",function(s){return o.dataModel.ApprovedResult=s}),e.qZA(),e.YNc(42,G,2,0,"mat-icon",14),e.TgZ(43,"mat-icon",19),e._uU(44,"mode_edit"),e.qZA(),e.TgZ(45,"mat-hint",20),e._uU(46),e.qZA(),e.YNc(47,j,5,4,"mat-error",21),e.qZA(),e.YNc(48,X,9,6,"mat-form-field",5),e.YNc(49,ee,8,5,"mat-form-field",5),e.qZA(),e.TgZ(50,"div",25),e.TgZ(51,"div",26),e.TgZ(52,"small",27),e._uU(53),e.qZA(),e.TgZ(54,"small",28),e._uU(55),e.qZA(),e.qZA(),e.qZA(),e.TgZ(56,"div",29),e.YNc(57,te,9,7,"div",30),e.qZA(),e.qZA()),2&t){const i=e.MAs(27),s=e.MAs(41);e.xp6(3),e.hij(" ",o.formInfo.FormTitle," "),e.xp6(2),e.Q6J("options",o.loading),e.xp6(1),e.Q6J("ngIf",o.ProfessionalData),e.xp6(1),e.Q6J("ngIf",o.ProfessionalData),e.xp6(1),e.Q6J("ngIf",o.ProfessionalData),e.xp6(1),e.Q6J("ngIf",o.ProfessionalData),e.xp6(1),e.Q6J("ngIf",o.ProfessionalData),e.xp6(2),e.Q6J("ngIf",(null==o.dataModel||null==o.dataModel.LinkFileContentIdSrc?null:o.dataModel.LinkFileContentIdSrc.length)>0),e.xp6(5),e.Q6J("ngModel",o.dataModel.LinkFileContentId),e.xp6(2),e.Q6J("ngIf",o.dataModel.LinkFileContentId),e.xp6(3),e.Q6J("language",o.appLanguage)("isPopup",!0)("openForm",o.fileManagerOpenForm)("tree",o.fileManagerTree)("openFilemanagerButtonLabelKey","select")("openDirectUploadView",!0)("selectFileType",o.selectFileTypeMainImage)("openFilemanagerButtonView",!1),e.xp6(3),e.Oqu(null==o.fieldsInfo.Description?null:o.fieldsInfo.Description.FieldTitle),e.xp6(1),e.s9C("placeholder",null==o.fieldsInfo.Description?null:o.fieldsInfo.Description.FieldTitle),e.Q6J("ngModel",o.dataModel.Description),e.xp6(2),e.Q6J("ngIf",o.dataModel.Description),e.xp6(4),e.hij("",i.value.length," / 500"),e.xp6(1),e.Q6J("ngIf",null==i.errors?null:i.errors.required),e.xp6(3),e.Q6J("ngIf",null==o.fieldsInfo.IsApproved?null:o.fieldsInfo.IsApproved.AccessWatchField),e.xp6(3),e.Oqu(null==o.fieldsInfo.ApprovedResult?null:o.fieldsInfo.ApprovedResult.FieldTitle),e.xp6(1),e.s9C("placeholder",null==o.fieldsInfo.Description?null:o.fieldsInfo.Description.FieldTitle),e.Q6J("ngModel",o.dataModel.ApprovedResult),e.xp6(2),e.Q6J("ngIf",o.dataModel.ApprovedResult),e.xp6(4),e.hij("",s.value.length," / 500"),e.xp6(1),e.Q6J("ngIf",null==s.errors?null:s.errors.required),e.xp6(1),e.Q6J("ngIf",null==o.fieldsInfo.ApproveCheckDate?null:o.fieldsInfo.ApproveCheckDate.AccessWatchField),e.xp6(1),e.Q6J("ngIf",null==o.fieldsInfo.ExpireDate?null:o.fieldsInfo.ExpireDate.AccessWatchField),e.xp6(4),e.hij("",o.formInfo.FormAlert," "),e.xp6(2),e.hij("",o.formInfo.FormError," "),e.xp6(2),e.Q6J("ngIf",o.formInfo.FormSubmitAllow)}},directives:[p._Y,p.JL,p.F,E.O,h.O5,A.KE,A.hX,g.Nt,p.Fj,p.JJ,p.On,k.Hw,A.R9,P.HG,p.wO,p.nD,A.bx,L.gD,h.sg,y.ey,A.TO,R.g,J.P,b.b,q.Rr,M.hl,M.nW,M.Mq],pipes:[I.X$,c.v],styles:[".form-body[_ngcontent-%COMP%]{width:500px}@media (max-width: 700px){.form-body[_ngcontent-%COMP%]{display:contents}}#file-manager[_ngcontent-%COMP%]{width:calc(100vw - 16px);height:calc(100vh - 16px)}.recordStatus-1.mat-select-panel[_ngcontent-%COMP%]{background:yellow}.recordStatus-2.mat-select-panel[_ngcontent-%COMP%]{background:black}.recordStatus-3.mat-select-panel[_ngcontent-%COMP%]{background:red}"]}),n})()},6014:(se,v,r)=>{r.d(v,{b:()=>M});var Z=r(8239),l=r(9724),m=r(7977),T=r(1659),e=r(1927),F=r(3151),O=r(2147),I=r(1528),D=r(7969),p=r(656),E=r(5691),h=r(1048),A=r(8904),g=r(5821),k=r(1531),P=r(4848),L=r(1418);function y(c,C){if(1&c&&(l._UZ(0,"img",8),l.ALo(1,"cmsthumbnail")),2&c){const a=l.oxw();l.s9C("src",l.lcZ(1,1,a.dataModelSelect.LinkMainImageIdSrc),l.LSH)}}function R(c,C){if(1&c&&(l._UZ(0,"img",8),l.ALo(1,"cmsthumbnail")),2&c){const a=l.oxw().$implicit;l.s9C("src",l.lcZ(1,1,a.LinkMainImageIdSrc),l.LSH)}}function J(c,C){if(1&c&&(l.TgZ(0,"mat-option",9),l.YNc(1,R,2,3,"img",2),l.TgZ(2,"span"),l._uU(3),l.qZA(),l.qZA()),2&c){const a=C.$implicit,d=l.oxw();l.Q6J("value",a)("disabled",d.optionDisabled),l.xp6(1),l.Q6J("ngIf",a.LinkMainImageIdSrc),l.xp6(2),l.Oqu(d.displayOption(a))}}function b(c,C){if(1&c){const a=l.EpF();l.TgZ(0,"mat-icon",10),l.NdJ("click",function(){return l.CHM(a),l.oxw().onActionSelectClear()}),l._uU(1,"close"),l.qZA()}}const q=["*"];let M=(()=>{class c{constructor(a,d,u){this.coreEnumService=a,this.cdr=d,this.categoryService=u,this.dataModelResult=new m.y$4,this.dataModelSelect=new m.OoK,this.loading=new p.O,this.formControl=new T.NI,this.optionDisabled=!1,this.optionSelectFirstItem=!1,this.optionPlaceholder="",this.optionChange=new l.vpe,this.optionReload=()=>this.onActionReload(),this.loading.cdr=this.cdr}set optionSelectForce(a){this.onActionSelectForce(a)}ngOnInit(){this.loadOptions()}loadOptions(){this.filteredOptions=this.formControl.valueChanges.pipe((0,e.O)(""),(0,F.b)(1e3),(0,O.x)(),(0,I.w)(a=>"string"==typeof a||"number"==typeof a?this.DataGetAll(a||""):[]))}displayFn(a){return a?a.Title:void 0}displayOption(a){return a?a.Title:void 0}DataGetAll(a){var d=this;return(0,Z.Z)(function*(){const u=new m.Hay;u.RowPerPage=20,u.AccessLoad=!0;let f=new m.AO3;f.PropertyName="Title",f.Value=a,f.SearchType=m.b3P.Contains,f.ClauseType=m.KT6.Or,u.Filters.push(f),a&&"number"==typeof+a&&+a>0&&(f=new m.AO3,f.PropertyName="Id",f.Value=a,f.SearchType=m.b3P.Equal,f.ClauseType=m.KT6.Or,u.Filters.push(f));const S=d.constructor.name+"main";return d.loading.Start(S),yield d.categoryService.ServiceGetAll(u).pipe((0,D.U)(x=>(d.dataModelResult=x,d.optionSelectFirstItem&&(!d.dataModelSelect||!d.dataModelSelect.Id||d.dataModelSelect.Id<=0)&&d.dataModelResult.ListItems.length>0&&(d.optionSelectFirstItem=!1,setTimeout(()=>{d.formControl.setValue(d.dataModelResult.ListItems[0])},1e3),d.onActionSelect(d.dataModelResult.ListItems[0])),d.loading.Stop(S),x.ListItems))).toPromise()})()}onActionSelect(a){this.optionDisabled||(this.dataModelSelect=a,this.optionChange.emit(this.dataModelSelect))}onActionSelectClear(){this.optionDisabled||(this.formControl.setValue(null),this.optionChange.emit(null))}push(a){return this.filteredOptions.pipe((0,D.U)(d=>(d.find(u=>u.Id===a.Id)||d.push(a),d)))}onActionSelectForce(a){if("number"==typeof a&&a>0){if(this.dataModelSelect&&this.dataModelSelect.Id===a)return;if(this.dataModelResult&&this.dataModelResult.ListItems&&this.dataModelResult.ListItems.find(d=>d.Id===a)){const d=this.dataModelResult.ListItems.find(u=>u.Id===a);return this.dataModelSelect=d,void this.formControl.setValue(d)}this.categoryService.ServiceGetOneById(a).subscribe(d=>{d.IsSuccess&&(this.filteredOptions=this.push(d.Item),this.dataModelSelect=d.Item,this.formControl.setValue(d.Item),this.optionChange.emit(d.Item))})}else{if(typeof a==typeof m.OoK)return this.filteredOptions=this.push(a),this.dataModelSelect=a,void this.formControl.setValue(a);this.formControl.setValue(null)}}onActionReload(){this.dataModelSelect=new m.OoK,this.DataGetAll(null)}}return c.\u0275fac=function(a){return new(a||c)(l.Y36(m.FLW),l.Y36(l.sBO),l.Y36(m.kf3))},c.\u0275cmp=l.Xpm({type:c,selectors:[["app-core-userclaimtype-selector"]],inputs:{optionDisabled:"optionDisabled",optionSelectFirstItem:"optionSelectFirstItem",optionPlaceholder:"optionPlaceholder",optionReload:"optionReload",optionSelectForce:"optionSelectForce"},outputs:{optionChange:"optionChange"},ngContentSelectors:q,decls:11,vars:10,consts:[[1,"ntk-full-width"],["matPrefix",""],["style","vertical-align:middle;","aria-hidden","","height","25","width","25",3,"src",4,"ngIf"],["type","text","aria-label","Assignee","matInput","",3,"placeholder","formControl","matAutocomplete"],[3,"displayWith","optionSelected"],["auto17","matAutocomplete"],[3,"value","disabled",4,"ngFor","ngForOf"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["aria-hidden","","height","25","width","25",2,"vertical-align","middle",3,"src"],[3,"value","disabled"],["matSuffix","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(a,d){if(1&a&&(l.F$t(),l.TgZ(0,"mat-form-field",0),l.TgZ(1,"span",1),l.YNc(2,y,2,3,"img",2),l._uU(3," \xa0"),l.qZA(),l._UZ(4,"input",3),l.TgZ(5,"mat-autocomplete",4,5),l.NdJ("optionSelected",function(f){return d.onActionSelect(f.option.value)}),l.YNc(7,J,4,4,"mat-option",6),l.ALo(8,"async"),l.qZA(),l.YNc(9,b,2,0,"mat-icon",7),l.Hsn(10),l.qZA()),2&a){const u=l.MAs(6);l.xp6(2),l.Q6J("ngIf",d.dataModelSelect&&d.dataModelSelect.LinkMainImageIdSrc),l.xp6(2),l.s9C("placeholder",d.optionPlaceholder),l.Q6J("formControl",d.formControl)("matAutocomplete",u),l.uIk("disabled",!!d.optionDisabled||null),l.xp6(1),l.Q6J("displayWith",d.displayFn),l.xp6(2),l.Q6J("ngForOf",l.lcZ(8,8,d.filteredOptions)),l.xp6(2),l.Q6J("ngIf",d.dataModelSelect.Id)}},directives:[E.KE,E.qo,h.O5,A.Nt,T.Fj,g.ZL,T.JJ,T.oH,g.XC,h.sg,k.ey,P.Hw,E.R9],pipes:[h.Ov,L.v],styles:[""]}),c})()}}]);