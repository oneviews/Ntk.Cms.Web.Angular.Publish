"use strict";(self.webpackChunkntk_cms_web=self.webpackChunkntk_cms_web||[]).push([[537],{8170:(h,c,s)=>{s.d(c,{J:()=>O});var o=s(9724),r=s(1659),f=s(3151),l=s(1048);function a(t,n){if(1&t&&o._UZ(0,"input",2),2&t){const e=o.oxw();o.Q6J("id",e.field.name)("name",e.field.name)("formControl",e.optionFormControl),o.uIk("type",e.field.type)}}function d(t,n){if(1&t&&o._UZ(0,"textarea",3),2&t){const e=o.oxw();o.ekj("is-invalid",e.isDirty&&!e.isValid),o.Q6J("formControl",e.optionFormControl)("id",e.field.name)("placeholder",e.field.placeholder)}}let m=(()=>{class t{constructor(){this.field={}}get isValid(){return this.optionFormControl.valid}get isDirty(){return this.optionFormControl.dirty}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Xpm({type:t,selectors:[["textbox"]],inputs:{field:"field",optionFormControl:"optionFormControl"},decls:2,vars:2,consts:[["class","form-control",3,"id","name","formControl",4,"ngIf"],["rows","9","class","form-control",3,"is-invalid","formControl","id","placeholder",4,"ngIf"],[1,"form-control",3,"id","name","formControl"],["rows","9",1,"form-control",3,"formControl","id","placeholder"]],template:function(e,i){1&e&&(o.YNc(0,a,1,4,"input",0),o.YNc(1,d,1,5,"textarea",1)),2&e&&(o.Q6J("ngIf",!i.field.multiline),o.xp6(1),o.Q6J("ngIf",i.field.multiline))},directives:[l.O5,r.Fj,r.JJ,r.oH],encapsulation:2}),t})();function _(t,n){if(1&t&&(o.TgZ(0,"option",2),o._uU(1),o.qZA()),2&t){const e=n.$implicit;o.Q6J("value",e.key),o.xp6(1),o.Oqu(e.label)}}let g=(()=>{class t{constructor(){this.field={}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Xpm({type:t,selectors:[["dropdown"]],inputs:{field:"field",optionFormControl:"optionFormControl"},decls:2,vars:3,consts:[[1,"form-control",3,"id","formControl"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,i){1&e&&(o.TgZ(0,"select",0),o.YNc(1,_,2,2,"option",1),o.qZA()),2&e&&(o.Q6J("id",i.field.name)("formControl",i.optionFormControl),o.xp6(1),o.Q6J("ngForOf",i.field.options))},directives:[r.EJ,r.JJ,r.oH,l.sg,r.YN,r.Kr],encapsulation:2}),t})();function C(t,n){if(1&t&&(o.TgZ(0,"div",2)(1,"label",3),o._UZ(2,"input",4),o._uU(3),o.qZA()()),2&t){const e=n.$implicit;o.xp6(2),o.Q6J("formControlName",e.key),o.xp6(1),o.hij(" ",e.label,"")}}let v=(()=>{class t{constructor(){this.field={}}get isValid(){return this.optionFormGroup.controls[this.field.name].valid}get isDirty(){return this.optionFormGroup.controls[this.field.name].dirty}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Xpm({type:t,selectors:[["checkbox"]],inputs:{field:"field",optionFormGroup:"optionFormGroup"},decls:2,vars:2,consts:[[3,"formGroup"],["class","form-check form-check",4,"ngFor","ngForOf"],[1,"form-check","form-check"],[1,"form-check-label"],["type","checkbox","id","inlineCheckbox1","value","option1",1,"form-check-input",3,"formControlName"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0),o.YNc(1,C,4,2,"div",1),o.qZA()),2&e&&(o.Q6J("formGroup",i.optionFormGroup),o.xp6(1),o.Q6J("ngForOf",i.field.options))},directives:[r.JL,r.sg,l.sg,r.Wl,r.JJ,r.u],encapsulation:2}),t})();function F(t,n){if(1&t&&(o.TgZ(0,"div",1),o._UZ(1,"input",2),o.TgZ(2,"label",3),o._uU(3),o.qZA()()),2&t){const e=n.$implicit,i=o.oxw();o.xp6(1),o.Q6J("formControl",i.optionFormControl)("value",e.key),o.xp6(2),o.hij(" ",e.label," ")}}let x=(()=>{class t{constructor(){this.field={}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Xpm({type:t,selectors:[["radio"]],inputs:{field:"field",optionFormControl:"optionFormControl"},decls:1,vars:1,consts:[["class","form-check",4,"ngFor","ngForOf"],[1,"form-check"],["type","radio",1,"form-check-input",3,"formControl","value"],[1,"form-check-label"]],template:function(e,i){1&e&&o.YNc(0,F,4,3,"div",0),2&e&&o.Q6J("ngForOf",i.field.options)},directives:[l.sg,r._,r.Fj,r.JJ,r.oH],encapsulation:2}),t})();function T(t,n){if(1&t){const e=o.EpF();o.TgZ(0,"div",3),o.NdJ("hovered",function(p){return o.CHM(e),o.oxw().toggleHover(p)})("dropped",function(p){return o.CHM(e),o.oxw().field.onUpload(p)}),o.TgZ(1,"p",4),o._uU(2," Drag a file here or "),o.TgZ(3,"label",5)(4,"input",6),o.NdJ("change",function(p){return o.CHM(e),o.oxw().field.onUpload(p.target.files)}),o.qZA(),o._uU(5," browse "),o.qZA(),o._uU(6," to upload. "),o.qZA()()}if(2&t){const e=o.oxw();o.ekj("hovering",e.isHovering)}}function w(t,n){if(1&t&&(o.TgZ(0,"div")(1,"div",7),o._UZ(2,"img",8),o.qZA()()),2&t){const e=o.oxw();o.xp6(2),o.Q6J("src",e.field.value,o.LSH)}}let y=(()=>{class t{constructor(){this.field={},this.isHovering=!1}get isValid(){return this.optionFormControl.controls[this.field.name].valid}get isDirty(){return this.optionFormControl.controls[this.field.name].dirty}ngOnChange(){console.log(this.field.value)}toggleHover(e){this.isHovering=!0}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Xpm({type:t,selectors:[["file"]],inputs:{field:"field",optionFormControl:"optionFormControl"},decls:3,vars:3,consts:[[3,"formGroup"],["class","drop-container dropzone","dropZone","",3,"hovering","hovered","dropped",4,"ngIf"],[4,"ngIf"],["dropZone","",1,"drop-container","dropzone",3,"hovered","dropped"],[1,"m-0"],[1,"upload-button"],["type","file","multiple","",3,"change"],[1,"card"],[1,"card-img-top",3,"src"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0),o.YNc(1,T,7,2,"div",1),o.YNc(2,w,3,1,"div",2),o.qZA()),2&e&&(o.Q6J("formGroup",i.optionFormControl),o.xp6(1),o.Q6J("ngIf",!i.field.value),o.xp6(1),o.Q6J("ngIf",i.field.value))},directives:[r.JL,r.sg,l.O5],styles:[".drop-container[_ngcontent-%COMP%]{background:#fff;border-radius:6px;height:150px;width:100%;box-shadow:1px 2px 20px #0a0a0a1a;display:flex;align-items:center;justify-content:center;border:2px dashed #c0c4c7}p[_ngcontent-%COMP%]{font-size:16px;font-weight:400;color:#c0c4c7}.upload-button[_ngcontent-%COMP%]{display:inline-block;border:none;outline:none;cursor:pointer;color:#5754a3}.upload-button[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.dropzone[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:column;border-radius:5px;background:white;margin:10px 0}.dropzone.hovering[_ngcontent-%COMP%]{border:2px solid #f16624;color:#dadada!important}progress[_ngcontent-%COMP%]::-webkit-progress-value{-webkit-transition:width .1s ease;transition:width .1s ease}"]}),t})();function b(t,n){1&t&&(o.TgZ(0,"strong",8),o._uU(1,"*"),o.qZA())}function J(t,n){if(1&t&&o._UZ(0,"textbox",9),2&t){const e=o.oxw();o.Q6J("field",e.field)("optionFormControl",e.convertToFormControl(e.formGroup.get(e.field.name)))}}function N(t,n){if(1&t&&o._UZ(0,"textbox",9),2&t){const e=o.oxw();o.Q6J("field",e.field)("optionFormControl",e.convertToFormControl(e.formGroup.get(e.field.name)))}}function I(t,n){if(1&t&&o._UZ(0,"dropdown",9),2&t){const e=o.oxw();o.Q6J("field",e.field)("optionFormControl",e.convertToFormControl(e.formGroup.get(e.field.name)))}}function Z(t,n){if(1&t&&o._UZ(0,"checkbox",10),2&t){const e=o.oxw();o.Q6J("field",e.field)("optionFormGroup",e.convertToFormGroup(e.formGroup.get(e.field.name)))}}function k(t,n){if(1&t&&o._UZ(0,"radio",9),2&t){const e=o.oxw();o.Q6J("field",e.field)("optionFormControl",e.convertToFormControl(e.formGroup.get(e.field.name)))}}function G(t,n){if(1&t&&o._UZ(0,"file",11),2&t){const e=o.oxw();o.Q6J("field",e.field)("formControl",e.convertToFormControl(e.formGroup.get(e.field.name)))}}function B(t,n){if(1&t&&(o.TgZ(0,"div",12),o._uU(1),o.qZA()),2&t){const e=o.oxw();o.xp6(1),o.hij("",e.field.label," is required")}}let V=(()=>{class t{constructor(){}get isValid(){return this.formGroup.controls[this.field.name].valid}get isDirty(){return this.formGroup.controls[this.field.name].dirty}ngOnInit(){}convertToFormControl(e){return e}convertToFormGroup(e){return e}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Xpm({type:t,selectors:[["field-builder"]],inputs:{field:"field",formGroup:"formGroup"},decls:12,vars:12,consts:[[1,"form-group","row",3,"formGroup"],[1,"col-md-3","form-control-label"],["class","text-danger",4,"ngIf"],[1,"col-md-9",3,"ngSwitch"],[3,"field","optionFormControl",4,"ngSwitchCase"],[3,"field","optionFormGroup",4,"ngSwitchCase"],[3,"field","formControl",4,"ngSwitchCase"],["class","alert alert-danger my-1 p-2 fadeInDown animated",4,"ngIf"],[1,"text-danger"],[3,"field","optionFormControl"],[3,"field","optionFormGroup"],[3,"field","formControl"],[1,"alert","alert-danger","my-1","p-2","fadeInDown","animated"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0)(1,"label",1),o._uU(2),o.YNc(3,b,2,0,"strong",2),o.qZA(),o.TgZ(4,"div",3),o.YNc(5,J,1,2,"textbox",4),o.YNc(6,N,1,2,"textbox",4),o.YNc(7,I,1,2,"dropdown",4),o.YNc(8,Z,1,2,"checkbox",5),o.YNc(9,k,1,2,"radio",4),o.YNc(10,G,1,2,"file",6),o.YNc(11,B,2,1,"div",7),o.qZA()()),2&e&&(o.Q6J("formGroup",i.formGroup),o.xp6(1),o.uIk("for",i.field.label),o.xp6(1),o.hij(" ",i.field.label," "),o.xp6(1),o.Q6J("ngIf",i.field.required&&i.formGroup.get(i.field.name).invalid),o.xp6(1),o.Q6J("ngSwitch",i.field.type),o.xp6(1),o.Q6J("ngSwitchCase","text"),o.xp6(1),o.Q6J("ngSwitchCase","date"),o.xp6(1),o.Q6J("ngSwitchCase","dropdown"),o.xp6(1),o.Q6J("ngSwitchCase","checkbox"),o.xp6(1),o.Q6J("ngSwitchCase","radio"),o.xp6(1),o.Q6J("ngSwitchCase","file"),o.xp6(1),o.Q6J("ngIf",!i.isValid&&i.isDirty))},directives:[r.JL,r.sg,l.O5,l.RF,l.n9,m,g,v,x,y,r.JJ,r.oH],encapsulation:2}),t})();function D(t,n){if(1&t&&(o.TgZ(0,"div"),o._UZ(1,"field-builder",1),o.qZA()),2&t){const e=n.$implicit,i=o.oxw();o.xp6(1),o.Q6J("field",e)("formGroup",i.formGroup)}}let O=(()=>{class t{constructor(){this.jsonValueChange=new o.vpe,this.privatePropertiesInfos=[],this.formValues={},this.fields=[],this.DEBOUNCE_TIME_FORM_INPUT=250}set jsonValue(e){e&&e.length>0&&(this.privateJsonValue=JSON.parse(e),this.actionSetValue())}set propertiesInfos(e){this.privatePropertiesInfos=e,this.actionFormMake(),this.actionSetValue()}ngOnInit(){}ngAfterViewInit(){this.unsubcribe=this.formGroup.valueChanges.pipe((0,f.b)(this.DEBOUNCE_TIME_FORM_INPUT)).subscribe(e=>{this.formValues||(this.formValues={}),this.privatePropertiesInfos&&this.privatePropertiesInfos.length>0&&this.privatePropertiesInfos.forEach(i=>{(e[i.fieldName]||""===e[i.fieldName])&&(this.formValues[i.fieldName]=e[i.fieldName]),this.jsonValueChange.emit(JSON.stringify(this.formValues))})})}actionFormMake(){this.privatePropertiesInfos&&(this.fields=[],this.privatePropertiesInfos.forEach(e=>{let i="";this.formValues&&this.formValues[e.fieldName]&&(i=this.formValues[e.fieldName]),this.fields.push({type:"text",name:e.fieldName,label:e.fieldTitle,value:i,required:!1})})),this.fields.forEach(e=>{"checkbox"===e.type?(this.formGroup.addControl(e.name,new r.cw({})),e.options.forEach(i=>{this.formGroup.get(e.name).addControl(i.key,new r.NI(!1))})):this.formGroup.addControl(e.name,new r.NI(e.value||"",e.required?r.kI.required:null))})}actionSetValue(){this.privateJsonValue&&this.privatePropertiesInfos&&this.privatePropertiesInfos.length>0&&this.privatePropertiesInfos.forEach(e=>{if(this.formValues||(this.formValues={}),this.formValues[e.fieldName]=this.privateJsonValue[e.fieldName]?this.privateJsonValue[e.fieldName]:"",this.formValues[e.fieldName]&&this.fields.findIndex(i=>i.name===e.fieldName)>=0){const i=this.formValues[e.fieldName];this.fields.find(p=>p.name===e.fieldName).value=i,this.formGroup.get(e.fieldName).setValue(i,{emitEvent:!1})}})}ngDistroy(){this.unsubcribe()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Xpm({type:t,selectors:[["dynamic-form-builder-cms"]],inputs:{jsonValue:"jsonValue",propertiesInfos:"propertiesInfos",formGroup:"formGroup"},outputs:{jsonValueChange:"jsonValueChange"},decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[3,"field","formGroup"]],template:function(e,i){1&e&&o.YNc(0,D,2,2,"div",0),2&e&&o.Q6J("ngForOf",i.fields)},directives:[l.sg,V,r.JL,r.sg],encapsulation:2}),t})()},8365:(h,c,s)=>{s.d(c,{d:()=>l});var o=s(1048),r=s(1659),f=s(9724);let l=(()=>{class a{}return a.\u0275fac=function(m){return new(m||a)},a.\u0275mod=f.oAB({type:a}),a.\u0275inj=f.cJS({providers:[],imports:[[o.ez,r.UX]]}),a})()}}]);